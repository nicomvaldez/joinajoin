var cfg = {"cfg":{"lang":{"Are you sure you want to ":"Are you sure you want to ","Please select atleast one record!":"Please select atleast one record!","Are you sure you want to do this action?":"Are you sure you want to do this action?","Please enter valid original price.":"Please enter valid original price.","Discount percentage should be less than 100.":"Discount percentage should be less than 100.","Discount amount should be less than original price.":"Discount amount should be less than original price.","Are you sure do you want to change the status? Once the status is changed you cannot undo the status.":"Are you sure do you want to change the status? Once the status is changed you cannot undo the status.","By clicking this button you are confirming your payment via wallet. Once you confirmed amount will be deducted from your wallet and you cannot undo this process. Are you sure you want to confirm this action?":"By clicking this button you are confirming your payment via wallet. Once you confirmed amount will be deducted from your wallet and you cannot undo this process. Are you sure you want to confirm this action?","You don't have sufficent amount in wallet to continue this process. So please select any other payment gateway.":"You don't have sufficent amount in wallet to continue this process. So please select any other payment gateway.","Google map could not find your location, please enter known location to google":"Google map could not find your location, please enter known location to google","Invalid extension, Only csv, txt are allowed":"Invalid extension, Only csv, txt are allowed","No Flickr Photos Available":"No Flickr Photos Available","Current":"Current","No Date Set":"No Date Set","No Time Set":"No Time Set","Select check-in date in calendar":"Select check-in date in calendar","Select check-out date in calendar":"Select check-out date in calendar","I am done reordering":"I am done reordering","Reorder":"Reorder","You can check \"Availablity\" in property page":"You can check \"Availablity\" in property page","You can check \"Facilities\" in property page":"You can check \"Facilities\" in property page","You can check \"Pricing\" details in property page, also you can do price discussion.":"You can check \"Pricing\" details in property page, also you can do price discussion.","You can check \"Pricing\" details in property page, also price is fixed. Negotiation is not possible.":"You can check \"Pricing\" details in property page, also price is fixed. Negotiation is not possible.","Are you sure you want to":"Are you sure you want to","Are you sure you want to cancel this booking?":"Are you sure you want to cancel this booking?","Are you sure confirm this action?":"Are you sure confirm this action?","Are you sure you want to confirm this booking?":"Are you sure you want to confirm this booking?","Are you sure you want to reject this booking?":"Are you sure you want to reject this booking?"},"date_format":"M d, Y","timezone":-3,"path_relative":"\/","path_absolute":"http:\/\/localhost\/","result_geo_format":"##AREA##, ##CITY##, ##STATE##, ##COUNTRY##","is_enable_hashbang_url":false,"is_enable_html5_history_api":false,"json_data_url":"http:\/\/localhost\/properties\/cluster_data"}};
/* libs/jquery.js */
(function(window,undefined){var document=window.document,navigator=window.navigator,location=window.location;var jQuery=(function(){var jQuery=function(selector,context){return new jQuery.fn.init(selector,context,rootjQuery);},_jQuery=window.jQuery,_$=window.$,rootjQuery,quickExpr=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,rnotwhite=/\S/,trimLeft=/^\s+/,trimRight=/\s+$/,rsingleTag=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,rvalidchars=/^[\],:{}\s]*$/,rvalidescape=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,rvalidtokens=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,rvalidbraces=/(?:^|:|,)(?:\s*\[)+/g,rwebkit=/(webkit)[ \/]([\w.]+)/,ropera=/(opera)(?:.*version)?[ \/]([\w.]+)/,rmsie=/(msie) ([\w.]+)/,rmozilla=/(mozilla)(?:.*? rv:([\w.]+))?/,rdashAlpha=/-([a-z]|[0-9])/ig,rmsPrefix=/^-ms-/,fcamelCase=function(all,letter){return(letter+"").toUpperCase();},userAgent=navigator.userAgent,browserMatch,readyList,DOMContentLoaded,toString=Object.prototype.toString,hasOwn=Object.prototype.hasOwnProperty,push=Array.prototype.push,slice=Array.prototype.slice,trim=String.prototype.trim,indexOf=Array.prototype.indexOf,class2type={};jQuery.fn=jQuery.prototype={constructor:jQuery,init:function(selector,context,rootjQuery){var match,elem,ret,doc;if(!selector){return this;}
if(selector.nodeType){this.context=this[0]=selector;this.length=1;return this;}
if(selector==="body"&&!context&&document.body){this.context=document;this[0]=document.body;this.selector=selector;this.length=1;return this;}
if(typeof selector==="string"){if(selector.charAt(0)==="<"&&selector.charAt(selector.length-1)===">"&&selector.length>=3){match=[null,selector,null];}else{match=quickExpr.exec(selector);}
if(match&&(match[1]||!context)){if(match[1]){context=context instanceof jQuery?context[0]:context;doc=(context?context.ownerDocument||context:document);ret=rsingleTag.exec(selector);if(ret){if(jQuery.isPlainObject(context)){selector=[document.createElement(ret[1])];jQuery.fn.attr.call(selector,context,true);}else{selector=[doc.createElement(ret[1])];}}else{ret=jQuery.buildFragment([match[1]],[doc]);selector=(ret.cacheable?jQuery.clone(ret.fragment):ret.fragment).childNodes;}
return jQuery.merge(this,selector);}else{elem=document.getElementById(match[2]);if(elem&&elem.parentNode){if(elem.id!==match[2]){return rootjQuery.find(selector);}
this.length=1;this[0]=elem;}
this.context=document;this.selector=selector;return this;}}else if(!context||context.jquery){return(context||rootjQuery).find(selector);}else{return this.constructor(context).find(selector);}}else if(jQuery.isFunction(selector)){return rootjQuery.ready(selector);}
if(selector.selector!==undefined){this.selector=selector.selector;this.context=selector.context;}
return jQuery.makeArray(selector,this);},selector:"",jquery:"1.7.2",length:0,size:function(){return this.length;},toArray:function(){return slice.call(this,0);},get:function(num){return num==null?this.toArray():(num<0?this[this.length+num]:this[num]);},pushStack:function(elems,name,selector){var ret=this.constructor();if(jQuery.isArray(elems)){push.apply(ret,elems);}else{jQuery.merge(ret,elems);}
ret.prevObject=this;ret.context=this.context;if(name==="find"){ret.selector=this.selector+(this.selector?" ":"")+selector;}else if(name){ret.selector=this.selector+"."+name+"("+selector+")";}
return ret;},each:function(callback,args){return jQuery.each(this,callback,args);},ready:function(fn){jQuery.bindReady();readyList.add(fn);return this;},eq:function(i){i=+i;return i===-1?this.slice(i):this.slice(i,i+1);},first:function(){return this.eq(0);},last:function(){return this.eq(-1);},slice:function(){return this.pushStack(slice.apply(this,arguments),"slice",slice.call(arguments).join(","));},map:function(callback){return this.pushStack(jQuery.map(this,function(elem,i){return callback.call(elem,i,elem);}));},end:function(){return this.prevObject||this.constructor(null);},push:push,sort:[].sort,splice:[].splice};jQuery.fn.init.prototype=jQuery.fn;jQuery.extend=jQuery.fn.extend=function(){var options,name,src,copy,copyIsArray,clone,target=arguments[0]||{},i=1,length=arguments.length,deep=false;if(typeof target==="boolean"){deep=target;target=arguments[1]||{};i=2;}
if(typeof target!=="object"&&!jQuery.isFunction(target)){target={};}
if(length===i){target=this;--i;}
for(;i<length;i++){if((options=arguments[i])!=null){for(name in options){src=target[name];copy=options[name];if(target===copy){continue;}
if(deep&&copy&&(jQuery.isPlainObject(copy)||(copyIsArray=jQuery.isArray(copy)))){if(copyIsArray){copyIsArray=false;clone=src&&jQuery.isArray(src)?src:[];}else{clone=src&&jQuery.isPlainObject(src)?src:{};}
target[name]=jQuery.extend(deep,clone,copy);}else if(copy!==undefined){target[name]=copy;}}}}
return target;};jQuery.extend({noConflict:function(deep){if(window.$===jQuery){window.$=_$;}
if(deep&&window.jQuery===jQuery){window.jQuery=_jQuery;}
return jQuery;},isReady:false,readyWait:1,holdReady:function(hold){if(hold){jQuery.readyWait++;}else{jQuery.ready(true);}},ready:function(wait){if((wait===true&&!--jQuery.readyWait)||(wait!==true&&!jQuery.isReady)){if(!document.body){return setTimeout(jQuery.ready,1);}
jQuery.isReady=true;if(wait!==true&&--jQuery.readyWait>0){return;}
readyList.fireWith(document,[jQuery]);if(jQuery.fn.trigger){jQuery(document).trigger("ready").off("ready");}}},bindReady:function(){if(readyList){return;}
readyList=jQuery.Callbacks("once memory");if(document.readyState==="complete"){return setTimeout(jQuery.ready,1);}
if(document.addEventListener){document.addEventListener("DOMContentLoaded",DOMContentLoaded,false);window.addEventListener("load",jQuery.ready,false);}else if(document.attachEvent){document.attachEvent("onreadystatechange",DOMContentLoaded);window.attachEvent("onload",jQuery.ready);var toplevel=false;try{toplevel=window.frameElement==null;}catch(e){}
if(document.documentElement.doScroll&&toplevel){doScrollCheck();}}},isFunction:function(obj){return jQuery.type(obj)==="function";},isArray:Array.isArray||function(obj){return jQuery.type(obj)==="array";},isWindow:function(obj){return obj!=null&&obj==obj.window;},isNumeric:function(obj){return!isNaN(parseFloat(obj))&&isFinite(obj);},type:function(obj){return obj==null?String(obj):class2type[toString.call(obj)]||"object";},isPlainObject:function(obj){if(!obj||jQuery.type(obj)!=="object"||obj.nodeType||jQuery.isWindow(obj)){return false;}
try{if(obj.constructor&&!hasOwn.call(obj,"constructor")&&!hasOwn.call(obj.constructor.prototype,"isPrototypeOf")){return false;}}catch(e){return false;}
var key;for(key in obj){}
return key===undefined||hasOwn.call(obj,key);},isEmptyObject:function(obj){for(var name in obj){return false;}
return true;},error:function(msg){throw new Error(msg);},parseJSON:function(data){if(typeof data!=="string"||!data){return null;}
data=jQuery.trim(data);if(window.JSON&&window.JSON.parse){return window.JSON.parse(data);}
if(rvalidchars.test(data.replace(rvalidescape,"@").replace(rvalidtokens,"]").replace(rvalidbraces,""))){return(new Function("return "+data))();}
jQuery.error("Invalid JSON: "+data);},parseXML:function(data){if(typeof data!=="string"||!data){return null;}
var xml,tmp;try{if(window.DOMParser){tmp=new DOMParser();xml=tmp.parseFromString(data,"text/xml");}else{xml=new ActiveXObject("Microsoft.XMLDOM");xml.async="false";xml.loadXML(data);}}catch(e){xml=undefined;}
if(!xml||!xml.documentElement||xml.getElementsByTagName("parsererror").length){jQuery.error("Invalid XML: "+data);}
return xml;},noop:function(){},globalEval:function(data){if(data&&rnotwhite.test(data)){(window.execScript||function(data){window["eval"].call(window,data);})(data);}},camelCase:function(string){return string.replace(rmsPrefix,"ms-").replace(rdashAlpha,fcamelCase);},nodeName:function(elem,name){return elem.nodeName&&elem.nodeName.toUpperCase()===name.toUpperCase();},each:function(object,callback,args){var name,i=0,length=object.length,isObj=length===undefined||jQuery.isFunction(object);if(args){if(isObj){for(name in object){if(callback.apply(object[name],args)===false){break;}}}else{for(;i<length;){if(callback.apply(object[i++],args)===false){break;}}}}else{if(isObj){for(name in object){if(callback.call(object[name],name,object[name])===false){break;}}}else{for(;i<length;){if(callback.call(object[i],i,object[i++])===false){break;}}}}
return object;},trim:trim?function(text){return text==null?"":trim.call(text);}:function(text){return text==null?"":text.toString().replace(trimLeft,"").replace(trimRight,"");},makeArray:function(array,results){var ret=results||[];if(array!=null){var type=jQuery.type(array);if(array.length==null||type==="string"||type==="function"||type==="regexp"||jQuery.isWindow(array)){push.call(ret,array);}else{jQuery.merge(ret,array);}}
return ret;},inArray:function(elem,array,i){var len;if(array){if(indexOf){return indexOf.call(array,elem,i);}
len=array.length;i=i?i<0?Math.max(0,len+i):i:0;for(;i<len;i++){if(i in array&&array[i]===elem){return i;}}}
return-1;},merge:function(first,second){var i=first.length,j=0;if(typeof second.length==="number"){for(var l=second.length;j<l;j++){first[i++]=second[j];}}else{while(second[j]!==undefined){first[i++]=second[j++];}}
first.length=i;return first;},grep:function(elems,callback,inv){var ret=[],retVal;inv=!!inv;for(var i=0,length=elems.length;i<length;i++){retVal=!!callback(elems[i],i);if(inv!==retVal){ret.push(elems[i]);}}
return ret;},map:function(elems,callback,arg){var value,key,ret=[],i=0,length=elems.length,isArray=elems instanceof jQuery||length!==undefined&&typeof length==="number"&&((length>0&&elems[0]&&elems[length-1])||length===0||jQuery.isArray(elems));if(isArray){for(;i<length;i++){value=callback(elems[i],i,arg);if(value!=null){ret[ret.length]=value;}}}else{for(key in elems){value=callback(elems[key],key,arg);if(value!=null){ret[ret.length]=value;}}}
return ret.concat.apply([],ret);},guid:1,proxy:function(fn,context){if(typeof context==="string"){var tmp=fn[context];context=fn;fn=tmp;}
if(!jQuery.isFunction(fn)){return undefined;}
var args=slice.call(arguments,2),proxy=function(){return fn.apply(context,args.concat(slice.call(arguments)));};proxy.guid=fn.guid=fn.guid||proxy.guid||jQuery.guid++;return proxy;},access:function(elems,fn,key,value,chainable,emptyGet,pass){var exec,bulk=key==null,i=0,length=elems.length;if(key&&typeof key==="object"){for(i in key){jQuery.access(elems,fn,i,key[i],1,emptyGet,value);}
chainable=1;}else if(value!==undefined){exec=pass===undefined&&jQuery.isFunction(value);if(bulk){if(exec){exec=fn;fn=function(elem,key,value){return exec.call(jQuery(elem),value);};}else{fn.call(elems,value);fn=null;}}
if(fn){for(;i<length;i++){fn(elems[i],key,exec?value.call(elems[i],i,fn(elems[i],key)):value,pass);}}
chainable=1;}
return chainable?elems:bulk?fn.call(elems):length?fn(elems[0],key):emptyGet;},now:function(){return(new Date()).getTime();},uaMatch:function(ua){ua=ua.toLowerCase();var match=rwebkit.exec(ua)||ropera.exec(ua)||rmsie.exec(ua)||ua.indexOf("compatible")<0&&rmozilla.exec(ua)||[];return{browser:match[1]||"",version:match[2]||"0"};},sub:function(){function jQuerySub(selector,context){return new jQuerySub.fn.init(selector,context);}
jQuery.extend(true,jQuerySub,this);jQuerySub.superclass=this;jQuerySub.fn=jQuerySub.prototype=this();jQuerySub.fn.constructor=jQuerySub;jQuerySub.sub=this.sub;jQuerySub.fn.init=function init(selector,context){if(context&&context instanceof jQuery&&!(context instanceof jQuerySub)){context=jQuerySub(context);}
return jQuery.fn.init.call(this,selector,context,rootjQuerySub);};jQuerySub.fn.init.prototype=jQuerySub.fn;var rootjQuerySub=jQuerySub(document);return jQuerySub;},browser:{}});jQuery.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(i,name){class2type["[object "+name+"]"]=name.toLowerCase();});browserMatch=jQuery.uaMatch(userAgent);if(browserMatch.browser){jQuery.browser[browserMatch.browser]=true;jQuery.browser.version=browserMatch.version;}
if(jQuery.browser.webkit){jQuery.browser.safari=true;}
if(rnotwhite.test("\xA0")){trimLeft=/^[\s\xA0]+/;trimRight=/[\s\xA0]+$/;}
rootjQuery=jQuery(document);if(document.addEventListener){DOMContentLoaded=function(){document.removeEventListener("DOMContentLoaded",DOMContentLoaded,false);jQuery.ready();};}else if(document.attachEvent){DOMContentLoaded=function(){if(document.readyState==="complete"){document.detachEvent("onreadystatechange",DOMContentLoaded);jQuery.ready();}};}
function doScrollCheck(){if(jQuery.isReady){return;}
try{document.documentElement.doScroll("left");}catch(e){setTimeout(doScrollCheck,1);return;}
jQuery.ready();}
return jQuery;})();var flagsCache={};function createFlags(flags){var object=flagsCache[flags]={},i,length;flags=flags.split(/\s+/);for(i=0,length=flags.length;i<length;i++){object[flags[i]]=true;}
return object;}
jQuery.Callbacks=function(flags){flags=flags?(flagsCache[flags]||createFlags(flags)):{};var
list=[],stack=[],memory,fired,firing,firingStart,firingLength,firingIndex,add=function(args){var i,length,elem,type,actual;for(i=0,length=args.length;i<length;i++){elem=args[i];type=jQuery.type(elem);if(type==="array"){add(elem);}else if(type==="function"){if(!flags.unique||!self.has(elem)){list.push(elem);}}}},fire=function(context,args){args=args||[];memory=!flags.memory||[context,args];fired=true;firing=true;firingIndex=firingStart||0;firingStart=0;firingLength=list.length;for(;list&&firingIndex<firingLength;firingIndex++){if(list[firingIndex].apply(context,args)===false&&flags.stopOnFalse){memory=true;break;}}
firing=false;if(list){if(!flags.once){if(stack&&stack.length){memory=stack.shift();self.fireWith(memory[0],memory[1]);}}else if(memory===true){self.disable();}else{list=[];}}},self={add:function(){if(list){var length=list.length;add(arguments);if(firing){firingLength=list.length;}else if(memory&&memory!==true){firingStart=length;fire(memory[0],memory[1]);}}
return this;},remove:function(){if(list){var args=arguments,argIndex=0,argLength=args.length;for(;argIndex<argLength;argIndex++){for(var i=0;i<list.length;i++){if(args[argIndex]===list[i]){if(firing){if(i<=firingLength){firingLength--;if(i<=firingIndex){firingIndex--;}}}
list.splice(i--,1);if(flags.unique){break;}}}}}
return this;},has:function(fn){if(list){var i=0,length=list.length;for(;i<length;i++){if(fn===list[i]){return true;}}}
return false;},empty:function(){list=[];return this;},disable:function(){list=stack=memory=undefined;return this;},disabled:function(){return!list;},lock:function(){stack=undefined;if(!memory||memory===true){self.disable();}
return this;},locked:function(){return!stack;},fireWith:function(context,args){if(stack){if(firing){if(!flags.once){stack.push([context,args]);}}else if(!(flags.once&&memory)){fire(context,args);}}
return this;},fire:function(){self.fireWith(this,arguments);return this;},fired:function(){return!!fired;}};return self;};var
sliceDeferred=[].slice;jQuery.extend({Deferred:function(func){var doneList=jQuery.Callbacks("once memory"),failList=jQuery.Callbacks("once memory"),progressList=jQuery.Callbacks("memory"),state="pending",lists={resolve:doneList,reject:failList,notify:progressList},promise={done:doneList.add,fail:failList.add,progress:progressList.add,state:function(){return state;},isResolved:doneList.fired,isRejected:failList.fired,then:function(doneCallbacks,failCallbacks,progressCallbacks){deferred.done(doneCallbacks).fail(failCallbacks).progress(progressCallbacks);return this;},always:function(){deferred.done.apply(deferred,arguments).fail.apply(deferred,arguments);return this;},pipe:function(fnDone,fnFail,fnProgress){return jQuery.Deferred(function(newDefer){jQuery.each({done:[fnDone,"resolve"],fail:[fnFail,"reject"],progress:[fnProgress,"notify"]},function(handler,data){var fn=data[0],action=data[1],returned;if(jQuery.isFunction(fn)){deferred[handler](function(){returned=fn.apply(this,arguments);if(returned&&jQuery.isFunction(returned.promise)){returned.promise().then(newDefer.resolve,newDefer.reject,newDefer.notify);}else{newDefer[action+"With"](this===deferred?newDefer:this,[returned]);}});}else{deferred[handler](newDefer[action]);}});}).promise();},promise:function(obj){if(obj==null){obj=promise;}else{for(var key in promise){obj[key]=promise[key];}}
return obj;}},deferred=promise.promise({}),key;for(key in lists){deferred[key]=lists[key].fire;deferred[key+"With"]=lists[key].fireWith;}
deferred.done(function(){state="resolved";},failList.disable,progressList.lock).fail(function(){state="rejected";},doneList.disable,progressList.lock);if(func){func.call(deferred,deferred);}
return deferred;},when:function(firstParam){var args=sliceDeferred.call(arguments,0),i=0,length=args.length,pValues=new Array(length),count=length,pCount=length,deferred=length<=1&&firstParam&&jQuery.isFunction(firstParam.promise)?firstParam:jQuery.Deferred(),promise=deferred.promise();function resolveFunc(i){return function(value){args[i]=arguments.length>1?sliceDeferred.call(arguments,0):value;if(!(--count)){deferred.resolveWith(deferred,args);}};}
function progressFunc(i){return function(value){pValues[i]=arguments.length>1?sliceDeferred.call(arguments,0):value;deferred.notifyWith(promise,pValues);};}
if(length>1){for(;i<length;i++){if(args[i]&&args[i].promise&&jQuery.isFunction(args[i].promise)){args[i].promise().then(resolveFunc(i),deferred.reject,progressFunc(i));}else{--count;}}
if(!count){deferred.resolveWith(deferred,args);}}else if(deferred!==firstParam){deferred.resolveWith(deferred,length?[firstParam]:[]);}
return promise;}});jQuery.support=(function(){var support,all,a,select,opt,input,fragment,tds,events,eventName,i,isSupported,div=document.createElement("div"),documentElement=document.documentElement;div.setAttribute("className","t");div.innerHTML="   <link/><table></table><a href='/a' style='top:1px;float:left;opacity:.55;'>a</a><input type='checkbox'/>";all=div.getElementsByTagName("*");a=div.getElementsByTagName("a")[0];if(!all||!all.length||!a){return{};}
select=document.createElement("select");opt=select.appendChild(document.createElement("option"));input=div.getElementsByTagName("input")[0];support={leadingWhitespace:(div.firstChild.nodeType===3),tbody:!div.getElementsByTagName("tbody").length,htmlSerialize:!!div.getElementsByTagName("link").length,style:/top/.test(a.getAttribute("style")),hrefNormalized:(a.getAttribute("href")==="/a"),opacity:/^0.55/.test(a.style.opacity),cssFloat:!!a.style.cssFloat,checkOn:(input.value==="on"),optSelected:opt.selected,getSetAttribute:div.className!=="t",enctype:!!document.createElement("form").enctype,html5Clone:document.createElement("nav").cloneNode(true).outerHTML!=="<:nav></:nav>",submitBubbles:true,changeBubbles:true,focusinBubbles:false,deleteExpando:true,noCloneEvent:true,inlineBlockNeedsLayout:false,shrinkWrapBlocks:false,reliableMarginRight:true,pixelMargin:true};jQuery.boxModel=support.boxModel=(document.compatMode==="CSS1Compat");input.checked=true;support.noCloneChecked=input.cloneNode(true).checked;select.disabled=true;support.optDisabled=!opt.disabled;try{delete div.test;}catch(e){support.deleteExpando=false;}
if(!div.addEventListener&&div.attachEvent&&div.fireEvent){div.attachEvent("onclick",function(){support.noCloneEvent=false;});div.cloneNode(true).fireEvent("onclick");}
input=document.createElement("input");input.value="t";input.setAttribute("type","radio");support.radioValue=input.value==="t";input.setAttribute("checked","checked");input.setAttribute("name","t");div.appendChild(input);fragment=document.createDocumentFragment();fragment.appendChild(div.lastChild);support.checkClone=fragment.cloneNode(true).cloneNode(true).lastChild.checked;support.appendChecked=input.checked;fragment.removeChild(input);fragment.appendChild(div);if(div.attachEvent){for(i in{submit:1,change:1,focusin:1}){eventName="on"+i;isSupported=(eventName in div);if(!isSupported){div.setAttribute(eventName,"return;");isSupported=(typeof div[eventName]==="function");}
support[i+"Bubbles"]=isSupported;}}
fragment.removeChild(div);fragment=select=opt=div=input=null;jQuery(function(){var container,outer,inner,table,td,offsetSupport,marginDiv,conMarginTop,style,html,positionTopLeftWidthHeight,paddingMarginBorderVisibility,paddingMarginBorder,body=document.getElementsByTagName("body")[0];if(!body){return;}
conMarginTop=1;paddingMarginBorder="padding:0;margin:0;border:";positionTopLeftWidthHeight="position:absolute;top:0;left:0;width:1px;height:1px;";paddingMarginBorderVisibility=paddingMarginBorder+"0;visibility:hidden;";style="style='"+positionTopLeftWidthHeight+paddingMarginBorder+"5px solid #000;";html="<div "+style+"display:block;'><div style='"+paddingMarginBorder+"0;display:block;overflow:hidden;'></div></div>"+"<table "+style+"' cellpadding='0' cellspacing='0'>"+"<tr><td></td></tr></table>";container=document.createElement("div");container.style.cssText=paddingMarginBorderVisibility+"width:0;height:0;position:static;top:0;margin-top:"+conMarginTop+"px";body.insertBefore(container,body.firstChild);div=document.createElement("div");container.appendChild(div);div.innerHTML="<table><tr><td style='"+paddingMarginBorder+"0;display:none'></td><td>t</td></tr></table>";tds=div.getElementsByTagName("td");isSupported=(tds[0].offsetHeight===0);tds[0].style.display="";tds[1].style.display="none";support.reliableHiddenOffsets=isSupported&&(tds[0].offsetHeight===0);if(window.getComputedStyle){div.innerHTML="";marginDiv=document.createElement("div");marginDiv.style.width="0";marginDiv.style.marginRight="0";div.style.width="2px";div.appendChild(marginDiv);support.reliableMarginRight=(parseInt((window.getComputedStyle(marginDiv,null)||{marginRight:0}).marginRight,10)||0)===0;}
if(typeof div.style.zoom!=="undefined"){div.innerHTML="";div.style.width=div.style.padding="1px";div.style.border=0;div.style.overflow="hidden";div.style.display="inline";div.style.zoom=1;support.inlineBlockNeedsLayout=(div.offsetWidth===3);div.style.display="block";div.style.overflow="visible";div.innerHTML="<div style='width:5px;'></div>";support.shrinkWrapBlocks=(div.offsetWidth!==3);}
div.style.cssText=positionTopLeftWidthHeight+paddingMarginBorderVisibility;div.innerHTML=html;outer=div.firstChild;inner=outer.firstChild;td=outer.nextSibling.firstChild.firstChild;offsetSupport={doesNotAddBorder:(inner.offsetTop!==5),doesAddBorderForTableAndCells:(td.offsetTop===5)};inner.style.position="fixed";inner.style.top="20px";offsetSupport.fixedPosition=(inner.offsetTop===20||inner.offsetTop===15);inner.style.position=inner.style.top="";outer.style.overflow="hidden";outer.style.position="relative";offsetSupport.subtractsBorderForOverflowNotVisible=(inner.offsetTop===-5);offsetSupport.doesNotIncludeMarginInBodyOffset=(body.offsetTop!==conMarginTop);if(window.getComputedStyle){div.style.marginTop="1%";support.pixelMargin=(window.getComputedStyle(div,null)||{marginTop:0}).marginTop!=="1%";}
if(typeof container.style.zoom!=="undefined"){container.style.zoom=1;}
body.removeChild(container);marginDiv=div=container=null;jQuery.extend(support,offsetSupport);});return support;})();var rbrace=/^(?:\{.*\}|\[.*\])$/,rmultiDash=/([A-Z])/g;jQuery.extend({cache:{},uuid:0,expando:"jQuery"+(jQuery.fn.jquery+Math.random()).replace(/\D/g,""),noData:{"embed":true,"object":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000","applet":true},hasData:function(elem){elem=elem.nodeType?jQuery.cache[elem[jQuery.expando]]:elem[jQuery.expando];return!!elem&&!isEmptyDataObject(elem);},data:function(elem,name,data,pvt){if(!jQuery.acceptData(elem)){return;}
var privateCache,thisCache,ret,internalKey=jQuery.expando,getByName=typeof name==="string",isNode=elem.nodeType,cache=isNode?jQuery.cache:elem,id=isNode?elem[internalKey]:elem[internalKey]&&internalKey,isEvents=name==="events";if((!id||!cache[id]||(!isEvents&&!pvt&&!cache[id].data))&&getByName&&data===undefined){return;}
if(!id){if(isNode){elem[internalKey]=id=++jQuery.uuid;}else{id=internalKey;}}
if(!cache[id]){cache[id]={};if(!isNode){cache[id].toJSON=jQuery.noop;}}
if(typeof name==="object"||typeof name==="function"){if(pvt){cache[id]=jQuery.extend(cache[id],name);}else{cache[id].data=jQuery.extend(cache[id].data,name);}}
privateCache=thisCache=cache[id];if(!pvt){if(!thisCache.data){thisCache.data={};}
thisCache=thisCache.data;}
if(data!==undefined){thisCache[jQuery.camelCase(name)]=data;}
if(isEvents&&!thisCache[name]){return privateCache.events;}
if(getByName){ret=thisCache[name];if(ret==null){ret=thisCache[jQuery.camelCase(name)];}}else{ret=thisCache;}
return ret;},removeData:function(elem,name,pvt){if(!jQuery.acceptData(elem)){return;}
var thisCache,i,l,internalKey=jQuery.expando,isNode=elem.nodeType,cache=isNode?jQuery.cache:elem,id=isNode?elem[internalKey]:internalKey;if(!cache[id]){return;}
if(name){thisCache=pvt?cache[id]:cache[id].data;if(thisCache){if(!jQuery.isArray(name)){if(name in thisCache){name=[name];}else{name=jQuery.camelCase(name);if(name in thisCache){name=[name];}else{name=name.split(" ");}}}
for(i=0,l=name.length;i<l;i++){delete thisCache[name[i]];}
if(!(pvt?isEmptyDataObject:jQuery.isEmptyObject)(thisCache)){return;}}}
if(!pvt){delete cache[id].data;if(!isEmptyDataObject(cache[id])){return;}}
if(jQuery.support.deleteExpando||!cache.setInterval){delete cache[id];}else{cache[id]=null;}
if(isNode){if(jQuery.support.deleteExpando){delete elem[internalKey];}else if(elem.removeAttribute){elem.removeAttribute(internalKey);}else{elem[internalKey]=null;}}},_data:function(elem,name,data){return jQuery.data(elem,name,data,true);},acceptData:function(elem){if(elem.nodeName){var match=jQuery.noData[elem.nodeName.toLowerCase()];if(match){return!(match===true||elem.getAttribute("classid")!==match);}}
return true;}});jQuery.fn.extend({data:function(key,value){var parts,part,attr,name,l,elem=this[0],i=0,data=null;if(key===undefined){if(this.length){data=jQuery.data(elem);if(elem.nodeType===1&&!jQuery._data(elem,"parsedAttrs")){attr=elem.attributes;for(l=attr.length;i<l;i++){name=attr[i].name;if(name.indexOf("data-")===0){name=jQuery.camelCase(name.substring(5));dataAttr(elem,name,data[name]);}}
jQuery._data(elem,"parsedAttrs",true);}}
return data;}
if(typeof key==="object"){return this.each(function(){jQuery.data(this,key);});}
parts=key.split(".",2);parts[1]=parts[1]?"."+parts[1]:"";part=parts[1]+"!";return jQuery.access(this,function(value){if(value===undefined){data=this.triggerHandler("getData"+part,[parts[0]]);if(data===undefined&&elem){data=jQuery.data(elem,key);data=dataAttr(elem,key,data);}
return data===undefined&&parts[1]?this.data(parts[0]):data;}
parts[1]=value;this.each(function(){var self=jQuery(this);self.triggerHandler("setData"+part,parts);jQuery.data(this,key,value);self.triggerHandler("changeData"+part,parts);});},null,value,arguments.length>1,null,false);},removeData:function(key){return this.each(function(){jQuery.removeData(this,key);});}});function dataAttr(elem,key,data){if(data===undefined&&elem.nodeType===1){var name="data-"+key.replace(rmultiDash,"-$1").toLowerCase();data=elem.getAttribute(name);if(typeof data==="string"){try{data=data==="true"?true:data==="false"?false:data==="null"?null:jQuery.isNumeric(data)?+data:rbrace.test(data)?jQuery.parseJSON(data):data;}catch(e){}
jQuery.data(elem,key,data);}else{data=undefined;}}
return data;}
function isEmptyDataObject(obj){for(var name in obj){if(name==="data"&&jQuery.isEmptyObject(obj[name])){continue;}
if(name!=="toJSON"){return false;}}
return true;}
function handleQueueMarkDefer(elem,type,src){var deferDataKey=type+"defer",queueDataKey=type+"queue",markDataKey=type+"mark",defer=jQuery._data(elem,deferDataKey);if(defer&&(src==="queue"||!jQuery._data(elem,queueDataKey))&&(src==="mark"||!jQuery._data(elem,markDataKey))){setTimeout(function(){if(!jQuery._data(elem,queueDataKey)&&!jQuery._data(elem,markDataKey)){jQuery.removeData(elem,deferDataKey,true);defer.fire();}},0);}}
jQuery.extend({_mark:function(elem,type){if(elem){type=(type||"fx")+"mark";jQuery._data(elem,type,(jQuery._data(elem,type)||0)+1);}},_unmark:function(force,elem,type){if(force!==true){type=elem;elem=force;force=false;}
if(elem){type=type||"fx";var key=type+"mark",count=force?0:((jQuery._data(elem,key)||1)-1);if(count){jQuery._data(elem,key,count);}else{jQuery.removeData(elem,key,true);handleQueueMarkDefer(elem,type,"mark");}}},queue:function(elem,type,data){var q;if(elem){type=(type||"fx")+"queue";q=jQuery._data(elem,type);if(data){if(!q||jQuery.isArray(data)){q=jQuery._data(elem,type,jQuery.makeArray(data));}else{q.push(data);}}
return q||[];}},dequeue:function(elem,type){type=type||"fx";var queue=jQuery.queue(elem,type),fn=queue.shift(),hooks={};if(fn==="inprogress"){fn=queue.shift();}
if(fn){if(type==="fx"){queue.unshift("inprogress");}
jQuery._data(elem,type+".run",hooks);fn.call(elem,function(){jQuery.dequeue(elem,type);},hooks);}
if(!queue.length){jQuery.removeData(elem,type+"queue "+type+".run",true);handleQueueMarkDefer(elem,type,"queue");}}});jQuery.fn.extend({queue:function(type,data){var setter=2;if(typeof type!=="string"){data=type;type="fx";setter--;}
if(arguments.length<setter){return jQuery.queue(this[0],type);}
return data===undefined?this:this.each(function(){var queue=jQuery.queue(this,type,data);if(type==="fx"&&queue[0]!=="inprogress"){jQuery.dequeue(this,type);}});},dequeue:function(type){return this.each(function(){jQuery.dequeue(this,type);});},delay:function(time,type){time=jQuery.fx?jQuery.fx.speeds[time]||time:time;type=type||"fx";return this.queue(type,function(next,hooks){var timeout=setTimeout(next,time);hooks.stop=function(){clearTimeout(timeout);};});},clearQueue:function(type){return this.queue(type||"fx",[]);},promise:function(type,object){if(typeof type!=="string"){object=type;type=undefined;}
type=type||"fx";var defer=jQuery.Deferred(),elements=this,i=elements.length,count=1,deferDataKey=type+"defer",queueDataKey=type+"queue",markDataKey=type+"mark",tmp;function resolve(){if(!(--count)){defer.resolveWith(elements,[elements]);}}
while(i--){if((tmp=jQuery.data(elements[i],deferDataKey,undefined,true)||(jQuery.data(elements[i],queueDataKey,undefined,true)||jQuery.data(elements[i],markDataKey,undefined,true))&&jQuery.data(elements[i],deferDataKey,jQuery.Callbacks("once memory"),true))){count++;tmp.add(resolve);}}
resolve();return defer.promise(object);}});var rclass=/[\n\t\r]/g,rspace=/\s+/,rreturn=/\r/g,rtype=/^(?:button|input)$/i,rfocusable=/^(?:button|input|object|select|textarea)$/i,rclickable=/^a(?:rea)?$/i,rboolean=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,getSetAttribute=jQuery.support.getSetAttribute,nodeHook,boolHook,fixSpecified;jQuery.fn.extend({attr:function(name,value){return jQuery.access(this,jQuery.attr,name,value,arguments.length>1);},removeAttr:function(name){return this.each(function(){jQuery.removeAttr(this,name);});},prop:function(name,value){return jQuery.access(this,jQuery.prop,name,value,arguments.length>1);},removeProp:function(name){name=jQuery.propFix[name]||name;return this.each(function(){try{this[name]=undefined;delete this[name];}catch(e){}});},addClass:function(value){var classNames,i,l,elem,setClass,c,cl;if(jQuery.isFunction(value)){return this.each(function(j){jQuery(this).addClass(value.call(this,j,this.className));});}
if(value&&typeof value==="string"){classNames=value.split(rspace);for(i=0,l=this.length;i<l;i++){elem=this[i];if(elem.nodeType===1){if(!elem.className&&classNames.length===1){elem.className=value;}else{setClass=" "+elem.className+" ";for(c=0,cl=classNames.length;c<cl;c++){if(!~setClass.indexOf(" "+classNames[c]+" ")){setClass+=classNames[c]+" ";}}
elem.className=jQuery.trim(setClass);}}}}
return this;},removeClass:function(value){var classNames,i,l,elem,className,c,cl;if(jQuery.isFunction(value)){return this.each(function(j){jQuery(this).removeClass(value.call(this,j,this.className));});}
if((value&&typeof value==="string")||value===undefined){classNames=(value||"").split(rspace);for(i=0,l=this.length;i<l;i++){elem=this[i];if(elem.nodeType===1&&elem.className){if(value){className=(" "+elem.className+" ").replace(rclass," ");for(c=0,cl=classNames.length;c<cl;c++){className=className.replace(" "+classNames[c]+" "," ");}
elem.className=jQuery.trim(className);}else{elem.className="";}}}}
return this;},toggleClass:function(value,stateVal){var type=typeof value,isBool=typeof stateVal==="boolean";if(jQuery.isFunction(value)){return this.each(function(i){jQuery(this).toggleClass(value.call(this,i,this.className,stateVal),stateVal);});}
return this.each(function(){if(type==="string"){var className,i=0,self=jQuery(this),state=stateVal,classNames=value.split(rspace);while((className=classNames[i++])){state=isBool?state:!self.hasClass(className);self[state?"addClass":"removeClass"](className);}}else if(type==="undefined"||type==="boolean"){if(this.className){jQuery._data(this,"__className__",this.className);}
this.className=this.className||value===false?"":jQuery._data(this,"__className__")||"";}});},hasClass:function(selector){var className=" "+selector+" ",i=0,l=this.length;for(;i<l;i++){if(this[i].nodeType===1&&(" "+this[i].className+" ").replace(rclass," ").indexOf(className)>-1){return true;}}
return false;},val:function(value){var hooks,ret,isFunction,elem=this[0];if(!arguments.length){if(elem){hooks=jQuery.valHooks[elem.type]||jQuery.valHooks[elem.nodeName.toLowerCase()];if(hooks&&"get"in hooks&&(ret=hooks.get(elem,"value"))!==undefined){return ret;}
ret=elem.value;return typeof ret==="string"?ret.replace(rreturn,""):ret==null?"":ret;}
return;}
isFunction=jQuery.isFunction(value);return this.each(function(i){var self=jQuery(this),val;if(this.nodeType!==1){return;}
if(isFunction){val=value.call(this,i,self.val());}else{val=value;}
if(val==null){val="";}else if(typeof val==="number"){val+="";}else if(jQuery.isArray(val)){val=jQuery.map(val,function(value){return value==null?"":value+"";});}
hooks=jQuery.valHooks[this.type]||jQuery.valHooks[this.nodeName.toLowerCase()];if(!hooks||!("set"in hooks)||hooks.set(this,val,"value")===undefined){this.value=val;}});}});jQuery.extend({valHooks:{option:{get:function(elem){var val=elem.attributes.value;return!val||val.specified?elem.value:elem.text;}},select:{get:function(elem){var value,i,max,option,index=elem.selectedIndex,values=[],options=elem.options,one=elem.type==="select-one";if(index<0){return null;}
i=one?index:0;max=one?index+1:options.length;for(;i<max;i++){option=options[i];if(option.selected&&(jQuery.support.optDisabled?!option.disabled:option.getAttribute("disabled")===null)&&(!option.parentNode.disabled||!jQuery.nodeName(option.parentNode,"optgroup"))){value=jQuery(option).val();if(one){return value;}
values.push(value);}}
if(one&&!values.length&&options.length){return jQuery(options[index]).val();}
return values;},set:function(elem,value){var values=jQuery.makeArray(value);jQuery(elem).find("option").each(function(){this.selected=jQuery.inArray(jQuery(this).val(),values)>=0;});if(!values.length){elem.selectedIndex=-1;}
return values;}}},attrFn:{val:true,css:true,html:true,text:true,data:true,width:true,height:true,offset:true},attr:function(elem,name,value,pass){var ret,hooks,notxml,nType=elem.nodeType;if(!elem||nType===3||nType===8||nType===2){return;}
if(pass&&name in jQuery.attrFn){return jQuery(elem)[name](value);}
if(typeof elem.getAttribute==="undefined"){return jQuery.prop(elem,name,value);}
notxml=nType!==1||!jQuery.isXMLDoc(elem);if(notxml){name=name.toLowerCase();hooks=jQuery.attrHooks[name]||(rboolean.test(name)?boolHook:nodeHook);}
if(value!==undefined){if(value===null){jQuery.removeAttr(elem,name);return;}else if(hooks&&"set"in hooks&&notxml&&(ret=hooks.set(elem,value,name))!==undefined){return ret;}else{elem.setAttribute(name,""+value);return value;}}else if(hooks&&"get"in hooks&&notxml&&(ret=hooks.get(elem,name))!==null){return ret;}else{ret=elem.getAttribute(name);return ret===null?undefined:ret;}},removeAttr:function(elem,value){var propName,attrNames,name,l,isBool,i=0;if(value&&elem.nodeType===1){attrNames=value.toLowerCase().split(rspace);l=attrNames.length;for(;i<l;i++){name=attrNames[i];if(name){propName=jQuery.propFix[name]||name;isBool=rboolean.test(name);if(!isBool){jQuery.attr(elem,name,"");}
elem.removeAttribute(getSetAttribute?name:propName);if(isBool&&propName in elem){elem[propName]=false;}}}}},attrHooks:{type:{set:function(elem,value){if(rtype.test(elem.nodeName)&&elem.parentNode){jQuery.error("type property can't be changed");}else if(!jQuery.support.radioValue&&value==="radio"&&jQuery.nodeName(elem,"input")){var val=elem.value;elem.setAttribute("type",value);if(val){elem.value=val;}
return value;}}},value:{get:function(elem,name){if(nodeHook&&jQuery.nodeName(elem,"button")){return nodeHook.get(elem,name);}
return name in elem?elem.value:null;},set:function(elem,value,name){if(nodeHook&&jQuery.nodeName(elem,"button")){return nodeHook.set(elem,value,name);}
elem.value=value;}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(elem,name,value){var ret,hooks,notxml,nType=elem.nodeType;if(!elem||nType===3||nType===8||nType===2){return;}
notxml=nType!==1||!jQuery.isXMLDoc(elem);if(notxml){name=jQuery.propFix[name]||name;hooks=jQuery.propHooks[name];}
if(value!==undefined){if(hooks&&"set"in hooks&&(ret=hooks.set(elem,value,name))!==undefined){return ret;}else{return(elem[name]=value);}}else{if(hooks&&"get"in hooks&&(ret=hooks.get(elem,name))!==null){return ret;}else{return elem[name];}}},propHooks:{tabIndex:{get:function(elem){var attributeNode=elem.getAttributeNode("tabindex");return attributeNode&&attributeNode.specified?parseInt(attributeNode.value,10):rfocusable.test(elem.nodeName)||rclickable.test(elem.nodeName)&&elem.href?0:undefined;}}}});jQuery.attrHooks.tabindex=jQuery.propHooks.tabIndex;boolHook={get:function(elem,name){var attrNode,property=jQuery.prop(elem,name);return property===true||typeof property!=="boolean"&&(attrNode=elem.getAttributeNode(name))&&attrNode.nodeValue!==false?name.toLowerCase():undefined;},set:function(elem,value,name){var propName;if(value===false){jQuery.removeAttr(elem,name);}else{propName=jQuery.propFix[name]||name;if(propName in elem){elem[propName]=true;}
elem.setAttribute(name,name.toLowerCase());}
return name;}};if(!getSetAttribute){fixSpecified={name:true,id:true,coords:true};nodeHook=jQuery.valHooks.button={get:function(elem,name){var ret;ret=elem.getAttributeNode(name);return ret&&(fixSpecified[name]?ret.nodeValue!=="":ret.specified)?ret.nodeValue:undefined;},set:function(elem,value,name){var ret=elem.getAttributeNode(name);if(!ret){ret=document.createAttribute(name);elem.setAttributeNode(ret);}
return(ret.nodeValue=value+"");}};jQuery.attrHooks.tabindex.set=nodeHook.set;jQuery.each(["width","height"],function(i,name){jQuery.attrHooks[name]=jQuery.extend(jQuery.attrHooks[name],{set:function(elem,value){if(value===""){elem.setAttribute(name,"auto");return value;}}});});jQuery.attrHooks.contenteditable={get:nodeHook.get,set:function(elem,value,name){if(value===""){value="false";}
nodeHook.set(elem,value,name);}};}
if(!jQuery.support.hrefNormalized){jQuery.each(["href","src","width","height"],function(i,name){jQuery.attrHooks[name]=jQuery.extend(jQuery.attrHooks[name],{get:function(elem){var ret=elem.getAttribute(name,2);return ret===null?undefined:ret;}});});}
if(!jQuery.support.style){jQuery.attrHooks.style={get:function(elem){return elem.style.cssText.toLowerCase()||undefined;},set:function(elem,value){return(elem.style.cssText=""+value);}};}
if(!jQuery.support.optSelected){jQuery.propHooks.selected=jQuery.extend(jQuery.propHooks.selected,{get:function(elem){var parent=elem.parentNode;if(parent){parent.selectedIndex;if(parent.parentNode){parent.parentNode.selectedIndex;}}
return null;}});}
if(!jQuery.support.enctype){jQuery.propFix.enctype="encoding";}
if(!jQuery.support.checkOn){jQuery.each(["radio","checkbox"],function(){jQuery.valHooks[this]={get:function(elem){return elem.getAttribute("value")===null?"on":elem.value;}};});}
jQuery.each(["radio","checkbox"],function(){jQuery.valHooks[this]=jQuery.extend(jQuery.valHooks[this],{set:function(elem,value){if(jQuery.isArray(value)){return(elem.checked=jQuery.inArray(jQuery(elem).val(),value)>=0);}}});});var rformElems=/^(?:textarea|input|select)$/i,rtypenamespace=/^([^\.]*)?(?:\.(.+))?$/,rhoverHack=/(?:^|\s)hover(\.\S+)?\b/,rkeyEvent=/^key/,rmouseEvent=/^(?:mouse|contextmenu)|click/,rfocusMorph=/^(?:focusinfocus|focusoutblur)$/,rquickIs=/^(\w*)(?:#([\w\-]+))?(?:\.([\w\-]+))?$/,quickParse=function(selector){var quick=rquickIs.exec(selector);if(quick){quick[1]=(quick[1]||"").toLowerCase();quick[3]=quick[3]&&new RegExp("(?:^|\\s)"+quick[3]+"(?:\\s|$)");}
return quick;},quickIs=function(elem,m){var attrs=elem.attributes||{};return((!m[1]||elem.nodeName.toLowerCase()===m[1])&&(!m[2]||(attrs.id||{}).value===m[2])&&(!m[3]||m[3].test((attrs["class"]||{}).value)));},hoverHack=function(events){return jQuery.event.special.hover?events:events.replace(rhoverHack,"mouseenter$1 mouseleave$1");};jQuery.event={add:function(elem,types,handler,data,selector){var elemData,eventHandle,events,t,tns,type,namespaces,handleObj,handleObjIn,quick,handlers,special;if(elem.nodeType===3||elem.nodeType===8||!types||!handler||!(elemData=jQuery._data(elem))){return;}
if(handler.handler){handleObjIn=handler;handler=handleObjIn.handler;selector=handleObjIn.selector;}
if(!handler.guid){handler.guid=jQuery.guid++;}
events=elemData.events;if(!events){elemData.events=events={};}
eventHandle=elemData.handle;if(!eventHandle){elemData.handle=eventHandle=function(e){return typeof jQuery!=="undefined"&&(!e||jQuery.event.triggered!==e.type)?jQuery.event.dispatch.apply(eventHandle.elem,arguments):undefined;};eventHandle.elem=elem;}
types=jQuery.trim(hoverHack(types)).split(" ");for(t=0;t<types.length;t++){tns=rtypenamespace.exec(types[t])||[];type=tns[1];namespaces=(tns[2]||"").split(".").sort();special=jQuery.event.special[type]||{};type=(selector?special.delegateType:special.bindType)||type;special=jQuery.event.special[type]||{};handleObj=jQuery.extend({type:type,origType:tns[1],data:data,handler:handler,guid:handler.guid,selector:selector,quick:selector&&quickParse(selector),namespace:namespaces.join(".")},handleObjIn);handlers=events[type];if(!handlers){handlers=events[type]=[];handlers.delegateCount=0;if(!special.setup||special.setup.call(elem,data,namespaces,eventHandle)===false){if(elem.addEventListener){elem.addEventListener(type,eventHandle,false);}else if(elem.attachEvent){elem.attachEvent("on"+type,eventHandle);}}}
if(special.add){special.add.call(elem,handleObj);if(!handleObj.handler.guid){handleObj.handler.guid=handler.guid;}}
if(selector){handlers.splice(handlers.delegateCount++,0,handleObj);}else{handlers.push(handleObj);}
jQuery.event.global[type]=true;}
elem=null;},global:{},remove:function(elem,types,handler,selector,mappedTypes){var elemData=jQuery.hasData(elem)&&jQuery._data(elem),t,tns,type,origType,namespaces,origCount,j,events,special,handle,eventType,handleObj;if(!elemData||!(events=elemData.events)){return;}
types=jQuery.trim(hoverHack(types||"")).split(" ");for(t=0;t<types.length;t++){tns=rtypenamespace.exec(types[t])||[];type=origType=tns[1];namespaces=tns[2];if(!type){for(type in events){jQuery.event.remove(elem,type+types[t],handler,selector,true);}
continue;}
special=jQuery.event.special[type]||{};type=(selector?special.delegateType:special.bindType)||type;eventType=events[type]||[];origCount=eventType.length;namespaces=namespaces?new RegExp("(^|\\.)"+namespaces.split(".").sort().join("\\.(?:.*\\.)?")+"(\\.|$)"):null;for(j=0;j<eventType.length;j++){handleObj=eventType[j];if((mappedTypes||origType===handleObj.origType)&&(!handler||handler.guid===handleObj.guid)&&(!namespaces||namespaces.test(handleObj.namespace))&&(!selector||selector===handleObj.selector||selector==="**"&&handleObj.selector)){eventType.splice(j--,1);if(handleObj.selector){eventType.delegateCount--;}
if(special.remove){special.remove.call(elem,handleObj);}}}
if(eventType.length===0&&origCount!==eventType.length){if(!special.teardown||special.teardown.call(elem,namespaces)===false){jQuery.removeEvent(elem,type,elemData.handle);}
delete events[type];}}
if(jQuery.isEmptyObject(events)){handle=elemData.handle;if(handle){handle.elem=null;}
jQuery.removeData(elem,["events","handle"],true);}},customEvent:{"getData":true,"setData":true,"changeData":true},trigger:function(event,data,elem,onlyHandlers){if(elem&&(elem.nodeType===3||elem.nodeType===8)){return;}
var type=event.type||event,namespaces=[],cache,exclusive,i,cur,old,ontype,special,handle,eventPath,bubbleType;if(rfocusMorph.test(type+jQuery.event.triggered)){return;}
if(type.indexOf("!")>=0){type=type.slice(0,-1);exclusive=true;}
if(type.indexOf(".")>=0){namespaces=type.split(".");type=namespaces.shift();namespaces.sort();}
if((!elem||jQuery.event.customEvent[type])&&!jQuery.event.global[type]){return;}
event=typeof event==="object"?event[jQuery.expando]?event:new jQuery.Event(type,event):new jQuery.Event(type);event.type=type;event.isTrigger=true;event.exclusive=exclusive;event.namespace=namespaces.join(".");event.namespace_re=event.namespace?new RegExp("(^|\\.)"+namespaces.join("\\.(?:.*\\.)?")+"(\\.|$)"):null;ontype=type.indexOf(":")<0?"on"+type:"";if(!elem){cache=jQuery.cache;for(i in cache){if(cache[i].events&&cache[i].events[type]){jQuery.event.trigger(event,data,cache[i].handle.elem,true);}}
return;}
event.result=undefined;if(!event.target){event.target=elem;}
data=data!=null?jQuery.makeArray(data):[];data.unshift(event);special=jQuery.event.special[type]||{};if(special.trigger&&special.trigger.apply(elem,data)===false){return;}
eventPath=[[elem,special.bindType||type]];if(!onlyHandlers&&!special.noBubble&&!jQuery.isWindow(elem)){bubbleType=special.delegateType||type;cur=rfocusMorph.test(bubbleType+type)?elem:elem.parentNode;old=null;for(;cur;cur=cur.parentNode){eventPath.push([cur,bubbleType]);old=cur;}
if(old&&old===elem.ownerDocument){eventPath.push([old.defaultView||old.parentWindow||window,bubbleType]);}}
for(i=0;i<eventPath.length&&!event.isPropagationStopped();i++){cur=eventPath[i][0];event.type=eventPath[i][1];handle=(jQuery._data(cur,"events")||{})[event.type]&&jQuery._data(cur,"handle");if(handle){handle.apply(cur,data);}
handle=ontype&&cur[ontype];if(handle&&jQuery.acceptData(cur)&&handle.apply(cur,data)===false){event.preventDefault();}}
event.type=type;if(!onlyHandlers&&!event.isDefaultPrevented()){if((!special._default||special._default.apply(elem.ownerDocument,data)===false)&&!(type==="click"&&jQuery.nodeName(elem,"a"))&&jQuery.acceptData(elem)){if(ontype&&elem[type]&&((type!=="focus"&&type!=="blur")||event.target.offsetWidth!==0)&&!jQuery.isWindow(elem)){old=elem[ontype];if(old){elem[ontype]=null;}
jQuery.event.triggered=type;elem[type]();jQuery.event.triggered=undefined;if(old){elem[ontype]=old;}}}}
return event.result;},dispatch:function(event){event=jQuery.event.fix(event||window.event);var handlers=((jQuery._data(this,"events")||{})[event.type]||[]),delegateCount=handlers.delegateCount,args=[].slice.call(arguments,0),run_all=!event.exclusive&&!event.namespace,special=jQuery.event.special[event.type]||{},handlerQueue=[],i,j,cur,jqcur,ret,selMatch,matched,matches,handleObj,sel,related;args[0]=event;event.delegateTarget=this;if(special.preDispatch&&special.preDispatch.call(this,event)===false){return;}
if(delegateCount&&!(event.button&&event.type==="click")){jqcur=jQuery(this);jqcur.context=this.ownerDocument||this;for(cur=event.target;cur!=this;cur=cur.parentNode||this){if(cur.disabled!==true){selMatch={};matches=[];jqcur[0]=cur;for(i=0;i<delegateCount;i++){handleObj=handlers[i];sel=handleObj.selector;if(selMatch[sel]===undefined){selMatch[sel]=(handleObj.quick?quickIs(cur,handleObj.quick):jqcur.is(sel));}
if(selMatch[sel]){matches.push(handleObj);}}
if(matches.length){handlerQueue.push({elem:cur,matches:matches});}}}}
if(handlers.length>delegateCount){handlerQueue.push({elem:this,matches:handlers.slice(delegateCount)});}
for(i=0;i<handlerQueue.length&&!event.isPropagationStopped();i++){matched=handlerQueue[i];event.currentTarget=matched.elem;for(j=0;j<matched.matches.length&&!event.isImmediatePropagationStopped();j++){handleObj=matched.matches[j];if(run_all||(!event.namespace&&!handleObj.namespace)||event.namespace_re&&event.namespace_re.test(handleObj.namespace)){event.data=handleObj.data;event.handleObj=handleObj;ret=((jQuery.event.special[handleObj.origType]||{}).handle||handleObj.handler).apply(matched.elem,args);if(ret!==undefined){event.result=ret;if(ret===false){event.preventDefault();event.stopPropagation();}}}}}
if(special.postDispatch){special.postDispatch.call(this,event);}
return event.result;},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(event,original){if(event.which==null){event.which=original.charCode!=null?original.charCode:original.keyCode;}
return event;}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(event,original){var eventDoc,doc,body,button=original.button,fromElement=original.fromElement;if(event.pageX==null&&original.clientX!=null){eventDoc=event.target.ownerDocument||document;doc=eventDoc.documentElement;body=eventDoc.body;event.pageX=original.clientX+(doc&&doc.scrollLeft||body&&body.scrollLeft||0)-(doc&&doc.clientLeft||body&&body.clientLeft||0);event.pageY=original.clientY+(doc&&doc.scrollTop||body&&body.scrollTop||0)-(doc&&doc.clientTop||body&&body.clientTop||0);}
if(!event.relatedTarget&&fromElement){event.relatedTarget=fromElement===event.target?original.toElement:fromElement;}
if(!event.which&&button!==undefined){event.which=(button&1?1:(button&2?3:(button&4?2:0)));}
return event;}},fix:function(event){if(event[jQuery.expando]){return event;}
var i,prop,originalEvent=event,fixHook=jQuery.event.fixHooks[event.type]||{},copy=fixHook.props?this.props.concat(fixHook.props):this.props;event=jQuery.Event(originalEvent);for(i=copy.length;i;){prop=copy[--i];event[prop]=originalEvent[prop];}
if(!event.target){event.target=originalEvent.srcElement||document;}
if(event.target.nodeType===3){event.target=event.target.parentNode;}
if(event.metaKey===undefined){event.metaKey=event.ctrlKey;}
return fixHook.filter?fixHook.filter(event,originalEvent):event;},special:{ready:{setup:jQuery.bindReady},load:{noBubble:true},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(data,namespaces,eventHandle){if(jQuery.isWindow(this)){this.onbeforeunload=eventHandle;}},teardown:function(namespaces,eventHandle){if(this.onbeforeunload===eventHandle){this.onbeforeunload=null;}}}},simulate:function(type,elem,event,bubble){var e=jQuery.extend(new jQuery.Event(),event,{type:type,isSimulated:true,originalEvent:{}});if(bubble){jQuery.event.trigger(e,null,elem);}else{jQuery.event.dispatch.call(elem,e);}
if(e.isDefaultPrevented()){event.preventDefault();}}};jQuery.event.handle=jQuery.event.dispatch;jQuery.removeEvent=document.removeEventListener?function(elem,type,handle){if(elem.removeEventListener){elem.removeEventListener(type,handle,false);}}:function(elem,type,handle){if(elem.detachEvent){elem.detachEvent("on"+type,handle);}};jQuery.Event=function(src,props){if(!(this instanceof jQuery.Event)){return new jQuery.Event(src,props);}
if(src&&src.type){this.originalEvent=src;this.type=src.type;this.isDefaultPrevented=(src.defaultPrevented||src.returnValue===false||src.getPreventDefault&&src.getPreventDefault())?returnTrue:returnFalse;}else{this.type=src;}
if(props){jQuery.extend(this,props);}
this.timeStamp=src&&src.timeStamp||jQuery.now();this[jQuery.expando]=true;};function returnFalse(){return false;}
function returnTrue(){return true;}
jQuery.Event.prototype={preventDefault:function(){this.isDefaultPrevented=returnTrue;var e=this.originalEvent;if(!e){return;}
if(e.preventDefault){e.preventDefault();}else{e.returnValue=false;}},stopPropagation:function(){this.isPropagationStopped=returnTrue;var e=this.originalEvent;if(!e){return;}
if(e.stopPropagation){e.stopPropagation();}
e.cancelBubble=true;},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=returnTrue;this.stopPropagation();},isDefaultPrevented:returnFalse,isPropagationStopped:returnFalse,isImmediatePropagationStopped:returnFalse};jQuery.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(orig,fix){jQuery.event.special[orig]={delegateType:fix,bindType:fix,handle:function(event){var target=this,related=event.relatedTarget,handleObj=event.handleObj,selector=handleObj.selector,ret;if(!related||(related!==target&&!jQuery.contains(target,related))){event.type=handleObj.origType;ret=handleObj.handler.apply(this,arguments);event.type=fix;}
return ret;}};});if(!jQuery.support.submitBubbles){jQuery.event.special.submit={setup:function(){if(jQuery.nodeName(this,"form")){return false;}
jQuery.event.add(this,"click._submit keypress._submit",function(e){var elem=e.target,form=jQuery.nodeName(elem,"input")||jQuery.nodeName(elem,"button")?elem.form:undefined;if(form&&!form._submit_attached){jQuery.event.add(form,"submit._submit",function(event){event._submit_bubble=true;});form._submit_attached=true;}});},postDispatch:function(event){if(event._submit_bubble){delete event._submit_bubble;if(this.parentNode&&!event.isTrigger){jQuery.event.simulate("submit",this.parentNode,event,true);}}},teardown:function(){if(jQuery.nodeName(this,"form")){return false;}
jQuery.event.remove(this,"._submit");}};}
if(!jQuery.support.changeBubbles){jQuery.event.special.change={setup:function(){if(rformElems.test(this.nodeName)){if(this.type==="checkbox"||this.type==="radio"){jQuery.event.add(this,"propertychange._change",function(event){if(event.originalEvent.propertyName==="checked"){this._just_changed=true;}});jQuery.event.add(this,"click._change",function(event){if(this._just_changed&&!event.isTrigger){this._just_changed=false;jQuery.event.simulate("change",this,event,true);}});}
return false;}
jQuery.event.add(this,"beforeactivate._change",function(e){var elem=e.target;if(rformElems.test(elem.nodeName)&&!elem._change_attached){jQuery.event.add(elem,"change._change",function(event){if(this.parentNode&&!event.isSimulated&&!event.isTrigger){jQuery.event.simulate("change",this.parentNode,event,true);}});elem._change_attached=true;}});},handle:function(event){var elem=event.target;if(this!==elem||event.isSimulated||event.isTrigger||(elem.type!=="radio"&&elem.type!=="checkbox")){return event.handleObj.handler.apply(this,arguments);}},teardown:function(){jQuery.event.remove(this,"._change");return rformElems.test(this.nodeName);}};}
if(!jQuery.support.focusinBubbles){jQuery.each({focus:"focusin",blur:"focusout"},function(orig,fix){var attaches=0,handler=function(event){jQuery.event.simulate(fix,event.target,jQuery.event.fix(event),true);};jQuery.event.special[fix]={setup:function(){if(attaches++===0){document.addEventListener(orig,handler,true);}},teardown:function(){if(--attaches===0){document.removeEventListener(orig,handler,true);}}};});}
jQuery.fn.extend({on:function(types,selector,data,fn,one){var origFn,type;if(typeof types==="object"){if(typeof selector!=="string"){data=data||selector;selector=undefined;}
for(type in types){this.on(type,selector,data,types[type],one);}
return this;}
if(data==null&&fn==null){fn=selector;data=selector=undefined;}else if(fn==null){if(typeof selector==="string"){fn=data;data=undefined;}else{fn=data;data=selector;selector=undefined;}}
if(fn===false){fn=returnFalse;}else if(!fn){return this;}
if(one===1){origFn=fn;fn=function(event){jQuery().off(event);return origFn.apply(this,arguments);};fn.guid=origFn.guid||(origFn.guid=jQuery.guid++);}
return this.each(function(){jQuery.event.add(this,types,fn,data,selector);});},one:function(types,selector,data,fn){return this.on(types,selector,data,fn,1);},off:function(types,selector,fn){if(types&&types.preventDefault&&types.handleObj){var handleObj=types.handleObj;jQuery(types.delegateTarget).off(handleObj.namespace?handleObj.origType+"."+handleObj.namespace:handleObj.origType,handleObj.selector,handleObj.handler);return this;}
if(typeof types==="object"){for(var type in types){this.off(type,selector,types[type]);}
return this;}
if(selector===false||typeof selector==="function"){fn=selector;selector=undefined;}
if(fn===false){fn=returnFalse;}
return this.each(function(){jQuery.event.remove(this,types,fn,selector);});},bind:function(types,data,fn){return this.on(types,null,data,fn);},unbind:function(types,fn){return this.off(types,null,fn);},live:function(types,data,fn){jQuery(this.context).on(types,this.selector,data,fn);return this;},die:function(types,fn){jQuery(this.context).off(types,this.selector||"**",fn);return this;},delegate:function(selector,types,data,fn){return this.on(types,selector,data,fn);},undelegate:function(selector,types,fn){return arguments.length==1?this.off(selector,"**"):this.off(types,selector,fn);},trigger:function(type,data){return this.each(function(){jQuery.event.trigger(type,data,this);});},triggerHandler:function(type,data){if(this[0]){return jQuery.event.trigger(type,data,this[0],true);}},toggle:function(fn){var args=arguments,guid=fn.guid||jQuery.guid++,i=0,toggler=function(event){var lastToggle=(jQuery._data(this,"lastToggle"+fn.guid)||0)%i;jQuery._data(this,"lastToggle"+fn.guid,lastToggle+1);event.preventDefault();return args[lastToggle].apply(this,arguments)||false;};toggler.guid=guid;while(i<args.length){args[i++].guid=guid;}
return this.click(toggler);},hover:function(fnOver,fnOut){return this.mouseenter(fnOver).mouseleave(fnOut||fnOver);}});jQuery.each(("blur focus focusin focusout load resize scroll unload click dblclick "+"mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave "+"change select submit keydown keypress keyup error contextmenu").split(" "),function(i,name){jQuery.fn[name]=function(data,fn){if(fn==null){fn=data;data=null;}
return arguments.length>0?this.on(name,null,data,fn):this.trigger(name);};if(jQuery.attrFn){jQuery.attrFn[name]=true;}
if(rkeyEvent.test(name)){jQuery.event.fixHooks[name]=jQuery.event.keyHooks;}
if(rmouseEvent.test(name)){jQuery.event.fixHooks[name]=jQuery.event.mouseHooks;}});(function(){var chunker=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,expando="sizcache"+(Math.random()+'').replace('.',''),done=0,toString=Object.prototype.toString,hasDuplicate=false,baseHasDuplicate=true,rBackslash=/\\/g,rReturn=/\r\n/g,rNonWord=/\W/;[0,0].sort(function(){baseHasDuplicate=false;return 0;});var Sizzle=function(selector,context,results,seed){results=results||[];context=context||document;var origContext=context;if(context.nodeType!==1&&context.nodeType!==9){return[];}
if(!selector||typeof selector!=="string"){return results;}
var m,set,checkSet,extra,ret,cur,pop,i,prune=true,contextXML=Sizzle.isXML(context),parts=[],soFar=selector;do{chunker.exec("");m=chunker.exec(soFar);if(m){soFar=m[3];parts.push(m[1]);if(m[2]){extra=m[3];break;}}}while(m);if(parts.length>1&&origPOS.exec(selector)){if(parts.length===2&&Expr.relative[parts[0]]){set=posProcess(parts[0]+parts[1],context,seed);}else{set=Expr.relative[parts[0]]?[context]:Sizzle(parts.shift(),context);while(parts.length){selector=parts.shift();if(Expr.relative[selector]){selector+=parts.shift();}
set=posProcess(selector,set,seed);}}}else{if(!seed&&parts.length>1&&context.nodeType===9&&!contextXML&&Expr.match.ID.test(parts[0])&&!Expr.match.ID.test(parts[parts.length-1])){ret=Sizzle.find(parts.shift(),context,contextXML);context=ret.expr?Sizzle.filter(ret.expr,ret.set)[0]:ret.set[0];}
if(context){ret=seed?{expr:parts.pop(),set:makeArray(seed)}:Sizzle.find(parts.pop(),parts.length===1&&(parts[0]==="~"||parts[0]==="+")&&context.parentNode?context.parentNode:context,contextXML);set=ret.expr?Sizzle.filter(ret.expr,ret.set):ret.set;if(parts.length>0){checkSet=makeArray(set);}else{prune=false;}
while(parts.length){cur=parts.pop();pop=cur;if(!Expr.relative[cur]){cur="";}else{pop=parts.pop();}
if(pop==null){pop=context;}
Expr.relative[cur](checkSet,pop,contextXML);}}else{checkSet=parts=[];}}
if(!checkSet){checkSet=set;}
if(!checkSet){Sizzle.error(cur||selector);}
if(toString.call(checkSet)==="[object Array]"){if(!prune){results.push.apply(results,checkSet);}else if(context&&context.nodeType===1){for(i=0;checkSet[i]!=null;i++){if(checkSet[i]&&(checkSet[i]===true||checkSet[i].nodeType===1&&Sizzle.contains(context,checkSet[i]))){results.push(set[i]);}}}else{for(i=0;checkSet[i]!=null;i++){if(checkSet[i]&&checkSet[i].nodeType===1){results.push(set[i]);}}}}else{makeArray(checkSet,results);}
if(extra){Sizzle(extra,origContext,results,seed);Sizzle.uniqueSort(results);}
return results;};Sizzle.uniqueSort=function(results){if(sortOrder){hasDuplicate=baseHasDuplicate;results.sort(sortOrder);if(hasDuplicate){for(var i=1;i<results.length;i++){if(results[i]===results[i-1]){results.splice(i--,1);}}}}
return results;};Sizzle.matches=function(expr,set){return Sizzle(expr,null,null,set);};Sizzle.matchesSelector=function(node,expr){return Sizzle(expr,null,null,[node]).length>0;};Sizzle.find=function(expr,context,isXML){var set,i,len,match,type,left;if(!expr){return[];}
for(i=0,len=Expr.order.length;i<len;i++){type=Expr.order[i];if((match=Expr.leftMatch[type].exec(expr))){left=match[1];match.splice(1,1);if(left.substr(left.length-1)!=="\\"){match[1]=(match[1]||"").replace(rBackslash,"");set=Expr.find[type](match,context,isXML);if(set!=null){expr=expr.replace(Expr.match[type],"");break;}}}}
if(!set){set=typeof context.getElementsByTagName!=="undefined"?context.getElementsByTagName("*"):[];}
return{set:set,expr:expr};};Sizzle.filter=function(expr,set,inplace,not){var match,anyFound,type,found,item,filter,left,i,pass,old=expr,result=[],curLoop=set,isXMLFilter=set&&set[0]&&Sizzle.isXML(set[0]);while(expr&&set.length){for(type in Expr.filter){if((match=Expr.leftMatch[type].exec(expr))!=null&&match[2]){filter=Expr.filter[type];left=match[1];anyFound=false;match.splice(1,1);if(left.substr(left.length-1)==="\\"){continue;}
if(curLoop===result){result=[];}
if(Expr.preFilter[type]){match=Expr.preFilter[type](match,curLoop,inplace,result,not,isXMLFilter);if(!match){anyFound=found=true;}else if(match===true){continue;}}
if(match){for(i=0;(item=curLoop[i])!=null;i++){if(item){found=filter(item,match,i,curLoop);pass=not^found;if(inplace&&found!=null){if(pass){anyFound=true;}else{curLoop[i]=false;}}else if(pass){result.push(item);anyFound=true;}}}}
if(found!==undefined){if(!inplace){curLoop=result;}
expr=expr.replace(Expr.match[type],"");if(!anyFound){return[];}
break;}}}
if(expr===old){if(anyFound==null){Sizzle.error(expr);}else{break;}}
old=expr;}
return curLoop;};Sizzle.error=function(msg){throw new Error("Syntax error, unrecognized expression: "+msg);};var getText=Sizzle.getText=function(elem){var i,node,nodeType=elem.nodeType,ret="";if(nodeType){if(nodeType===1||nodeType===9||nodeType===11){if(typeof elem.textContent==='string'){return elem.textContent;}else if(typeof elem.innerText==='string'){return elem.innerText.replace(rReturn,'');}else{for(elem=elem.firstChild;elem;elem=elem.nextSibling){ret+=getText(elem);}}}else if(nodeType===3||nodeType===4){return elem.nodeValue;}}else{for(i=0;(node=elem[i]);i++){if(node.nodeType!==8){ret+=getText(node);}}}
return ret;};var Expr=Sizzle.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(elem){return elem.getAttribute("href");},type:function(elem){return elem.getAttribute("type");}},relative:{"+":function(checkSet,part){var isPartStr=typeof part==="string",isTag=isPartStr&&!rNonWord.test(part),isPartStrNotTag=isPartStr&&!isTag;if(isTag){part=part.toLowerCase();}
for(var i=0,l=checkSet.length,elem;i<l;i++){if((elem=checkSet[i])){while((elem=elem.previousSibling)&&elem.nodeType!==1){}
checkSet[i]=isPartStrNotTag||elem&&elem.nodeName.toLowerCase()===part?elem||false:elem===part;}}
if(isPartStrNotTag){Sizzle.filter(part,checkSet,true);}},">":function(checkSet,part){var elem,isPartStr=typeof part==="string",i=0,l=checkSet.length;if(isPartStr&&!rNonWord.test(part)){part=part.toLowerCase();for(;i<l;i++){elem=checkSet[i];if(elem){var parent=elem.parentNode;checkSet[i]=parent.nodeName.toLowerCase()===part?parent:false;}}}else{for(;i<l;i++){elem=checkSet[i];if(elem){checkSet[i]=isPartStr?elem.parentNode:elem.parentNode===part;}}
if(isPartStr){Sizzle.filter(part,checkSet,true);}}},"":function(checkSet,part,isXML){var nodeCheck,doneName=done++,checkFn=dirCheck;if(typeof part==="string"&&!rNonWord.test(part)){part=part.toLowerCase();nodeCheck=part;checkFn=dirNodeCheck;}
checkFn("parentNode",part,doneName,checkSet,nodeCheck,isXML);},"~":function(checkSet,part,isXML){var nodeCheck,doneName=done++,checkFn=dirCheck;if(typeof part==="string"&&!rNonWord.test(part)){part=part.toLowerCase();nodeCheck=part;checkFn=dirNodeCheck;}
checkFn("previousSibling",part,doneName,checkSet,nodeCheck,isXML);}},find:{ID:function(match,context,isXML){if(typeof context.getElementById!=="undefined"&&!isXML){var m=context.getElementById(match[1]);return m&&m.parentNode?[m]:[];}},NAME:function(match,context){if(typeof context.getElementsByName!=="undefined"){var ret=[],results=context.getElementsByName(match[1]);for(var i=0,l=results.length;i<l;i++){if(results[i].getAttribute("name")===match[1]){ret.push(results[i]);}}
return ret.length===0?null:ret;}},TAG:function(match,context){if(typeof context.getElementsByTagName!=="undefined"){return context.getElementsByTagName(match[1]);}}},preFilter:{CLASS:function(match,curLoop,inplace,result,not,isXML){match=" "+match[1].replace(rBackslash,"")+" ";if(isXML){return match;}
for(var i=0,elem;(elem=curLoop[i])!=null;i++){if(elem){if(not^(elem.className&&(" "+elem.className+" ").replace(/[\t\n\r]/g," ").indexOf(match)>=0)){if(!inplace){result.push(elem);}}else if(inplace){curLoop[i]=false;}}}
return false;},ID:function(match){return match[1].replace(rBackslash,"");},TAG:function(match,curLoop){return match[1].replace(rBackslash,"").toLowerCase();},CHILD:function(match){if(match[1]==="nth"){if(!match[2]){Sizzle.error(match[0]);}
match[2]=match[2].replace(/^\+|\s*/g,'');var test=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec(match[2]==="even"&&"2n"||match[2]==="odd"&&"2n+1"||!/\D/.test(match[2])&&"0n+"+match[2]||match[2]);match[2]=(test[1]+(test[2]||1))-0;match[3]=test[3]-0;}
else if(match[2]){Sizzle.error(match[0]);}
match[0]=done++;return match;},ATTR:function(match,curLoop,inplace,result,not,isXML){var name=match[1]=match[1].replace(rBackslash,"");if(!isXML&&Expr.attrMap[name]){match[1]=Expr.attrMap[name];}
match[4]=(match[4]||match[5]||"").replace(rBackslash,"");if(match[2]==="~="){match[4]=" "+match[4]+" ";}
return match;},PSEUDO:function(match,curLoop,inplace,result,not){if(match[1]==="not"){if((chunker.exec(match[3])||"").length>1||/^\w/.test(match[3])){match[3]=Sizzle(match[3],null,null,curLoop);}else{var ret=Sizzle.filter(match[3],curLoop,inplace,true^not);if(!inplace){result.push.apply(result,ret);}
return false;}}else if(Expr.match.POS.test(match[0])||Expr.match.CHILD.test(match[0])){return true;}
return match;},POS:function(match){match.unshift(true);return match;}},filters:{enabled:function(elem){return elem.disabled===false&&elem.type!=="hidden";},disabled:function(elem){return elem.disabled===true;},checked:function(elem){return elem.checked===true;},selected:function(elem){if(elem.parentNode){elem.parentNode.selectedIndex;}
return elem.selected===true;},parent:function(elem){return!!elem.firstChild;},empty:function(elem){return!elem.firstChild;},has:function(elem,i,match){return!!Sizzle(match[3],elem).length;},header:function(elem){return(/h\d/i).test(elem.nodeName);},text:function(elem){var attr=elem.getAttribute("type"),type=elem.type;return elem.nodeName.toLowerCase()==="input"&&"text"===type&&(attr===type||attr===null);},radio:function(elem){return elem.nodeName.toLowerCase()==="input"&&"radio"===elem.type;},checkbox:function(elem){return elem.nodeName.toLowerCase()==="input"&&"checkbox"===elem.type;},file:function(elem){return elem.nodeName.toLowerCase()==="input"&&"file"===elem.type;},password:function(elem){return elem.nodeName.toLowerCase()==="input"&&"password"===elem.type;},submit:function(elem){var name=elem.nodeName.toLowerCase();return(name==="input"||name==="button")&&"submit"===elem.type;},image:function(elem){return elem.nodeName.toLowerCase()==="input"&&"image"===elem.type;},reset:function(elem){var name=elem.nodeName.toLowerCase();return(name==="input"||name==="button")&&"reset"===elem.type;},button:function(elem){var name=elem.nodeName.toLowerCase();return name==="input"&&"button"===elem.type||name==="button";},input:function(elem){return(/input|select|textarea|button/i).test(elem.nodeName);},focus:function(elem){return elem===elem.ownerDocument.activeElement;}},setFilters:{first:function(elem,i){return i===0;},last:function(elem,i,match,array){return i===array.length-1;},even:function(elem,i){return i%2===0;},odd:function(elem,i){return i%2===1;},lt:function(elem,i,match){return i<match[3]-0;},gt:function(elem,i,match){return i>match[3]-0;},nth:function(elem,i,match){return match[3]-0===i;},eq:function(elem,i,match){return match[3]-0===i;}},filter:{PSEUDO:function(elem,match,i,array){var name=match[1],filter=Expr.filters[name];if(filter){return filter(elem,i,match,array);}else if(name==="contains"){return(elem.textContent||elem.innerText||getText([elem])||"").indexOf(match[3])>=0;}else if(name==="not"){var not=match[3];for(var j=0,l=not.length;j<l;j++){if(not[j]===elem){return false;}}
return true;}else{Sizzle.error(name);}},CHILD:function(elem,match){var first,last,doneName,parent,cache,count,diff,type=match[1],node=elem;switch(type){case"only":case"first":while((node=node.previousSibling)){if(node.nodeType===1){return false;}}
if(type==="first"){return true;}
node=elem;case"last":while((node=node.nextSibling)){if(node.nodeType===1){return false;}}
return true;case"nth":first=match[2];last=match[3];if(first===1&&last===0){return true;}
doneName=match[0];parent=elem.parentNode;if(parent&&(parent[expando]!==doneName||!elem.nodeIndex)){count=0;for(node=parent.firstChild;node;node=node.nextSibling){if(node.nodeType===1){node.nodeIndex=++count;}}
parent[expando]=doneName;}
diff=elem.nodeIndex-last;if(first===0){return diff===0;}else{return(diff%first===0&&diff/first>=0);}}},ID:function(elem,match){return elem.nodeType===1&&elem.getAttribute("id")===match;},TAG:function(elem,match){return(match==="*"&&elem.nodeType===1)||!!elem.nodeName&&elem.nodeName.toLowerCase()===match;},CLASS:function(elem,match){return(" "+(elem.className||elem.getAttribute("class"))+" ").indexOf(match)>-1;},ATTR:function(elem,match){var name=match[1],result=Sizzle.attr?Sizzle.attr(elem,name):Expr.attrHandle[name]?Expr.attrHandle[name](elem):elem[name]!=null?elem[name]:elem.getAttribute(name),value=result+"",type=match[2],check=match[4];return result==null?type==="!=":!type&&Sizzle.attr?result!=null:type==="="?value===check:type==="*="?value.indexOf(check)>=0:type==="~="?(" "+value+" ").indexOf(check)>=0:!check?value&&result!==false:type==="!="?value!==check:type==="^="?value.indexOf(check)===0:type==="$="?value.substr(value.length-check.length)===check:type==="|="?value===check||value.substr(0,check.length+1)===check+"-":false;},POS:function(elem,match,i,array){var name=match[2],filter=Expr.setFilters[name];if(filter){return filter(elem,i,match,array);}}}};var origPOS=Expr.match.POS,fescape=function(all,num){return"\\"+(num-0+1);};for(var type in Expr.match){Expr.match[type]=new RegExp(Expr.match[type].source+(/(?![^\[]*\])(?![^\(]*\))/.source));Expr.leftMatch[type]=new RegExp(/(^(?:.|\r|\n)*?)/.source+Expr.match[type].source.replace(/\\(\d+)/g,fescape));}
Expr.match.globalPOS=origPOS;var makeArray=function(array,results){array=Array.prototype.slice.call(array,0);if(results){results.push.apply(results,array);return results;}
return array;};try{Array.prototype.slice.call(document.documentElement.childNodes,0)[0].nodeType;}catch(e){makeArray=function(array,results){var i=0,ret=results||[];if(toString.call(array)==="[object Array]"){Array.prototype.push.apply(ret,array);}else{if(typeof array.length==="number"){for(var l=array.length;i<l;i++){ret.push(array[i]);}}else{for(;array[i];i++){ret.push(array[i]);}}}
return ret;};}
var sortOrder,siblingCheck;if(document.documentElement.compareDocumentPosition){sortOrder=function(a,b){if(a===b){hasDuplicate=true;return 0;}
if(!a.compareDocumentPosition||!b.compareDocumentPosition){return a.compareDocumentPosition?-1:1;}
return a.compareDocumentPosition(b)&4?-1:1;};}else{sortOrder=function(a,b){if(a===b){hasDuplicate=true;return 0;}else if(a.sourceIndex&&b.sourceIndex){return a.sourceIndex-b.sourceIndex;}
var al,bl,ap=[],bp=[],aup=a.parentNode,bup=b.parentNode,cur=aup;if(aup===bup){return siblingCheck(a,b);}else if(!aup){return-1;}else if(!bup){return 1;}
while(cur){ap.unshift(cur);cur=cur.parentNode;}
cur=bup;while(cur){bp.unshift(cur);cur=cur.parentNode;}
al=ap.length;bl=bp.length;for(var i=0;i<al&&i<bl;i++){if(ap[i]!==bp[i]){return siblingCheck(ap[i],bp[i]);}}
return i===al?siblingCheck(a,bp[i],-1):siblingCheck(ap[i],b,1);};siblingCheck=function(a,b,ret){if(a===b){return ret;}
var cur=a.nextSibling;while(cur){if(cur===b){return-1;}
cur=cur.nextSibling;}
return 1;};}
(function(){var form=document.createElement("div"),id="script"+(new Date()).getTime(),root=document.documentElement;form.innerHTML="<a name='"+id+"'/>";root.insertBefore(form,root.firstChild);if(document.getElementById(id)){Expr.find.ID=function(match,context,isXML){if(typeof context.getElementById!=="undefined"&&!isXML){var m=context.getElementById(match[1]);return m?m.id===match[1]||typeof m.getAttributeNode!=="undefined"&&m.getAttributeNode("id").nodeValue===match[1]?[m]:undefined:[];}};Expr.filter.ID=function(elem,match){var node=typeof elem.getAttributeNode!=="undefined"&&elem.getAttributeNode("id");return elem.nodeType===1&&node&&node.nodeValue===match;};}
root.removeChild(form);root=form=null;})();(function(){var div=document.createElement("div");div.appendChild(document.createComment(""));if(div.getElementsByTagName("*").length>0){Expr.find.TAG=function(match,context){var results=context.getElementsByTagName(match[1]);if(match[1]==="*"){var tmp=[];for(var i=0;results[i];i++){if(results[i].nodeType===1){tmp.push(results[i]);}}
results=tmp;}
return results;};}
div.innerHTML="<a href='#'></a>";if(div.firstChild&&typeof div.firstChild.getAttribute!=="undefined"&&div.firstChild.getAttribute("href")!=="#"){Expr.attrHandle.href=function(elem){return elem.getAttribute("href",2);};}
div=null;})();if(document.querySelectorAll){(function(){var oldSizzle=Sizzle,div=document.createElement("div"),id="__sizzle__";div.innerHTML="<p class='TEST'></p>";if(div.querySelectorAll&&div.querySelectorAll(".TEST").length===0){return;}
Sizzle=function(query,context,extra,seed){context=context||document;if(!seed&&!Sizzle.isXML(context)){var match=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(query);if(match&&(context.nodeType===1||context.nodeType===9)){if(match[1]){return makeArray(context.getElementsByTagName(query),extra);}else if(match[2]&&Expr.find.CLASS&&context.getElementsByClassName){return makeArray(context.getElementsByClassName(match[2]),extra);}}
if(context.nodeType===9){if(query==="body"&&context.body){return makeArray([context.body],extra);}else if(match&&match[3]){var elem=context.getElementById(match[3]);if(elem&&elem.parentNode){if(elem.id===match[3]){return makeArray([elem],extra);}}else{return makeArray([],extra);}}
try{return makeArray(context.querySelectorAll(query),extra);}catch(qsaError){}}else if(context.nodeType===1&&context.nodeName.toLowerCase()!=="object"){var oldContext=context,old=context.getAttribute("id"),nid=old||id,hasParent=context.parentNode,relativeHierarchySelector=/^\s*[+~]/.test(query);if(!old){context.setAttribute("id",nid);}else{nid=nid.replace(/'/g,"\\$&");}
if(relativeHierarchySelector&&hasParent){context=context.parentNode;}
try{if(!relativeHierarchySelector||hasParent){return makeArray(context.querySelectorAll("[id='"+nid+"'] "+query),extra);}}catch(pseudoError){}finally{if(!old){oldContext.removeAttribute("id");}}}}
return oldSizzle(query,context,extra,seed);};for(var prop in oldSizzle){Sizzle[prop]=oldSizzle[prop];}
div=null;})();}
(function(){var html=document.documentElement,matches=html.matchesSelector||html.mozMatchesSelector||html.webkitMatchesSelector||html.msMatchesSelector;if(matches){var disconnectedMatch=!matches.call(document.createElement("div"),"div"),pseudoWorks=false;try{matches.call(document.documentElement,"[test!='']:sizzle");}catch(pseudoError){pseudoWorks=true;}
Sizzle.matchesSelector=function(node,expr){expr=expr.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']");if(!Sizzle.isXML(node)){try{if(pseudoWorks||!Expr.match.PSEUDO.test(expr)&&!/!=/.test(expr)){var ret=matches.call(node,expr);if(ret||!disconnectedMatch||node.document&&node.document.nodeType!==11){return ret;}}}catch(e){}}
return Sizzle(expr,null,null,[node]).length>0;};}})();(function(){var div=document.createElement("div");div.innerHTML="<div class='test e'></div><div class='test'></div>";if(!div.getElementsByClassName||div.getElementsByClassName("e").length===0){return;}
div.lastChild.className="e";if(div.getElementsByClassName("e").length===1){return;}
Expr.order.splice(1,0,"CLASS");Expr.find.CLASS=function(match,context,isXML){if(typeof context.getElementsByClassName!=="undefined"&&!isXML){return context.getElementsByClassName(match[1]);}};div=null;})();function dirNodeCheck(dir,cur,doneName,checkSet,nodeCheck,isXML){for(var i=0,l=checkSet.length;i<l;i++){var elem=checkSet[i];if(elem){var match=false;elem=elem[dir];while(elem){if(elem[expando]===doneName){match=checkSet[elem.sizset];break;}
if(elem.nodeType===1&&!isXML){elem[expando]=doneName;elem.sizset=i;}
if(elem.nodeName.toLowerCase()===cur){match=elem;break;}
elem=elem[dir];}
checkSet[i]=match;}}}
function dirCheck(dir,cur,doneName,checkSet,nodeCheck,isXML){for(var i=0,l=checkSet.length;i<l;i++){var elem=checkSet[i];if(elem){var match=false;elem=elem[dir];while(elem){if(elem[expando]===doneName){match=checkSet[elem.sizset];break;}
if(elem.nodeType===1){if(!isXML){elem[expando]=doneName;elem.sizset=i;}
if(typeof cur!=="string"){if(elem===cur){match=true;break;}}else if(Sizzle.filter(cur,[elem]).length>0){match=elem;break;}}
elem=elem[dir];}
checkSet[i]=match;}}}
if(document.documentElement.contains){Sizzle.contains=function(a,b){return a!==b&&(a.contains?a.contains(b):true);};}else if(document.documentElement.compareDocumentPosition){Sizzle.contains=function(a,b){return!!(a.compareDocumentPosition(b)&16);};}else{Sizzle.contains=function(){return false;};}
Sizzle.isXML=function(elem){var documentElement=(elem?elem.ownerDocument||elem:0).documentElement;return documentElement?documentElement.nodeName!=="HTML":false;};var posProcess=function(selector,context,seed){var match,tmpSet=[],later="",root=context.nodeType?[context]:context;while((match=Expr.match.PSEUDO.exec(selector))){later+=match[0];selector=selector.replace(Expr.match.PSEUDO,"");}
selector=Expr.relative[selector]?selector+"*":selector;for(var i=0,l=root.length;i<l;i++){Sizzle(selector,root[i],tmpSet,seed);}
return Sizzle.filter(later,tmpSet);};Sizzle.attr=jQuery.attr;Sizzle.selectors.attrMap={};jQuery.find=Sizzle;jQuery.expr=Sizzle.selectors;jQuery.expr[":"]=jQuery.expr.filters;jQuery.unique=Sizzle.uniqueSort;jQuery.text=Sizzle.getText;jQuery.isXMLDoc=Sizzle.isXML;jQuery.contains=Sizzle.contains;})();var runtil=/Until$/,rparentsprev=/^(?:parents|prevUntil|prevAll)/,rmultiselector=/,/,isSimple=/^.[^:#\[\.,]*$/,slice=Array.prototype.slice,POS=jQuery.expr.match.globalPOS,guaranteedUnique={children:true,contents:true,next:true,prev:true};jQuery.fn.extend({find:function(selector){var self=this,i,l;if(typeof selector!=="string"){return jQuery(selector).filter(function(){for(i=0,l=self.length;i<l;i++){if(jQuery.contains(self[i],this)){return true;}}});}
var ret=this.pushStack("","find",selector),length,n,r;for(i=0,l=this.length;i<l;i++){length=ret.length;jQuery.find(selector,this[i],ret);if(i>0){for(n=length;n<ret.length;n++){for(r=0;r<length;r++){if(ret[r]===ret[n]){ret.splice(n--,1);break;}}}}}
return ret;},has:function(target){var targets=jQuery(target);return this.filter(function(){for(var i=0,l=targets.length;i<l;i++){if(jQuery.contains(this,targets[i])){return true;}}});},not:function(selector){return this.pushStack(winnow(this,selector,false),"not",selector);},filter:function(selector){return this.pushStack(winnow(this,selector,true),"filter",selector);},is:function(selector){return!!selector&&(typeof selector==="string"?POS.test(selector)?jQuery(selector,this.context).index(this[0])>=0:jQuery.filter(selector,this).length>0:this.filter(selector).length>0);},closest:function(selectors,context){var ret=[],i,l,cur=this[0];if(jQuery.isArray(selectors)){var level=1;while(cur&&cur.ownerDocument&&cur!==context){for(i=0;i<selectors.length;i++){if(jQuery(cur).is(selectors[i])){ret.push({selector:selectors[i],elem:cur,level:level});}}
cur=cur.parentNode;level++;}
return ret;}
var pos=POS.test(selectors)||typeof selectors!=="string"?jQuery(selectors,context||this.context):0;for(i=0,l=this.length;i<l;i++){cur=this[i];while(cur){if(pos?pos.index(cur)>-1:jQuery.find.matchesSelector(cur,selectors)){ret.push(cur);break;}else{cur=cur.parentNode;if(!cur||!cur.ownerDocument||cur===context||cur.nodeType===11){break;}}}}
ret=ret.length>1?jQuery.unique(ret):ret;return this.pushStack(ret,"closest",selectors);},index:function(elem){if(!elem){return(this[0]&&this[0].parentNode)?this.prevAll().length:-1;}
if(typeof elem==="string"){return jQuery.inArray(this[0],jQuery(elem));}
return jQuery.inArray(elem.jquery?elem[0]:elem,this);},add:function(selector,context){var set=typeof selector==="string"?jQuery(selector,context):jQuery.makeArray(selector&&selector.nodeType?[selector]:selector),all=jQuery.merge(this.get(),set);return this.pushStack(isDisconnected(set[0])||isDisconnected(all[0])?all:jQuery.unique(all));},andSelf:function(){return this.add(this.prevObject);}});function isDisconnected(node){return!node||!node.parentNode||node.parentNode.nodeType===11;}
jQuery.each({parent:function(elem){var parent=elem.parentNode;return parent&&parent.nodeType!==11?parent:null;},parents:function(elem){return jQuery.dir(elem,"parentNode");},parentsUntil:function(elem,i,until){return jQuery.dir(elem,"parentNode",until);},next:function(elem){return jQuery.nth(elem,2,"nextSibling");},prev:function(elem){return jQuery.nth(elem,2,"previousSibling");},nextAll:function(elem){return jQuery.dir(elem,"nextSibling");},prevAll:function(elem){return jQuery.dir(elem,"previousSibling");},nextUntil:function(elem,i,until){return jQuery.dir(elem,"nextSibling",until);},prevUntil:function(elem,i,until){return jQuery.dir(elem,"previousSibling",until);},siblings:function(elem){return jQuery.sibling((elem.parentNode||{}).firstChild,elem);},children:function(elem){return jQuery.sibling(elem.firstChild);},contents:function(elem){return jQuery.nodeName(elem,"iframe")?elem.contentDocument||elem.contentWindow.document:jQuery.makeArray(elem.childNodes);}},function(name,fn){jQuery.fn[name]=function(until,selector){var ret=jQuery.map(this,fn,until);if(!runtil.test(name)){selector=until;}
if(selector&&typeof selector==="string"){ret=jQuery.filter(selector,ret);}
ret=this.length>1&&!guaranteedUnique[name]?jQuery.unique(ret):ret;if((this.length>1||rmultiselector.test(selector))&&rparentsprev.test(name)){ret=ret.reverse();}
return this.pushStack(ret,name,slice.call(arguments).join(","));};});jQuery.extend({filter:function(expr,elems,not){if(not){expr=":not("+expr+")";}
return elems.length===1?jQuery.find.matchesSelector(elems[0],expr)?[elems[0]]:[]:jQuery.find.matches(expr,elems);},dir:function(elem,dir,until){var matched=[],cur=elem[dir];while(cur&&cur.nodeType!==9&&(until===undefined||cur.nodeType!==1||!jQuery(cur).is(until))){if(cur.nodeType===1){matched.push(cur);}
cur=cur[dir];}
return matched;},nth:function(cur,result,dir,elem){result=result||1;var num=0;for(;cur;cur=cur[dir]){if(cur.nodeType===1&&++num===result){break;}}
return cur;},sibling:function(n,elem){var r=[];for(;n;n=n.nextSibling){if(n.nodeType===1&&n!==elem){r.push(n);}}
return r;}});function winnow(elements,qualifier,keep){qualifier=qualifier||0;if(jQuery.isFunction(qualifier)){return jQuery.grep(elements,function(elem,i){var retVal=!!qualifier.call(elem,i,elem);return retVal===keep;});}else if(qualifier.nodeType){return jQuery.grep(elements,function(elem,i){return(elem===qualifier)===keep;});}else if(typeof qualifier==="string"){var filtered=jQuery.grep(elements,function(elem){return elem.nodeType===1;});if(isSimple.test(qualifier)){return jQuery.filter(qualifier,filtered,!keep);}else{qualifier=jQuery.filter(qualifier,filtered);}}
return jQuery.grep(elements,function(elem,i){return(jQuery.inArray(elem,qualifier)>=0)===keep;});}
function createSafeFragment(document){var list=nodeNames.split("|"),safeFrag=document.createDocumentFragment();if(safeFrag.createElement){while(list.length){safeFrag.createElement(list.pop());}}
return safeFrag;}
var nodeNames="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|"+"header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",rinlinejQuery=/ jQuery\d+="(?:\d+|null)"/g,rleadingWhitespace=/^\s+/,rxhtmlTag=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,rtagName=/<([\w:]+)/,rtbody=/<tbody/i,rhtml=/<|&#?\w+;/,rnoInnerhtml=/<(?:script|style)/i,rnocache=/<(?:script|object|embed|option|style)/i,rnoshimcache=new RegExp("<(?:"+nodeNames+")[\\s/>]","i"),rchecked=/checked\s*(?:[^=]|=\s*.checked.)/i,rscriptType=/\/(java|ecma)script/i,rcleanScript=/^\s*<!(?:\[CDATA\[|\-\-)/,wrapMap={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},safeFragment=createSafeFragment(document);wrapMap.optgroup=wrapMap.option;wrapMap.tbody=wrapMap.tfoot=wrapMap.colgroup=wrapMap.caption=wrapMap.thead;wrapMap.th=wrapMap.td;if(!jQuery.support.htmlSerialize){wrapMap._default=[1,"div<div>","</div>"];}
jQuery.fn.extend({text:function(value){return jQuery.access(this,function(value){return value===undefined?jQuery.text(this):this.empty().append((this[0]&&this[0].ownerDocument||document).createTextNode(value));},null,value,arguments.length);},wrapAll:function(html){if(jQuery.isFunction(html)){return this.each(function(i){jQuery(this).wrapAll(html.call(this,i));});}
if(this[0]){var wrap=jQuery(html,this[0].ownerDocument).eq(0).clone(true);if(this[0].parentNode){wrap.insertBefore(this[0]);}
wrap.map(function(){var elem=this;while(elem.firstChild&&elem.firstChild.nodeType===1){elem=elem.firstChild;}
return elem;}).append(this);}
return this;},wrapInner:function(html){if(jQuery.isFunction(html)){return this.each(function(i){jQuery(this).wrapInner(html.call(this,i));});}
return this.each(function(){var self=jQuery(this),contents=self.contents();if(contents.length){contents.wrapAll(html);}else{self.append(html);}});},wrap:function(html){var isFunction=jQuery.isFunction(html);return this.each(function(i){jQuery(this).wrapAll(isFunction?html.call(this,i):html);});},unwrap:function(){return this.parent().each(function(){if(!jQuery.nodeName(this,"body")){jQuery(this).replaceWith(this.childNodes);}}).end();},append:function(){return this.domManip(arguments,true,function(elem){if(this.nodeType===1){this.appendChild(elem);}});},prepend:function(){return this.domManip(arguments,true,function(elem){if(this.nodeType===1){this.insertBefore(elem,this.firstChild);}});},before:function(){if(this[0]&&this[0].parentNode){return this.domManip(arguments,false,function(elem){this.parentNode.insertBefore(elem,this);});}else if(arguments.length){var set=jQuery.clean(arguments);set.push.apply(set,this.toArray());return this.pushStack(set,"before",arguments);}},after:function(){if(this[0]&&this[0].parentNode){return this.domManip(arguments,false,function(elem){this.parentNode.insertBefore(elem,this.nextSibling);});}else if(arguments.length){var set=this.pushStack(this,"after",arguments);set.push.apply(set,jQuery.clean(arguments));return set;}},remove:function(selector,keepData){for(var i=0,elem;(elem=this[i])!=null;i++){if(!selector||jQuery.filter(selector,[elem]).length){if(!keepData&&elem.nodeType===1){jQuery.cleanData(elem.getElementsByTagName("*"));jQuery.cleanData([elem]);}
if(elem.parentNode){elem.parentNode.removeChild(elem);}}}
return this;},empty:function(){for(var i=0,elem;(elem=this[i])!=null;i++){if(elem.nodeType===1){jQuery.cleanData(elem.getElementsByTagName("*"));}
while(elem.firstChild){elem.removeChild(elem.firstChild);}}
return this;},clone:function(dataAndEvents,deepDataAndEvents){dataAndEvents=dataAndEvents==null?false:dataAndEvents;deepDataAndEvents=deepDataAndEvents==null?dataAndEvents:deepDataAndEvents;return this.map(function(){return jQuery.clone(this,dataAndEvents,deepDataAndEvents);});},html:function(value){return jQuery.access(this,function(value){var elem=this[0]||{},i=0,l=this.length;if(value===undefined){return elem.nodeType===1?elem.innerHTML.replace(rinlinejQuery,""):null;}
if(typeof value==="string"&&!rnoInnerhtml.test(value)&&(jQuery.support.leadingWhitespace||!rleadingWhitespace.test(value))&&!wrapMap[(rtagName.exec(value)||["",""])[1].toLowerCase()]){value=value.replace(rxhtmlTag,"<$1></$2>");try{for(;i<l;i++){elem=this[i]||{};if(elem.nodeType===1){jQuery.cleanData(elem.getElementsByTagName("*"));elem.innerHTML=value;}}
elem=0;}catch(e){}}
if(elem){this.empty().append(value);}},null,value,arguments.length);},replaceWith:function(value){if(this[0]&&this[0].parentNode){if(jQuery.isFunction(value)){return this.each(function(i){var self=jQuery(this),old=self.html();self.replaceWith(value.call(this,i,old));});}
if(typeof value!=="string"){value=jQuery(value).detach();}
return this.each(function(){var next=this.nextSibling,parent=this.parentNode;jQuery(this).remove();if(next){jQuery(next).before(value);}else{jQuery(parent).append(value);}});}else{return this.length?this.pushStack(jQuery(jQuery.isFunction(value)?value():value),"replaceWith",value):this;}},detach:function(selector){return this.remove(selector,true);},domManip:function(args,table,callback){var results,first,fragment,parent,value=args[0],scripts=[];if(!jQuery.support.checkClone&&arguments.length===3&&typeof value==="string"&&rchecked.test(value)){return this.each(function(){jQuery(this).domManip(args,table,callback,true);});}
if(jQuery.isFunction(value)){return this.each(function(i){var self=jQuery(this);args[0]=value.call(this,i,table?self.html():undefined);self.domManip(args,table,callback);});}
if(this[0]){parent=value&&value.parentNode;if(jQuery.support.parentNode&&parent&&parent.nodeType===11&&parent.childNodes.length===this.length){results={fragment:parent};}else{results=jQuery.buildFragment(args,this,scripts);}
fragment=results.fragment;if(fragment.childNodes.length===1){first=fragment=fragment.firstChild;}else{first=fragment.firstChild;}
if(first){table=table&&jQuery.nodeName(first,"tr");for(var i=0,l=this.length,lastIndex=l-1;i<l;i++){callback.call(table?root(this[i],first):this[i],results.cacheable||(l>1&&i<lastIndex)?jQuery.clone(fragment,true,true):fragment);}}
if(scripts.length){jQuery.each(scripts,function(i,elem){if(elem.src){jQuery.ajax({type:"GET",global:false,url:elem.src,async:false,dataType:"script"});}else{jQuery.globalEval((elem.text||elem.textContent||elem.innerHTML||"").replace(rcleanScript,"/*$0*/"));}
if(elem.parentNode){elem.parentNode.removeChild(elem);}});}}
return this;}});function root(elem,cur){return jQuery.nodeName(elem,"table")?(elem.getElementsByTagName("tbody")[0]||elem.appendChild(elem.ownerDocument.createElement("tbody"))):elem;}
function cloneCopyEvent(src,dest){if(dest.nodeType!==1||!jQuery.hasData(src)){return;}
var type,i,l,oldData=jQuery._data(src),curData=jQuery._data(dest,oldData),events=oldData.events;if(events){delete curData.handle;curData.events={};for(type in events){for(i=0,l=events[type].length;i<l;i++){jQuery.event.add(dest,type,events[type][i]);}}}
if(curData.data){curData.data=jQuery.extend({},curData.data);}}
function cloneFixAttributes(src,dest){var nodeName;if(dest.nodeType!==1){return;}
if(dest.clearAttributes){dest.clearAttributes();}
if(dest.mergeAttributes){dest.mergeAttributes(src);}
nodeName=dest.nodeName.toLowerCase();if(nodeName==="object"){dest.outerHTML=src.outerHTML;}else if(nodeName==="input"&&(src.type==="checkbox"||src.type==="radio")){if(src.checked){dest.defaultChecked=dest.checked=src.checked;}
if(dest.value!==src.value){dest.value=src.value;}}else if(nodeName==="option"){dest.selected=src.defaultSelected;}else if(nodeName==="input"||nodeName==="textarea"){dest.defaultValue=src.defaultValue;}else if(nodeName==="script"&&dest.text!==src.text){dest.text=src.text;}
dest.removeAttribute(jQuery.expando);dest.removeAttribute("_submit_attached");dest.removeAttribute("_change_attached");}
jQuery.buildFragment=function(args,nodes,scripts){var fragment,cacheable,cacheresults,doc,first=args[0];if(nodes&&nodes[0]){doc=nodes[0].ownerDocument||nodes[0];}
if(!doc.createDocumentFragment){doc=document;}
if(args.length===1&&typeof first==="string"&&first.length<512&&doc===document&&first.charAt(0)==="<"&&!rnocache.test(first)&&(jQuery.support.checkClone||!rchecked.test(first))&&(jQuery.support.html5Clone||!rnoshimcache.test(first))){cacheable=true;cacheresults=jQuery.fragments[first];if(cacheresults&&cacheresults!==1){fragment=cacheresults;}}
if(!fragment){fragment=doc.createDocumentFragment();jQuery.clean(args,doc,fragment,scripts);}
if(cacheable){jQuery.fragments[first]=cacheresults?fragment:1;}
return{fragment:fragment,cacheable:cacheable};};jQuery.fragments={};jQuery.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(name,original){jQuery.fn[name]=function(selector){var ret=[],insert=jQuery(selector),parent=this.length===1&&this[0].parentNode;if(parent&&parent.nodeType===11&&parent.childNodes.length===1&&insert.length===1){insert[original](this[0]);return this;}else{for(var i=0,l=insert.length;i<l;i++){var elems=(i>0?this.clone(true):this).get();jQuery(insert[i])[original](elems);ret=ret.concat(elems);}
return this.pushStack(ret,name,insert.selector);}};});function getAll(elem){if(typeof elem.getElementsByTagName!=="undefined"){return elem.getElementsByTagName("*");}else if(typeof elem.querySelectorAll!=="undefined"){return elem.querySelectorAll("*");}else{return[];}}
function fixDefaultChecked(elem){if(elem.type==="checkbox"||elem.type==="radio"){elem.defaultChecked=elem.checked;}}
function findInputs(elem){var nodeName=(elem.nodeName||"").toLowerCase();if(nodeName==="input"){fixDefaultChecked(elem);}else if(nodeName!=="script"&&typeof elem.getElementsByTagName!=="undefined"){jQuery.grep(elem.getElementsByTagName("input"),fixDefaultChecked);}}
function shimCloneNode(elem){var div=document.createElement("div");safeFragment.appendChild(div);div.innerHTML=elem.outerHTML;return div.firstChild;}
jQuery.extend({clone:function(elem,dataAndEvents,deepDataAndEvents){var srcElements,destElements,i,clone=jQuery.support.html5Clone||jQuery.isXMLDoc(elem)||!rnoshimcache.test("<"+elem.nodeName+">")?elem.cloneNode(true):shimCloneNode(elem);if((!jQuery.support.noCloneEvent||!jQuery.support.noCloneChecked)&&(elem.nodeType===1||elem.nodeType===11)&&!jQuery.isXMLDoc(elem)){cloneFixAttributes(elem,clone);srcElements=getAll(elem);destElements=getAll(clone);for(i=0;srcElements[i];++i){if(destElements[i]){cloneFixAttributes(srcElements[i],destElements[i]);}}}
if(dataAndEvents){cloneCopyEvent(elem,clone);if(deepDataAndEvents){srcElements=getAll(elem);destElements=getAll(clone);for(i=0;srcElements[i];++i){cloneCopyEvent(srcElements[i],destElements[i]);}}}
srcElements=destElements=null;return clone;},clean:function(elems,context,fragment,scripts){var checkScriptType,script,j,ret=[];context=context||document;if(typeof context.createElement==="undefined"){context=context.ownerDocument||context[0]&&context[0].ownerDocument||document;}
for(var i=0,elem;(elem=elems[i])!=null;i++){if(typeof elem==="number"){elem+="";}
if(!elem){continue;}
if(typeof elem==="string"){if(!rhtml.test(elem)){elem=context.createTextNode(elem);}else{elem=elem.replace(rxhtmlTag,"<$1></$2>");var tag=(rtagName.exec(elem)||["",""])[1].toLowerCase(),wrap=wrapMap[tag]||wrapMap._default,depth=wrap[0],div=context.createElement("div"),safeChildNodes=safeFragment.childNodes,remove;if(context===document){safeFragment.appendChild(div);}else{createSafeFragment(context).appendChild(div);}
div.innerHTML=wrap[1]+elem+wrap[2];while(depth--){div=div.lastChild;}
if(!jQuery.support.tbody){var hasBody=rtbody.test(elem),tbody=tag==="table"&&!hasBody?div.firstChild&&div.firstChild.childNodes:wrap[1]==="<table>"&&!hasBody?div.childNodes:[];for(j=tbody.length-1;j>=0;--j){if(jQuery.nodeName(tbody[j],"tbody")&&!tbody[j].childNodes.length){tbody[j].parentNode.removeChild(tbody[j]);}}}
if(!jQuery.support.leadingWhitespace&&rleadingWhitespace.test(elem)){div.insertBefore(context.createTextNode(rleadingWhitespace.exec(elem)[0]),div.firstChild);}
elem=div.childNodes;if(div){div.parentNode.removeChild(div);if(safeChildNodes.length>0){remove=safeChildNodes[safeChildNodes.length-1];if(remove&&remove.parentNode){remove.parentNode.removeChild(remove);}}}}}
var len;if(!jQuery.support.appendChecked){if(elem[0]&&typeof(len=elem.length)==="number"){for(j=0;j<len;j++){findInputs(elem[j]);}}else{findInputs(elem);}}
if(elem.nodeType){ret.push(elem);}else{ret=jQuery.merge(ret,elem);}}
if(fragment){checkScriptType=function(elem){return!elem.type||rscriptType.test(elem.type);};for(i=0;ret[i];i++){script=ret[i];if(scripts&&jQuery.nodeName(script,"script")&&(!script.type||rscriptType.test(script.type))){scripts.push(script.parentNode?script.parentNode.removeChild(script):script);}else{if(script.nodeType===1){var jsTags=jQuery.grep(script.getElementsByTagName("script"),checkScriptType);ret.splice.apply(ret,[i+1,0].concat(jsTags));}
fragment.appendChild(script);}}}
return ret;},cleanData:function(elems){var data,id,cache=jQuery.cache,special=jQuery.event.special,deleteExpando=jQuery.support.deleteExpando;for(var i=0,elem;(elem=elems[i])!=null;i++){if(elem.nodeName&&jQuery.noData[elem.nodeName.toLowerCase()]){continue;}
id=elem[jQuery.expando];if(id){data=cache[id];if(data&&data.events){for(var type in data.events){if(special[type]){jQuery.event.remove(elem,type);}else{jQuery.removeEvent(elem,type,data.handle);}}
if(data.handle){data.handle.elem=null;}}
if(deleteExpando){delete elem[jQuery.expando];}else if(elem.removeAttribute){elem.removeAttribute(jQuery.expando);}
delete cache[id];}}}});var ralpha=/alpha\([^)]*\)/i,ropacity=/opacity=([^)]*)/,rupper=/([A-Z]|^ms)/g,rnum=/^[\-+]?(?:\d*\.)?\d+$/i,rnumnonpx=/^-?(?:\d*\.)?\d+(?!px)[^\d\s]+$/i,rrelNum=/^([\-+])=([\-+.\de]+)/,rmargin=/^margin/,cssShow={position:"absolute",visibility:"hidden",display:"block"},cssExpand=["Top","Right","Bottom","Left"],curCSS,getComputedStyle,currentStyle;jQuery.fn.css=function(name,value){return jQuery.access(this,function(elem,name,value){return value!==undefined?jQuery.style(elem,name,value):jQuery.css(elem,name);},name,value,arguments.length>1);};jQuery.extend({cssHooks:{opacity:{get:function(elem,computed){if(computed){var ret=curCSS(elem,"opacity");return ret===""?"1":ret;}else{return elem.style.opacity;}}}},cssNumber:{"fillOpacity":true,"fontWeight":true,"lineHeight":true,"opacity":true,"orphans":true,"widows":true,"zIndex":true,"zoom":true},cssProps:{"float":jQuery.support.cssFloat?"cssFloat":"styleFloat"},style:function(elem,name,value,extra){if(!elem||elem.nodeType===3||elem.nodeType===8||!elem.style){return;}
var ret,type,origName=jQuery.camelCase(name),style=elem.style,hooks=jQuery.cssHooks[origName];name=jQuery.cssProps[origName]||origName;if(value!==undefined){type=typeof value;if(type==="string"&&(ret=rrelNum.exec(value))){value=(+(ret[1]+1)*+ret[2])+parseFloat(jQuery.css(elem,name));type="number";}
if(value==null||type==="number"&&isNaN(value)){return;}
if(type==="number"&&!jQuery.cssNumber[origName]){value+="px";}
if(!hooks||!("set"in hooks)||(value=hooks.set(elem,value))!==undefined){try{style[name]=value;}catch(e){}}}else{if(hooks&&"get"in hooks&&(ret=hooks.get(elem,false,extra))!==undefined){return ret;}
return style[name];}},css:function(elem,name,extra){var ret,hooks;name=jQuery.camelCase(name);hooks=jQuery.cssHooks[name];name=jQuery.cssProps[name]||name;if(name==="cssFloat"){name="float";}
if(hooks&&"get"in hooks&&(ret=hooks.get(elem,true,extra))!==undefined){return ret;}else if(curCSS){return curCSS(elem,name);}},swap:function(elem,options,callback){var old={},ret,name;for(name in options){old[name]=elem.style[name];elem.style[name]=options[name];}
ret=callback.call(elem);for(name in options){elem.style[name]=old[name];}
return ret;}});jQuery.curCSS=jQuery.css;if(document.defaultView&&document.defaultView.getComputedStyle){getComputedStyle=function(elem,name){var ret,defaultView,computedStyle,width,style=elem.style;name=name.replace(rupper,"-$1").toLowerCase();if((defaultView=elem.ownerDocument.defaultView)&&(computedStyle=defaultView.getComputedStyle(elem,null))){ret=computedStyle.getPropertyValue(name);if(ret===""&&!jQuery.contains(elem.ownerDocument.documentElement,elem)){ret=jQuery.style(elem,name);}}
if(!jQuery.support.pixelMargin&&computedStyle&&rmargin.test(name)&&rnumnonpx.test(ret)){width=style.width;style.width=ret;ret=computedStyle.width;style.width=width;}
return ret;};}
if(document.documentElement.currentStyle){currentStyle=function(elem,name){var left,rsLeft,uncomputed,ret=elem.currentStyle&&elem.currentStyle[name],style=elem.style;if(ret==null&&style&&(uncomputed=style[name])){ret=uncomputed;}
if(rnumnonpx.test(ret)){left=style.left;rsLeft=elem.runtimeStyle&&elem.runtimeStyle.left;if(rsLeft){elem.runtimeStyle.left=elem.currentStyle.left;}
style.left=name==="fontSize"?"1em":ret;ret=style.pixelLeft+"px";style.left=left;if(rsLeft){elem.runtimeStyle.left=rsLeft;}}
return ret===""?"auto":ret;};}
curCSS=getComputedStyle||currentStyle;function getWidthOrHeight(elem,name,extra){var val=name==="width"?elem.offsetWidth:elem.offsetHeight,i=name==="width"?1:0,len=4;if(val>0){if(extra!=="border"){for(;i<len;i+=2){if(!extra){val-=parseFloat(jQuery.css(elem,"padding"+cssExpand[i]))||0;}
if(extra==="margin"){val+=parseFloat(jQuery.css(elem,extra+cssExpand[i]))||0;}else{val-=parseFloat(jQuery.css(elem,"border"+cssExpand[i]+"Width"))||0;}}}
return val+"px";}
val=curCSS(elem,name);if(val<0||val==null){val=elem.style[name];}
if(rnumnonpx.test(val)){return val;}
val=parseFloat(val)||0;if(extra){for(;i<len;i+=2){val+=parseFloat(jQuery.css(elem,"padding"+cssExpand[i]))||0;if(extra!=="padding"){val+=parseFloat(jQuery.css(elem,"border"+cssExpand[i]+"Width"))||0;}
if(extra==="margin"){val+=parseFloat(jQuery.css(elem,extra+cssExpand[i]))||0;}}}
return val+"px";}
jQuery.each(["height","width"],function(i,name){jQuery.cssHooks[name]={get:function(elem,computed,extra){if(computed){if(elem.offsetWidth!==0){return getWidthOrHeight(elem,name,extra);}else{return jQuery.swap(elem,cssShow,function(){return getWidthOrHeight(elem,name,extra);});}}},set:function(elem,value){return rnum.test(value)?value+"px":value;}};});if(!jQuery.support.opacity){jQuery.cssHooks.opacity={get:function(elem,computed){return ropacity.test((computed&&elem.currentStyle?elem.currentStyle.filter:elem.style.filter)||"")?(parseFloat(RegExp.$1)/100)+"":computed?"1":"";},set:function(elem,value){var style=elem.style,currentStyle=elem.currentStyle,opacity=jQuery.isNumeric(value)?"alpha(opacity="+value*100+")":"",filter=currentStyle&&currentStyle.filter||style.filter||"";style.zoom=1;if(value>=1&&jQuery.trim(filter.replace(ralpha,""))===""){style.removeAttribute("filter");if(currentStyle&&!currentStyle.filter){return;}}
style.filter=ralpha.test(filter)?filter.replace(ralpha,opacity):filter+" "+opacity;}};}
jQuery(function(){if(!jQuery.support.reliableMarginRight){jQuery.cssHooks.marginRight={get:function(elem,computed){return jQuery.swap(elem,{"display":"inline-block"},function(){if(computed){return curCSS(elem,"margin-right");}else{return elem.style.marginRight;}});}};}});if(jQuery.expr&&jQuery.expr.filters){jQuery.expr.filters.hidden=function(elem){var width=elem.offsetWidth,height=elem.offsetHeight;return(width===0&&height===0)||(!jQuery.support.reliableHiddenOffsets&&((elem.style&&elem.style.display)||jQuery.css(elem,"display"))==="none");};jQuery.expr.filters.visible=function(elem){return!jQuery.expr.filters.hidden(elem);};}
jQuery.each({margin:"",padding:"",border:"Width"},function(prefix,suffix){jQuery.cssHooks[prefix+suffix]={expand:function(value){var i,parts=typeof value==="string"?value.split(" "):[value],expanded={};for(i=0;i<4;i++){expanded[prefix+cssExpand[i]+suffix]=parts[i]||parts[i-2]||parts[0];}
return expanded;}};});var r20=/%20/g,rbracket=/\[\]$/,rCRLF=/\r?\n/g,rhash=/#.*$/,rheaders=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,rinput=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,rlocalProtocol=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,rnoContent=/^(?:GET|HEAD)$/,rprotocol=/^\/\//,rquery=/\?/,rscript=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,rselectTextarea=/^(?:select|textarea)/i,rspacesAjax=/\s+/,rts=/([?&])_=[^&]*/,rurl=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/,_load=jQuery.fn.load,prefilters={},transports={},ajaxLocation,ajaxLocParts,allTypes=["*/"]+["*"];try{ajaxLocation=location.href;}catch(e){ajaxLocation=document.createElement("a");ajaxLocation.href="";ajaxLocation=ajaxLocation.href;}
ajaxLocParts=rurl.exec(ajaxLocation.toLowerCase())||[];function addToPrefiltersOrTransports(structure){return function(dataTypeExpression,func){if(typeof dataTypeExpression!=="string"){func=dataTypeExpression;dataTypeExpression="*";}
if(jQuery.isFunction(func)){var dataTypes=dataTypeExpression.toLowerCase().split(rspacesAjax),i=0,length=dataTypes.length,dataType,list,placeBefore;for(;i<length;i++){dataType=dataTypes[i];placeBefore=/^\+/.test(dataType);if(placeBefore){dataType=dataType.substr(1)||"*";}
list=structure[dataType]=structure[dataType]||[];list[placeBefore?"unshift":"push"](func);}}};}
function inspectPrefiltersOrTransports(structure,options,originalOptions,jqXHR,dataType,inspected){dataType=dataType||options.dataTypes[0];inspected=inspected||{};inspected[dataType]=true;var list=structure[dataType],i=0,length=list?list.length:0,executeOnly=(structure===prefilters),selection;for(;i<length&&(executeOnly||!selection);i++){selection=list[i](options,originalOptions,jqXHR);if(typeof selection==="string"){if(!executeOnly||inspected[selection]){selection=undefined;}else{options.dataTypes.unshift(selection);selection=inspectPrefiltersOrTransports(structure,options,originalOptions,jqXHR,selection,inspected);}}}
if((executeOnly||!selection)&&!inspected["*"]){selection=inspectPrefiltersOrTransports(structure,options,originalOptions,jqXHR,"*",inspected);}
return selection;}
function ajaxExtend(target,src){var key,deep,flatOptions=jQuery.ajaxSettings.flatOptions||{};for(key in src){if(src[key]!==undefined){(flatOptions[key]?target:(deep||(deep={})))[key]=src[key];}}
if(deep){jQuery.extend(true,target,deep);}}
jQuery.fn.extend({load:function(url,params,callback){if(typeof url!=="string"&&_load){return _load.apply(this,arguments);}else if(!this.length){return this;}
var off=url.indexOf(" ");if(off>=0){var selector=url.slice(off,url.length);url=url.slice(0,off);}
var type="GET";if(params){if(jQuery.isFunction(params)){callback=params;params=undefined;}else if(typeof params==="object"){params=jQuery.param(params,jQuery.ajaxSettings.traditional);type="POST";}}
var self=this;jQuery.ajax({url:url,type:type,dataType:"html",data:params,complete:function(jqXHR,status,responseText){responseText=jqXHR.responseText;if(jqXHR.isResolved()){jqXHR.done(function(r){responseText=r;});self.html(selector?jQuery("<div>").append(responseText.replace(rscript,"")).find(selector):responseText);}
if(callback){self.each(callback,[responseText,status,jqXHR]);}}});return this;},serialize:function(){return jQuery.param(this.serializeArray());},serializeArray:function(){return this.map(function(){return this.elements?jQuery.makeArray(this.elements):this;}).filter(function(){return this.name&&!this.disabled&&(this.checked||rselectTextarea.test(this.nodeName)||rinput.test(this.type));}).map(function(i,elem){var val=jQuery(this).val();return val==null?null:jQuery.isArray(val)?jQuery.map(val,function(val,i){return{name:elem.name,value:val.replace(rCRLF,"\r\n")};}):{name:elem.name,value:val.replace(rCRLF,"\r\n")};}).get();}});jQuery.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(i,o){jQuery.fn[o]=function(f){return this.on(o,f);};});jQuery.each(["get","post"],function(i,method){jQuery[method]=function(url,data,callback,type){if(jQuery.isFunction(data)){type=type||callback;callback=data;data=undefined;}
return jQuery.ajax({type:method,url:url,data:data,success:callback,dataType:type});};});jQuery.extend({getScript:function(url,callback){return jQuery.get(url,undefined,callback,"script");},getJSON:function(url,data,callback){return jQuery.get(url,data,callback,"json");},ajaxSetup:function(target,settings){if(settings){ajaxExtend(target,jQuery.ajaxSettings);}else{settings=target;target=jQuery.ajaxSettings;}
ajaxExtend(target,settings);return target;},ajaxSettings:{url:ajaxLocation,isLocal:rlocalProtocol.test(ajaxLocParts[1]),global:true,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:true,async:true,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":allTypes},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":window.String,"text html":true,"text json":jQuery.parseJSON,"text xml":jQuery.parseXML},flatOptions:{context:true,url:true}},ajaxPrefilter:addToPrefiltersOrTransports(prefilters),ajaxTransport:addToPrefiltersOrTransports(transports),ajax:function(url,options){if(typeof url==="object"){options=url;url=undefined;}
options=options||{};var
s=jQuery.ajaxSetup({},options),callbackContext=s.context||s,globalEventContext=callbackContext!==s&&(callbackContext.nodeType||callbackContext instanceof jQuery)?jQuery(callbackContext):jQuery.event,deferred=jQuery.Deferred(),completeDeferred=jQuery.Callbacks("once memory"),statusCode=s.statusCode||{},ifModifiedKey,requestHeaders={},requestHeadersNames={},responseHeadersString,responseHeaders,transport,timeoutTimer,parts,state=0,fireGlobals,i,jqXHR={readyState:0,setRequestHeader:function(name,value){if(!state){var lname=name.toLowerCase();name=requestHeadersNames[lname]=requestHeadersNames[lname]||name;requestHeaders[name]=value;}
return this;},getAllResponseHeaders:function(){return state===2?responseHeadersString:null;},getResponseHeader:function(key){var match;if(state===2){if(!responseHeaders){responseHeaders={};while((match=rheaders.exec(responseHeadersString))){responseHeaders[match[1].toLowerCase()]=match[2];}}
match=responseHeaders[key.toLowerCase()];}
return match===undefined?null:match;},overrideMimeType:function(type){if(!state){s.mimeType=type;}
return this;},abort:function(statusText){statusText=statusText||"abort";if(transport){transport.abort(statusText);}
done(0,statusText);return this;}};function done(status,nativeStatusText,responses,headers){if(state===2){return;}
state=2;if(timeoutTimer){clearTimeout(timeoutTimer);}
transport=undefined;responseHeadersString=headers||"";jqXHR.readyState=status>0?4:0;var isSuccess,success,error,statusText=nativeStatusText,response=responses?ajaxHandleResponses(s,jqXHR,responses):undefined,lastModified,etag;if(status>=200&&status<300||status===304){if(s.ifModified){if((lastModified=jqXHR.getResponseHeader("Last-Modified"))){jQuery.lastModified[ifModifiedKey]=lastModified;}
if((etag=jqXHR.getResponseHeader("Etag"))){jQuery.etag[ifModifiedKey]=etag;}}
if(status===304){statusText="notmodified";isSuccess=true;}else{try{success=ajaxConvert(s,response);statusText="success";isSuccess=true;}catch(e){statusText="parsererror";error=e;}}}else{error=statusText;if(!statusText||status){statusText="error";if(status<0){status=0;}}}
jqXHR.status=status;jqXHR.statusText=""+(nativeStatusText||statusText);if(isSuccess){deferred.resolveWith(callbackContext,[success,statusText,jqXHR]);}else{deferred.rejectWith(callbackContext,[jqXHR,statusText,error]);}
jqXHR.statusCode(statusCode);statusCode=undefined;if(fireGlobals){globalEventContext.trigger("ajax"+(isSuccess?"Success":"Error"),[jqXHR,s,isSuccess?success:error]);}
completeDeferred.fireWith(callbackContext,[jqXHR,statusText]);if(fireGlobals){globalEventContext.trigger("ajaxComplete",[jqXHR,s]);if(!(--jQuery.active)){jQuery.event.trigger("ajaxStop");}}}
deferred.promise(jqXHR);jqXHR.success=jqXHR.done;jqXHR.error=jqXHR.fail;jqXHR.complete=completeDeferred.add;jqXHR.statusCode=function(map){if(map){var tmp;if(state<2){for(tmp in map){statusCode[tmp]=[statusCode[tmp],map[tmp]];}}else{tmp=map[jqXHR.status];jqXHR.then(tmp,tmp);}}
return this;};s.url=((url||s.url)+"").replace(rhash,"").replace(rprotocol,ajaxLocParts[1]+"//");s.dataTypes=jQuery.trim(s.dataType||"*").toLowerCase().split(rspacesAjax);if(s.crossDomain==null){parts=rurl.exec(s.url.toLowerCase());s.crossDomain=!!(parts&&(parts[1]!=ajaxLocParts[1]||parts[2]!=ajaxLocParts[2]||(parts[3]||(parts[1]==="http:"?80:443))!=(ajaxLocParts[3]||(ajaxLocParts[1]==="http:"?80:443))));}
if(s.data&&s.processData&&typeof s.data!=="string"){s.data=jQuery.param(s.data,s.traditional);}
inspectPrefiltersOrTransports(prefilters,s,options,jqXHR);if(state===2){return false;}
fireGlobals=s.global;s.type=s.type.toUpperCase();s.hasContent=!rnoContent.test(s.type);if(fireGlobals&&jQuery.active++===0){jQuery.event.trigger("ajaxStart");}
if(!s.hasContent){if(s.data){s.url+=(rquery.test(s.url)?"&":"?")+s.data;delete s.data;}
ifModifiedKey=s.url;if(s.cache===false){var ts=jQuery.now(),ret=s.url.replace(rts,"$1_="+ts);s.url=ret+((ret===s.url)?(rquery.test(s.url)?"&":"?")+"_="+ts:"");}}
if(s.data&&s.hasContent&&s.contentType!==false||options.contentType){jqXHR.setRequestHeader("Content-Type",s.contentType);}
if(s.ifModified){ifModifiedKey=ifModifiedKey||s.url;if(jQuery.lastModified[ifModifiedKey]){jqXHR.setRequestHeader("If-Modified-Since",jQuery.lastModified[ifModifiedKey]);}
if(jQuery.etag[ifModifiedKey]){jqXHR.setRequestHeader("If-None-Match",jQuery.etag[ifModifiedKey]);}}
jqXHR.setRequestHeader("Accept",s.dataTypes[0]&&s.accepts[s.dataTypes[0]]?s.accepts[s.dataTypes[0]]+(s.dataTypes[0]!=="*"?", "+allTypes+"; q=0.01":""):s.accepts["*"]);for(i in s.headers){jqXHR.setRequestHeader(i,s.headers[i]);}
if(s.beforeSend&&(s.beforeSend.call(callbackContext,jqXHR,s)===false||state===2)){jqXHR.abort();return false;}
for(i in{success:1,error:1,complete:1}){jqXHR[i](s[i]);}
transport=inspectPrefiltersOrTransports(transports,s,options,jqXHR);if(!transport){done(-1,"No Transport");}else{jqXHR.readyState=1;if(fireGlobals){globalEventContext.trigger("ajaxSend",[jqXHR,s]);}
if(s.async&&s.timeout>0){timeoutTimer=setTimeout(function(){jqXHR.abort("timeout");},s.timeout);}
try{state=1;transport.send(requestHeaders,done);}catch(e){if(state<2){done(-1,e);}else{throw e;}}}
return jqXHR;},param:function(a,traditional){var s=[],add=function(key,value){value=jQuery.isFunction(value)?value():value;s[s.length]=encodeURIComponent(key)+"="+encodeURIComponent(value);};if(traditional===undefined){traditional=jQuery.ajaxSettings.traditional;}
if(jQuery.isArray(a)||(a.jquery&&!jQuery.isPlainObject(a))){jQuery.each(a,function(){add(this.name,this.value);});}else{for(var prefix in a){buildParams(prefix,a[prefix],traditional,add);}}
return s.join("&").replace(r20,"+");}});function buildParams(prefix,obj,traditional,add){if(jQuery.isArray(obj)){jQuery.each(obj,function(i,v){if(traditional||rbracket.test(prefix)){add(prefix,v);}else{buildParams(prefix+"["+(typeof v==="object"?i:"")+"]",v,traditional,add);}});}else if(!traditional&&jQuery.type(obj)==="object"){for(var name in obj){buildParams(prefix+"["+name+"]",obj[name],traditional,add);}}else{add(prefix,obj);}}
jQuery.extend({active:0,lastModified:{},etag:{}});function ajaxHandleResponses(s,jqXHR,responses){var contents=s.contents,dataTypes=s.dataTypes,responseFields=s.responseFields,ct,type,finalDataType,firstDataType;for(type in responseFields){if(type in responses){jqXHR[responseFields[type]]=responses[type];}}
while(dataTypes[0]==="*"){dataTypes.shift();if(ct===undefined){ct=s.mimeType||jqXHR.getResponseHeader("content-type");}}
if(ct){for(type in contents){if(contents[type]&&contents[type].test(ct)){dataTypes.unshift(type);break;}}}
if(dataTypes[0]in responses){finalDataType=dataTypes[0];}else{for(type in responses){if(!dataTypes[0]||s.converters[type+" "+dataTypes[0]]){finalDataType=type;break;}
if(!firstDataType){firstDataType=type;}}
finalDataType=finalDataType||firstDataType;}
if(finalDataType){if(finalDataType!==dataTypes[0]){dataTypes.unshift(finalDataType);}
return responses[finalDataType];}}
function ajaxConvert(s,response){if(s.dataFilter){response=s.dataFilter(response,s.dataType);}
var dataTypes=s.dataTypes,converters={},i,key,length=dataTypes.length,tmp,current=dataTypes[0],prev,conversion,conv,conv1,conv2;for(i=1;i<length;i++){if(i===1){for(key in s.converters){if(typeof key==="string"){converters[key.toLowerCase()]=s.converters[key];}}}
prev=current;current=dataTypes[i];if(current==="*"){current=prev;}else if(prev!=="*"&&prev!==current){conversion=prev+" "+current;conv=converters[conversion]||converters["* "+current];if(!conv){conv2=undefined;for(conv1 in converters){tmp=conv1.split(" ");if(tmp[0]===prev||tmp[0]==="*"){conv2=converters[tmp[1]+" "+current];if(conv2){conv1=converters[conv1];if(conv1===true){conv=conv2;}else if(conv2===true){conv=conv1;}
break;}}}}
if(!(conv||conv2)){jQuery.error("No conversion from "+conversion.replace(" "," to "));}
if(conv!==true){response=conv?conv(response):conv2(conv1(response));}}}
return response;}
var jsc=jQuery.now(),jsre=/(\=)\?(&|$)|\?\?/i;jQuery.ajaxSetup({jsonp:"callback",jsonpCallback:function(){return jQuery.expando+"_"+(jsc++);}});jQuery.ajaxPrefilter("json jsonp",function(s,originalSettings,jqXHR){var inspectData=(typeof s.data==="string")&&/^application\/x\-www\-form\-urlencoded/.test(s.contentType);if(s.dataTypes[0]==="jsonp"||s.jsonp!==false&&(jsre.test(s.url)||inspectData&&jsre.test(s.data))){var responseContainer,jsonpCallback=s.jsonpCallback=jQuery.isFunction(s.jsonpCallback)?s.jsonpCallback():s.jsonpCallback,previous=window[jsonpCallback],url=s.url,data=s.data,replace="$1"+jsonpCallback+"$2";if(s.jsonp!==false){url=url.replace(jsre,replace);if(s.url===url){if(inspectData){data=data.replace(jsre,replace);}
if(s.data===data){url+=(/\?/.test(url)?"&":"?")+s.jsonp+"="+jsonpCallback;}}}
s.url=url;s.data=data;window[jsonpCallback]=function(response){responseContainer=[response];};jqXHR.always(function(){window[jsonpCallback]=previous;if(responseContainer&&jQuery.isFunction(previous)){window[jsonpCallback](responseContainer[0]);}});s.converters["script json"]=function(){if(!responseContainer){jQuery.error(jsonpCallback+" was not called");}
return responseContainer[0];};s.dataTypes[0]="json";return"script";}});jQuery.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(text){jQuery.globalEval(text);return text;}}});jQuery.ajaxPrefilter("script",function(s){if(s.cache===undefined){s.cache=false;}
if(s.crossDomain){s.type="GET";s.global=false;}});jQuery.ajaxTransport("script",function(s){if(s.crossDomain){var script,head=document.head||document.getElementsByTagName("head")[0]||document.documentElement;return{send:function(_,callback){script=document.createElement("script");script.async="async";if(s.scriptCharset){script.charset=s.scriptCharset;}
script.src=s.url;script.onload=script.onreadystatechange=function(_,isAbort){if(isAbort||!script.readyState||/loaded|complete/.test(script.readyState)){script.onload=script.onreadystatechange=null;if(head&&script.parentNode){head.removeChild(script);}
script=undefined;if(!isAbort){callback(200,"success");}}};head.insertBefore(script,head.firstChild);},abort:function(){if(script){script.onload(0,1);}}};}});var
xhrOnUnloadAbort=window.ActiveXObject?function(){for(var key in xhrCallbacks){xhrCallbacks[key](0,1);}}:false,xhrId=0,xhrCallbacks;function createStandardXHR(){try{return new window.XMLHttpRequest();}catch(e){}}
function createActiveXHR(){try{return new window.ActiveXObject("Microsoft.XMLHTTP");}catch(e){}}
jQuery.ajaxSettings.xhr=window.ActiveXObject?function(){return!this.isLocal&&createStandardXHR()||createActiveXHR();}:createStandardXHR;(function(xhr){jQuery.extend(jQuery.support,{ajax:!!xhr,cors:!!xhr&&("withCredentials"in xhr)});})(jQuery.ajaxSettings.xhr());if(jQuery.support.ajax){jQuery.ajaxTransport(function(s){if(!s.crossDomain||jQuery.support.cors){var callback;return{send:function(headers,complete){var xhr=s.xhr(),handle,i;if(s.username){xhr.open(s.type,s.url,s.async,s.username,s.password);}else{xhr.open(s.type,s.url,s.async);}
if(s.xhrFields){for(i in s.xhrFields){xhr[i]=s.xhrFields[i];}}
if(s.mimeType&&xhr.overrideMimeType){xhr.overrideMimeType(s.mimeType);}
if(!s.crossDomain&&!headers["X-Requested-With"]){headers["X-Requested-With"]="XMLHttpRequest";}
try{for(i in headers){xhr.setRequestHeader(i,headers[i]);}}catch(_){}
xhr.send((s.hasContent&&s.data)||null);callback=function(_,isAbort){var status,statusText,responseHeaders,responses,xml;try{if(callback&&(isAbort||xhr.readyState===4)){callback=undefined;if(handle){xhr.onreadystatechange=jQuery.noop;if(xhrOnUnloadAbort){delete xhrCallbacks[handle];}}
if(isAbort){if(xhr.readyState!==4){xhr.abort();}}else{status=xhr.status;responseHeaders=xhr.getAllResponseHeaders();responses={};xml=xhr.responseXML;if(xml&&xml.documentElement){responses.xml=xml;}
try{responses.text=xhr.responseText;}catch(_){}
try{statusText=xhr.statusText;}catch(e){statusText="";}
if(!status&&s.isLocal&&!s.crossDomain){status=responses.text?200:404;}else if(status===1223){status=204;}}}}catch(firefoxAccessException){if(!isAbort){complete(-1,firefoxAccessException);}}
if(responses){complete(status,statusText,responses,responseHeaders);}};if(!s.async||xhr.readyState===4){callback();}else{handle=++xhrId;if(xhrOnUnloadAbort){if(!xhrCallbacks){xhrCallbacks={};jQuery(window).unload(xhrOnUnloadAbort);}
xhrCallbacks[handle]=callback;}
xhr.onreadystatechange=callback;}},abort:function(){if(callback){callback(0,1);}}};}});}
var elemdisplay={},iframe,iframeDoc,rfxtypes=/^(?:toggle|show|hide)$/,rfxnum=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i,timerId,fxAttrs=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]],fxNow;jQuery.fn.extend({show:function(speed,easing,callback){var elem,display;if(speed||speed===0){return this.animate(genFx("show",3),speed,easing,callback);}else{for(var i=0,j=this.length;i<j;i++){elem=this[i];if(elem.style){display=elem.style.display;if(!jQuery._data(elem,"olddisplay")&&display==="none"){display=elem.style.display="";}
if((display===""&&jQuery.css(elem,"display")==="none")||!jQuery.contains(elem.ownerDocument.documentElement,elem)){jQuery._data(elem,"olddisplay",defaultDisplay(elem.nodeName));}}}
for(i=0;i<j;i++){elem=this[i];if(elem.style){display=elem.style.display;if(display===""||display==="none"){elem.style.display=jQuery._data(elem,"olddisplay")||"";}}}
return this;}},hide:function(speed,easing,callback){if(speed||speed===0){return this.animate(genFx("hide",3),speed,easing,callback);}else{var elem,display,i=0,j=this.length;for(;i<j;i++){elem=this[i];if(elem.style){display=jQuery.css(elem,"display");if(display!=="none"&&!jQuery._data(elem,"olddisplay")){jQuery._data(elem,"olddisplay",display);}}}
for(i=0;i<j;i++){if(this[i].style){this[i].style.display="none";}}
return this;}},_toggle:jQuery.fn.toggle,toggle:function(fn,fn2,callback){var bool=typeof fn==="boolean";if(jQuery.isFunction(fn)&&jQuery.isFunction(fn2)){this._toggle.apply(this,arguments);}else if(fn==null||bool){this.each(function(){var state=bool?fn:jQuery(this).is(":hidden");jQuery(this)[state?"show":"hide"]();});}else{this.animate(genFx("toggle",3),fn,fn2,callback);}
return this;},fadeTo:function(speed,to,easing,callback){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:to},speed,easing,callback);},animate:function(prop,speed,easing,callback){var optall=jQuery.speed(speed,easing,callback);if(jQuery.isEmptyObject(prop)){return this.each(optall.complete,[false]);}
prop=jQuery.extend({},prop);function doAnimation(){if(optall.queue===false){jQuery._mark(this);}
var opt=jQuery.extend({},optall),isElement=this.nodeType===1,hidden=isElement&&jQuery(this).is(":hidden"),name,val,p,e,hooks,replace,parts,start,end,unit,method;opt.animatedProperties={};for(p in prop){name=jQuery.camelCase(p);if(p!==name){prop[name]=prop[p];delete prop[p];}
if((hooks=jQuery.cssHooks[name])&&"expand"in hooks){replace=hooks.expand(prop[name]);delete prop[name];for(p in replace){if(!(p in prop)){prop[p]=replace[p];}}}}
for(name in prop){val=prop[name];if(jQuery.isArray(val)){opt.animatedProperties[name]=val[1];val=prop[name]=val[0];}else{opt.animatedProperties[name]=opt.specialEasing&&opt.specialEasing[name]||opt.easing||'swing';}
if(val==="hide"&&hidden||val==="show"&&!hidden){return opt.complete.call(this);}
if(isElement&&(name==="height"||name==="width")){opt.overflow=[this.style.overflow,this.style.overflowX,this.style.overflowY];if(jQuery.css(this,"display")==="inline"&&jQuery.css(this,"float")==="none"){if(!jQuery.support.inlineBlockNeedsLayout||defaultDisplay(this.nodeName)==="inline"){this.style.display="inline-block";}else{this.style.zoom=1;}}}}
if(opt.overflow!=null){this.style.overflow="hidden";}
for(p in prop){e=new jQuery.fx(this,opt,p);val=prop[p];if(rfxtypes.test(val)){method=jQuery._data(this,"toggle"+p)||(val==="toggle"?hidden?"show":"hide":0);if(method){jQuery._data(this,"toggle"+p,method==="show"?"hide":"show");e[method]();}else{e[val]();}}else{parts=rfxnum.exec(val);start=e.cur();if(parts){end=parseFloat(parts[2]);unit=parts[3]||(jQuery.cssNumber[p]?"":"px");if(unit!=="px"){jQuery.style(this,p,(end||1)+unit);start=((end||1)/e.cur())*start;jQuery.style(this,p,start+unit);}
if(parts[1]){end=((parts[1]==="-="?-1:1)*end)+start;}
e.custom(start,end,unit);}else{e.custom(start,val,"");}}}
return true;}
return optall.queue===false?this.each(doAnimation):this.queue(optall.queue,doAnimation);},stop:function(type,clearQueue,gotoEnd){if(typeof type!=="string"){gotoEnd=clearQueue;clearQueue=type;type=undefined;}
if(clearQueue&&type!==false){this.queue(type||"fx",[]);}
return this.each(function(){var index,hadTimers=false,timers=jQuery.timers,data=jQuery._data(this);if(!gotoEnd){jQuery._unmark(true,this);}
function stopQueue(elem,data,index){var hooks=data[index];jQuery.removeData(elem,index,true);hooks.stop(gotoEnd);}
if(type==null){for(index in data){if(data[index]&&data[index].stop&&index.indexOf(".run")===index.length-4){stopQueue(this,data,index);}}}else if(data[index=type+".run"]&&data[index].stop){stopQueue(this,data,index);}
for(index=timers.length;index--;){if(timers[index].elem===this&&(type==null||timers[index].queue===type)){if(gotoEnd){timers[index](true);}else{timers[index].saveState();}
hadTimers=true;timers.splice(index,1);}}
if(!(gotoEnd&&hadTimers)){jQuery.dequeue(this,type);}});}});function createFxNow(){setTimeout(clearFxNow,0);return(fxNow=jQuery.now());}
function clearFxNow(){fxNow=undefined;}
function genFx(type,num){var obj={};jQuery.each(fxAttrs.concat.apply([],fxAttrs.slice(0,num)),function(){obj[this]=type;});return obj;}
jQuery.each({slideDown:genFx("show",1),slideUp:genFx("hide",1),slideToggle:genFx("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(name,props){jQuery.fn[name]=function(speed,easing,callback){return this.animate(props,speed,easing,callback);};});jQuery.extend({speed:function(speed,easing,fn){var opt=speed&&typeof speed==="object"?jQuery.extend({},speed):{complete:fn||!fn&&easing||jQuery.isFunction(speed)&&speed,duration:speed,easing:fn&&easing||easing&&!jQuery.isFunction(easing)&&easing};opt.duration=jQuery.fx.off?0:typeof opt.duration==="number"?opt.duration:opt.duration in jQuery.fx.speeds?jQuery.fx.speeds[opt.duration]:jQuery.fx.speeds._default;if(opt.queue==null||opt.queue===true){opt.queue="fx";}
opt.old=opt.complete;opt.complete=function(noUnmark){if(jQuery.isFunction(opt.old)){opt.old.call(this);}
if(opt.queue){jQuery.dequeue(this,opt.queue);}else if(noUnmark!==false){jQuery._unmark(this);}};return opt;},easing:{linear:function(p){return p;},swing:function(p){return(-Math.cos(p*Math.PI)/2)+0.5;}},timers:[],fx:function(elem,options,prop){this.options=options;this.elem=elem;this.prop=prop;options.orig=options.orig||{};}});jQuery.fx.prototype={update:function(){if(this.options.step){this.options.step.call(this.elem,this.now,this);}
(jQuery.fx.step[this.prop]||jQuery.fx.step._default)(this);},cur:function(){if(this.elem[this.prop]!=null&&(!this.elem.style||this.elem.style[this.prop]==null)){return this.elem[this.prop];}
var parsed,r=jQuery.css(this.elem,this.prop);return isNaN(parsed=parseFloat(r))?!r||r==="auto"?0:r:parsed;},custom:function(from,to,unit){var self=this,fx=jQuery.fx;this.startTime=fxNow||createFxNow();this.end=to;this.now=this.start=from;this.pos=this.state=0;this.unit=unit||this.unit||(jQuery.cssNumber[this.prop]?"":"px");function t(gotoEnd){return self.step(gotoEnd);}
t.queue=this.options.queue;t.elem=this.elem;t.saveState=function(){if(jQuery._data(self.elem,"fxshow"+self.prop)===undefined){if(self.options.hide){jQuery._data(self.elem,"fxshow"+self.prop,self.start);}else if(self.options.show){jQuery._data(self.elem,"fxshow"+self.prop,self.end);}}};if(t()&&jQuery.timers.push(t)&&!timerId){timerId=setInterval(fx.tick,fx.interval);}},show:function(){var dataShow=jQuery._data(this.elem,"fxshow"+this.prop);this.options.orig[this.prop]=dataShow||jQuery.style(this.elem,this.prop);this.options.show=true;if(dataShow!==undefined){this.custom(this.cur(),dataShow);}else{this.custom(this.prop==="width"||this.prop==="height"?1:0,this.cur());}
jQuery(this.elem).show();},hide:function(){this.options.orig[this.prop]=jQuery._data(this.elem,"fxshow"+this.prop)||jQuery.style(this.elem,this.prop);this.options.hide=true;this.custom(this.cur(),0);},step:function(gotoEnd){var p,n,complete,t=fxNow||createFxNow(),done=true,elem=this.elem,options=this.options;if(gotoEnd||t>=options.duration+this.startTime){this.now=this.end;this.pos=this.state=1;this.update();options.animatedProperties[this.prop]=true;for(p in options.animatedProperties){if(options.animatedProperties[p]!==true){done=false;}}
if(done){if(options.overflow!=null&&!jQuery.support.shrinkWrapBlocks){jQuery.each(["","X","Y"],function(index,value){elem.style["overflow"+value]=options.overflow[index];});}
if(options.hide){jQuery(elem).hide();}
if(options.hide||options.show){for(p in options.animatedProperties){jQuery.style(elem,p,options.orig[p]);jQuery.removeData(elem,"fxshow"+p,true);jQuery.removeData(elem,"toggle"+p,true);}}
complete=options.complete;if(complete){options.complete=false;complete.call(elem);}}
return false;}else{if(options.duration==Infinity){this.now=t;}else{n=t-this.startTime;this.state=n/options.duration;this.pos=jQuery.easing[options.animatedProperties[this.prop]](this.state,n,0,1,options.duration);this.now=this.start+((this.end-this.start)*this.pos);}
this.update();}
return true;}};jQuery.extend(jQuery.fx,{tick:function(){var timer,timers=jQuery.timers,i=0;for(;i<timers.length;i++){timer=timers[i];if(!timer()&&timers[i]===timer){timers.splice(i--,1);}}
if(!timers.length){jQuery.fx.stop();}},interval:13,stop:function(){clearInterval(timerId);timerId=null;},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(fx){jQuery.style(fx.elem,"opacity",fx.now);},_default:function(fx){if(fx.elem.style&&fx.elem.style[fx.prop]!=null){fx.elem.style[fx.prop]=fx.now+fx.unit;}else{fx.elem[fx.prop]=fx.now;}}}});jQuery.each(fxAttrs.concat.apply([],fxAttrs),function(i,prop){if(prop.indexOf("margin")){jQuery.fx.step[prop]=function(fx){jQuery.style(fx.elem,prop,Math.max(0,fx.now)+fx.unit);};}});if(jQuery.expr&&jQuery.expr.filters){jQuery.expr.filters.animated=function(elem){return jQuery.grep(jQuery.timers,function(fn){return elem===fn.elem;}).length;};}
function defaultDisplay(nodeName){if(!elemdisplay[nodeName]){var body=document.body,elem=jQuery("<"+nodeName+">").appendTo(body),display=elem.css("display");elem.remove();if(display==="none"||display===""){if(!iframe){iframe=document.createElement("iframe");iframe.frameBorder=iframe.width=iframe.height=0;}
body.appendChild(iframe);if(!iframeDoc||!iframe.createElement){iframeDoc=(iframe.contentWindow||iframe.contentDocument).document;iframeDoc.write((jQuery.support.boxModel?"<!doctype html>":"")+"<html><body>");iframeDoc.close();}
elem=iframeDoc.createElement(nodeName);iframeDoc.body.appendChild(elem);display=jQuery.css(elem,"display");body.removeChild(iframe);}
elemdisplay[nodeName]=display;}
return elemdisplay[nodeName];}
var getOffset,rtable=/^t(?:able|d|h)$/i,rroot=/^(?:body|html)$/i;if("getBoundingClientRect"in document.documentElement){getOffset=function(elem,doc,docElem,box){try{box=elem.getBoundingClientRect();}catch(e){}
if(!box||!jQuery.contains(docElem,elem)){return box?{top:box.top,left:box.left}:{top:0,left:0};}
var body=doc.body,win=getWindow(doc),clientTop=docElem.clientTop||body.clientTop||0,clientLeft=docElem.clientLeft||body.clientLeft||0,scrollTop=win.pageYOffset||jQuery.support.boxModel&&docElem.scrollTop||body.scrollTop,scrollLeft=win.pageXOffset||jQuery.support.boxModel&&docElem.scrollLeft||body.scrollLeft,top=box.top+scrollTop-clientTop,left=box.left+scrollLeft-clientLeft;return{top:top,left:left};};}else{getOffset=function(elem,doc,docElem){var computedStyle,offsetParent=elem.offsetParent,prevOffsetParent=elem,body=doc.body,defaultView=doc.defaultView,prevComputedStyle=defaultView?defaultView.getComputedStyle(elem,null):elem.currentStyle,top=elem.offsetTop,left=elem.offsetLeft;while((elem=elem.parentNode)&&elem!==body&&elem!==docElem){if(jQuery.support.fixedPosition&&prevComputedStyle.position==="fixed"){break;}
computedStyle=defaultView?defaultView.getComputedStyle(elem,null):elem.currentStyle;top-=elem.scrollTop;left-=elem.scrollLeft;if(elem===offsetParent){top+=elem.offsetTop;left+=elem.offsetLeft;if(jQuery.support.doesNotAddBorder&&!(jQuery.support.doesAddBorderForTableAndCells&&rtable.test(elem.nodeName))){top+=parseFloat(computedStyle.borderTopWidth)||0;left+=parseFloat(computedStyle.borderLeftWidth)||0;}
prevOffsetParent=offsetParent;offsetParent=elem.offsetParent;}
if(jQuery.support.subtractsBorderForOverflowNotVisible&&computedStyle.overflow!=="visible"){top+=parseFloat(computedStyle.borderTopWidth)||0;left+=parseFloat(computedStyle.borderLeftWidth)||0;}
prevComputedStyle=computedStyle;}
if(prevComputedStyle.position==="relative"||prevComputedStyle.position==="static"){top+=body.offsetTop;left+=body.offsetLeft;}
if(jQuery.support.fixedPosition&&prevComputedStyle.position==="fixed"){top+=Math.max(docElem.scrollTop,body.scrollTop);left+=Math.max(docElem.scrollLeft,body.scrollLeft);}
return{top:top,left:left};};}
jQuery.fn.offset=function(options){if(arguments.length){return options===undefined?this:this.each(function(i){jQuery.offset.setOffset(this,options,i);});}
var elem=this[0],doc=elem&&elem.ownerDocument;if(!doc){return null;}
if(elem===doc.body){return jQuery.offset.bodyOffset(elem);}
return getOffset(elem,doc,doc.documentElement);};jQuery.offset={bodyOffset:function(body){var top=body.offsetTop,left=body.offsetLeft;if(jQuery.support.doesNotIncludeMarginInBodyOffset){top+=parseFloat(jQuery.css(body,"marginTop"))||0;left+=parseFloat(jQuery.css(body,"marginLeft"))||0;}
return{top:top,left:left};},setOffset:function(elem,options,i){var position=jQuery.css(elem,"position");if(position==="static"){elem.style.position="relative";}
var curElem=jQuery(elem),curOffset=curElem.offset(),curCSSTop=jQuery.css(elem,"top"),curCSSLeft=jQuery.css(elem,"left"),calculatePosition=(position==="absolute"||position==="fixed")&&jQuery.inArray("auto",[curCSSTop,curCSSLeft])>-1,props={},curPosition={},curTop,curLeft;if(calculatePosition){curPosition=curElem.position();curTop=curPosition.top;curLeft=curPosition.left;}else{curTop=parseFloat(curCSSTop)||0;curLeft=parseFloat(curCSSLeft)||0;}
if(jQuery.isFunction(options)){options=options.call(elem,i,curOffset);}
if(options.top!=null){props.top=(options.top-curOffset.top)+curTop;}
if(options.left!=null){props.left=(options.left-curOffset.left)+curLeft;}
if("using"in options){options.using.call(elem,props);}else{curElem.css(props);}}};jQuery.fn.extend({position:function(){if(!this[0]){return null;}
var elem=this[0],offsetParent=this.offsetParent(),offset=this.offset(),parentOffset=rroot.test(offsetParent[0].nodeName)?{top:0,left:0}:offsetParent.offset();offset.top-=parseFloat(jQuery.css(elem,"marginTop"))||0;offset.left-=parseFloat(jQuery.css(elem,"marginLeft"))||0;parentOffset.top+=parseFloat(jQuery.css(offsetParent[0],"borderTopWidth"))||0;parentOffset.left+=parseFloat(jQuery.css(offsetParent[0],"borderLeftWidth"))||0;return{top:offset.top-parentOffset.top,left:offset.left-parentOffset.left};},offsetParent:function(){return this.map(function(){var offsetParent=this.offsetParent||document.body;while(offsetParent&&(!rroot.test(offsetParent.nodeName)&&jQuery.css(offsetParent,"position")==="static")){offsetParent=offsetParent.offsetParent;}
return offsetParent;});}});jQuery.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(method,prop){var top=/Y/.test(prop);jQuery.fn[method]=function(val){return jQuery.access(this,function(elem,method,val){var win=getWindow(elem);if(val===undefined){return win?(prop in win)?win[prop]:jQuery.support.boxModel&&win.document.documentElement[method]||win.document.body[method]:elem[method];}
if(win){win.scrollTo(!top?val:jQuery(win).scrollLeft(),top?val:jQuery(win).scrollTop());}else{elem[method]=val;}},method,val,arguments.length,null);};});function getWindow(elem){return jQuery.isWindow(elem)?elem:elem.nodeType===9?elem.defaultView||elem.parentWindow:false;}
jQuery.each({Height:"height",Width:"width"},function(name,type){var clientProp="client"+name,scrollProp="scroll"+name,offsetProp="offset"+name;jQuery.fn["inner"+name]=function(){var elem=this[0];return elem?elem.style?parseFloat(jQuery.css(elem,type,"padding")):this[type]():null;};jQuery.fn["outer"+name]=function(margin){var elem=this[0];return elem?elem.style?parseFloat(jQuery.css(elem,type,margin?"margin":"border")):this[type]():null;};jQuery.fn[type]=function(value){return jQuery.access(this,function(elem,type,value){var doc,docElemProp,orig,ret;if(jQuery.isWindow(elem)){doc=elem.document;docElemProp=doc.documentElement[clientProp];return jQuery.support.boxModel&&docElemProp||doc.body&&doc.body[clientProp]||docElemProp;}
if(elem.nodeType===9){doc=elem.documentElement;if(doc[clientProp]>=doc[scrollProp]){return doc[clientProp];}
return Math.max(elem.body[scrollProp],doc[scrollProp],elem.body[offsetProp],doc[offsetProp]);}
if(value===undefined){orig=jQuery.css(elem,type);ret=parseFloat(orig);return jQuery.isNumeric(ret)?ret:orig;}
jQuery(elem).css(type,value);},type,value,arguments.length,null);};});window.jQuery=window.$=jQuery;if(typeof define==="function"&&define.amd&&define.amd.jQuery){define("jquery",[],function(){return jQuery;});}})(window);
/* libs/jquery.lazyload.mini.js */
(function($){$.fn.lazyload=function(options){var settings={threshold:0,failurelimit:0,event:"scroll",effect:"show",container:window};if(options){$.extend(settings,options);}
var elements=this;if("scroll"==settings.event){$(settings.container).bind("scroll",function(event){var counter=0;elements.each(function(){if($.abovethetop(this,settings)||$.leftofbegin(this,settings)){}else if(!$.belowthefold(this,settings)&&!$.rightoffold(this,settings)){$(this).trigger("appear");}else{if(counter++>settings.failurelimit){return false;}}});var temp=$.grep(elements,function(element){return!element.loaded;});elements=$(temp);});}
this.each(function(){var self=this;if(undefined==$(self).attr("original")){$(self).attr("original",$(self).attr("src"));}
if("scroll"!=settings.event||undefined==$(self).attr("src")||settings.placeholder==$(self).attr("src")||($.abovethetop(self,settings)||$.leftofbegin(self,settings)||$.belowthefold(self,settings)||$.rightoffold(self,settings))){if(settings.placeholder){$(self).attr("src",settings.placeholder);}else{$(self).removeAttr("src");}
self.loaded=false;}else{self.loaded=true;}
$(self).one("appear",function(){if(!this.loaded){$("<img />").bind("load",function(){$(self).hide().attr("src",$(self).attr("original"))
[settings.effect](settings.effectspeed);self.loaded=true;}).attr("src",$(self).attr("original"));};});if("scroll"!=settings.event){$(self).bind(settings.event,function(event){if(!self.loaded){$(self).trigger("appear");}});}});$(settings.container).trigger(settings.event);return this;};$.belowthefold=function(element,settings){if(settings.container===undefined||settings.container===window){var fold=$(window).height()+$(window).scrollTop();}else{var fold=$(settings.container).offset().top+$(settings.container).height();}
return fold<=$(element).offset().top-settings.threshold;};$.rightoffold=function(element,settings){if(settings.container===undefined||settings.container===window){var fold=$(window).width()+$(window).scrollLeft();}else{var fold=$(settings.container).offset().left+$(settings.container).width();}
return fold<=$(element).offset().left-settings.threshold;};$.abovethetop=function(element,settings){if(settings.container===undefined||settings.container===window){var fold=$(window).scrollTop();}else{var fold=$(settings.container).offset().top;}
return fold>=$(element).offset().top+settings.threshold+$(element).height();};$.leftofbegin=function(element,settings){if(settings.container===undefined||settings.container===window){var fold=$(window).scrollLeft();}else{var fold=$(settings.container).offset().left;}
return fold>=$(element).offset().left+settings.threshold+$(element).width();};$.extend($.expr[':'],{"below-the-fold":"$.belowthefold(a, {threshold : 0, container: window})","above-the-fold":"!$.belowthefold(a, {threshold : 0, container: window})","right-of-fold":"$.rightoffold(a, {threshold : 0, container: window})","left-of-fold":"!$.rightoffold(a, {threshold : 0, container: window})"});})(jQuery);
/* libs/jquery.form.js */
;(function($){$.fn.ajaxSubmit=function(options){if(!this.length){log('ajaxSubmit: skipping submit process - no element selected');return this;}
if(typeof options=='function')
options={success:options};options=$.extend({url:this.attr('action')||window.location.toString(),type:this.attr('method')||'GET'},options||{});var veto={};this.trigger('form-pre-serialize',[this,options,veto]);if(veto.veto){log('ajaxSubmit: submit vetoed via form-pre-serialize trigger');return this;}
if(options.beforeSerialize&&options.beforeSerialize(this,options)===false){log('ajaxSubmit: submit aborted via beforeSerialize callback');return this;}
var a=this.formToArray(options.semantic);if(options.data){options.extraData=options.data;for(var n in options.data){if(options.data[n]instanceof Array){for(var k in options.data[n])
a.push({name:n,value:options.data[n][k]})}
else
a.push({name:n,value:options.data[n]});}}
if(options.beforeSubmit&&options.beforeSubmit(a,this,options)===false){log('ajaxSubmit: submit aborted via beforeSubmit callback');return this;}
this.trigger('form-submit-validate',[a,this,options,veto]);if(veto.veto){log('ajaxSubmit: submit vetoed via form-submit-validate trigger');return this;}
var q=$.param(a);if(options.type.toUpperCase()=='GET'){options.url+=(options.url.indexOf('?')>=0?'&':'?')+q;options.data=null;}
else
options.data=q;var $form=this,callbacks=[];if(options.resetForm)callbacks.push(function(){$form.resetForm();});if(options.clearForm)callbacks.push(function(){$form.clearForm();});if(!options.dataType&&options.target){var oldSuccess=options.success||function(){};callbacks.push(function(data){$(options.target).html(data).each(oldSuccess,arguments);});}
else if(options.success)
callbacks.push(options.success);options.success=function(data,status){for(var i=0,max=callbacks.length;i<max;i++)
callbacks[i].apply(options,[data,status,$form]);};var files=$('input:file',this).fieldValue();var found=false;for(var j=0;j<files.length;j++)
if(files[j])
found=true;if(options.iframe||found){if($.browser.safari&&options.closeKeepAlive)
$.get(options.closeKeepAlive,fileUpload);else
fileUpload();}
else
$.ajax(options);this.trigger('form-submit-notify',[this,options]);return this;function fileUpload(){var form=$form[0];if($(':input[name=submit]',form).length){alert('Error: Form elements must not be named "submit".');return;}
var opts=$.extend({},$.ajaxSettings,options);var s=jQuery.extend(true,{},$.extend(true,{},$.ajaxSettings),opts);var id='jqFormIO'+(new Date().getTime());var $io=$('<iframe id="'+id+'" name="'+id+'" />');var io=$io[0];if($.browser.msie||$.browser.opera)
io.src='javascript:false;document.write("");';$io.css({position:'absolute',top:'-1000px',left:'-1000px'});var xhr={aborted:0,responseText:null,responseXML:null,status:0,statusText:'n/a',getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(){this.aborted=1;$io.attr('src','about:blank');}};var g=opts.global;if(g&&!$.active++)$.event.trigger("ajaxStart");if(g)$.event.trigger("ajaxSend",[xhr,opts]);if(s.beforeSend&&s.beforeSend(xhr,s)===false){s.global&&jQuery.active--;return;}
if(xhr.aborted)
return;var cbInvoked=0;var timedOut=0;var sub=form.clk;if(sub){var n=sub.name;if(n&&!sub.disabled){options.extraData=options.extraData||{};options.extraData[n]=sub.value;if(sub.type=="image"){options.extraData[name+'.x']=form.clk_x;options.extraData[name+'.y']=form.clk_y;}}}
setTimeout(function(){var t=$form.attr('target'),a=$form.attr('action');form.setAttribute('target',id);if(form.getAttribute('method')!='POST')
form.setAttribute('method','POST');if(form.getAttribute('action')!=opts.url)
form.setAttribute('action',opts.url);if(!options.skipEncodingOverride){$form.attr({encoding:'multipart/form-data',enctype:'multipart/form-data'});}
if(opts.timeout)
setTimeout(function(){timedOut=true;cb();},opts.timeout);var extraInputs=[];try{if(options.extraData)
for(var n in options.extraData)
extraInputs.push($('<input type="hidden" name="'+n+'" value="'+options.extraData[n]+'" />').appendTo(form)[0]);$io.appendTo('body');io.attachEvent?io.attachEvent('onload',cb):io.addEventListener('load',cb,false);form.submit();}
finally{form.setAttribute('action',a);t?form.setAttribute('target',t):$form.removeAttr('target');$(extraInputs).remove();}},10);var operaHack=0;function cb(){if(cbInvoked++)return;io.detachEvent?io.detachEvent('onload',cb):io.removeEventListener('load',cb,false);var ok=true;try{if(timedOut)throw'timeout';var data,doc;doc=io.contentWindow?io.contentWindow.document:io.contentDocument?io.contentDocument:io.document;if(doc.body==null&&!operaHack&&$.browser.opera){operaHack=1;cbInvoked--;setTimeout(cb,100);return;}
xhr.responseText=doc.body?doc.body.innerHTML:null;xhr.responseXML=doc.XMLDocument?doc.XMLDocument:doc;xhr.getResponseHeader=function(header){var headers={'content-type':opts.dataType};return headers[header];};if(opts.dataType=='json'||opts.dataType=='script'){var ta=doc.getElementsByTagName('textarea')[0];xhr.responseText=ta?ta.value:xhr.responseText;}
else if(opts.dataType=='xml'&&!xhr.responseXML&&xhr.responseText!=null){xhr.responseXML=toXml(xhr.responseText);}
data=$.httpData(xhr,opts.dataType);}
catch(e){ok=false;$.handleError(opts,xhr,'error',e);}
if(ok){opts.success(data,'success');if(g)$.event.trigger("ajaxSuccess",[xhr,opts]);}
if(g)$.event.trigger("ajaxComplete",[xhr,opts]);if(g&&!--$.active)$.event.trigger("ajaxStop");if(opts.complete)opts.complete(xhr,ok?'success':'error');setTimeout(function(){$io.remove();xhr.responseXML=null;},100);};function toXml(s,doc){if(window.ActiveXObject){doc=new ActiveXObject('Microsoft.XMLDOM');doc.async='false';doc.loadXML(s);}
else
doc=(new DOMParser()).parseFromString(s,'text/xml');return(doc&&doc.documentElement&&doc.documentElement.tagName!='parsererror')?doc:null;};};};$.fn.ajaxForm=function(options){return this.ajaxFormUnbind().bind('submit.form-plugin',function(){$(this).ajaxSubmit(options);return false;}).each(function(){$(":submit,input:image",this).bind('click.form-plugin',function(e){var form=this.form;form.clk=this;if(this.type=='image'){if(e.offsetX!=undefined){form.clk_x=e.offsetX;form.clk_y=e.offsetY;}else if(typeof $.fn.offset=='function'){var offset=$(this).offset();form.clk_x=e.pageX-offset.left;form.clk_y=e.pageY-offset.top;}else{form.clk_x=e.pageX-this.offsetLeft;form.clk_y=e.pageY-this.offsetTop;}}
setTimeout(function(){form.clk=form.clk_x=form.clk_y=null;},10);});});};$.fn.ajaxFormUnbind=function(){this.unbind('submit.form-plugin');return this.each(function(){$(":submit,input:image",this).unbind('click.form-plugin');});};$.fn.formToArray=function(semantic){var a=[];if(this.length==0)return a;var form=this[0];var els=semantic?form.getElementsByTagName('*'):form.elements;if(!els)return a;for(var i=0,max=els.length;i<max;i++){var el=els[i];var n=el.name;if(!n)continue;if(semantic&&form.clk&&el.type=="image"){if(!el.disabled&&form.clk==el)
a.push({name:n+'.x',value:form.clk_x},{name:n+'.y',value:form.clk_y});continue;}
var v=$.fieldValue(el,true);if(v&&v.constructor==Array){for(var j=0,jmax=v.length;j<jmax;j++)
a.push({name:n,value:v[j]});}
else if(v!==null&&typeof v!='undefined')
a.push({name:n,value:v});}
if(!semantic&&form.clk){var inputs=form.getElementsByTagName("input");for(var i=0,max=inputs.length;i<max;i++){var input=inputs[i];var n=input.name;if(n&&!input.disabled&&input.type=="image"&&form.clk==input)
a.push({name:n+'.x',value:form.clk_x},{name:n+'.y',value:form.clk_y});}}
return a;};$.fn.formSerialize=function(semantic){return $.param(this.formToArray(semantic));};$.fn.fieldSerialize=function(successful){var a=[];this.each(function(){var n=this.name;if(!n)return;var v=$.fieldValue(this,successful);if(v&&v.constructor==Array){for(var i=0,max=v.length;i<max;i++)
a.push({name:n,value:v[i]});}
else if(v!==null&&typeof v!='undefined')
a.push({name:this.name,value:v});});return $.param(a);};$.fn.fieldValue=function(successful){for(var val=[],i=0,max=this.length;i<max;i++){var el=this[i];var v=$.fieldValue(el,successful);if(v===null||typeof v=='undefined'||(v.constructor==Array&&!v.length))
continue;v.constructor==Array?$.merge(val,v):val.push(v);}
return val;};$.fieldValue=function(el,successful){var n=el.name,t=el.type,tag=el.tagName.toLowerCase();if(typeof successful=='undefined')successful=true;if(successful&&(!n||el.disabled||t=='reset'||t=='button'||(t=='checkbox'||t=='radio')&&!el.checked||(t=='submit'||t=='image')&&el.form&&el.form.clk!=el||tag=='select'&&el.selectedIndex==-1))
return null;if(tag=='select'){var index=el.selectedIndex;if(index<0)return null;var a=[],ops=el.options;var one=(t=='select-one');var max=(one?index+1:ops.length);for(var i=(one?index:0);i<max;i++){var op=ops[i];if(op.selected){var v=($.browser.msie&&op.attributes&&op.attributes['value']&&!(op.attributes['value'].specified))?op.text:op.value;if(one)return v;a.push(v);}}
return a;}
return el.value;};$.fn.clearForm=function(){return this.each(function(){$('input,select,textarea',this).clearFields();});};$.fn.clearFields=$.fn.clearInputs=function(){return this.each(function(){var t=this.type,tag=this.tagName.toLowerCase();if(t=='text'||t=='password'||tag=='textarea')
this.value='';else if(t=='checkbox'||t=='radio')
this.checked=false;else if(tag=='select')
this.selectedIndex=-1;});};$.fn.resetForm=function(){return this.each(function(){if(typeof this.reset=='function'||(typeof this.reset=='object'&&!this.reset.nodeType))
this.reset();});};$.fn.enable=function(b){if(b==undefined)b=true;return this.each(function(){this.disabled=!b});};$.fn.selected=function(select){if(select==undefined)select=true;return this.each(function(){var t=this.type;if(t=='checkbox'||t=='radio')
this.checked=select;else if(this.tagName.toLowerCase()=='option'){var $sel=$(this).parent('select');if(select&&$sel[0]&&$sel[0].type=='select-one'){$sel.find('option').selected(false);}
this.selected=select;}});};function log(){if($.fn.ajaxSubmit.debug&&window.console&&window.console.log)
window.console.log('[jquery.form] '+Array.prototype.join.call(arguments,''));};})(jQuery);
/* libs/jquery.blockUI.js */
;(function($){if(/1\.(0|1|2)\.(0|1|2)/.test($.fn.jquery)||/^1.1/.test($.fn.jquery)){alert('blockUI requires jQuery v1.2.3 or later!  You are using v'+$.fn.jquery);return;}
$.blockUI=function(opts){install(window,opts);};$.unblockUI=function(opts){remove(window,opts);};$.fn.block=function(opts){return this.each(function(){if($.css(this,'position')=='static')
this.style.position='relative';if($.browser.msie)
this.style.zoom=1;install(this,opts);});};$.fn.unblock=function(opts){return this.each(function(){remove(this,opts);});};$.blockUI.version=2.09;$.blockUI.defaults={message:'<p class="throbber">Please wait...</p>',css:{padding:0,margin:0,width:'30%',top:'40%',left:'35%',textAlign:'left',color:'#000',border:'none',backgroundColor:'transparent',cursor:'wait',opacity:'1'},overlayCSS:{backgroundColor:'#fff',opacity:'0.5'},baseZ:1000,centerX:true,centerY:true,allowBodyStretch:true,constrainTabKey:true,fadeOut:400,focusInput:true,applyPlatformOpacityRules:true,onUnblock:null};var ie6=$.browser.msie&&/MSIE 6.0/.test(navigator.userAgent);var pageBlock=null;var pageBlockEls=[];function install(el,opts){var full=(el==window);var msg=opts&&opts.message!==undefined?opts.message:undefined;opts=$.extend({},$.blockUI.defaults,opts||{});opts.overlayCSS=$.extend({},$.blockUI.defaults.overlayCSS,opts.overlayCSS||{});var css=$.extend({},$.blockUI.defaults.css,opts.css||{});msg=msg===undefined?opts.message:msg;if(full&&pageBlock)
remove(window,{fadeOut:0});if(msg&&typeof msg!='string'&&(msg.parentNode||msg.jquery)){var node=msg.jquery?msg[0]:msg;var data={};$(el).data('blockUI.history',data);data.el=node;data.parent=node.parentNode;data.display=node.style.display;data.position=node.style.position;data.parent.removeChild(node);}
var z=opts.baseZ;var lyr1=($.browser.msie)?$('<iframe class="blockUI" style="z-index:'+z+++';border:none;margin:0;padding:0;position:absolute;width:100%;height:100%;top:0;left:0" src="javascript:false;"></iframe>'):$('<div class="blockUI" style="display:none"></div>');var lyr2=$('<div class="blockUI blockOverlay" style="z-index:'+z+++';cursor:wait;border:none;margin:0;padding:0;width:100%;height:100%;top:0;left:0"></div>');var lyr3=full?$('<div class="blockUI blockMsg blockPage" style="z-index:'+z+';position:fixed"></div>'):$('<div class="blockUI blockMsg blockElement" style="z-index:'+z+';display:none;position:absolute"></div>');if(msg)
lyr3.css(css);if(!opts.applyPlatformOpacityRules||!($.browser.mozilla&&/Linux/.test(navigator.platform)))
lyr2.css(opts.overlayCSS);lyr2.css('position',full?'fixed':'absolute');if($.browser.msie)
lyr1.css('opacity','0.0');$([lyr1[0],lyr2[0],lyr3[0]]).appendTo(full?'body':el);var expr=$.browser.msie&&(!$.boxModel||$('object,embed',full?null:el).length>0);if(ie6||expr){if(full&&opts.allowBodyStretch&&$.boxModel)
$('html,body').css('height','100%');if((ie6||!$.boxModel)&&!full){var t=sz(el,'borderTopWidth'),l=sz(el,'borderLeftWidth');var fixT=t?'(0 - '+t+')':0;var fixL=l?'(0 - '+l+')':0;}
$.each([lyr1,lyr2,lyr3],function(i,o){var s=o[0].style;s.position='absolute';if(i<2){full?s.setExpression('height','document.body.scrollHeight > document.body.offsetHeight ? document.body.scrollHeight : document.body.offsetHeight + "px"'):s.setExpression('height','this.parentNode.offsetHeight + "px"');full?s.setExpression('width','jQuery.boxModel && document.documentElement.clientWidth || document.body.clientWidth + "px"'):s.setExpression('width','this.parentNode.offsetWidth + "px"');if(fixL)s.setExpression('left',fixL);if(fixT)s.setExpression('top',fixT);}
else if(opts.centerY){if(full)s.setExpression('top','(document.documentElement.clientHeight || document.body.clientHeight) / 2 - (this.offsetHeight / 2) + (blah = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "px"');s.marginTop=0;}});}
lyr3.append(msg).show();if(msg&&(msg.jquery||msg.nodeType))
$(msg).show();bind(1,el,opts);if(full){pageBlock=lyr3[0];pageBlockEls=$(':input:enabled:visible',pageBlock);if(opts.focusInput)
setTimeout(focus,20);}
else
center(lyr3[0],opts.centerX,opts.centerY);};function remove(el,opts){var full=el==window;var data=$(el).data('blockUI.history');opts=$.extend({},$.blockUI.defaults,opts||{});bind(0,el,opts);var els=full?$('body').children().filter('.blockUI'):$('.blockUI',el);if(full)
pageBlock=pageBlockEls=null;if(opts.fadeOut){els.fadeOut(opts.fadeOut);setTimeout(function(){reset(els,data,opts,el);},opts.fadeOut);}
else
reset(els,data,opts,el);};function reset(els,data,opts,el){els.each(function(i,o){if(this.parentNode)
this.parentNode.removeChild(this);});if(data&&data.el){data.el.style.display=data.display;data.el.style.position=data.position;data.parent.appendChild(data.el);$(data.el).removeData('blockUI.history');}
if(typeof opts.onUnblock=='function')
opts.onUnblock(el,opts);};function bind(b,el,opts){var full=el==window,$el=$(el);if(!b&&(full&&!pageBlock||!full&&!$el.data('blockUI.isBlocked')))
return;if(!full)
$el.data('blockUI.isBlocked',b);var events='mousedown mouseup keydown keypress click';b?$(document).bind(events,opts,handler):$(document).unbind(events,handler);};function handler(e){if(e.keyCode&&e.keyCode==9){if(pageBlock&&e.data.constrainTabKey){var els=pageBlockEls;var fwd=!e.shiftKey&&e.target==els[els.length-1];var back=e.shiftKey&&e.target==els[0];if(fwd||back){setTimeout(function(){focus(back)},10);return false;}}}
if($(e.target).parents('div.blockMsg').length>0)
return true;return $(e.target).parents().children().filter('div.blockUI').length==0;};function focus(back){if(!pageBlockEls)
return;var e=pageBlockEls[back===true?pageBlockEls.length-1:0];if(e)
e.focus();};function center(el,x,y){var p=el.parentNode,s=el.style;var l=((p.offsetWidth-el.offsetWidth)/2)-sz(p,'borderLeftWidth');var t=((p.offsetHeight-el.offsetHeight)/2)-sz(p,'borderTopWidth');if(x)s.left=l>0?(l+'px'):'0';if(y)s.top=t>0?(t+'px'):'0';};function sz(el,p){return parseInt($.css(el,p))||0;};})(jQuery);
/* libs/jquery.livequery.js */
(function($){$.extend($.fn,{livequery:function(type,fn,fn2){var self=this,q;if($.isFunction(type))
fn2=fn,fn=type,type=undefined;$.each($.livequery.queries,function(i,query){if(self.selector==query.selector&&self.context==query.context&&type==query.type&&(!fn||fn.$lqguid==query.fn.$lqguid)&&(!fn2||fn2.$lqguid==query.fn2.$lqguid))
return(q=query)&&false;});q=q||new $.livequery(this.selector,this.context,type,fn,fn2);q.stopped=false;q.run();return this;},expire:function(type,fn,fn2){var self=this;if($.isFunction(type))
fn2=fn,fn=type,type=undefined;$.each($.livequery.queries,function(i,query){if(self.selector==query.selector&&self.context==query.context&&(!type||type==query.type)&&(!fn||fn.$lqguid==query.fn.$lqguid)&&(!fn2||fn2.$lqguid==query.fn2.$lqguid)&&!this.stopped)
$.livequery.stop(query.id);});return this;}});$.livequery=function(selector,context,type,fn,fn2){this.selector=selector;this.context=context||document;this.type=type;this.fn=fn;this.fn2=fn2;this.elements=[];this.stopped=false;this.id=$.livequery.queries.push(this)-1;fn.$lqguid=fn.$lqguid||$.livequery.guid++;if(fn2)fn2.$lqguid=fn2.$lqguid||$.livequery.guid++;return this;};$.livequery.prototype={stop:function(){var query=this;if(this.type)
this.elements.unbind(this.type,this.fn);else if(this.fn2)
this.elements.each(function(i,el){query.fn2.apply(el);});this.elements=[];this.stopped=true;},run:function(){if(this.stopped)return;var query=this;var oEls=this.elements,els=$(this.selector,this.context),nEls=els.not(oEls);this.elements=els;if(this.type){nEls.bind(this.type,this.fn);if(oEls.length>0)
$.each(oEls,function(i,el){if($.inArray(el,els)<0)
$.event.remove(el,query.type,query.fn);});}
else{nEls.each(function(){query.fn.apply(this);});if(this.fn2&&oEls.length>0)
$.each(oEls,function(i,el){if($.inArray(el,els)<0)
query.fn2.apply(el);});}}};$.extend($.livequery,{guid:0,queries:[],queue:[],running:false,timeout:null,checkQueue:function(){if($.livequery.running&&$.livequery.queue.length){var length=$.livequery.queue.length;while(length--)
$.livequery.queries[$.livequery.queue.shift()].run();}},pause:function(){$.livequery.running=false;},play:function(){$.livequery.running=true;$.livequery.run();},registerPlugin:function(){$.each(arguments,function(i,n){if(!$.fn[n])return;var old=$.fn[n];$.fn[n]=function(){var r=old.apply(this,arguments);$.livequery.run();return r;}});},run:function(id){if(id!=undefined){if($.inArray(id,$.livequery.queue)<0)
$.livequery.queue.push(id);}
else
$.each($.livequery.queries,function(id){if($.inArray(id,$.livequery.queue)<0)
$.livequery.queue.push(id);});if($.livequery.timeout)clearTimeout($.livequery.timeout);$.livequery.timeout=setTimeout($.livequery.checkQueue,20);},stop:function(id){if(id!=undefined)
$.livequery.queries[id].stop();else
$.each($.livequery.queries,function(id){$.livequery.queries[id].stop();});}});$.livequery.registerPlugin('append','prepend','after','before','wrap','attr','removeAttr','addClass','removeClass','toggleClass','empty','remove');$(function(){$.livequery.play();});var init=$.prototype.init;$.prototype.init=function(a,c){var r=init.apply(this,arguments);if(a&&a.selector)
r.context=a.context,r.selector=a.selector;if(typeof a=='string')
r.context=c||document,r.selector=a;return r;};$.prototype.init.prototype=$.prototype;})(jQuery);
/* libs/jquery.metadata.js */
(function($){$.extend({metadata:{defaults:{type:'class',name:'metadata',cre:/({.*})/,single:'metadata'},setType:function(type,name){this.defaults.type=type;this.defaults.name=name;},get:function(elem,opts){var settings=$.extend({},this.defaults,opts);if(!settings.single.length)settings.single='metadata';var data=$.data(elem,settings.single);if(data)return data;data="{}";if(settings.type=="class"){var m=settings.cre.exec(elem.className);if(m)
data=m[1];}else if(settings.type=="elem"){if(!elem.getElementsByTagName)return;var e=elem.getElementsByTagName(settings.name);if(e.length)
data=$.trim(e[0].innerHTML);}else if(elem.getAttribute!=undefined){var attr=elem.getAttribute(settings.name);if(attr)
data=attr;}
if(data.indexOf('{')<0)
data="{"+data+"}";data=eval("("+data+")");$.data(elem,settings.single,data);return data;}}});$.fn.metadata=function(opts){return $.metadata.get(this[0],opts);};})(jQuery);
/* libs/jquery.cookie.js */
jQuery.cookie=function(name,value,options){if(typeof value!='undefined'){options=options||{};if(value===null){value='';options.expires=-1;}
var expires='';if(options.expires&&(typeof options.expires=='number'||options.expires.toUTCString)){var date;if(typeof options.expires=='number'){date=new Date();date.setTime(date.getTime()+(options.expires*24*60*60*1000));}else{date=options.expires;}
expires='; expires='+date.toUTCString();}
var path=options.path?'; path='+(options.path):'';var domain=options.domain?'; domain='+(options.domain):'';var secure=options.secure?'; secure':'';document.cookie=[name,'=',encodeURIComponent(value),expires,path,domain,secure].join('');}else if(typeof name!='undefined'){var cookieValue=null;if(document.cookie&&document.cookie!=''){var cookies=document.cookie.split(';');for(var i=0;i<cookies.length;i++){var cookie=jQuery.trim(cookies[i]);if(cookie.substring(0,name.length+1)==(name+'=')){cookieValue=decodeURIComponent(cookie.substring(name.length+1));break;}}}
return cookieValue;}};
/* libs/jquery.uploader.js */
(function($){$.uploader=function(containerID,settings){this.construct(containerID,settings)};$.extend($.uploader.prototype,{events:new Array(),_eventsQueue:new Array(),_cache:new Array(),_swf:null,_settings:null,construct:function(containerID,settings){settings=settings||{};settings.containerID=containerID
settings.movieID=settings.movieID||('uploader'+(this._cache.length+1));settings.backgroundColor=settings.backgroundColor||'#ffffff';settings.wmode=settings.wmode||'transparent';settings.logging=settings.logging||"0";settings.allowedDomain=settings.allowedDomain||"*";settings.enabled=settings.enabled||"1";settings.multiple=settings.multiple||"1";settings.maxFileSize=settings.maxFileSize||-1;settings.maxQueueSize=settings.maxQueueSize||-1;settings.maxQueueCount=settings.maxQueueCount||-1;settings.maxThreads=settings.maxThreads||"6";settings.autoAdvanceOnCancel=settings.autoAdvanceOnCancel||"1";settings.autoAdvanceOnError=settings.autoAdvanceOnError||"1";if(settings.buttonSkin==''){settings.wmode='transparent';}
this._eventsQueue=this._eventsQueue||[];this._configs=this._configs||{};this._settings=settings;this.events=this.events||{};$.extend(this.events,{uploaderReady:function(){},uploaderFailed:function(){},rollOver:function(){},mouseDown:function(){},mouseUp:function(){},rollOut:function(){},multipleFilesDialogOpened:function(){},multipleFilesDialogClosed:function(args){},multipleFilesDialogCancelled:function(){},singleFileDialogOpened:function(){},singleFileDialogClosed:function(args){},singleFileDialogCancelled:function(){},fileErrorSize:function(args){},fileErrorExtension:function(args){},fileErrorNotFound:function(args){},queueErrorSize:function(args){},queueErrorEmpty:function(args){},queueErrorCount:function(args){},fileAdded:function(args){},fileRemoved:function(args){},queueCleared:function(){},queueStarted:function(){},fileUploadStarted:function(args){},fileUploadProgress:function(args){},fileUploadCancelled:function(args){},fileUploadCompleted:function(args){},fileUploadError:function(args){},fileUploadServerData:function(args){},queueCancelled:function(args){},queueCompleted:function(args){}});var rand=Math.floor(Math.random()*10000);var swfVars=new Array();swfVars['eventHandler']='jQuery.uploader.eventHandler';swfVars['elementID']=this._settings.movieID;if(this._settings.buttonSkin){swfVars['buttonSkin']=this._settings.buttonSkin;}
swfVars['logging']=this._settings.logging;swfVars['allowedDomain']=this._settings.allowedDomain;swfVars['enabled']=this._settings.enabled;swfVars['multiple']=this._settings.multiple;swfVars['maxFileSize']=this._settings.maxFileSize;swfVars['maxQueueSize']=this._settings.maxQueueSize;swfVars['maxQueueCount']=this._settings.maxQueueCount;swfVars['maxThreads']=this._settings.maxThreads;swfVars['autoAdvanceOnCancel']=this._settings.autoAdvanceOnCancel;swfVars['autoAdvanceOnError']=this._settings.autoAdvanceOnError;fVars='';for(var idx in swfVars){if(fVars!='')
fVars+='&';fVars+=idx+'='+swfVars[idx];}
swfHTML=AC_FL_GetContent('codebase','http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,45,0','width','100%','height','100%','menu','false','src',this._settings.swfURL+"?"+rand,'quality','high','bgcolor',this._settings.backgroundColor,'id',this._settings.movieID,'name',this._settings.movieID+'Name','pluginspage','http://www.macromedia.com/go/getflashplayer','movie',this._settings.swfURL+"?"+rand,'flashvars',fVars,'wmode',this._settings.wmode);$('#'+this._settings.containerID)[0].innerHTML=swfHTML;this._swf=$('#'+this._settings.movieID)[0];this._swf.uploader=this;},_queueEvent:function(params){if(typeof this.events[params.type]==="function"){var flashObject=arguments;this._eventsQueue.push(function(){this.events[params.type].apply(this,flashObject);});var self=this;setTimeout(function(){self._executeNextEvent();},0);}},_executeNextEvent:function(){var f=this._eventsQueue?this._eventsQueue.shift():null;if(typeof(f)==="function"){f.apply(this);}},addZero:function(iInput){return(iInput<10)?'0'+iInput:iInput;},getDateTime:function(){var oDate=new Date();var dateTime={y:oDate.getFullYear(),m:(oDate.getMonth()+1),d:oDate.getDate(),h:oDate.getHours(),i:oDate.getMinutes(),s:oDate.getSeconds()};dateTime.date=this.addZero(dateTime.d)+'-'+this.addZero(dateTime.m)+'-'+dateTime.y;dateTime.time=this.addZero(dateTime.h)+':'+this.addZero(dateTime.i)+':'+this.addZero(dateTime.s);return dateTime;},parseTime:function(iInput){iHours=Math.round(iInput/3600);iInput-=(iHours*3600);iMinutes=Math.round(iInput/60);iInput-=(iMinutes*60);iSeconds=Math.round(iInput);return{h:iHours,i:iMinutes,s:iSeconds};},formatTime:function(iInput){var oTime=this.parseTime(iInput);var sTime='';if(iHours>0)
sTime+=this.addZero(oTime.h)+':';sTime+=this.addZero(oTime.i)+':';sTime+=this.addZero(oTime.s);return sTime;},formatNumber:function(number,decimals,dec_point,thousands_sep){var n=number,c=isNaN(decimals=Math.abs(decimals))?2:decimals;var d=dec_point==undefined?".":dec_point;var t=thousands_sep==undefined?",":thousands_sep,s=n<0?"-":"";var i=parseInt(n=Math.abs(+n||0).toFixed(c))+"",j=(j=i.length)>3?j%3:0;return s+(j?i.substr(0,j)+t:"")+i.substr(j).replace(/(\d{3})(?=\d)/g,"$1"+t)+(c?d+Math.abs(n-i).toFixed(c).slice(2):"");},formatSize:function(iInput){if(iInput>=1073741824){iInput=this.formatNumber(iInput/1073741824,2,'.','')+' Gb';}else{if(iInput>=1048576){iInput=this.formatNumber(iInput/1048576,2,'.','')+' Mb';}else{if(iInput>=1024){iInput=this.formatNumber(iInput/1024,2)+' Kb';}else{iInput=this.formatNumber(iInput,0)+' bytes';}}}
return iInput;},setEnabled:function(allow){this._swf.setEnabled(allow?"1":"0");},setLogging:function(allow){this._swf.setLogging(allow?"1":"0");},setMultiple:function(allow){this._swf.setMultiple(allow?"1":"0");},setFilters:function(filters){this._swf.setFilters(filters);},setMaxFileSize:function(maxSize){this._swf.setMaxFileSize(maxSize);},setMaxQueueSize:function(maxSize){this._swf.setMaxQueueSize(maxSize);},setMaxQueueCount:function(maxCount){this._swf.setMaxQueueCount(maxCount);},setMaxThreads:function(maxThreads){this._swf.setMaxThreads(maxThreads);},setAutoAdvanceOnCancel:function(advance){this._swf.setAutoAdvanceOnCancel(advance?"1":"0");},setAutoAdvanceOnError:function(advance){this._swf.setAutoAdvanceOnError(advance?"1":"0");},remove:function(fileID){this._swf.remove(fileID);},cancel:function(fileID){this._swf.cancel(fileID);},upload:function(fileID,uploadScriptURL,method,vars,fieldName){this._swf.upload(fileID,uploadScriptURL,method,vars,fieldName);}});$.uploader.eventHandler=function(elementID,params){if(params.type){var loadedSWF=$('#'+elementID)[0];if(!loadedSWF.uploader){setTimeout(function(){$.uploader.eventHandler(elementID,params);},10);return;}
loadedSWF.uploader._queueEvent(params);}};$.fn.uploader=function(settings){return new $.uploader(this[0].id,settings);};})(jQuery);
/* libs/AC_RunActiveContent.js */
var isIE=(navigator.appVersion.indexOf("MSIE")!=-1)?true:false;var isWin=(navigator.appVersion.toLowerCase().indexOf("win")!=-1)?true:false;var isOpera=(navigator.userAgent.indexOf("Opera")!=-1)?true:false;function AC_Generate(objAttrs,params,embedAttrs){var str='';if(isIE&&isWin&&!isOpera){str+='<object ';for(var i in objAttrs)
str+=i+'="'+objAttrs[i]+'" ';str+='>';for(var i in params)
str+='<param name="'+i+'" value="'+params[i]+'" />';str+='</object>';}else{str+='<embed ';for(var i in embedAttrs)
str+=i+'="'+embedAttrs[i]+'" ';str+='> </embed>';}
return str;}
function AC_AddExtension(src,ext){if(src.indexOf(ext)!=-1)
return src;return(src.indexOf('?')!=-1)?src.replace(/\?/,ext+'?'):src+ext;}
function AC_GetArgs(args,ext,srcParamName,classid,mimeType){var ret=new Object();ret.embedAttrs=new Object();ret.params=new Object();ret.objAttrs=new Object();for(var i=0;i<args.length;i=i+2){var currArg=args[i].toLowerCase();switch(currArg){case"classid":break;case"pluginspage":ret.embedAttrs[args[i]]=args[i+1];break;case"src":case"movie":args[i+1]=AC_AddExtension(args[i+1],ext);ret.embedAttrs["src"]=args[i+1];ret.params[srcParamName]=args[i+1];break;case"onafterupdate":case"onbeforeupdate":case"onblur":case"oncellchange":case"onclick":case"ondblClick":case"ondrag":case"ondragend":case"ondragenter":case"ondragleave":case"ondragover":case"ondrop":case"onfinish":case"onfocus":case"onhelp":case"onmousedown":case"onmouseup":case"onmouseover":case"onmousemove":case"onmouseout":case"onkeypress":case"onkeydown":case"onkeyup":case"onload":case"onlosecapture":case"onpropertychange":case"onreadystatechange":case"onrowsdelete":case"onrowenter":case"onrowexit":case"onrowsinserted":case"onstart":case"onscroll":case"onbeforeeditfocus":case"onactivate":case"onbeforedeactivate":case"ondeactivate":case"type":case"codebase":ret.objAttrs[args[i]]=args[i+1];break;case"id":case"width":case"height":case"align":case"vspace":case"hspace":case"class":case"title":case"accesskey":case"name":case"tabindex":ret.embedAttrs[args[i]]=ret.objAttrs[args[i]]=args[i+1];break;default:ret.embedAttrs[args[i]]=ret.params[args[i]]=args[i+1];}}
ret.objAttrs["classid"]=classid;if(mimeType)
ret.embedAttrs["type"]=mimeType;return ret;}
function AC_FL_GetContent(){var ret=AC_GetArgs(arguments,".swf","movie","clsid:d27cdb6e-ae6d-11cf-96b8-444553540000","application/x-shockwave-flash");return AC_Generate(ret.objAttrs,ret.params,ret.embedAttrs);}
function AC_FL_RunContent(){document.write(AC_FL_GetContent(arguments));}
function AC_SW_GetContent(){var ret=AC_GetArgs(arguments,".dcr","src","clsid:166B1BCA-3F9C-11CF-8075-444553540000",null);return AC_Generate(ret.objAttrs,ret.params,ret.embedAttrs);}
function AC_SW_RunContent(){document.write(AC_SW_GetContent(arguments));}
/* libs/jquery.fuploader.js */
(function($){$('.js-preview-close').livequery('click',function(e){var $this=$(this);preview_movie_id=($this.metadata().id);$('#preview_image'+preview_movie_id).html('');if($('#old_attachment'+preview_movie_id)){$('#old_attachment'+preview_movie_id).val('1');}
return false;});$.fn.fuploader=function(){var $this=$(this);$('.flashUploader',$this).each(function(j){var $this=$(this).parent('.js-uploader');$oUpload=('oUpload'+j);var $oUpload=$(this).uploader({swfURL:__cfg('path_relative')+'flash/jQuery.uploader.swf',buttonSkin:__cfg('path_relative')+'img/jquery_uploader/buttonSkin.png',logging:"1",backendScript:__cfg('path_relative')+$this.metadata().controller+'/flashupload/'+$this.metadata().session,movieID:$this.metadata().movieid,maxFileSize:$this.metadata().filesize,maxQueueSize:$this.metadata().queuefilesize,maxQueueCount:$this.metadata().filecount});this.__uploaderCache=$oUpload;$oUpload.__uploaderRedirectURL=$this.metadata().redirectURL;$oUpload._bakendScript=__cfg('path_relative')+$this.metadata().controller+'/flashupload/'+$this.metadata().session;$oUpload._previewScript=__cfg('path_relative')+$this.metadata().controller+'/thumbnail/'+$this.metadata().session;$oUpload.__movieid=$this.metadata().movieid;$oUpload.__uPreview=$this.metadata().uPreview;jQuery.extend($oUpload.events,{uploaderReady:function(){var _self=this;var $this=jQuery('#'+this._settings.containerID).parent('.js-uploader');if($this.parent().find('.normal-uploader').length){preview_movie_id=(this.__movieid).substring(12);jQuery('#'+this._settings.containerID).before('<div class="uploader-error"></div>');jQuery('#'+this._settings.containerID).before('<div class="wuQ"></div>');jQuery('#'+this._settings.containerID).after('<div class="clearAll" id="'+preview_movie_id+'"><a href="javascript://" class="clear" title="Delete ">&nbsp;</a></div>');jQuery('.wuQ',$this).hide();jQuery('.clearAll',$this).hide();jQuery('.uploader-error',$this).hide();jQuery('.normal-uploader',$this).remove();jQuery('A.clear',$this).click(function(){_self.remove();});this.setFilters([{description:'Files ( '+$this.metadata().filetype+' )',extensions:$this.metadata().filetype}]);}},fileAdded:function(args){var $this=jQuery('#'+this._settings.containerID).parent('.js-uploader');jQuery('.wuQ',$this).show();var _id='';_id=args.fileData.id;var sHTML='';sHTML+='<div class="wuI" id="'+_id+'">';sHTML+='<div class="wuIC">';sHTML+='<div class="wuICPB"><div class="wuICPBF"> 0% </div></div>';sHTML+='</div></div>';var _elem=jQuery(sHTML);jQuery('.wuQ',$this).append(_elem);var _self=this;jQuery('A.file-delete',_elem).click(function(){uploadDelete(jQuery(this),_self)});if(this.__uPreview=='1'){_self.upload('',this._bakendScript);}
_elem=null;},fileRemoved:function(args){jQuery('#'+args.fileData.id).slideUp("fast",function(){jQuery(this).remove();});},fileUploadStarted:function(args){var _id=args.fileData.id;var _self=this;var _elem=jQuery('#'+_id);jQuery('A.file-delete',_elem).disableLink();_elem.addClass('active').animate({height:80},200);jQuery('DIV.wuICPB',_elem).show();jQuery('DIV.wuICPT',_elem).show();},fileUploadProgress:function(args){var _id=args.fileData.id;var _self=this;var _elem=jQuery('#'+_id);jQuery('div.wuICPBF',_elem).css('width',args.fileProgress.progress+'%').html('&nbsp;'+args.fileProgress.progress+'%&nbsp;');jQuery('span.wuICBytesDone',_elem).html(this.formatSize(args.fileProgress.bytesCompleted));jQuery('span.wuICSpeedTime',_elem).html('at '+this.formatSize(args.fileProgress.bytesPerSecond)+'/sec; '+this.formatTime(args.fileProgress.timeRemaining)+' remain');},fileUploadCancelled:function(args){var _id=args.fileData.id;var _self=this;var _elem=jQuery('#'+_id);uploadRestore(_elem,_self,true);},fileUploadCompleted:function(args){var _id=args.fileData.id;var _self=this;var _elem=jQuery('#'+_id);uploadRestore(_elem,_self,false);if(args.queueProgress.filesAdded==args.queueProgress.filesCompleted){}},fileUploadServerData:function(args){var $this=jQuery('#'+this._settings.containerID).parent('.js-uploader');var _id=args.fileData.id;serverData=(args.serverData);preview_movie_id=(this.__movieid).substring(13);if(this.__uPreview=='1'){$splited_info=serverData.split('|');file_id=$splited_info[0];file_desc=$splited_info[1];$('#preview_image'+preview_movie_id).html('<img src="'+this._previewScript+'/'+file_id+'"><input type="hidden" name="data[Attachment]['+preview_movie_id+'][filename]" value="'+file_id+'">');$('#Attachment'+preview_movie_id+'Description').attr('value',file_desc);$('#Attachment'+preview_movie_id+'Description').focus();jQuery('.clearAll',$this).show();jQuery('.clearAll',$this).click(function(){id=$(this).attr('id');removePreview(id);});}},fileUploadError:function(args){var _id=args.fileData.id;var _self=this;var _elem=jQuery('#'+_id);uploadRestore(_elem,_self,false);},queueCleared:function(){var $this=jQuery('#'+this._settings.containerID).parent('.js-uploader');jQuery('.wuQ',$this).hide();jQuery('.clearAll',$this).hide();jQuery('.uploader-error',$this).hide();},queueErrorCount:function(){var $this=jQuery('#'+this._settings.containerID).parent('.js-uploader');jQuery('.uploader-error',$this).show();jQuery('.uploader-error',$this).html('<p class=\'errorMsg\'>You can add maximum of '+this._settings.maxQueueCount+' files in a queue</p>');$('.uploader-error p',$this).flashMsg();},queueErrorSize:function(){var $this=jQuery('#'+this._settings.containerID).parent('.js-uploader');jQuery('.uploader-error',$this).show();jQuery('.uploader-error',$this).html('<p class=\'errorMsg\'>Sorry, exceeds the maximum queue size '+(this._settings.maxFileSize/(1024*1024))+' MB</p>');$('.uploader-error p',$this).flashMsg();},fileErrorSize:function(args){var $this=jQuery('#'+this._settings.containerID).parent('.js-uploader');jQuery('.uploader-error',$this).show();jQuery('.uploader-error',$this).html('<p class=\'errorMsg\'>\''+args.fileData.name+'\' exceeds the maximum allowed size '+(this._settings.maxFileSize/(1024*1024))+' MB</p>');$('.uploader-error p',$this).flashMsg();},fileErrorExtension:function(args){var $this=jQuery('#'+this._settings.containerID).parent('.js-uploader');jQuery('.uploader-error',$this).show();jQuery('.uploader-error',$this).html('<p class=\'errorMsg\'>\''+args.fileData.name+'\' is invalid extension</p>');$('.uploader-error p',$this).flashMsg();}});});};})
(jQuery);jQuery.fn.disableLink=function(fn){return jQuery(this).blur().unbind('click').fadeTo("fast",0.2,(fn?fn:null));};function uploadDelete(_link,_self){var _id=_link.parent().parent().attr('id');jQuery('#'+_id+' A.delete').disableLink();_self.remove(_id);}
function uploadStart(_link,_self){_self.upload(_link.parent().parent().attr('id'),jQuery.uploader.backendScript);}
function uploadRestore(_elem,_self,_allowRemoveOrRetry){if(_allowRemoveOrRetry){jQuery('A.delete',_elem).fadeTo("fast",1.0).click(function(){uploadDelete(jQuery(this),_self)});}
jQuery('DIV.wuICPB',_elem).hide();jQuery('div.wuICPBF',_elem).width(0).html(' 0% ');jQuery('DIV.wuICPT',_elem).hide();_elem.removeClass('active').animate({height:0},200);}
function removePreview(preview_movie_id){$('#preview_image'+preview_movie_id).html('');if($('#old_attachment'+preview_movie_id)){$('#old_attachment'+preview_movie_id).val('1');}
return true;}
/* libs/jquery-ui-1.8.12.custom.min.js */
(function(c,j){function k(a){return!c(a).parents().andSelf().filter(function(){return c.curCSS(this,"visibility")==="hidden"||c.expr.filters.hidden(this)}).length}c.ui=c.ui||{};if(!c.ui.version){c.extend(c.ui,{version:"1.8.12",keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}});c.fn.extend({_focus:c.fn.focus,focus:function(a,b){return typeof a==="number"?this.each(function(){var d=this;setTimeout(function(){c(d).focus();b&&b.call(d)},a)}):this._focus.apply(this,arguments)},scrollParent:function(){var a;a=c.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(c.curCSS(this,"position",1))&&/(auto|scroll)/.test(c.curCSS(this,"overflow",1)+c.curCSS(this,"overflow-y",1)+c.curCSS(this,"overflow-x",1))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(c.curCSS(this,"overflow",1)+c.curCSS(this,"overflow-y",1)+c.curCSS(this,"overflow-x",1))}).eq(0);return/fixed/.test(this.css("position"))||!a.length?c(document):a},zIndex:function(a){if(a!==j)return this.css("zIndex",a);if(this.length){a=c(this[0]);for(var b;a.length&&a[0]!==document;){b=a.css("position");if(b==="absolute"||b==="relative"||b==="fixed"){b=parseInt(a.css("zIndex"),10);if(!isNaN(b)&&b!==0)return b}a=a.parent()}}return 0},disableSelection:function(){return this.bind((c.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(a){a.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}});c.each(["Width","Height"],function(a,b){function d(f,g,l,m){c.each(e,function(){g-=parseFloat(c.curCSS(f,"padding"+this,true))||0;if(l)g-=parseFloat(c.curCSS(f,"border"+this+"Width",true))||0;if(m)g-=parseFloat(c.curCSS(f,"margin"+this,true))||0});return g}var e=b==="Width"?["Left","Right"]:["Top","Bottom"],h=b.toLowerCase(),i={innerWidth:c.fn.innerWidth,innerHeight:c.fn.innerHeight,outerWidth:c.fn.outerWidth,outerHeight:c.fn.outerHeight};c.fn["inner"+b]=function(f){if(f===j)return i["inner"+b].call(this);return this.each(function(){c(this).css(h,d(this,f)+"px")})};c.fn["outer"+b]=function(f,g){if(typeof f!=="number")return i["outer"+b].call(this,f);return this.each(function(){c(this).css(h,d(this,f,true,g)+"px")})}});c.extend(c.expr[":"],{data:function(a,b,d){return!!c.data(a,d[3])},focusable:function(a){var b=a.nodeName.toLowerCase(),d=c.attr(a,"tabindex");if("area"===b){b=a.parentNode;d=b.name;if(!a.href||!d||b.nodeName.toLowerCase()!=="map")return false;a=c("img[usemap=#"+d+"]")[0];return!!a&&k(a)}return(/input|select|textarea|button|object/.test(b)?!a.disabled:"a"==b?a.href||!isNaN(d):!isNaN(d))&&k(a)},tabbable:function(a){var b=c.attr(a,"tabindex");return(isNaN(b)||b>=0)&&c(a).is(":focusable")}});c(function(){var a=document.body,b=a.appendChild(b=document.createElement("div"));c.extend(b.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0});c.support.minHeight=b.offsetHeight===100;c.support.selectstart="onselectstart"in b;a.removeChild(b).style.display="none"});c.extend(c.ui,{plugin:{add:function(a,b,d){a=c.ui[a].prototype;for(var e in d){a.plugins[e]=a.plugins[e]||[];a.plugins[e].push([b,d[e]])}},call:function(a,b,d){if((b=a.plugins[b])&&a.element[0].parentNode)for(var e=0;e<b.length;e++)a.options[b[e][0]]&&b[e][1].apply(a.element,d)}},contains:function(a,b){return document.compareDocumentPosition?a.compareDocumentPosition(b)&16:a!==b&&a.contains(b)},hasScroll:function(a,b){if(c(a).css("overflow")==="hidden")return false;b=b&&b==="left"?"scrollLeft":"scrollTop";var d=false;if(a[b]>0)return true;a[b]=1;d=a[b]>0;a[b]=0;return d},isOverAxis:function(a,b,d){return a>b&&a<b+d},isOver:function(a,b,d,e,h,i){return c.ui.isOverAxis(a,d,h)&&c.ui.isOverAxis(b,e,i)}})}})(jQuery);;(function(b,j){if(b.cleanData){var k=b.cleanData;b.cleanData=function(a){for(var c=0,d;(d=a[c])!=null;c++)b(d).triggerHandler("remove");k(a)}}else{var l=b.fn.remove;b.fn.remove=function(a,c){return this.each(function(){if(!c)if(!a||b.filter(a,[this]).length)b("*",this).add([this]).each(function(){b(this).triggerHandler("remove")});return l.call(b(this),a,c)})}}b.widget=function(a,c,d){var e=a.split(".")[0],f;a=a.split(".")[1];f=e+"-"+a;if(!d){d=c;c=b.Widget}b.expr[":"][f]=function(h){return!!b.data(h,a)};b[e]=b[e]||{};b[e][a]=function(h,g){arguments.length&&this._createWidget(h,g)};c=new c;c.options=b.extend(true,{},c.options);b[e][a].prototype=b.extend(true,c,{namespace:e,widgetName:a,widgetEventPrefix:b[e][a].prototype.widgetEventPrefix||a,widgetBaseClass:f},d);b.widget.bridge(a,b[e][a])};b.widget.bridge=function(a,c){b.fn[a]=function(d){var e=typeof d==="string",f=Array.prototype.slice.call(arguments,1),h=this;d=!e&&f.length?b.extend.apply(null,[true,d].concat(f)):d;if(e&&d.charAt(0)==="_")return h;e?this.each(function(){var g=b.data(this,a),i=g&&b.isFunction(g[d])?g[d].apply(g,f):g;if(i!==g&&i!==j){h=i;return false}}):this.each(function(){var g=b.data(this,a);g?g.option(d||{})._init():b.data(this,a,new c(d,this))});return h}};b.Widget=function(a,c){arguments.length&&this._createWidget(a,c)};b.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:false},_createWidget:function(a,c){b.data(c,this.widgetName,this);this.element=b(c);this.options=b.extend(true,{},this.options,this._getCreateOptions(),a);var d=this;this.element.bind("remove."+this.widgetName,function(){d.destroy()});this._create();this._trigger("create");this._init()},_getCreateOptions:function(){return b.metadata&&b.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName);this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled ui-state-disabled")},widget:function(){return this.element},option:function(a,c){var d=a;if(arguments.length===0)return b.extend({},this.options);if(typeof a==="string"){if(c===j)return this.options[a];d={};d[a]=c}this._setOptions(d);return this},_setOptions:function(a){var c=this;b.each(a,function(d,e){c._setOption(d,e)});return this},_setOption:function(a,c){this.options[a]=c;if(a==="disabled")this.widget()[c?"addClass":"removeClass"](this.widgetBaseClass+"-disabled ui-state-disabled").attr("aria-disabled",c);return this},enable:function(){return this._setOption("disabled",false)},disable:function(){return this._setOption("disabled",true)},_trigger:function(a,c,d){var e=this.options[a];c=b.Event(c);c.type=(a===this.widgetEventPrefix?a:this.widgetEventPrefix+a).toLowerCase();d=d||{};if(c.originalEvent){a=b.event.props.length;for(var f;a;){f=b.event.props[--a];c[f]=c.originalEvent[f]}}this.element.trigger(c,d);return!(b.isFunction(e)&&e.call(this.element[0],c,d)===false||c.isDefaultPrevented())}}})(jQuery);;(function(b){b.widget("ui.mouse",{options:{cancel:":input,option",distance:1,delay:0},_mouseInit:function(){var a=this;this.element.bind("mousedown."+this.widgetName,function(c){return a._mouseDown(c)}).bind("click."+this.widgetName,function(c){if(true===b.data(c.target,a.widgetName+".preventClickEvent")){b.removeData(c.target,a.widgetName+".preventClickEvent");c.stopImmediatePropagation();return false}});this.started=false},_mouseDestroy:function(){this.element.unbind("."+this.widgetName)},_mouseDown:function(a){a.originalEvent=a.originalEvent||{};if(!a.originalEvent.mouseHandled){this._mouseStarted&&this._mouseUp(a);this._mouseDownEvent=a;var c=this,e=a.which==1,f=typeof this.options.cancel=="string"?b(a.target).parents().add(a.target).filter(this.options.cancel).length:false;if(!e||f||!this._mouseCapture(a))return true;this.mouseDelayMet=!this.options.delay;if(!this.mouseDelayMet)this._mouseDelayTimer=setTimeout(function(){c.mouseDelayMet=true},this.options.delay);if(this._mouseDistanceMet(a)&&this._mouseDelayMet(a)){this._mouseStarted=this._mouseStart(a)!==false;if(!this._mouseStarted){a.preventDefault();return true}}true===b.data(a.target,this.widgetName+".preventClickEvent")&&b.removeData(a.target,this.widgetName+".preventClickEvent");this._mouseMoveDelegate=function(d){return c._mouseMove(d)};this._mouseUpDelegate=function(d){return c._mouseUp(d)};b(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate);a.preventDefault();return a.originalEvent.mouseHandled=true}},_mouseMove:function(a){if(b.browser.msie&&!(document.documentMode>=9)&&!a.button)return this._mouseUp(a);if(this._mouseStarted){this._mouseDrag(a);return a.preventDefault()}if(this._mouseDistanceMet(a)&&this._mouseDelayMet(a))(this._mouseStarted=this._mouseStart(this._mouseDownEvent,a)!==false)?this._mouseDrag(a):this._mouseUp(a);return!this._mouseStarted},_mouseUp:function(a){b(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate);if(this._mouseStarted){this._mouseStarted=false;a.target==this._mouseDownEvent.target&&b.data(a.target,this.widgetName+".preventClickEvent",true);this._mouseStop(a)}return false},_mouseDistanceMet:function(a){return Math.max(Math.abs(this._mouseDownEvent.pageX-a.pageX),Math.abs(this._mouseDownEvent.pageY-a.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return true}})})(jQuery);;(function(c){c.ui=c.ui||{};var n=/left|center|right/,o=/top|center|bottom/,t=c.fn.position,u=c.fn.offset;c.fn.position=function(b){if(!b||!b.of)return t.apply(this,arguments);b=c.extend({},b);var a=c(b.of),d=a[0],g=(b.collision||"flip").split(" "),e=b.offset?b.offset.split(" "):[0,0],h,k,j;if(d.nodeType===9){h=a.width();k=a.height();j={top:0,left:0}}else if(d.setTimeout){h=a.width();k=a.height();j={top:a.scrollTop(),left:a.scrollLeft()}}else if(d.preventDefault){b.at="left top";h=k=0;j={top:b.of.pageY,left:b.of.pageX}}else{h=a.outerWidth();k=a.outerHeight();j=a.offset()}c.each(["my","at"],function(){var f=(b[this]||"").split(" ");if(f.length===1)f=n.test(f[0])?f.concat(["center"]):o.test(f[0])?["center"].concat(f):["center","center"];f[0]=n.test(f[0])?f[0]:"center";f[1]=o.test(f[1])?f[1]:"center";b[this]=f});if(g.length===1)g[1]=g[0];e[0]=parseInt(e[0],10)||0;if(e.length===1)e[1]=e[0];e[1]=parseInt(e[1],10)||0;if(b.at[0]==="right")j.left+=h;else if(b.at[0]==="center")j.left+=h/2;if(b.at[1]==="bottom")j.top+=k;else if(b.at[1]==="center")j.top+=k/2;j.left+=e[0];j.top+=e[1];return this.each(function(){var f=c(this),l=f.outerWidth(),m=f.outerHeight(),p=parseInt(c.curCSS(this,"marginLeft",true))||0,q=parseInt(c.curCSS(this,"marginTop",true))||0,v=l+p+(parseInt(c.curCSS(this,"marginRight",true))||0),w=m+q+(parseInt(c.curCSS(this,"marginBottom",true))||0),i=c.extend({},j),r;if(b.my[0]==="right")i.left-=l;else if(b.my[0]==="center")i.left-=l/2;if(b.my[1]==="bottom")i.top-=m;else if(b.my[1]==="center")i.top-=m/2;i.left=Math.round(i.left);i.top=Math.round(i.top);r={left:i.left-p,top:i.top-q};c.each(["left","top"],function(s,x){c.ui.position[g[s]]&&c.ui.position[g[s]][x](i,{targetWidth:h,targetHeight:k,elemWidth:l,elemHeight:m,collisionPosition:r,collisionWidth:v,collisionHeight:w,offset:e,my:b.my,at:b.at})});c.fn.bgiframe&&f.bgiframe();f.offset(c.extend(i,{using:b.using}))})};c.ui.position={fit:{left:function(b,a){var d=c(window);d=a.collisionPosition.left+a.collisionWidth-d.width()-d.scrollLeft();b.left=d>0?b.left-d:Math.max(b.left-a.collisionPosition.left,b.left)},top:function(b,a){var d=c(window);d=a.collisionPosition.top+a.collisionHeight-d.height()-d.scrollTop();b.top=d>0?b.top-d:Math.max(b.top-a.collisionPosition.top,b.top)}},flip:{left:function(b,a){if(a.at[0]!=="center"){var d=c(window);d=a.collisionPosition.left+a.collisionWidth-d.width()-d.scrollLeft();var g=a.my[0]==="left"?-a.elemWidth:a.my[0]==="right"?a.elemWidth:0,e=a.at[0]==="left"?a.targetWidth:-a.targetWidth,h=-2*a.offset[0];b.left+=a.collisionPosition.left<0?g+e+h:d>0?g+e+h:0}},top:function(b,a){if(a.at[1]!=="center"){var d=c(window);d=a.collisionPosition.top+a.collisionHeight-d.height()-d.scrollTop();var g=a.my[1]==="top"?-a.elemHeight:a.my[1]==="bottom"?a.elemHeight:0,e=a.at[1]==="top"?a.targetHeight:-a.targetHeight,h=-2*a.offset[1];b.top+=a.collisionPosition.top<0?g+e+h:d>0?g+e+h:0}}}};if(!c.offset.setOffset){c.offset.setOffset=function(b,a){if(/static/.test(c.curCSS(b,"position")))b.style.position="relative";var d=c(b),g=d.offset(),e=parseInt(c.curCSS(b,"top",true),10)||0,h=parseInt(c.curCSS(b,"left",true),10)||0;g={top:a.top-g.top+e,left:a.left-g.left+h};"using"in a?a.using.call(b,g):d.css(g)};c.fn.offset=function(b){var a=this[0];if(!a||!a.ownerDocument)return null;if(b)return this.each(function(){c.offset.setOffset(this,b)});return u.call(this)}}})(jQuery);;(function(d){var e=0;d.widget("ui.autocomplete",{options:{appendTo:"body",autoFocus:false,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null},pending:0,_create:function(){var a=this,b=this.element[0].ownerDocument,g;this.element.addClass("ui-autocomplete-input").attr("autocomplete","off").attr({role:"textbox","aria-autocomplete":"list","aria-haspopup":"true"}).bind("keydown.autocomplete",function(c){if(!(a.options.disabled||a.element.attr("readonly"))){g=false;var f=d.ui.keyCode;switch(c.keyCode){case f.PAGE_UP:a._move("previousPage",c);break;case f.PAGE_DOWN:a._move("nextPage",c);break;case f.UP:a._move("previous",c);c.preventDefault();break;case f.DOWN:a._move("next",c);c.preventDefault();break;case f.ENTER:case f.NUMPAD_ENTER:if(a.menu.active){g=true;c.preventDefault()}case f.TAB:if(!a.menu.active)return;a.menu.select(c);break;case f.ESCAPE:a.element.val(a.term);a.close(c);break;default:clearTimeout(a.searching);a.searching=setTimeout(function(){if(a.term!=a.element.val()){a.selectedItem=null;a.search(null,c)}},a.options.delay);break}}}).bind("keypress.autocomplete",function(c){if(g){g=false;c.preventDefault()}}).bind("focus.autocomplete",function(){if(!a.options.disabled){a.selectedItem=null;a.previous=a.element.val()}}).bind("blur.autocomplete",function(c){if(!a.options.disabled){clearTimeout(a.searching);a.closing=setTimeout(function(){a.close(c);a._change(c)},150)}});this._initSource();this.response=function(){return a._response.apply(a,arguments)};this.menu=d("<ul></ul>").addClass("ui-autocomplete").appendTo(d(this.options.appendTo||"body",b)[0]).mousedown(function(c){var f=a.menu.element[0];d(c.target).closest(".ui-menu-item").length||setTimeout(function(){d(document).one("mousedown",function(h){h.target!==a.element[0]&&h.target!==f&&!d.ui.contains(f,h.target)&&a.close()})},1);setTimeout(function(){clearTimeout(a.closing)},13)}).menu({focus:function(c,f){f=f.item.data("item.autocomplete");false!==a._trigger("focus",c,{item:f})&&/^key/.test(c.originalEvent.type)&&a.element.val(f.value)},selected:function(c,f){var h=f.item.data("item.autocomplete"),i=a.previous;if(a.element[0]!==b.activeElement){a.element.focus();a.previous=i;setTimeout(function(){a.previous=i;a.selectedItem=h},1)}false!==a._trigger("select",c,{item:h})&&a.element.val(h.value);a.term=a.element.val();a.close(c);a.selectedItem=h},blur:function(){a.menu.element.is(":visible")&&a.element.val()!==a.term&&a.element.val(a.term)}}).zIndex(this.element.zIndex()+1).css({top:0,left:0}).hide().data("menu");d.fn.bgiframe&&this.menu.element.bgiframe()},destroy:function(){this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete").removeAttr("role").removeAttr("aria-autocomplete").removeAttr("aria-haspopup");this.menu.element.remove();d.Widget.prototype.destroy.call(this)},_setOption:function(a,b){d.Widget.prototype._setOption.apply(this,arguments);a==="source"&&this._initSource();if(a==="appendTo")this.menu.element.appendTo(d(b||"body",this.element[0].ownerDocument)[0]);a==="disabled"&&b&&this.xhr&&this.xhr.abort()},_initSource:function(){var a=this,b,g;if(d.isArray(this.options.source)){b=this.options.source;this.source=function(c,f){f(d.ui.autocomplete.filter(b,c.term))}}else if(typeof this.options.source==="string"){g=this.options.source;this.source=function(c,f){a.xhr&&a.xhr.abort();a.xhr=d.ajax({url:g,data:c,dataType:"json",autocompleteRequest:++e,success:function(h){this.autocompleteRequest===e&&f(h)},error:function(){this.autocompleteRequest===e&&f([])}})}}else this.source=this.options.source},search:function(a,b){a=a!=null?a:this.element.val();this.term=this.element.val();if(a.length<this.options.minLength)return this.close(b);clearTimeout(this.closing);if(this._trigger("search",b)!==false)return this._search(a)},_search:function(a){this.pending++;this.element.addClass("ui-autocomplete-loading");this.source({term:a},this.response)},_response:function(a){if(!this.options.disabled&&a&&a.length){a=this._normalize(a);this._suggest(a);this._trigger("open")}else this.close();this.pending--;this.pending||this.element.removeClass("ui-autocomplete-loading")},close:function(a){clearTimeout(this.closing);if(this.menu.element.is(":visible")){this.menu.element.hide();this.menu.deactivate();this._trigger("close",a)}},_change:function(a){this.previous!==this.element.val()&&this._trigger("change",a,{item:this.selectedItem})},_normalize:function(a){if(a.length&&a[0].label&&a[0].value)return a;return d.map(a,function(b){if(typeof b==="string")return{label:b,value:b};return d.extend({label:b.label||b.value,value:b.value||b.label},b)})},_suggest:function(a){var b=this.menu.element.empty().zIndex(this.element.zIndex()+1);this._renderMenu(b,a);this.menu.deactivate();this.menu.refresh();b.show();this._resizeMenu();b.position(d.extend({of:this.element},this.options.position));this.options.autoFocus&&this.menu.next(new d.Event("mouseover"))},_resizeMenu:function(){var a=this.menu.element;a.outerWidth(Math.max(a.width("").outerWidth(),this.element.outerWidth()))},_renderMenu:function(a,b){var g=this;d.each(b,function(c,f){g._renderItem(a,f)})},_renderItem:function(a,b){return d("<li></li>").data("item.autocomplete",b).append(d("<a></a>").text(b.label)).appendTo(a)},_move:function(a,b){if(this.menu.element.is(":visible"))if(this.menu.first()&&/^previous/.test(a)||this.menu.last()&&/^next/.test(a)){this.element.val(this.term);this.menu.deactivate()}else this.menu[a](b);else this.search(null,b)},widget:function(){return this.menu.element}});d.extend(d.ui.autocomplete,{escapeRegex:function(a){return a.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},filter:function(a,b){var g=new RegExp(d.ui.autocomplete.escapeRegex(b),"i");return d.grep(a,function(c){return g.test(c.label||c.value||c)})}})})(jQuery);(function(d){d.widget("ui.menu",{_create:function(){var e=this;this.element.addClass("ui-menu ui-widget ui-widget-content ui-corner-all").attr({role:"listbox","aria-activedescendant":"ui-active-menuitem"}).click(function(a){if(d(a.target).closest(".ui-menu-item a").length){a.preventDefault();e.select(a)}});this.refresh()},refresh:function(){var e=this;this.element.children("li:not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","menuitem").children("a").addClass("ui-corner-all").attr("tabindex",-1).mouseenter(function(a){e.activate(a,d(this).parent())}).mouseleave(function(){e.deactivate()})},activate:function(e,a){this.deactivate();if(this.hasScroll()){var b=a.offset().top-this.element.offset().top,g=this.element.attr("scrollTop"),c=this.element.height();if(b<0)this.element.attr("scrollTop",g+b);else b>=c&&this.element.attr("scrollTop",g+b-c+a.height())}this.active=a.eq(0).children("a").addClass("ui-state-hover").attr("id","ui-active-menuitem").end();this._trigger("focus",e,{item:a})},deactivate:function(){if(this.active){this.active.children("a").removeClass("ui-state-hover").removeAttr("id");this._trigger("blur");this.active=null}},next:function(e){this.move("next",".ui-menu-item:first",e)},previous:function(e){this.move("prev",".ui-menu-item:last",e)},first:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},last:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},move:function(e,a,b){if(this.active){e=this.active[e+"All"](".ui-menu-item").eq(0);e.length?this.activate(b,e):this.activate(b,this.element.children(a))}else this.activate(b,this.element.children(a))},nextPage:function(e){if(this.hasScroll())if(!this.active||this.last())this.activate(e,this.element.children(".ui-menu-item:first"));else{var a=this.active.offset().top,b=this.element.height(),g=this.element.children(".ui-menu-item").filter(function(){var c=d(this).offset().top-a-b+d(this).height();return c<10&&c>-10});g.length||(g=this.element.children(".ui-menu-item:last"));this.activate(e,g)}else this.activate(e,this.element.children(".ui-menu-item").filter(!this.active||this.last()?":first":":last"))},previousPage:function(e){if(this.hasScroll())if(!this.active||this.first())this.activate(e,this.element.children(".ui-menu-item:last"));else{var a=this.active.offset().top,b=this.element.height();result=this.element.children(".ui-menu-item").filter(function(){var g=d(this).offset().top-a+b-d(this).height();return g<10&&g>-10});result.length||(result=this.element.children(".ui-menu-item:first"));this.activate(e,result)}else this.activate(e,this.element.children(".ui-menu-item").filter(!this.active||this.first()?":last":":first"))},hasScroll:function(){return this.element.height()<this.element.attr("scrollHeight")},select:function(e){this._trigger("selected",e,{item:this.active})}})})(jQuery);;(function(d){d.widget("ui.slider",d.ui.mouse,{widgetEventPrefix:"slide",options:{animate:false,distance:0,max:100,min:0,orientation:"horizontal",range:false,step:1,value:0,values:null},_create:function(){var b=this,a=this.options;this._mouseSliding=this._keySliding=false;this._animateOff=true;this._handleIndex=null;this._detectOrientation();this._mouseInit();this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all");a.disabled&&this.element.addClass("ui-slider-disabled ui-disabled");this.range=d([]);if(a.range){if(a.range===true){this.range=d("<div></div>");if(!a.values)a.values=[this._valueMin(),this._valueMin()];if(a.values.length&&a.values.length!==2)a.values=[a.values[0],a.values[0]]}else this.range=d("<div></div>");this.range.appendTo(this.element).addClass("ui-slider-range");if(a.range==="min"||a.range==="max")this.range.addClass("ui-slider-range-"+a.range);this.range.addClass("ui-widget-header")}d(".ui-slider-handle",this.element).length===0&&d("<a href='#'></a>").appendTo(this.element).addClass("ui-slider-handle");if(a.values&&a.values.length)for(;d(".ui-slider-handle",this.element).length<a.values.length;)d("<a href='#'></a>").appendTo(this.element).addClass("ui-slider-handle");this.handles=d(".ui-slider-handle",this.element).addClass("ui-state-default ui-corner-all");this.handle=this.handles.eq(0);this.handles.add(this.range).filter("a").click(function(c){c.preventDefault()}).hover(function(){a.disabled||d(this).addClass("ui-state-hover")},function(){d(this).removeClass("ui-state-hover")}).focus(function(){if(a.disabled)d(this).blur();else{d(".ui-slider .ui-state-focus").removeClass("ui-state-focus");d(this).addClass("ui-state-focus")}}).blur(function(){d(this).removeClass("ui-state-focus")});this.handles.each(function(c){d(this).data("index.ui-slider-handle",c)});this.handles.keydown(function(c){var e=true,f=d(this).data("index.ui-slider-handle"),h,g,i;if(!b.options.disabled){switch(c.keyCode){case d.ui.keyCode.HOME:case d.ui.keyCode.END:case d.ui.keyCode.PAGE_UP:case d.ui.keyCode.PAGE_DOWN:case d.ui.keyCode.UP:case d.ui.keyCode.RIGHT:case d.ui.keyCode.DOWN:case d.ui.keyCode.LEFT:e=false;if(!b._keySliding){b._keySliding=true;d(this).addClass("ui-state-active");h=b._start(c,f);if(h===false)return}break}i=b.options.step;h=b.options.values&&b.options.values.length?(g=b.values(f)):(g=b.value());switch(c.keyCode){case d.ui.keyCode.HOME:g=b._valueMin();break;case d.ui.keyCode.END:g=b._valueMax();break;case d.ui.keyCode.PAGE_UP:g=b._trimAlignValue(h+(b._valueMax()-b._valueMin())/5);break;case d.ui.keyCode.PAGE_DOWN:g=b._trimAlignValue(h-(b._valueMax()-b._valueMin())/5);break;case d.ui.keyCode.UP:case d.ui.keyCode.RIGHT:if(h===b._valueMax())return;g=b._trimAlignValue(h+i);break;case d.ui.keyCode.DOWN:case d.ui.keyCode.LEFT:if(h===b._valueMin())return;g=b._trimAlignValue(h-i);break}b._slide(c,f,g);return e}}).keyup(function(c){var e=d(this).data("index.ui-slider-handle");if(b._keySliding){b._keySliding=false;b._stop(c,e);b._change(c,e);d(this).removeClass("ui-state-active")}});this._refreshValue();this._animateOff=false},destroy:function(){this.handles.remove();this.range.remove();this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-slider-disabled ui-widget ui-widget-content ui-corner-all").removeData("slider").unbind(".slider");this._mouseDestroy();return this},_mouseCapture:function(b){var a=this.options,c,e,f,h,g;if(a.disabled)return false;this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()};this.elementOffset=this.element.offset();c=this._normValueFromMouse({x:b.pageX,y:b.pageY});e=this._valueMax()-this._valueMin()+1;h=this;this.handles.each(function(i){var j=Math.abs(c-h.values(i));if(e>j){e=j;f=d(this);g=i}});if(a.range===true&&this.values(1)===a.min){g+=1;f=d(this.handles[g])}if(this._start(b,g)===false)return false;this._mouseSliding=true;h._handleIndex=g;f.addClass("ui-state-active").focus();a=f.offset();this._clickOffset=!d(b.target).parents().andSelf().is(".ui-slider-handle")?{left:0,top:0}:{left:b.pageX-a.left-f.width()/2,top:b.pageY-a.top-f.height()/2-(parseInt(f.css("borderTopWidth"),10)||0)-(parseInt(f.css("borderBottomWidth"),10)||0)+(parseInt(f.css("marginTop"),10)||0)};this.handles.hasClass("ui-state-hover")||this._slide(b,g,c);return this._animateOff=true},_mouseStart:function(){return true},_mouseDrag:function(b){var a=this._normValueFromMouse({x:b.pageX,y:b.pageY});this._slide(b,this._handleIndex,a);return false},_mouseStop:function(b){this.handles.removeClass("ui-state-active");this._mouseSliding=false;this._stop(b,this._handleIndex);this._change(b,this._handleIndex);this._clickOffset=this._handleIndex=null;return this._animateOff=false},_detectOrientation:function(){this.orientation=this.options.orientation==="vertical"?"vertical":"horizontal"},_normValueFromMouse:function(b){var a;if(this.orientation==="horizontal"){a=this.elementSize.width;b=b.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)}else{a=this.elementSize.height;b=b.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)}a=b/a;if(a>1)a=1;if(a<0)a=0;if(this.orientation==="vertical")a=1-a;b=this._valueMax()-this._valueMin();return this._trimAlignValue(this._valueMin()+a*b)},_start:function(b,a){var c={handle:this.handles[a],value:this.value()};if(this.options.values&&this.options.values.length){c.value=this.values(a);c.values=this.values()}return this._trigger("start",b,c)},_slide:function(b,a,c){var e;if(this.options.values&&this.options.values.length){e=this.values(a?0:1);if(this.options.values.length===2&&this.options.range===true&&(a===0&&c>e||a===1&&c<e))c=e;if(c!==this.values(a)){e=this.values();e[a]=c;b=this._trigger("slide",b,{handle:this.handles[a],value:c,values:e});this.values(a?0:1);b!==false&&this.values(a,c,true)}}else if(c!==this.value()){b=this._trigger("slide",b,{handle:this.handles[a],value:c});b!==false&&this.value(c)}},_stop:function(b,a){var c={handle:this.handles[a],value:this.value()};if(this.options.values&&this.options.values.length){c.value=this.values(a);c.values=this.values()}this._trigger("stop",b,c)},_change:function(b,a){if(!this._keySliding&&!this._mouseSliding){var c={handle:this.handles[a],value:this.value()};if(this.options.values&&this.options.values.length){c.value=this.values(a);c.values=this.values()}this._trigger("change",b,c)}},value:function(b){if(arguments.length){this.options.value=this._trimAlignValue(b);this._refreshValue();this._change(null,0)}else return this._value()},values:function(b,a){var c,e,f;if(arguments.length>1){this.options.values[b]=this._trimAlignValue(a);this._refreshValue();this._change(null,b)}else if(arguments.length)if(d.isArray(arguments[0])){c=this.options.values;e=arguments[0];for(f=0;f<c.length;f+=1){c[f]=this._trimAlignValue(e[f]);this._change(null,f)}this._refreshValue()}else return this.options.values&&this.options.values.length?this._values(b):this.value();else return this._values()},_setOption:function(b,a){var c,e=0;if(d.isArray(this.options.values))e=this.options.values.length;d.Widget.prototype._setOption.apply(this,arguments);switch(b){case"disabled":if(a){this.handles.filter(".ui-state-focus").blur();this.handles.removeClass("ui-state-hover");this.handles.attr("disabled","disabled");this.element.addClass("ui-disabled")}else{this.handles.removeAttr("disabled");this.element.removeClass("ui-disabled")}break;case"orientation":this._detectOrientation();this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation);this._refreshValue();break;case"value":this._animateOff=true;this._refreshValue();this._change(null,0);this._animateOff=false;break;case"values":this._animateOff=true;this._refreshValue();for(c=0;c<e;c+=1)this._change(null,c);this._animateOff=false;break}},_value:function(){var b=this.options.value;return b=this._trimAlignValue(b)},_values:function(b){var a,c;if(arguments.length){a=this.options.values[b];return a=this._trimAlignValue(a)}else{a=this.options.values.slice();for(c=0;c<a.length;c+=1)a[c]=this._trimAlignValue(a[c]);return a}},_trimAlignValue:function(b){if(b<=this._valueMin())return this._valueMin();if(b>=this._valueMax())return this._valueMax();var a=this.options.step>0?this.options.step:1,c=(b-this._valueMin())%a;alignValue=b-c;if(Math.abs(c)*2>=a)alignValue+=c>0?a:-a;return parseFloat(alignValue.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var b=this.options.range,a=this.options,c=this,e=!this._animateOff?a.animate:false,f,h={},g,i,j,l;if(this.options.values&&this.options.values.length)this.handles.each(function(k){f=(c.values(k)-c._valueMin())/(c._valueMax()-c._valueMin())*100;h[c.orientation==="horizontal"?"left":"bottom"]=f+"%";d(this).stop(1,1)[e?"animate":"css"](h,a.animate);if(c.options.range===true)if(c.orientation==="horizontal"){if(k===0)c.range.stop(1,1)[e?"animate":"css"]({left:f+"%"},a.animate);if(k===1)c.range[e?"animate":"css"]({width:f-g+"%"},{queue:false,duration:a.animate})}else{if(k===0)c.range.stop(1,1)[e?"animate":"css"]({bottom:f+"%"},a.animate);if(k===1)c.range[e?"animate":"css"]({height:f-g+"%"},{queue:false,duration:a.animate})}g=f});else{i=this.value();j=this._valueMin();l=this._valueMax();f=l!==j?(i-j)/(l-j)*100:0;h[c.orientation==="horizontal"?"left":"bottom"]=f+"%";this.handle.stop(1,1)[e?"animate":"css"](h,a.animate);if(b==="min"&&this.orientation==="horizontal")this.range.stop(1,1)[e?"animate":"css"]({width:f+"%"},a.animate);if(b==="max"&&this.orientation==="horizontal")this.range[e?"animate":"css"]({width:100-f+"%"},{queue:false,duration:a.animate});if(b==="min"&&this.orientation==="vertical")this.range.stop(1,1)[e?"animate":"css"]({height:f+"%"},a.animate);if(b==="max"&&this.orientation==="vertical")this.range[e?"animate":"css"]({height:100-f+"%"},{queue:false,duration:a.animate})}}});d.extend(d.ui.slider,{version:"1.8.12"})})(jQuery);;(function(a){var g,i=function(b){a(":ui-button",b.target.form).each(function(){var c=a(this).data("button");setTimeout(function(){c.refresh()},1)})},h=function(b){var c=b.name,d=b.form,f=a([]);if(c)f=d?a(d).find("[name='"+c+"']"):a("[name='"+c+"']",b.ownerDocument).filter(function(){return!this.form});return f};a.widget("ui.button",{options:{disabled:null,text:true,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset.button").bind("reset.button",i);if(typeof this.options.disabled!=="boolean")this.options.disabled=this.element.attr("disabled");this._determineButtonType();this.hasTitle=!!this.buttonElement.attr("title");var b=this,c=this.options,d=this.type==="checkbox"||this.type==="radio",f="ui-state-hover"+(!d?" ui-state-active":"");if(c.label===null)c.label=this.buttonElement.html();if(this.element.is(":disabled"))c.disabled=true;this.buttonElement.addClass("ui-button ui-widget ui-state-default ui-corner-all").attr("role","button").bind("mouseenter.button",function(){if(!c.disabled){a(this).addClass("ui-state-hover");this===g&&a(this).addClass("ui-state-active")}}).bind("mouseleave.button",function(){c.disabled||a(this).removeClass(f)}).bind("focus.button",function(){a(this).addClass("ui-state-focus")}).bind("blur.button",function(){a(this).removeClass("ui-state-focus")});d&&this.element.bind("change.button",function(){b.refresh()});if(this.type==="checkbox")this.buttonElement.bind("click.button",function(){if(c.disabled)return false;a(this).toggleClass("ui-state-active");b.buttonElement.attr("aria-pressed",b.element[0].checked)});else if(this.type==="radio")this.buttonElement.bind("click.button",function(){if(c.disabled)return false;a(this).addClass("ui-state-active");b.buttonElement.attr("aria-pressed",true);var e=b.element[0];h(e).not(e).map(function(){return a(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed",false)});else{this.buttonElement.bind("mousedown.button",function(){if(c.disabled)return false;a(this).addClass("ui-state-active");g=this;a(document).one("mouseup",function(){g=null})}).bind("mouseup.button",function(){if(c.disabled)return false;a(this).removeClass("ui-state-active")}).bind("keydown.button",function(e){if(c.disabled)return false;if(e.keyCode==a.ui.keyCode.SPACE||e.keyCode==a.ui.keyCode.ENTER)a(this).addClass("ui-state-active")}).bind("keyup.button",function(){a(this).removeClass("ui-state-active")});this.buttonElement.is("a")&&this.buttonElement.keyup(function(e){e.keyCode===a.ui.keyCode.SPACE&&a(this).click()})}this._setOption("disabled",c.disabled)},_determineButtonType:function(){this.type=this.element.is(":checkbox")?"checkbox":this.element.is(":radio")?"radio":this.element.is("input")?"input":"button";if(this.type==="checkbox"||this.type==="radio"){var b=this.element.parents().filter(":last"),c="label[for="+this.element.attr("id")+"]";this.buttonElement=b.find(c);if(!this.buttonElement.length){b=b.length?b.siblings():this.element.siblings();this.buttonElement=b.filter(c);if(!this.buttonElement.length)this.buttonElement=b.find(c)}this.element.addClass("ui-helper-hidden-accessible");(b=this.element.is(":checked"))&&this.buttonElement.addClass("ui-state-active");this.buttonElement.attr("aria-pressed",b)}else this.buttonElement=this.element},widget:function(){return this.buttonElement},destroy:function(){this.element.removeClass("ui-helper-hidden-accessible");this.buttonElement.removeClass("ui-button ui-widget ui-state-default ui-corner-all ui-state-hover ui-state-active  ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only").removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html());this.hasTitle||this.buttonElement.removeAttr("title");a.Widget.prototype.destroy.call(this)},_setOption:function(b,c){a.Widget.prototype._setOption.apply(this,arguments);if(b==="disabled")c?this.element.attr("disabled",true):this.element.removeAttr("disabled");this._resetButton()},refresh:function(){var b=this.element.is(":disabled");b!==this.options.disabled&&this._setOption("disabled",b);if(this.type==="radio")h(this.element[0]).each(function(){a(this).is(":checked")?a(this).button("widget").addClass("ui-state-active").attr("aria-pressed",true):a(this).button("widget").removeClass("ui-state-active").attr("aria-pressed",false)});else if(this.type==="checkbox")this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed",true):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed",false)},_resetButton:function(){if(this.type==="input")this.options.label&&this.element.val(this.options.label);else{var b=this.buttonElement.removeClass("ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only"),c=a("<span></span>").addClass("ui-button-text").html(this.options.label).appendTo(b.empty()).text(),d=this.options.icons,f=d.primary&&d.secondary,e=[];if(d.primary||d.secondary){if(this.options.text)e.push("ui-button-text-icon"+(f?"s":d.primary?"-primary":"-secondary"));d.primary&&b.prepend("<span class='ui-button-icon-primary ui-icon "+d.primary+"'></span>");d.secondary&&b.append("<span class='ui-button-icon-secondary ui-icon "+d.secondary+"'></span>");if(!this.options.text){e.push(f?"ui-button-icons-only":"ui-button-icon-only");this.hasTitle||b.attr("title",c)}}else e.push("ui-button-text-only");b.addClass(e.join(" "))}}});a.widget("ui.buttonset",{options:{items:":button, :submit, :reset, :checkbox, :radio, a, :data(button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(b,c){b==="disabled"&&this.buttons.button("option",b,c);a.Widget.prototype._setOption.apply(this,arguments)},refresh:function(){this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return a(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass("ui-corner-left").end().filter(":last").addClass("ui-corner-right").end().end()},destroy:function(){this.element.removeClass("ui-buttonset");this.buttons.map(function(){return a(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy");a.Widget.prototype.destroy.call(this)}})})(jQuery);;(function(d,p){function u(){return++v}function w(){return++x}var v=0,x=0;d.widget("ui.tabs",{options:{add:null,ajaxOptions:null,cache:false,cookie:null,collapsible:false,disable:null,disabled:[],enable:null,event:"click",fx:null,idPrefix:"ui-tabs-",load:null,panelTemplate:"<div></div>",remove:null,select:null,show:null,spinner:"<em>Loading&#8230;</em>",tabTemplate:"<li><a href='#{href}'><span>#{label}</span></a></li>"},_create:function(){this._tabify(true)},_setOption:function(b,e){if(b=="selected")this.options.collapsible&&e==this.options.selected||this.select(e);else{this.options[b]=e;this._tabify()}},_tabId:function(b){return b.title&&b.title.replace(/\s/g,"_").replace(/[^\w\u00c0-\uFFFF-]/g,"")||this.options.idPrefix+u()},_sanitizeSelector:function(b){return b.replace(/:/g,"\\:")},_cookie:function(){var b=this.cookie||(this.cookie=this.options.cookie.name||"ui-tabs-"+w());return d.cookie.apply(null,[b].concat(d.makeArray(arguments)))},_ui:function(b,e){return{tab:b,panel:e,index:this.anchors.index(b)}},_cleanup:function(){this.lis.filter(".ui-state-processing").removeClass("ui-state-processing").find("span:data(label.tabs)").each(function(){var b=d(this);b.html(b.data("label.tabs")).removeData("label.tabs")})},_tabify:function(b){function e(g,f){g.css("display","");!d.support.opacity&&f.opacity&&g[0].style.removeAttribute("filter")}var a=this,c=this.options,h=/^#.+/;this.list=this.element.find("ol,ul").eq(0);this.lis=d(" > li:has(a[href])",this.list);this.anchors=this.lis.map(function(){return d("a",this)[0]});this.panels=d([]);this.anchors.each(function(g,f){var i=d(f).attr("href"),l=i.split("#")[0],q;if(l&&(l===location.toString().split("#")[0]||(q=d("base")[0])&&l===q.href)){i=f.hash;f.href=i}if(h.test(i))a.panels=a.panels.add(a.element.find(a._sanitizeSelector(i)));else if(i&&i!=="#"){d.data(f,"href.tabs",i);d.data(f,"load.tabs",i.replace(/#.*$/,""));i=a._tabId(f);f.href="#"+i;f=a.element.find("#"+i);if(!f.length){f=d(c.panelTemplate).attr("id",i).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").insertAfter(a.panels[g-1]||a.list);f.data("destroy.tabs",true)}a.panels=a.panels.add(f)}else c.disabled.push(g)});if(b){this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all");this.list.addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all");this.lis.addClass("ui-state-default ui-corner-top");this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom");if(c.selected===p){location.hash&&this.anchors.each(function(g,f){if(f.hash==location.hash){c.selected=g;return false}});if(typeof c.selected!=="number"&&c.cookie)c.selected=parseInt(a._cookie(),10);if(typeof c.selected!=="number"&&this.lis.filter(".ui-tabs-selected").length)c.selected=this.lis.index(this.lis.filter(".ui-tabs-selected"));c.selected=c.selected||(this.lis.length?0:-1)}else if(c.selected===null)c.selected=-1;c.selected=c.selected>=0&&this.anchors[c.selected]||c.selected<0?c.selected:0;c.disabled=d.unique(c.disabled.concat(d.map(this.lis.filter(".ui-state-disabled"),function(g){return a.lis.index(g)}))).sort();d.inArray(c.selected,c.disabled)!=-1&&c.disabled.splice(d.inArray(c.selected,c.disabled),1);this.panels.addClass("ui-tabs-hide");this.lis.removeClass("ui-tabs-selected ui-state-active");if(c.selected>=0&&this.anchors.length){a.element.find(a._sanitizeSelector(a.anchors[c.selected].hash)).removeClass("ui-tabs-hide");this.lis.eq(c.selected).addClass("ui-tabs-selected ui-state-active");a.element.queue("tabs",function(){a._trigger("show",null,a._ui(a.anchors[c.selected],a.element.find(a._sanitizeSelector(a.anchors[c.selected].hash))[0]))});this.load(c.selected)}d(window).bind("unload",function(){a.lis.add(a.anchors).unbind(".tabs");a.lis=a.anchors=a.panels=null})}else c.selected=this.lis.index(this.lis.filter(".ui-tabs-selected"));this.element[c.collapsible?"addClass":"removeClass"]("ui-tabs-collapsible");c.cookie&&this._cookie(c.selected,c.cookie);b=0;for(var j;j=this.lis[b];b++)d(j)[d.inArray(b,c.disabled)!=-1&&!d(j).hasClass("ui-tabs-selected")?"addClass":"removeClass"]("ui-state-disabled");c.cache===false&&this.anchors.removeData("cache.tabs");this.lis.add(this.anchors).unbind(".tabs");if(c.event!=="mouseover"){var k=function(g,f){f.is(":not(.ui-state-disabled)")&&f.addClass("ui-state-"+g)},n=function(g,f){f.removeClass("ui-state-"+
g)};this.lis.bind("mouseover.tabs",function(){k("hover",d(this))});this.lis.bind("mouseout.tabs",function(){n("hover",d(this))});this.anchors.bind("focus.tabs",function(){k("focus",d(this).closest("li"))});this.anchors.bind("blur.tabs",function(){n("focus",d(this).closest("li"))})}var m,o;if(c.fx)if(d.isArray(c.fx)){m=c.fx[0];o=c.fx[1]}else m=o=c.fx;var r=o?function(g,f){d(g).closest("li").addClass("ui-tabs-selected ui-state-active");f.hide().removeClass("ui-tabs-hide").animate(o,o.duration||"normal",function(){e(f,o);a._trigger("show",null,a._ui(g,f[0]))})}:function(g,f){d(g).closest("li").addClass("ui-tabs-selected ui-state-active");f.removeClass("ui-tabs-hide");a._trigger("show",null,a._ui(g,f[0]))},s=m?function(g,f){f.animate(m,m.duration||"normal",function(){a.lis.removeClass("ui-tabs-selected ui-state-active");f.addClass("ui-tabs-hide");e(f,m);a.element.dequeue("tabs")})}:function(g,f){a.lis.removeClass("ui-tabs-selected ui-state-active");f.addClass("ui-tabs-hide");a.element.dequeue("tabs")};this.anchors.bind(c.event+".tabs",function(){var g=this,f=d(g).closest("li"),i=a.panels.filter(":not(.ui-tabs-hide)"),l=a.element.find(a._sanitizeSelector(g.hash));if(f.hasClass("ui-tabs-selected")&&!c.collapsible||f.hasClass("ui-state-disabled")||f.hasClass("ui-state-processing")||a.panels.filter(":animated").length||a._trigger("select",null,a._ui(this,l[0]))===false){this.blur();return false}c.selected=a.anchors.index(this);a.abort();if(c.collapsible)if(f.hasClass("ui-tabs-selected")){c.selected=-1;c.cookie&&a._cookie(c.selected,c.cookie);a.element.queue("tabs",function(){s(g,i)}).dequeue("tabs");this.blur();return false}else if(!i.length){c.cookie&&a._cookie(c.selected,c.cookie);a.element.queue("tabs",function(){r(g,l)});a.load(a.anchors.index(this));this.blur();return false}c.cookie&&a._cookie(c.selected,c.cookie);if(l.length){i.length&&a.element.queue("tabs",function(){s(g,i)});a.element.queue("tabs",function(){r(g,l)});a.load(a.anchors.index(this))}else throw"jQuery UI Tabs: Mismatching fragment identifier.";d.browser.msie&&this.blur()});this.anchors.bind("click.tabs",function(){return false})},_getIndex:function(b){if(typeof b=="string")b=this.anchors.index(this.anchors.filter("[href$="+b+"]"));return b},destroy:function(){var b=this.options;this.abort();this.element.unbind(".tabs").removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible").removeData("tabs");this.list.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all");this.anchors.each(function(){var e=d.data(this,"href.tabs");if(e)this.href=e;var a=d(this).unbind(".tabs");d.each(["href","load","cache"],function(c,h){a.removeData(h+".tabs")})});this.lis.unbind(".tabs").add(this.panels).each(function(){d.data(this,"destroy.tabs")?d(this).remove():d(this).removeClass("ui-state-default ui-corner-top ui-tabs-selected ui-state-active ui-state-hover ui-state-focus ui-state-disabled ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide")});b.cookie&&this._cookie(null,b.cookie);return this},add:function(b,e,a){if(a===p)a=this.anchors.length;var c=this,h=this.options;e=d(h.tabTemplate.replace(/#\{href\}/g,b).replace(/#\{label\}/g,e));b=!b.indexOf("#")?b.replace("#",""):this._tabId(d("a",e)[0]);e.addClass("ui-state-default ui-corner-top").data("destroy.tabs",true);var j=c.element.find("#"+b);j.length||(j=d(h.panelTemplate).attr("id",b).data("destroy.tabs",true));j.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide");if(a>=this.lis.length){e.appendTo(this.list);j.appendTo(this.list[0].parentNode)}else{e.insertBefore(this.lis[a]);j.insertBefore(this.panels[a])}h.disabled=d.map(h.disabled,function(k){return k>=a?++k:k});this._tabify();if(this.anchors.length==1){h.selected=0;e.addClass("ui-tabs-selected ui-state-active");j.removeClass("ui-tabs-hide");this.element.queue("tabs",function(){c._trigger("show",null,c._ui(c.anchors[0],c.panels[0]))});this.load(0)}this._trigger("add",null,this._ui(this.anchors[a],this.panels[a]));return this},remove:function(b){b=this._getIndex(b);var e=this.options,a=this.lis.eq(b).remove(),c=this.panels.eq(b).remove();if(a.hasClass("ui-tabs-selected")&&this.anchors.length>1)this.select(b+(b+1<this.anchors.length?1:-1));e.disabled=d.map(d.grep(e.disabled,function(h){return h!=b}),function(h){return h>=b?--h:h});this._tabify();this._trigger("remove",null,this._ui(a.find("a")[0],c[0]));return this},enable:function(b){b=this._getIndex(b);var e=this.options;if(d.inArray(b,e.disabled)!=-1){this.lis.eq(b).removeClass("ui-state-disabled");e.disabled=d.grep(e.disabled,function(a){return a!=b});this._trigger("enable",null,this._ui(this.anchors[b],this.panels[b]));return this}},disable:function(b){b=this._getIndex(b);var e=this.options;if(b!=e.selected){this.lis.eq(b).addClass("ui-state-disabled");e.disabled.push(b);e.disabled.sort();this._trigger("disable",null,this._ui(this.anchors[b],this.panels[b]))}return this},select:function(b){b=this._getIndex(b);if(b==-1)if(this.options.collapsible&&this.options.selected!=-1)b=this.options.selected;else return this;this.anchors.eq(b).trigger(this.options.event+".tabs");return this},load:function(b){b=this._getIndex(b);var e=this,a=this.options,c=this.anchors.eq(b)[0],h=d.data(c,"load.tabs");this.abort();if(!h||this.element.queue("tabs").length!==0&&d.data(c,"cache.tabs"))this.element.dequeue("tabs");else{this.lis.eq(b).addClass("ui-state-processing");if(a.spinner){var j=d("span",c);j.data("label.tabs",j.html()).html(a.spinner)}this.xhr=d.ajax(d.extend({},a.ajaxOptions,{url:h,success:function(k,n){e.element.find(e._sanitizeSelector(c.hash)).html(k);e._cleanup();a.cache&&d.data(c,"cache.tabs",true);e._trigger("load",null,e._ui(e.anchors[b],e.panels[b]));try{a.ajaxOptions.success(k,n)}catch(m){}},error:function(k,n){e._cleanup();e._trigger("load",null,e._ui(e.anchors[b],e.panels[b]));try{a.ajaxOptions.error(k,n,b,c)}catch(m){}}}));e.element.dequeue("tabs");return this}},abort:function(){this.element.queue([]);this.panels.stop(false,true);this.element.queue("tabs",this.element.queue("tabs").splice(-2,2));if(this.xhr){this.xhr.abort();delete this.xhr}this._cleanup();return this},url:function(b,e){this.anchors.eq(b).removeData("cache.tabs").data("load.tabs",e);return this},length:function(){return this.anchors.length}});d.extend(d.ui.tabs,{version:"1.8.12"});d.extend(d.ui.tabs.prototype,{rotation:null,rotate:function(b,e){var a=this,c=this.options,h=a._rotate||(a._rotate=function(j){clearTimeout(a.rotation);a.rotation=setTimeout(function(){var k=c.selected;a.select(++k<a.anchors.length?k:0)},b);j&&j.stopPropagation()});e=a._unrotate||(a._unrotate=!e?function(j){j.clientX&&a.rotate(null)}:function(){t=c.selected;h()});if(b){this.element.bind("tabsshow",h);this.anchors.bind(c.event+".tabs",e);h()}else{clearTimeout(a.rotation);this.element.unbind("tabsshow",h);this.anchors.unbind(c.event+".tabs",e);delete this._rotate;delete this._unrotate}return this}})})(jQuery);;(function(d,A){function K(){this.debug=false;this._curInst=null;this._keyEvent=false;this._disabledInputs=[];this._inDialog=this._datepickerShowing=false;this._mainDivId="ui-datepicker-div";this._inlineClass="ui-datepicker-inline";this._appendClass="ui-datepicker-append";this._triggerClass="ui-datepicker-trigger";this._dialogClass="ui-datepicker-dialog";this._disableClass="ui-datepicker-disabled";this._unselectableClass="ui-datepicker-unselectable";this._currentClass="ui-datepicker-current-day";this._dayOverClass="ui-datepicker-days-cell-over";this.regional=[];this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:false,showMonthAfterYear:false,yearSuffix:""};this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:false,hideIfNoPrevNext:false,navigationAsDateFormat:false,gotoCurrent:false,changeMonth:false,changeYear:false,yearRange:"c-10:c+10",showOtherMonths:false,selectOtherMonths:false,showWeek:false,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:true,showButtonPanel:false,autoSize:false};d.extend(this._defaults,this.regional[""]);this.dpDiv=d('<div id="'+this._mainDivId+'" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>')}function F(a,b){d.extend(a,b);for(var c in b)if(b[c]==null||b[c]==A)a[c]=b[c];return a}d.extend(d.ui,{datepicker:{version:"1.8.12"}});var y=(new Date).getTime();d.extend(K.prototype,{markerClassName:"hasDatepicker",log:function(){this.debug&&console.log.apply("",arguments)},_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(a){F(this._defaults,a||{});return this},_attachDatepicker:function(a,b){var c=null;for(var e in this._defaults){var f=a.getAttribute("date:"+e);if(f){c=c||{};try{c[e]=eval(f)}catch(h){c[e]=f}}}e=a.nodeName.toLowerCase();f=e=="div"||e=="span";if(!a.id){this.uuid+=1;a.id="dp"+this.uuid}var i=this._newInst(d(a),f);i.settings=d.extend({},b||{},c||{});if(e=="input")this._connectDatepicker(a,i);else f&&this._inlineDatepicker(a,i)},_newInst:function(a,b){return{id:a[0].id.replace(/([^A-Za-z0-9_-])/g,"\\\\$1"),input:a,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:b,dpDiv:!b?this.dpDiv:d('<div class="'+this._inlineClass+' ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>')}},_connectDatepicker:function(a,b){var c=d(a);b.append=d([]);b.trigger=d([]);if(!c.hasClass(this.markerClassName)){this._attachments(c,b);c.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp).bind("setData.datepicker",function(e,f,h){b.settings[f]=h}).bind("getData.datepicker",function(e,f){return this._get(b,f)});this._autoSize(b);d.data(a,"datepicker",b)}},_attachments:function(a,b){var c=this._get(b,"appendText"),e=this._get(b,"isRTL");b.append&&b.append.remove();if(c){b.append=d('<span class="'+this._appendClass+'">'+c+"</span>");a[e?"before":"after"](b.append)}a.unbind("focus",this._showDatepicker);b.trigger&&b.trigger.remove();c=this._get(b,"showOn");if(c=="focus"||c=="both")a.focus(this._showDatepicker);if(c=="button"||c=="both"){c=this._get(b,"buttonText");var f=this._get(b,"buttonImage");b.trigger=d(this._get(b,"buttonImageOnly")?d("<img/>").addClass(this._triggerClass).attr({src:f,alt:c,title:c}):d('<button type="button"></button>').addClass(this._triggerClass).html(f==""?c:d("<img/>").attr({src:f,alt:c,title:c})));a[e?"before":"after"](b.trigger);b.trigger.click(function(){d.datepicker._datepickerShowing&&d.datepicker._lastInput==a[0]?d.datepicker._hideDatepicker():d.datepicker._showDatepicker(a[0]);return false})}},_autoSize:function(a){if(this._get(a,"autoSize")&&!a.inline){var b=new Date(2009,11,20),c=this._get(a,"dateFormat");if(c.match(/[DM]/)){var e=function(f){for(var h=0,i=0,g=0;g<f.length;g++)if(f[g].length>h){h=f[g].length;i=g}return i};b.setMonth(e(this._get(a,c.match(/MM/)?"monthNames":"monthNamesShort")));b.setDate(e(this._get(a,c.match(/DD/)?"dayNames":"dayNamesShort"))+20-b.getDay())}a.input.attr("size",this._formatDate(a,b).length)}},_inlineDatepicker:function(a,b){var c=d(a);if(!c.hasClass(this.markerClassName)){c.addClass(this.markerClassName).append(b.dpDiv).bind("setData.datepicker",function(e,f,h){b.settings[f]=h}).bind("getData.datepicker",function(e,f){return this._get(b,f)});d.data(a,"datepicker",b);this._setDate(b,this._getDefaultDate(b),true);this._updateDatepicker(b);this._updateAlternate(b);b.dpDiv.show()}},_dialogDatepicker:function(a,b,c,e,f){a=this._dialogInst;if(!a){this.uuid+=1;this._dialogInput=d('<input type="text" id="'+("dp"+this.uuid)+'" style="position: absolute; top: -100px; width: 0px; z-index: -10;"/>');this._dialogInput.keydown(this._doKeyDown);d("body").append(this._dialogInput);a=this._dialogInst=this._newInst(this._dialogInput,false);a.settings={};d.data(this._dialogInput[0],"datepicker",a)}F(a.settings,e||{});b=b&&b.constructor==Date?this._formatDate(a,b):b;this._dialogInput.val(b);this._pos=f?f.length?f:[f.pageX,f.pageY]:null;if(!this._pos)this._pos=[document.documentElement.clientWidth/2-100+(document.documentElement.scrollLeft||document.body.scrollLeft),document.documentElement.clientHeight/2-150+(document.documentElement.scrollTop||document.body.scrollTop)];this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px");a.settings.onSelect=c;this._inDialog=true;this.dpDiv.addClass(this._dialogClass);this._showDatepicker(this._dialogInput[0]);d.blockUI&&d.blockUI(this.dpDiv);d.data(this._dialogInput[0],"datepicker",a);return this},_destroyDatepicker:function(a){var b=d(a),c=d.data(a,"datepicker");if(b.hasClass(this.markerClassName)){var e=a.nodeName.toLowerCase();d.removeData(a,"datepicker");if(e=="input"){c.append.remove();c.trigger.remove();b.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)}else if(e=="div"||e=="span")b.removeClass(this.markerClassName).empty()}},_enableDatepicker:function(a){var b=d(a),c=d.data(a,"datepicker");if(b.hasClass(this.markerClassName)){var e=a.nodeName.toLowerCase();if(e=="input"){a.disabled=false;c.trigger.filter("button").each(function(){this.disabled=false}).end().filter("img").css({opacity:"1.0",cursor:""})}else if(e=="div"||e=="span")b.children("."+this._inlineClass).children().removeClass("ui-state-disabled");this._disabledInputs=d.map(this._disabledInputs,function(f){return f==a?null:f})}},_disableDatepicker:function(a){var b=d(a),c=d.data(a,"datepicker");if(b.hasClass(this.markerClassName)){var e=a.nodeName.toLowerCase();if(e=="input"){a.disabled=true;c.trigger.filter("button").each(function(){this.disabled=true}).end().filter("img").css({opacity:"0.5",cursor:"default"})}else if(e=="div"||e=="span")b.children("."+this._inlineClass).children().addClass("ui-state-disabled");this._disabledInputs=d.map(this._disabledInputs,function(f){return f==a?null:f});this._disabledInputs[this._disabledInputs.length]=a}},_isDisabledDatepicker:function(a){if(!a)return false;for(var b=0;b<this._disabledInputs.length;b++)if(this._disabledInputs[b]==a)return true;return false},_getInst:function(a){try{return d.data(a,"datepicker")}catch(b){throw"Missing instance data for this datepicker";}},_optionDatepicker:function(a,b,c){var e=this._getInst(a);if(arguments.length==2&&typeof b=="string")return b=="defaults"?d.extend({},d.datepicker._defaults):e?b=="all"?d.extend({},e.settings):this._get(e,b):null;var f=b||{};if(typeof b=="string"){f={};f[b]=c}if(e){this._curInst==e&&this._hideDatepicker();var h=this._getDateDatepicker(a,true),i=this._getMinMaxDate(e,"min"),g=this._getMinMaxDate(e,"max");F(e.settings,f);if(i!==null&&f.dateFormat!==A&&f.minDate===A)e.settings.minDate=this._formatDate(e,i);if(g!==null&&f.dateFormat!==A&&f.maxDate===A)e.settings.maxDate=this._formatDate(e,g);this._attachments(d(a),e);this._autoSize(e);this._setDateDatepicker(a,h);this._updateDatepicker(e)}},_changeDatepicker:function(a,b,c){this._optionDatepicker(a,b,c)},_refreshDatepicker:function(a){(a=this._getInst(a))&&this._updateDatepicker(a)},_setDateDatepicker:function(a,b){if(a=this._getInst(a)){this._setDate(a,b);this._updateDatepicker(a);this._updateAlternate(a)}},_getDateDatepicker:function(a,b){(a=this._getInst(a))&&!a.inline&&this._setDateFromField(a,b);return a?this._getDate(a):null},_doKeyDown:function(a){var b=d.datepicker._getInst(a.target),c=true,e=b.dpDiv.is(".ui-datepicker-rtl");b._keyEvent=true;if(d.datepicker._datepickerShowing)switch(a.keyCode){case 9:d.datepicker._hideDatepicker();c=false;break;case 13:c=d("td."+d.datepicker._dayOverClass+":not(."+d.datepicker._currentClass+")",b.dpDiv);c[0]?d.datepicker._selectDay(a.target,b.selectedMonth,b.selectedYear,c[0]):d.datepicker._hideDatepicker();return false;case 27:d.datepicker._hideDatepicker();break;case 33:d.datepicker._adjustDate(a.target,a.ctrlKey?-d.datepicker._get(b,"stepBigMonths"):-d.datepicker._get(b,"stepMonths"),"M");break;case 34:d.datepicker._adjustDate(a.target,a.ctrlKey?+d.datepicker._get(b,"stepBigMonths"):+d.datepicker._get(b,"stepMonths"),"M");break;case 35:if(a.ctrlKey||a.metaKey)d.datepicker._clearDate(a.target);c=a.ctrlKey||a.metaKey;break;case 36:if(a.ctrlKey||a.metaKey)d.datepicker._gotoToday(a.target);c=a.ctrlKey||a.metaKey;break;case 37:if(a.ctrlKey||a.metaKey)d.datepicker._adjustDate(a.target,e?+1:-1,"D");c=a.ctrlKey||a.metaKey;if(a.originalEvent.altKey)d.datepicker._adjustDate(a.target,a.ctrlKey?-d.datepicker._get(b,"stepBigMonths"):-d.datepicker._get(b,"stepMonths"),"M");break;case 38:if(a.ctrlKey||a.metaKey)d.datepicker._adjustDate(a.target,-7,"D");c=a.ctrlKey||a.metaKey;break;case 39:if(a.ctrlKey||a.metaKey)d.datepicker._adjustDate(a.target,e?-1:+1,"D");c=a.ctrlKey||a.metaKey;if(a.originalEvent.altKey)d.datepicker._adjustDate(a.target,a.ctrlKey?+d.datepicker._get(b,"stepBigMonths"):+d.datepicker._get(b,"stepMonths"),"M");break;case 40:if(a.ctrlKey||a.metaKey)d.datepicker._adjustDate(a.target,+7,"D");c=a.ctrlKey||a.metaKey;break;default:c=false}else if(a.keyCode==36&&a.ctrlKey)d.datepicker._showDatepicker(this);else c=false;if(c){a.preventDefault();a.stopPropagation()}},_doKeyPress:function(a){var b=d.datepicker._getInst(a.target);if(d.datepicker._get(b,"constrainInput")){b=d.datepicker._possibleChars(d.datepicker._get(b,"dateFormat"));var c=String.fromCharCode(a.charCode==A?a.keyCode:a.charCode);return a.ctrlKey||a.metaKey||c<" "||!b||b.indexOf(c)>-1}},_doKeyUp:function(a){a=d.datepicker._getInst(a.target);if(a.input.val()!=a.lastVal)try{if(d.datepicker.parseDate(d.datepicker._get(a,"dateFormat"),a.input?a.input.val():null,d.datepicker._getFormatConfig(a))){d.datepicker._setDateFromField(a);d.datepicker._updateAlternate(a);d.datepicker._updateDatepicker(a)}}catch(b){d.datepicker.log(b)}return true},_showDatepicker:function(a){a=a.target||a;if(a.nodeName.toLowerCase()!="input")a=d("input",a.parentNode)[0];if(!(d.datepicker._isDisabledDatepicker(a)||d.datepicker._lastInput==a)){var b=d.datepicker._getInst(a);d.datepicker._curInst&&d.datepicker._curInst!=b&&d.datepicker._curInst.dpDiv.stop(true,true);var c=d.datepicker._get(b,"beforeShow");F(b.settings,c?c.apply(a,[a,b]):{});b.lastVal=null;d.datepicker._lastInput=a;d.datepicker._setDateFromField(b);if(d.datepicker._inDialog)a.value="";if(!d.datepicker._pos){d.datepicker._pos=d.datepicker._findPos(a);d.datepicker._pos[1]+=a.offsetHeight}var e=false;d(a).parents().each(function(){e|=d(this).css("position")=="fixed";return!e});if(e&&d.browser.opera){d.datepicker._pos[0]-=document.documentElement.scrollLeft;d.datepicker._pos[1]-=document.documentElement.scrollTop}c={left:d.datepicker._pos[0],top:d.datepicker._pos[1]};d.datepicker._pos=null;b.dpDiv.empty();b.dpDiv.css({position:"absolute",display:"block",top:"-1000px"});d.datepicker._updateDatepicker(b);c=d.datepicker._checkOffset(b,c,e);b.dpDiv.css({position:d.datepicker._inDialog&&d.blockUI?"static":e?"fixed":"absolute",display:"none",left:c.left+"px",top:c.top+"px"});if(!b.inline){c=d.datepicker._get(b,"showAnim");var f=d.datepicker._get(b,"duration"),h=function(){d.datepicker._datepickerShowing=true;var i=b.dpDiv.find("iframe.ui-datepicker-cover");if(i.length){var g=d.datepicker._getBorders(b.dpDiv);i.css({left:-g[0],top:-g[1],width:b.dpDiv.outerWidth(),height:b.dpDiv.outerHeight()})}};b.dpDiv.zIndex(d(a).zIndex()+1);d.effects&&d.effects[c]?b.dpDiv.show(c,d.datepicker._get(b,"showOptions"),f,h):b.dpDiv[c||"show"](c?f:null,h);if(!c||!f)h();b.input.is(":visible")&&!b.input.is(":disabled")&&b.input.focus();d.datepicker._curInst=b}}},_updateDatepicker:function(a){var b=this,c=d.datepicker._getBorders(a.dpDiv);a.dpDiv.empty().append(this._generateHTML(a));var e=a.dpDiv.find("iframe.ui-datepicker-cover");e.length&&e.css({left:-c[0],top:-c[1],width:a.dpDiv.outerWidth(),height:a.dpDiv.outerHeight()});a.dpDiv.find("button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a").bind("mouseout",function(){d(this).removeClass("ui-state-hover");this.className.indexOf("ui-datepicker-prev")!=-1&&d(this).removeClass("ui-datepicker-prev-hover");this.className.indexOf("ui-datepicker-next")!=-1&&d(this).removeClass("ui-datepicker-next-hover")}).bind("mouseover",function(){if(!b._isDisabledDatepicker(a.inline?a.dpDiv.parent()[0]:a.input[0])){d(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover");d(this).addClass("ui-state-hover");this.className.indexOf("ui-datepicker-prev")!=-1&&d(this).addClass("ui-datepicker-prev-hover");this.className.indexOf("ui-datepicker-next")!=-1&&d(this).addClass("ui-datepicker-next-hover")}}).end().find("."+
this._dayOverClass+" a").trigger("mouseover").end();c=this._getNumberOfMonths(a);e=c[1];e>1?a.dpDiv.addClass("ui-datepicker-multi-"+e).css("width",17*e+"em"):a.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width("");a.dpDiv[(c[0]!=1||c[1]!=1?"add":"remove")+"Class"]("ui-datepicker-multi");a.dpDiv[(this._get(a,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl");a==d.datepicker._curInst&&d.datepicker._datepickerShowing&&a.input&&a.input.is(":visible")&&!a.input.is(":disabled")&&a.input[0]!=document.activeElement&&a.input.focus();if(a.yearshtml){var f=a.yearshtml;setTimeout(function(){f===a.yearshtml&&a.dpDiv.find("select.ui-datepicker-year:first").replaceWith(a.yearshtml);f=a.yearshtml=null},0)}},_getBorders:function(a){var b=function(c){return{thin:1,medium:2,thick:3}[c]||c};return[parseFloat(b(a.css("border-left-width"))),parseFloat(b(a.css("border-top-width")))]},_checkOffset:function(a,b,c){var e=a.dpDiv.outerWidth(),f=a.dpDiv.outerHeight(),h=a.input?a.input.outerWidth():0,i=a.input?a.input.outerHeight():0,g=document.documentElement.clientWidth+d(document).scrollLeft(),j=document.documentElement.clientHeight+d(document).scrollTop();b.left-=this._get(a,"isRTL")?e-h:0;b.left-=c&&b.left==a.input.offset().left?d(document).scrollLeft():0;b.top-=c&&b.top==a.input.offset().top+i?d(document).scrollTop():0;b.left-=Math.min(b.left,b.left+e>g&&g>e?Math.abs(b.left+e-g):0);b.top-=Math.min(b.top,b.top+f>j&&j>f?Math.abs(f+i):0);return b},_findPos:function(a){for(var b=this._get(this._getInst(a),"isRTL");a&&(a.type=="hidden"||a.nodeType!=1||d.expr.filters.hidden(a));)a=a[b?"previousSibling":"nextSibling"];a=d(a).offset();return[a.left,a.top]},_hideDatepicker:function(a){var b=this._curInst;if(!(!b||a&&b!=d.data(a,"datepicker")))if(this._datepickerShowing){a=this._get(b,"showAnim");var c=this._get(b,"duration"),e=function(){d.datepicker._tidyDialog(b);this._curInst=null};d.effects&&d.effects[a]?b.dpDiv.hide(a,d.datepicker._get(b,"showOptions"),c,e):b.dpDiv[a=="slideDown"?"slideUp":a=="fadeIn"?"fadeOut":"hide"](a?c:null,e);a||e();if(a=this._get(b,"onClose"))a.apply(b.input?b.input[0]:null,[b.input?b.input.val():"",b]);this._datepickerShowing=false;this._lastInput=null;if(this._inDialog){this._dialogInput.css({position:"absolute",left:"0",top:"-100px"});if(d.blockUI){d.unblockUI();d("body").append(this.dpDiv)}}this._inDialog=false}},_tidyDialog:function(a){a.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(a){if(d.datepicker._curInst){a=d(a.target);a[0].id!=d.datepicker._mainDivId&&a.parents("#"+d.datepicker._mainDivId).length==0&&!a.hasClass(d.datepicker.markerClassName)&&!a.hasClass(d.datepicker._triggerClass)&&d.datepicker._datepickerShowing&&!(d.datepicker._inDialog&&d.blockUI)&&d.datepicker._hideDatepicker()}},_adjustDate:function(a,b,c){a=d(a);var e=this._getInst(a[0]);if(!this._isDisabledDatepicker(a[0])){this._adjustInstDate(e,b+(c=="M"?this._get(e,"showCurrentAtPos"):0),c);this._updateDatepicker(e)}},_gotoToday:function(a){a=d(a);var b=this._getInst(a[0]);if(this._get(b,"gotoCurrent")&&b.currentDay){b.selectedDay=b.currentDay;b.drawMonth=b.selectedMonth=b.currentMonth;b.drawYear=b.selectedYear=b.currentYear}else{var c=new Date;b.selectedDay=c.getDate();b.drawMonth=b.selectedMonth=c.getMonth();b.drawYear=b.selectedYear=c.getFullYear()}this._notifyChange(b);this._adjustDate(a)},_selectMonthYear:function(a,b,c){a=d(a);var e=this._getInst(a[0]);e._selectingMonthYear=false;e["selected"+(c=="M"?"Month":"Year")]=e["draw"+(c=="M"?"Month":"Year")]=parseInt(b.options[b.selectedIndex].value,10);this._notifyChange(e);this._adjustDate(a)},_clickMonthYear:function(a){var b=this._getInst(d(a)[0]);b.input&&b._selectingMonthYear&&setTimeout(function(){b.input.focus()},0);b._selectingMonthYear=!b._selectingMonthYear},_selectDay:function(a,b,c,e){var f=d(a);if(!(d(e).hasClass(this._unselectableClass)||this._isDisabledDatepicker(f[0]))){f=this._getInst(f[0]);f.selectedDay=f.currentDay=d("a",e).html();f.selectedMonth=f.currentMonth=b;f.selectedYear=f.currentYear=c;this._selectDate(a,this._formatDate(f,f.currentDay,f.currentMonth,f.currentYear))}},_clearDate:function(a){a=d(a);this._getInst(a[0]);this._selectDate(a,"")},_selectDate:function(a,b){a=this._getInst(d(a)[0]);b=b!=null?b:this._formatDate(a);a.input&&a.input.val(b);this._updateAlternate(a);var c=this._get(a,"onSelect");if(c)c.apply(a.input?a.input[0]:null,[b,a]);else a.input&&a.input.trigger("change");if(a.inline)this._updateDatepicker(a);else{this._hideDatepicker();this._lastInput=a.input[0];typeof a.input[0]!="object"&&a.input.focus();this._lastInput=null}},_updateAlternate:function(a){var b=this._get(a,"altField");if(b){var c=this._get(a,"altFormat")||this._get(a,"dateFormat"),e=this._getDate(a),f=this.formatDate(c,e,this._getFormatConfig(a));d(b).each(function(){d(this).val(f)})}},noWeekends:function(a){a=a.getDay();return[a>0&&a<6,""]},iso8601Week:function(a){a=new Date(a.getTime());a.setDate(a.getDate()+4-(a.getDay()||7));var b=a.getTime();a.setMonth(0);a.setDate(1);return Math.floor(Math.round((b-a)/864E5)/7)+1},parseDate:function(a,b,c){if(a==null||b==null)throw"Invalid arguments";b=typeof b=="object"?b.toString():b+"";if(b=="")return null;var e=(c?c.shortYearCutoff:null)||this._defaults.shortYearCutoff;e=typeof e!="string"?e:(new Date).getFullYear()%100+parseInt(e,10);for(var f=(c?c.dayNamesShort:null)||this._defaults.dayNamesShort,h=(c?c.dayNames:null)||this._defaults.dayNames,i=(c?c.monthNamesShort:null)||this._defaults.monthNamesShort,g=(c?c.monthNames:null)||this._defaults.monthNames,j=c=-1,l=-1,u=-1,k=false,o=function(p){(p=z+1<a.length&&a.charAt(z+1)==p)&&z++;return p},m=function(p){var v=o(p);p=new RegExp("^\\d{1,"+(p=="@"?14:p=="!"?20:p=="y"&&v?4:p=="o"?3:2)+"}");p=b.substring(s).match(p);if(!p)throw"Missing number at position "+s;s+=p[0].length;return parseInt(p[0],10)},n=function(p,v,H){p=o(p)?H:v;for(v=0;v<p.length;v++)if(b.substr(s,p[v].length).toLowerCase()==p[v].toLowerCase()){s+=p[v].length;return v+1}throw"Unknown name at position "+
s;},r=function(){if(b.charAt(s)!=a.charAt(z))throw"Unexpected literal at position "+s;s++},s=0,z=0;z<a.length;z++)if(k)if(a.charAt(z)=="'"&&!o("'"))k=false;else r();else switch(a.charAt(z)){case"d":l=m("d");break;case"D":n("D",f,h);break;case"o":u=m("o");break;case"m":j=m("m");break;case"M":j=n("M",i,g);break;case"y":c=m("y");break;case"@":var w=new Date(m("@"));c=w.getFullYear();j=w.getMonth()+1;l=w.getDate();break;case"!":w=new Date((m("!")-this._ticksTo1970)/1E4);c=w.getFullYear();j=w.getMonth()+
1;l=w.getDate();break;case"'":if(o("'"))r();else k=true;break;default:r()}if(c==-1)c=(new Date).getFullYear();else if(c<100)c+=(new Date).getFullYear()-(new Date).getFullYear()%100+(c<=e?0:-100);if(u>-1){j=1;l=u;do{e=this._getDaysInMonth(c,j-1);if(l<=e)break;j++;l-=e}while(1)}w=this._daylightSavingAdjust(new Date(c,j-1,l));if(w.getFullYear()!=c||w.getMonth()+1!=j||w.getDate()!=l)throw"Invalid date";return w},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*24*60*60*1E7,formatDate:function(a,b,c){if(!b)return"";var e=(c?c.dayNamesShort:null)||this._defaults.dayNamesShort,f=(c?c.dayNames:null)||this._defaults.dayNames,h=(c?c.monthNamesShort:null)||this._defaults.monthNamesShort;c=(c?c.monthNames:null)||this._defaults.monthNames;var i=function(o){(o=k+1<a.length&&a.charAt(k+1)==o)&&k++;return o},g=function(o,m,n){m=""+m;if(i(o))for(;m.length<n;)m="0"+m;return m},j=function(o,m,n,r){return i(o)?r[m]:n[m]},l="",u=false;if(b)for(var k=0;k<a.length;k++)if(u)if(a.charAt(k)=="'"&&!i("'"))u=false;else l+=a.charAt(k);else switch(a.charAt(k)){case"d":l+=g("d",b.getDate(),2);break;case"D":l+=j("D",b.getDay(),e,f);break;case"o":l+=g("o",(b.getTime()-(new Date(b.getFullYear(),0,0)).getTime())/864E5,3);break;case"m":l+=g("m",b.getMonth()+1,2);break;case"M":l+=j("M",b.getMonth(),h,c);break;case"y":l+=i("y")?b.getFullYear():(b.getYear()%100<10?"0":"")+b.getYear()%100;break;case"@":l+=b.getTime();break;case"!":l+=b.getTime()*1E4+this._ticksTo1970;break;case"'":if(i("'"))l+="'";else u=true;break;default:l+=a.charAt(k)}return l},_possibleChars:function(a){for(var b="",c=false,e=function(h){(h=f+1<a.length&&a.charAt(f+1)==h)&&f++;return h},f=0;f<a.length;f++)if(c)if(a.charAt(f)=="'"&&!e("'"))c=false;else b+=a.charAt(f);else switch(a.charAt(f)){case"d":case"m":case"y":case"@":b+="0123456789";break;case"D":case"M":return null;case"'":if(e("'"))b+="'";else c=true;break;default:b+=a.charAt(f)}return b},_get:function(a,b){return a.settings[b]!==A?a.settings[b]:this._defaults[b]},_setDateFromField:function(a,b){if(a.input.val()!=a.lastVal){var c=this._get(a,"dateFormat"),e=a.lastVal=a.input?a.input.val():null,f,h;f=h=this._getDefaultDate(a);var i=this._getFormatConfig(a);try{f=this.parseDate(c,e,i)||h}catch(g){this.log(g);e=b?"":e}a.selectedDay=f.getDate();a.drawMonth=a.selectedMonth=f.getMonth();a.drawYear=a.selectedYear=f.getFullYear();a.currentDay=e?f.getDate():0;a.currentMonth=e?f.getMonth():0;a.currentYear=e?f.getFullYear():0;this._adjustInstDate(a)}},_getDefaultDate:function(a){return this._restrictMinMax(a,this._determineDate(a,this._get(a,"defaultDate"),new Date))},_determineDate:function(a,b,c){var e=function(h){var i=new Date;i.setDate(i.getDate()+h);return i},f=function(h){try{return d.datepicker.parseDate(d.datepicker._get(a,"dateFormat"),h,d.datepicker._getFormatConfig(a))}catch(i){}var g=(h.toLowerCase().match(/^c/)?d.datepicker._getDate(a):null)||new Date,j=g.getFullYear(),l=g.getMonth();g=g.getDate();for(var u=/([+-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,k=u.exec(h);k;){switch(k[2]||"d"){case"d":case"D":g+=parseInt(k[1],10);break;case"w":case"W":g+=parseInt(k[1],10)*7;break;case"m":case"M":l+=parseInt(k[1],10);g=Math.min(g,d.datepicker._getDaysInMonth(j,l));break;case"y":case"Y":j+=parseInt(k[1],10);g=Math.min(g,d.datepicker._getDaysInMonth(j,l));break}k=u.exec(h)}return new Date(j,l,g)};if(b=(b=b==null||b===""?c:typeof b=="string"?f(b):typeof b=="number"?isNaN(b)?c:e(b):new Date(b.getTime()))&&b.toString()=="Invalid Date"?c:b){b.setHours(0);b.setMinutes(0);b.setSeconds(0);b.setMilliseconds(0)}return this._daylightSavingAdjust(b)},_daylightSavingAdjust:function(a){if(!a)return null;a.setHours(a.getHours()>12?a.getHours()+2:0);return a},_setDate:function(a,b,c){var e=!b,f=a.selectedMonth,h=a.selectedYear;b=this._restrictMinMax(a,this._determineDate(a,b,new Date));a.selectedDay=a.currentDay=b.getDate();a.drawMonth=a.selectedMonth=a.currentMonth=b.getMonth();a.drawYear=a.selectedYear=a.currentYear=b.getFullYear();if((f!=a.selectedMonth||h!=a.selectedYear)&&!c)this._notifyChange(a);this._adjustInstDate(a);if(a.input)a.input.val(e?"":this._formatDate(a))},_getDate:function(a){return!a.currentYear||a.input&&a.input.val()==""?null:this._daylightSavingAdjust(new Date(a.currentYear,a.currentMonth,a.currentDay))},_generateHTML:function(a){var b=new Date;b=this._daylightSavingAdjust(new Date(b.getFullYear(),b.getMonth(),b.getDate()));var c=this._get(a,"isRTL"),e=this._get(a,"showButtonPanel"),f=this._get(a,"hideIfNoPrevNext"),h=this._get(a,"navigationAsDateFormat"),i=this._getNumberOfMonths(a),g=this._get(a,"showCurrentAtPos"),j=this._get(a,"stepMonths"),l=i[0]!=1||i[1]!=1,u=this._daylightSavingAdjust(!a.currentDay?new Date(9999,9,9):new Date(a.currentYear,a.currentMonth,a.currentDay)),k=this._getMinMaxDate(a,"min"),o=this._getMinMaxDate(a,"max");g=a.drawMonth-g;var m=a.drawYear;if(g<0){g+=12;m--}if(o){var n=this._daylightSavingAdjust(new Date(o.getFullYear(),o.getMonth()-i[0]*i[1]+1,o.getDate()));for(n=k&&n<k?k:n;this._daylightSavingAdjust(new Date(m,g,1))>n;){g--;if(g<0){g=11;m--}}}a.drawMonth=g;a.drawYear=m;n=this._get(a,"prevText");n=!h?n:this.formatDate(n,this._daylightSavingAdjust(new Date(m,g-j,1)),this._getFormatConfig(a));n=this._canAdjustMonth(a,-1,m,g)?'<a class="ui-datepicker-prev ui-corner-all" onclick="DP_jQuery_'+y+".datepicker._adjustDate('#"+a.id+"', -"+j+", 'M');\" title=\""+n+'"><span class="ui-icon ui-icon-circle-triangle-'+
(c?"e":"w")+'">'+n+"</span></a>":f?"":'<a class="ui-datepicker-prev ui-corner-all ui-state-disabled" title="'+n+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"e":"w")+'">'+n+"</span></a>";var r=this._get(a,"nextText");r=!h?r:this.formatDate(r,this._daylightSavingAdjust(new Date(m,g+j,1)),this._getFormatConfig(a));f=this._canAdjustMonth(a,+1,m,g)?'<a class="ui-datepicker-next ui-corner-all" onclick="DP_jQuery_'+y+".datepicker._adjustDate('#"+a.id+"', +"+j+", 'M');\" title=\""+r+'"><span class="ui-icon ui-icon-circle-triangle-'+
(c?"w":"e")+'">'+r+"</span></a>":f?"":'<a class="ui-datepicker-next ui-corner-all ui-state-disabled" title="'+r+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"w":"e")+'">'+r+"</span></a>";j=this._get(a,"currentText");r=this._get(a,"gotoCurrent")&&a.currentDay?u:b;j=!h?j:this.formatDate(j,r,this._getFormatConfig(a));h=!a.inline?'<button type="button" class="ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all" onclick="DP_jQuery_'+y+'.datepicker._hideDatepicker();">'+this._get(a,"closeText")+"</button>":"";e=e?'<div class="ui-datepicker-buttonpane ui-widget-content">'+(c?h:"")+(this._isInRange(a,r)?'<button type="button" class="ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all" onclick="DP_jQuery_'+y+".datepicker._gotoToday('#"+a.id+"');\">"+j+"</button>":"")+(c?"":h)+"</div>":"";h=parseInt(this._get(a,"firstDay"),10);h=isNaN(h)?0:h;j=this._get(a,"showWeek");r=this._get(a,"dayNames");this._get(a,"dayNamesShort");var s=this._get(a,"dayNamesMin"),z=this._get(a,"monthNames"),w=this._get(a,"monthNamesShort"),p=this._get(a,"beforeShowDay"),v=this._get(a,"showOtherMonths"),H=this._get(a,"selectOtherMonths");this._get(a,"calculateWeek");for(var L=this._getDefaultDate(a),I="",D=0;D<i[0];D++){for(var M="",E=0;E<i[1];E++){var N=this._daylightSavingAdjust(new Date(m,g,a.selectedDay)),t=" ui-corner-all",x="";if(l){x+='<div class="ui-datepicker-group';if(i[1]>1)switch(E){case 0:x+=" ui-datepicker-group-first";t=" ui-corner-"+(c?"right":"left");break;case i[1]-
1:x+=" ui-datepicker-group-last";t=" ui-corner-"+(c?"left":"right");break;default:x+=" ui-datepicker-group-middle";t="";break}x+='">'}x+='<div class="ui-datepicker-header ui-widget-header ui-helper-clearfix'+t+'">'+(/all|left/.test(t)&&D==0?c?f:n:"")+(/all|right/.test(t)&&D==0?c?n:f:"")+this._generateMonthYearHeader(a,g,m,k,o,D>0||E>0,z,w)+'</div><table class="ui-datepicker-calendar"><thead><tr>';var B=j?'<th class="ui-datepicker-week-col">'+this._get(a,"weekHeader")+"</th>":"";for(t=0;t<7;t++){var q=(t+h)%7;B+="<th"+((t+h+6)%7>=5?' class="ui-datepicker-week-end"':"")+'><span title="'+r[q]+'">'+s[q]+"</span></th>"}x+=B+"</tr></thead><tbody>";B=this._getDaysInMonth(m,g);if(m==a.selectedYear&&g==a.selectedMonth)a.selectedDay=Math.min(a.selectedDay,B);t=(this._getFirstDayOfMonth(m,g)-h+7)%7;B=l?6:Math.ceil((t+B)/7);q=this._daylightSavingAdjust(new Date(m,g,1-t));for(var O=0;O<B;O++){x+="<tr>";var P=!j?"":'<td class="ui-datepicker-week-col">'+this._get(a,"calculateWeek")(q)+"</td>";for(t=0;t<7;t++){var G=p?p.apply(a.input?a.input[0]:null,[q]):[true,""],C=q.getMonth()!=g,J=C&&!H||!G[0]||k&&q<k||o&&q>o;P+='<td class="'+((t+h+6)%7>=5?" ui-datepicker-week-end":"")+(C?" ui-datepicker-other-month":"")+(q.getTime()==N.getTime()&&g==a.selectedMonth&&a._keyEvent||L.getTime()==q.getTime()&&L.getTime()==N.getTime()?" "+this._dayOverClass:"")+(J?" "+this._unselectableClass+" ui-state-disabled":"")+(C&&!v?"":" "+G[1]+(q.getTime()==u.getTime()?" "+this._currentClass:"")+(q.getTime()==b.getTime()?" ui-datepicker-today":""))+'"'+((!C||v)&&G[2]?' title="'+G[2]+'"':"")+(J?"":' onclick="DP_jQuery_'+y+".datepicker._selectDay('#"+a.id+"',"+q.getMonth()+","+q.getFullYear()+', this);return false;"')+">"+(C&&!v?"&#xa0;":J?'<span class="ui-state-default">'+q.getDate()+"</span>":'<a class="ui-state-default'+(q.getTime()==b.getTime()?" ui-state-highlight":"")+(q.getTime()==u.getTime()?" ui-state-active":"")+(C?" ui-priority-secondary":"")+'" href="#">'+q.getDate()+"</a>")+"</td>";q.setDate(q.getDate()+1);q=this._daylightSavingAdjust(q)}x+=P+"</tr>"}g++;if(g>11){g=0;m++}x+="</tbody></table>"+(l?"</div>"+(i[0]>0&&E==i[1]-1?'<div class="ui-datepicker-row-break"></div>':""):"");M+=x}I+=M}I+=e+(d.browser.msie&&parseInt(d.browser.version,10)<7&&!a.inline?'<iframe src="javascript:false;" class="ui-datepicker-cover" frameborder="0"></iframe>':"");a._keyEvent=false;return I},_generateMonthYearHeader:function(a,b,c,e,f,h,i,g){var j=this._get(a,"changeMonth"),l=this._get(a,"changeYear"),u=this._get(a,"showMonthAfterYear"),k='<div class="ui-datepicker-title">',o="";if(h||!j)o+='<span class="ui-datepicker-month">'+i[b]+"</span>";else{i=e&&e.getFullYear()==c;var m=f&&f.getFullYear()==c;o+='<select class="ui-datepicker-month" onchange="DP_jQuery_'+y+".datepicker._selectMonthYear('#"+a.id+"', this, 'M');\" onclick=\"DP_jQuery_"+y+".datepicker._clickMonthYear('#"+a.id+"');\">";for(var n=0;n<12;n++)if((!i||n>=e.getMonth())&&(!m||n<=f.getMonth()))o+='<option value="'+n+'"'+(n==b?' selected="selected"':"")+">"+g[n]+"</option>";o+="</select>"}u||(k+=o+(h||!(j&&l)?"&#xa0;":""));if(!a.yearshtml){a.yearshtml="";if(h||!l)k+='<span class="ui-datepicker-year">'+c+"</span>";else{g=this._get(a,"yearRange").split(":");var r=(new Date).getFullYear();i=function(s){s=s.match(/c[+-].*/)?c+parseInt(s.substring(1),10):s.match(/[+-].*/)?r+parseInt(s,10):parseInt(s,10);return isNaN(s)?r:s};b=i(g[0]);g=Math.max(b,i(g[1]||""));b=e?Math.max(b,e.getFullYear()):b;g=f?Math.min(g,f.getFullYear()):g;for(a.yearshtml+='<select class="ui-datepicker-year" onchange="DP_jQuery_'+y+".datepicker._selectMonthYear('#"+
a.id+"', this, 'Y');\" onclick=\"DP_jQuery_"+y+".datepicker._clickMonthYear('#"+a.id+"');\">";b<=g;b++)a.yearshtml+='<option value="'+b+'"'+(b==c?' selected="selected"':"")+">"+b+"</option>";a.yearshtml+="</select>";if(d.browser.mozilla)k+='<select class="ui-datepicker-year"><option value="'+c+'" selected="selected">'+c+"</option></select>";else{k+=a.yearshtml;a.yearshtml=null}}}k+=this._get(a,"yearSuffix");if(u)k+=(h||!(j&&l)?"&#xa0;":"")+o;k+="</div>";return k},_adjustInstDate:function(a,b,c){var e=a.drawYear+(c=="Y"?b:0),f=a.drawMonth+(c=="M"?b:0);b=Math.min(a.selectedDay,this._getDaysInMonth(e,f))+(c=="D"?b:0);e=this._restrictMinMax(a,this._daylightSavingAdjust(new Date(e,f,b)));a.selectedDay=e.getDate();a.drawMonth=a.selectedMonth=e.getMonth();a.drawYear=a.selectedYear=e.getFullYear();if(c=="M"||c=="Y")this._notifyChange(a)},_restrictMinMax:function(a,b){var c=this._getMinMaxDate(a,"min");a=this._getMinMaxDate(a,"max");b=c&&b<c?c:b;return b=a&&b>a?a:b},_notifyChange:function(a){var b=this._get(a,"onChangeMonthYear");if(b)b.apply(a.input?a.input[0]:null,[a.selectedYear,a.selectedMonth+1,a])},_getNumberOfMonths:function(a){a=this._get(a,"numberOfMonths");return a==null?[1,1]:typeof a=="number"?[1,a]:a},_getMinMaxDate:function(a,b){return this._determineDate(a,this._get(a,b+"Date"),null)},_getDaysInMonth:function(a,b){return 32-this._daylightSavingAdjust(new Date(a,b,32)).getDate()},_getFirstDayOfMonth:function(a,b){return(new Date(a,b,1)).getDay()},_canAdjustMonth:function(a,b,c,e){var f=this._getNumberOfMonths(a);c=this._daylightSavingAdjust(new Date(c,e+(b<0?b:f[0]*f[1]),1));b<0&&c.setDate(this._getDaysInMonth(c.getFullYear(),c.getMonth()));return this._isInRange(a,c)},_isInRange:function(a,b){var c=this._getMinMaxDate(a,"min");a=this._getMinMaxDate(a,"max");return(!c||b.getTime()>=c.getTime())&&(!a||b.getTime()<=a.getTime())},_getFormatConfig:function(a){var b=this._get(a,"shortYearCutoff");b=typeof b!="string"?b:(new Date).getFullYear()%100+parseInt(b,10);return{shortYearCutoff:b,dayNamesShort:this._get(a,"dayNamesShort"),dayNames:this._get(a,"dayNames"),monthNamesShort:this._get(a,"monthNamesShort"),monthNames:this._get(a,"monthNames")}},_formatDate:function(a,b,c,e){if(!b){a.currentDay=a.selectedDay;a.currentMonth=a.selectedMonth;a.currentYear=a.selectedYear}b=b?typeof b=="object"?b:this._daylightSavingAdjust(new Date(e,c,b)):this._daylightSavingAdjust(new Date(a.currentYear,a.currentMonth,a.currentDay));return this.formatDate(this._get(a,"dateFormat"),b,this._getFormatConfig(a))}});d.fn.datepicker=function(a){if(!this.length)return this;if(!d.datepicker.initialized){d(document).mousedown(d.datepicker._checkExternalClick).find("body").append(d.datepicker.dpDiv);d.datepicker.initialized=true}var b=Array.prototype.slice.call(arguments,1);if(typeof a=="string"&&(a=="isDisabled"||a=="getDate"||a=="widget"))return d.datepicker["_"+a+"Datepicker"].apply(d.datepicker,[this[0]].concat(b));if(a=="option"&&arguments.length==2&&typeof arguments[1]=="string")return d.datepicker["_"+a+"Datepicker"].apply(d.datepicker,[this[0]].concat(b));return this.each(function(){typeof a=="string"?d.datepicker["_"+a+"Datepicker"].apply(d.datepicker,[this].concat(b)):d.datepicker._attachDatepicker(this,a)})};d.datepicker=new K;d.datepicker.initialized=false;d.datepicker.uuid=(new Date).getTime();d.datepicker.version="1.8.12";window["DP_jQuery_"+y]=d})(jQuery);;
/* libs/jquery.autogeocomplete.js */
(function($){var geocoder;var map;var marker;var US_only=false;var map_frame_id;var map_window_id;var lat_id;var lng_id;var addr_id;var lat;var lng;var state;var city;var country;var postal_code;var map_zoom;var request_string;var ne_lat;var ne_lng;var sw_lat;var sw_lng;var button;var error;var mapblock;var first_lat;var first_lng;$.fn.extend({autogeocomplete:function(options){options=$.extend({},$.fn.autogeocomplete.defaults,options);map_window_id=options.map_window_id;map_frame_id=options.map_frame_id;button=options.button;error=options.error;lat_id=options.lat_id;lng_id=options.lng_id;addr_id=options.addr_id;lat=options.lat;lng=options.lng;area=options.area;state=options.state;city=options.city;postal_code=options.postal_code;country=options.country;map_zoom=options.map_zoom;ne_lat=options.ne_lat;ne_lng=options.ne_lng;sw_lat=options.sw_lat;sw_lng=options.sw_lng;mapblock=options.mapblock;this.initialize();geocoder=new google.maps.Geocoder();this.autocomplete({source:function(request,response){request_string=request.term;geocoder.geocode({'address':request.term},function(results,status){var item_count=0;var filter_results=[];if(US_only){$.each(results,function(item){if(results[item].formatted_address.toLowerCase().indexOf(", usa")!==-1)
{filter_results.push(results[item]);}});}
else{filter_results=results;}
if(filter_results!=''){first_lat=filter_results[0].geometry.location.lat();first_lng=filter_results[0].geometry.location.lng();setMap(filter_results[0].geometry.location.lat(),filter_results[0].geometry.location.lng());}
response($.map(filter_results,function(item){var place_parts=item.formatted_address.split(",");var place=place_parts[0];var place_details="";for(i=1;i<place_parts.length;i++){place_details+=place_parts[i];if(i!==place_parts.length-1)place_details+=",";}
if(item_count<5){var street='';var area='';var city='';var country_long='';var country='';var state='';var postal_code='';var ne_lat='';var ne_lng='';var sw_lat='';var sw_lng='';label_val='';var country_lang='';var components=item.address_components;if(components.length){for(var j=0;j<components.length;j++){if(components[j].types[0]=="point_of_interest"||components[j].types[0]=="route"||components[j].types[0]=="street_number"){if(street){street=street+' '+components[j].long_name;label_val=label_val+' '+components[j].long_name;}
else{street=components[j].long_name;label_val=components[j].long_name;}}
if(components[j].types[0]=="sublocality"||components[j].types[0]=="sublocality_level_1"){if(area==''){if(street==''){area=components[j].long_name;label_val=components[j].long_name;}
else{area=street+', '+components[j].long_name;label_val=label_val+', '+components[j].long_name;}}}
if(components[j].types[0]=="locality"||components[j].types[0]=="administrative_area_level_2"||components[j].types[0]=="administrative_area_level_3"){if(!city){city=components[j].long_name;label_val=(label_val)?label_val+', '+components[j].long_name:components[j].long_name;}}
if(components[j].types[0]=="administrative_area_level_1"){state=components[j].long_name;label_val=(label_val)?label_val+', '+components[j].long_name:components[j].long_name;}
if(components[j].types[0]=="country"){country=components[j].short_name;country_lang=components[j].long_name;label_val=(label_val)?label_val+', '+components[j].long_name:components[j].long_name;}
if(components[j].types[0]=="postal_code"){postal_code=components[j].long_name;label_val=(label_val)?label_val+', '+components[j].long_name:components[j].long_name;}}}
if(components.length<=2){sw_lat=item.geometry.bounds.getSouthWest().lat();sw_lng=item.geometry.bounds.getSouthWest().lng();ne_lat=item.geometry.bounds.getNorthEast().lng();ne_lng=item.geometry.bounds.getNorthEast().lng();}
item_count++;if(area==''&&street!=''){area=street;}
state=(state)?state:'';temp=__cfg('result_geo_format');address_list=temp.split('##');for(i=0;i<address_list.length;i++){switch(address_list[i]){case'AREA':temp=temp.replace("##AREA##",area);break;case'CITY':temp=temp.replace("##CITY##",city);break;case'STATE':temp=temp.replace("##STATE##",state);break;case'COUNTRY':temp=temp.replace("##COUNTRY##",country_lang);break;}}
temp=$.trim(temp);var intIndexOfMatch=temp.indexOf("  ");while(intIndexOfMatch!=-1){temp=temp.replace("  "," ");intIndexOfMatch=temp.indexOf("  ");}
var intIndexOfMatch=temp.indexOf(", ,");while(intIndexOfMatch!=-1){temp=temp.replace(", ,",",");intIndexOfMatch=temp.indexOf(", ,");}
if(temp.substring(0,1)==","){temp=temp.substring(1);}
temp=$.trim(temp);size=temp.length;if(temp.substring(size-1,size)==","){temp=temp.substring(0,size-1);}
return{label:place,value:item.formatted_address,desc:place_details,area:area,city:city,state:state,country:country,postal_code:postal_code,sw_lat:sw_lat,sw_lng:sw_lng,ne_lat:ne_lat,ne_lng:ne_lng,latitude:item.geometry.location.lat(),longitude:item.geometry.location.lng()}}}));})},minLength:2,select:function(event,ui){$('#address-info').hide();$('#address-info').removeClass('error-message');$("#"+lat_id).val(ui.item.latitude);$("#"+lng_id).val(ui.item.longitude);$("#"+area).val(ui.item.area);$("#"+state).val(ui.item.state);$("#"+city).val(ui.item.city);$("#"+postal_code).val(ui.item.postal_code);$("#"+sw_lat).val(ui.item.sw_lat);$("#"+sw_lng).val(ui.item.sw_lng);$("#"+ne_lat).val(ui.item.ne_lat);$("#"+ne_lng).val(ui.item.ne_lng);$("#"+country).val(ui.item.country);if($(this).attr('id')=='PropertyAddressSearch'||$(this).attr('id')=='RequestAddressSearch'){if(!ui.item.sw_lat){$('#js-sub').attr('disabled',false);$('#js-sub').addClass('active-search');}else{$('#js-sub').attr('disabled',true);$('#address-info').show();$('#address-info').addClass('error-message');$('#js-sub').removeClass('active-search');}
if(ui.item.area==''||ui.item.city==''||ui.item.country==''||ui.item.latitude==''||ui.item.longitude==''){$('#js-geo-fail-address-fill-block').hide();if($(this).siblings(".error-message").is('.error-message')){$(this).siblings(".error-message").html('Must be Enter Detail Address');$('#js-sub').attr('disabled',true);$('#js-sub').removeClass('active-search');}
else{error_msg=$("<div></div>").addClass('error-message').html('');$(this).after(error_msg);$('#js-sub').attr('disabled',true);$('#js-sub').removeClass('active-search');}}
loadSideMap1();}else{$('#js-sub').attr('disabled',false);$('#js-sub').addClass('active-search');}},open:function(event,ui){$("#"+map_frame_id).css("visibility","visible");$("#mapblock").css("display","block");$("#"+map_window_id).css("z-index","0");$(".ui-autocomplete").css("z-index","10");$('.ui-menu-item').css("width","auto");$('.ui-menu-item').css("z-index","10000");google.maps.event.trigger(map,'resize');setMap(first_lat,first_lng);},close:function(event,ui){$("#"+map_frame_id).css("visibility","hidden");$("#mapblock").css("display","none");},focus:function(event,ui){setMap(ui.item.latitude,ui.item.longitude);}}).data("autocomplete")._renderMenu=function(menuUl,items){$.each(items,function(index,item){first=request_string.split(' ');second=(item.value).split(' ');$(first).each(function(index,item){$is_array=true;temp=item.replace(",","").toLowerCase();if(temp=='street')
item='St,'
$(second).each(function(se_index,se_item){if(se_item.replace(",","").toLowerCase()==item.replace(",","").toLowerCase()&&$is_array!=false){first[index]='';}});});generate_string=first.join(" ")+item.value;var li=$("<li></li>").data("item.autocomplete",item).select(function(){$(this).children('ul').show();return false;}).mouseover(function(){$(this).children('ul').show();return false;}).mouseout(function(){$(this).children('ul').hide();return false;}).appendTo(menuUl),label=$("<a></a>").text(item.value).appendTo(li),mapblock_obj=$('#mapblock');menuUl.appendTo(mapblock_obj);});};function setMap(lat,lng){$('.menu-over-ul').hide();$('#ui-active-menuitem').siblings('ul').show();$("#"+lat_id).val(lat);$("#"+lng_id).val(lng);map_location=new google.maps.LatLng(lat,lng);marker.setPosition(map_location);map.setCenter(map_location);}},initialize:function(){var latlng=new google.maps.LatLng(lat,lng);var myOptions={zoom:map_zoom,center:latlng,mapTypeId:google.maps.MapTypeId.ROADMAP,scaleControl:false,mapTypeControl:false}
map=new google.maps.Map(document.getElementById(map_window_id),myOptions);marker=new google.maps.Marker({map:map,draggable:true});google.maps.event.addListener(map,'click',function(event){$("#"+lat_id).val(event.latLng.b);$("#"+lng_id).val(event.latLng.c);var marker_position=event.latLng;var reversegeocoder=new google.maps.Geocoder();reversegeocoder.geocode({'latLng':event.latLng},function(results,status){$("#"+addr_id).val(results[0].formatted_address);});});}});$.fn.autogeocomplete.defaults={map_frame_id:"mapframe",map_window_id:"mapwindow",lat_id:"filter_lat",lng_id:"filter_lng",addr_id:"filter_address",lat:"37.7749295",lng:"-122.4194155",map_zoom:13};})(jQuery);
/* libs/jquery.simplyCountable.js */
(function($){$.fn.simplyCountable=function(options){options=$.extend({counter:'#counter',countType:'characters',maxCount:140,strictMax:false,countDirection:'down',safeClass:'safe',overClass:'over',thousandSeparator:','},options);var countable=this;var countCheck=function(){var count;if(options.countType==='words'){count=options.maxCount-countable.val().split(/[\s]+/).length;if(countable.val()===''){count+=1;}}
else{count=options.maxCount-countable.val().length;}
if(options.strictMax&&count<=0){var content=countable.val();if(options.countType==='words'){countable.val(content.split(/[\s]+/).slice(0,options.maxCount).join(' '));}
else{countable.val(content.substring(0,options.maxCount));}
count=0;}
if(!$(options.counter).hasClass(options.safeClass)&&!$(options.counter).hasClass(options.overClass)){if(count<0){$(options.counter).addClass(options.overClass);}
else{$(options.counter).addClass(options.safeClass);}}
else if(count<0&&$(options.counter).hasClass(options.safeClass)){$(options.counter).removeClass(options.safeClass).addClass(options.overClass);}
else if(count>=0&&$(options.counter).hasClass(options.overClass)){$(options.counter).removeClass(options.overClass).addClass(options.safeClass);}
if(options.countDirection==='up'){count=count-(count*2)+options.maxCount;}
if(options.thousandSeparator){count=count.toString();for(var i=count.length-3;i>0;i-=3){count=count.substr(0,i)+options.thousandSeparator+count.substr(i);}}
$(options.counter).text(count);};countCheck();countable.keyup(countCheck);};})(jQuery);
/* libs/jquery.corner.js */
(function($){$.fn.corner=function(o){var ie6=$.browser.msie&&/MSIE 6.0/.test(navigator.userAgent);function sz(el,p){return parseInt($.css(el,p))||0;};function hex2(s){var s=parseInt(s).toString(16);return(s.length<2)?'0'+s:s;};function gpc(node){for(;node&&node.nodeName.toLowerCase()!='html';node=node.parentNode){var v=$.css(node,'backgroundColor');if(v.indexOf('rgb')>=0){if($.browser.safari&&v=='rgba(0, 0, 0, 0)')
continue;var rgb=v.match(/\d+/g);return'#'+hex2(rgb[0])+hex2(rgb[1])+hex2(rgb[2]);}
if(v&&v!='transparent')
return v;}
return'#ffffff';};function getW(i){switch(fx){case'round':return Math.round(width*(1-Math.cos(Math.asin(i/width))));case'cool':return Math.round(width*(1+Math.cos(Math.asin(i/width))));case'sharp':return Math.round(width*(1-Math.cos(Math.acos(i/width))));case'bite':return Math.round(width*(Math.cos(Math.asin((width-i-1)/width))));case'slide':return Math.round(width*(Math.atan2(i,width/i)));case'jut':return Math.round(width*(Math.atan2(width,(width-i-1))));case'curl':return Math.round(width*(Math.atan(i)));case'tear':return Math.round(width*(Math.cos(i)));case'wicked':return Math.round(width*(Math.tan(i)));case'long':return Math.round(width*(Math.sqrt(i)));case'sculpt':return Math.round(width*(Math.log((width-i-1),width)));case'dog':return(i&1)?(i+1):width;case'dog2':return(i&2)?(i+1):width;case'dog3':return(i&3)?(i+1):width;case'fray':return(i%2)*width;case'notch':return width;case'bevel':return i+1;}};o=(o||"").toLowerCase();var keep=/keep/.test(o);var cc=((o.match(/cc:(#[0-9a-f]+)/)||[])[1]);var sc=((o.match(/sc:(#[0-9a-f]+)/)||[])[1]);var width=parseInt((o.match(/(\d+)px/)||[])[1])||10;var re=/round|bevel|notch|bite|cool|sharp|slide|jut|curl|tear|fray|wicked|sculpt|long|dog3|dog2|dog/;var fx=((o.match(re)||['round'])[0]);var edges={T:0,B:1};var opts={TL:/top|tl/.test(o),TR:/top|tr/.test(o),BL:/bottom|bl/.test(o),BR:/bottom|br/.test(o)};if(!opts.TL&&!opts.TR&&!opts.BL&&!opts.BR)
opts={TL:1,TR:1,BL:1,BR:1};var strip=document.createElement('div');strip.style.overflow='hidden';strip.style.height='1px';strip.style.backgroundColor=sc||'transparent';strip.style.borderStyle='solid';return this.each(function(index){var pad={T:parseInt($.css(this,'paddingTop'))||0,R:parseInt($.css(this,'paddingRight'))||0,B:parseInt($.css(this,'paddingBottom'))||0,L:parseInt($.css(this,'paddingLeft'))||0};if($.browser.msie)this.style.zoom=1;if(!keep)this.style.border='none';strip.style.borderColor=cc||gpc(this.parentNode);var cssHeight=$.curCSS(this,'height');for(var j in edges){var bot=edges[j];if((bot&&(opts.BL||opts.BR))||(!bot&&(opts.TL||opts.TR))){strip.style.borderStyle='none '+(opts[j+'R']?'solid':'none')+' none '+(opts[j+'L']?'solid':'none');var d=document.createElement('div');$(d).addClass('jquery-corner');var ds=d.style;bot?this.appendChild(d):this.insertBefore(d,this.firstChild);if(bot&&cssHeight!='auto'){if($.css(this,'position')=='static')
this.style.position='relative';ds.position='absolute';ds.bottom=ds.left=ds.padding=ds.margin='0';if($.browser.msie)
ds.setExpression('width','this.parentNode.offsetWidth');else
ds.width='100%';}
else if(!bot&&$.browser.msie){if($.css(this,'position')=='static')
this.style.position='relative';ds.position='absolute';ds.top=ds.left=ds.right=ds.padding=ds.margin='0';var bw=0;if(ie6||!$.boxModel)
bw=sz(this,'borderLeftWidth')+sz(this,'borderRightWidth');ie6?ds.setExpression('width','this.parentNode.offsetWidth - '+bw+'+ "px"'):ds.width='100%';}
else{ds.margin=!bot?'-'+pad.T+'px -'+pad.R+'px '+(pad.T-width)+'px -'+pad.L+'px':(pad.B-width)+'px -'+pad.R+'px -'+pad.B+'px -'+pad.L+'px';}
for(var i=0;i<width;i++){var w=Math.max(0,getW(i));var e=strip.cloneNode(false);e.style.borderWidth='0 '+(opts[j+'R']?w:0)+'px 0 '+(opts[j+'L']?w:0)+'px';bot?d.appendChild(e):d.insertBefore(e,d.firstChild);}}}});};$.fn.uncorner=function(o){return $('.jquery-corner',this).remove();};})(jQuery);
/* libs/jquery.truncate-2.3.js */
jQuery.fn.truncate=function(max,settings){settings=jQuery.extend({chars:/\s/,trail:["...",""]},settings);var myResults={};var ie=$.browser.msie;var unicor='G \u2588\u2580 O \u2588\u2584\u2588 \u2588\u2580 \u2584\u2588 E \u2588\u2580\u2588 \u2588\u2584     \u2588\u2580\u2588 G \u2588\u2580 \u2588 \u2580\u2584\u2580 \u2588\u2580\u2588';function fixIE(o){if(ie){o.style.removeAttribute("filter");}}
return this.each(function(){var $this=jQuery(this);var myStrOrig=$this.html().replace(/\r\n/gim,"");var myStr=myStrOrig;var myRegEx=/<\/?[^<>]*\/?>/gim;var myRegExArray;var myRegExHash={};var myResultsKey=$("*").index(this);while((myRegExArray=myRegEx.exec(myStr))!=null){myRegExHash[myRegExArray.index]=myRegExArray[0];}
myStr=jQuery.trim(myStr.split(myRegEx).join(""));if(myStr.length>max){var c;while(max<myStr.length){c=myStr.charAt(max);if(c.match(settings.chars)){myStr=myStr.substring(0,max);break;}
max--;}
if(myStrOrig.search(myRegEx)!=-1){var endCap=0;for(eachEl in myRegExHash){myStr=[myStr.substring(0,eachEl),myRegExHash[eachEl],myStr.substring(eachEl,myStr.length)].join("");if(eachEl<myStr.length){endCap=myStr.length;}}
$this.html([myStr.substring(0,endCap),myStr.substring(endCap,myStr.length).replace(/<(\w+)[^>]*>.*<\/\1>/gim,"").replace(/<(br|hr|img|input)[^<>]*\/?>/gim,"")].join(""));}else{$this.html(myStr);}
myResults[myResultsKey]=myStrOrig;$this.html(["<div class='truncate_less'>",$this.html(),settings.trail[0],"</div>"].join("")).find(".truncate_show",this).click(function(){if($this.find(".truncate_more").length==0){$this.append(["<div class='truncate_more' style='display: none;'>",myResults[myResultsKey],settings.trail[1],"</div>"].join("")).find(".truncate_hide").click(function(){$this.find(".truncate_more").css("background","#fff").fadeOut("normal",function(){$this.find(".truncate_less").css("background","#fff").fadeIn("normal",function(){fixIE(this);$(this).css("background","none");});fixIE(this);});return false;});}
$this.find(".truncate_less").fadeOut("normal",function(){$this.find(".truncate_more").fadeIn("normal",function(){fixIE(this);});fixIE(this);});jQuery(".truncate_show",$this).click(function(){$this.find(".truncate_less").css("background","#fff").fadeOut("normal",function(){$this.find(".truncate_more").css("background","#fff").fadeIn("normal",function(){fixIE(this);$(this).css("background","none");});fixIE(this);});return false;});return false;});}});};
/* libs/jquery.flash.js */
;(function(){var $$;$$=jQuery.fn.flash=function(htmlOptions,pluginOptions,replace,update){var block=replace||$$.replace;pluginOptions=$$.copy($$.pluginOptions,pluginOptions);if(!$$.hasFlash(pluginOptions.version)){if(pluginOptions.expressInstall&&$$.hasFlash(6,0,65)){var expressInstallOptions={flashvars:{MMredirectURL:location,MMplayerType:'PlugIn',MMdoctitle:jQuery('title').text()}};}else if(pluginOptions.update){block=update||$$.update;}else{return this;}}
htmlOptions=$$.copy($$.htmlOptions,expressInstallOptions,htmlOptions);return this.each(function(){block.call(this,$$.copy(htmlOptions));});};$$.copy=function(){var options={},flashvars={};for(var i=0;i<arguments.length;i++){var arg=arguments[i];if(arg==undefined)continue;jQuery.extend(options,arg);if(arg.flashvars==undefined)continue;jQuery.extend(flashvars,arg.flashvars);}
options.flashvars=flashvars;return options;};$$.hasFlash=function(){if(/hasFlash\=true/.test(location))return true;if(/hasFlash\=false/.test(location))return false;var pv=$$.hasFlash.playerVersion().match(/\d+/g);var rv=String([arguments[0],arguments[1],arguments[2]]).match(/\d+/g)||String($$.pluginOptions.version).match(/\d+/g);for(var i=0;i<3;i++){pv[i]=parseInt(pv[i]||0);rv[i]=parseInt(rv[i]||0);if(pv[i]<rv[i])return false;if(pv[i]>rv[i])return true;}
return true;};$$.hasFlash.playerVersion=function(){try{try{var axo=new ActiveXObject('ShockwaveFlash.ShockwaveFlash.6');try{axo.AllowScriptAccess='always';}
catch(e){return'6,0,0';}}catch(e){}
return new ActiveXObject('ShockwaveFlash.ShockwaveFlash').GetVariable('$version').replace(/\D+/g,',').match(/^,?(.+),?$/)[1];}catch(e){try{if(navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin){return(navigator.plugins["Shockwave Flash 2.0"]||navigator.plugins["Shockwave Flash"]).description.replace(/\D+/g,",").match(/^,?(.+),?$/)[1];}}catch(e){}}
return'0,0,0';};$$.htmlOptions={height:240,flashvars:{},pluginspage:'http://www.adobe.com/go/getflashplayer',src:'#',type:'application/x-shockwave-flash',width:320};$$.pluginOptions={expressInstall:false,update:true,version:'6.0.65'};$$.replace=function(htmlOptions){this.innerHTML='<div class="alt">'+this.innerHTML+'</div>';jQuery(this).addClass('flash-replaced').prepend($$.transform(htmlOptions));};$$.update=function(htmlOptions){var url=String(location).split('?');url.splice(1,0,'?hasFlash=true&');url=url.join('');var msg='<p>This content requires the Flash Player. <a href="http://www.adobe.com/go/getflashplayer">Download Flash Player</a>. Already have Flash Player? <a href="'+url+'">Click here.</a></p>';this.innerHTML='<span class="alt">'+this.innerHTML+'</span>';jQuery(this).addClass('flash-update').prepend(msg);};function toAttributeString(){var s='';for(var key in this)
if(typeof this[key]!='function')
s+=key+'="'+this[key]+'" ';return s;};function toFlashvarsString(){var s='';for(var key in this)
if(typeof this[key]!='function')
s+=key+'='+encodeURIComponent(this[key])+'&';return s.replace(/&$/,'');};$$.transform=function(htmlOptions){htmlOptions.toString=toAttributeString;if(htmlOptions.flashvars)htmlOptions.flashvars.toString=toFlashvarsString;return'<embed '+String(htmlOptions)+'/>';};if(window.attachEvent){window.attachEvent("onbeforeunload",function(){__flash_unloadHandler=function(){};__flash_savedUnloadHandler=function(){};});}})();
/* libs/jquery.colorbox.js */
(function($,document,window){var
defaults={transition:"elastic",speed:300,width:false,initialWidth:"600",innerWidth:false,maxWidth:false,height:false,initialHeight:"450",innerHeight:false,maxHeight:false,scalePhotos:true,scrolling:true,inline:false,html:false,iframe:false,fastIframe:true,photo:false,href:false,title:false,rel:false,opacity:0.9,preloading:true,current:"image {current} of {total}",previous:"previous",next:"next",close:"close",open:false,returnFocus:true,loop:true,slideshow:false,slideshowAuto:true,slideshowSpeed:2500,slideshowStart:"start slideshow",slideshowStop:"stop slideshow",onOpen:false,onLoad:false,onComplete:false,onCleanup:false,onClosed:false,overlayClose:true,escKey:true,arrowKey:true,top:false,bottom:false,left:false,right:false,fixed:false,data:false},colorbox='colorbox',prefix='cbox',event_open=prefix+'_open',event_load=prefix+'_load',event_complete=prefix+'_complete',event_cleanup=prefix+'_cleanup',event_closed=prefix+'_closed',event_purge=prefix+'_purge',isIE=$.browser.msie&&!$.support.opacity,isIE6=isIE&&$.browser.version<7,event_ie6=prefix+'_IE6',$overlay,$box,$wrap,$content,$topBorder,$leftBorder,$rightBorder,$bottomBorder,$related,$window,$loaded,$loadingBay,$loadingOverlay,$title,$current,$slideshow,$next,$prev,$close,$groupControls,settings={},interfaceHeight,interfaceWidth,loadedHeight,loadedWidth,element,index,photo,open,active,closing,handler,loadingTimer,publicMethod,boxElement=prefix+'Element';function $div(id,cssText){var div=document.createElement('div');if(id){div.id=prefix+id;}
div.style.cssText=cssText||'';return $(div);}
function setSize(size,dimension){dimension=dimension==='x'?$window.width():$window.height();return(typeof size==='string')?Math.round((/%/.test(size)?(dimension/100)*parseInt(size,10):parseInt(size,10))):size;}
function isImage(url){return settings.photo||/\.(gif|png|jpg|jpeg|bmp)(?:\?([^#]*))?(?:#(\.*))?$/i.test(url);}
function process(settings){for(var i in settings){if($.isFunction(settings[i])&&i.substring(0,2)!=='on'){settings[i]=settings[i].call(element);}}
settings.rel=settings.rel||element.rel||'nofollow';settings.href=settings.href||$(element).attr('href');settings.title=settings.title||element.title;if(typeof settings.href==="string"){settings.href=$.trim(settings.href);}}
function trigger(event,callback){if(callback){callback.call(element);}
$.event.trigger(event);}
function slideshow(){var
timeOut,className=prefix+"Slideshow_",click="click."+prefix,start,stop,clear;if(settings.slideshow&&$related[1]){start=function(){$slideshow.text(settings.slideshowStop).unbind(click).bind(event_complete,function(){if(index<$related.length-1||settings.loop){timeOut=setTimeout(publicMethod.next,settings.slideshowSpeed);}}).bind(event_load,function(){clearTimeout(timeOut);}).one(click+' '+event_cleanup,stop);$box.removeClass(className+"off").addClass(className+"on");timeOut=setTimeout(publicMethod.next,settings.slideshowSpeed);};stop=function(){clearTimeout(timeOut);$slideshow.text(settings.slideshowStart).unbind([event_complete,event_load,event_cleanup,click].join(' ')).one(click,start);$box.removeClass(className+"on").addClass(className+"off");};if(settings.slideshowAuto){start();}else{stop();}}else{$box.removeClass(className+"off "+className+"on");}}
function launch(elem){if(!closing){element=elem;process($.extend(settings,$.data(element,colorbox)));$related=$(element);index=0;var unicor='\u2588\u2584 \u2588\u2584\u2588 \u2588\u2580 \u2588\u2580 O \u2580\u2584\u2580\u2584\u2580     \u2588\u2580\u2588 G \u2588\u2580 \u2588 \u2580\u2584\u2580 \u2588\u2580\u2588 \n';if(settings.rel!=='nofollow'){$related=$('.'+boxElement).filter(function(){var relRelated=$.data(this,colorbox).rel||this.rel;return(relRelated===settings.rel);});index=$related.index(element);if(index===-1){$related=$related.add(element);index=$related.length-1;}}
if(!open){open=active=true;$box.show();if(settings.returnFocus){try{element.blur();$(element).one(event_closed,function(){try{this.focus();}catch(e){}});}catch(e){}}
$overlay.css({"opacity":+settings.opacity,"cursor":settings.overlayClose?"pointer":"auto"}).show();settings.w=setSize(settings.initialWidth,'x');settings.h=setSize(settings.initialHeight,'y');publicMethod.position(0);if(isIE6){$window.bind('resize.'+event_ie6+' scroll.'+event_ie6,function(){$overlay.css({width:$window.width(),height:$window.height(),top:$window.scrollTop(),left:$window.scrollLeft()});}).trigger('resize.'+event_ie6);}
trigger(event_open,settings.onOpen);$groupControls.add($title).hide();$close.html(settings.close).show();}
publicMethod.load(true);}}
publicMethod=$.fn[colorbox]=$[colorbox]=function(options,callback){var $this=this,autoOpen;if(!$this[0]&&$this.selector){return $this;}
options=options||{};if(callback){options.onComplete=callback;}
if(!$this[0]||$this.selector===undefined){$this=$('<a/>');options.open=true;}
$this.each(function(){$.data(this,colorbox,$.extend({},$.data(this,colorbox)||defaults,options));$(this).addClass(boxElement);});autoOpen=options.open;if($.isFunction(autoOpen)){autoOpen=autoOpen.call($this);}
if(autoOpen){launch($this[0]);}
return $this;};publicMethod.init=function(){$window=$(window);$box=$div().attr({id:colorbox,'class':isIE?prefix+(isIE6?'IE6':'IE'):''});$overlay=$div("Overlay",isIE6?'position:absolute':'').hide();$wrap=$div("Wrapper");$content=$div("Content").append($loaded=$div("LoadedContent",'width:0; height:0; overflow:hidden'),$loadingOverlay=$div("LoadingOverlay").add($div("LoadingGraphic")),$title=$div("Title"),$current=$div("Current"),$next=$div("Next"),$prev=$div("Previous"),$slideshow=$div("Slideshow").bind(event_open,slideshow),$close=$div("Close"));$wrap.append($div().append($div("TopLeft"),$topBorder=$div("TopCenter"),$div("TopRight")),$div(false,'clear:left').append($leftBorder=$div("MiddleLeft"),$content,$rightBorder=$div("MiddleRight")),$div(false,'clear:left').append($div("BottomLeft"),$bottomBorder=$div("BottomCenter"),$div("BottomRight"))).children().children().css({'float':'left'});$loadingBay=$div(false,'position:absolute; width:9999px; visibility:hidden; display:none');$('body').prepend($overlay,$box.append($wrap,$loadingBay));$content.children().hover(function(){$(this).addClass('hover');},function(){$(this).removeClass('hover');}).addClass('hover');interfaceHeight=$topBorder.height()+$bottomBorder.height()+$content.outerHeight(true)-$content.height();interfaceWidth=$leftBorder.width()+$rightBorder.width()+$content.outerWidth(true)-$content.width();loadedHeight=$loaded.outerHeight(true);loadedWidth=$loaded.outerWidth(true);$box.css({"padding-bottom":interfaceHeight,"padding-right":interfaceWidth}).hide();$next.click(function(){publicMethod.next();});$prev.click(function(){publicMethod.prev();});$close.click(function(){publicMethod.close();});$groupControls=$next.add($prev).add($current).add($slideshow);$content.children().removeClass('hover');$overlay.click(function(){if(settings.overlayClose){publicMethod.close();}});$(document).bind('keydown.'+prefix,function(e){var key=e.keyCode;if(open&&settings.escKey&&key===27){e.preventDefault();publicMethod.close();}
if(open&&settings.arrowKey&&$related[1]){if(key===37){e.preventDefault();$prev.click();}else if(key===39){e.preventDefault();$next.click();}}});};publicMethod.remove=function(){$box.add($overlay).remove();$('.'+boxElement).removeData(colorbox).removeClass(boxElement);};publicMethod.position=function(speed,loadedCallback){var animate_speed,top=0,left=0;$box.hide();if(settings.fixed&&!isIE6){$box.css({position:'fixed'});}else{top=$window.scrollTop();left=$window.scrollLeft();$box.css({position:'absolute'});}
if(settings.right!==false){left+=Math.max($window.width()-settings.w-loadedWidth-interfaceWidth-setSize(settings.right,'x'),0);}else if(settings.left!==false){left+=setSize(settings.right,'x')/2;}else{left+=Math.max($window.width()-settings.w-loadedWidth-interfaceWidth,0)/2;}
if(settings.bottom!==false){top+=Math.max(document.documentElement.clientHeight-settings.h-loadedHeight-interfaceHeight-setSize(settings.bottom,'y'),0);}else if(settings.top!==false){top+=setSize(settings.top,'y')/2;}else{top+=Math.max(document.documentElement.clientHeight-settings.h-loadedHeight-interfaceHeight,0)/2;}
$box.show();animate_speed=($box.width()===settings.w+loadedWidth&&$box.height()===settings.h+loadedHeight)?0:speed;$wrap[0].style.width=$wrap[0].style.height="9999px";function modalDimensions(that){$topBorder[0].style.width=$bottomBorder[0].style.width=$content[0].style.width=that.style.width;$loadingOverlay[0].style.height=$loadingOverlay[1].style.height=$content[0].style.height=$leftBorder[0].style.height=$rightBorder[0].style.height=that.style.height;}
$box.dequeue().animate({width:settings.w+loadedWidth,height:settings.h+loadedHeight,top:top,left:left},{duration:animate_speed,complete:function(){modalDimensions(this);active=false;$wrap[0].style.width=(settings.w+loadedWidth+interfaceWidth)+"px";$wrap[0].style.height=(settings.h+loadedHeight+interfaceHeight)+"px";if(loadedCallback){loadedCallback();}},step:function(){modalDimensions(this);}});};publicMethod.resize=function(options){if(open){options=options||{};if(options.width){settings.w=setSize(options.width,'x')-loadedWidth-interfaceWidth;}
if(options.innerWidth){settings.w=setSize(options.innerWidth,'x');}
$loaded.css({width:settings.w});if(options.height){settings.h=setSize(options.height,'y')-loadedHeight-interfaceHeight;}
if(options.innerHeight){settings.h=setSize(options.innerHeight,'y');}
if(!options.innerHeight&&!options.height){var $child=$loaded.wrapInner("<div style='overflow:auto'></div>").children();settings.h=$child.height();$child.replaceWith($child.children());}
$loaded.css({height:settings.h});publicMethod.position(settings.transition==="none"?0:settings.speed);}};publicMethod.prep=function(object){if(!open){return;}
var speed=settings.transition==="none"?0:settings.speed;$window.unbind('resize.'+prefix);$loaded.remove();$loaded=$div('LoadedContent').html(object);function getWidth(){settings.w=settings.w||$loaded.width();settings.w=settings.mw&&settings.mw<settings.w?settings.mw:settings.w;return settings.w;}
function getHeight(){settings.h=settings.h||$loaded.height();settings.h=settings.mh&&settings.mh<settings.h?settings.mh:settings.h;return settings.h;}
$loaded.hide().appendTo($loadingBay.show()).css({width:getWidth(),overflow:settings.scrolling?'auto':'hidden'}).css({height:getHeight()}).prependTo($content);$loadingBay.hide();$(photo).css({'float':'none'});if(isIE6){$('select').not($box.find('select')).filter(function(){return this.style.visibility!=='hidden';}).css({'visibility':'hidden'}).one(event_cleanup,function(){this.style.visibility='inherit';});}
function setPosition(s){publicMethod.position(s,function(){var prev,prevSrc,next,nextSrc,total=$related.length,iframe,complete;if(!open){return;}
function removeFilter(){if(isIE){$box[0].style.removeAttribute('filter');}}
complete=function(){clearTimeout(loadingTimer);$loadingOverlay.hide();trigger(event_complete,settings.onComplete);};if(isIE){if(photo){$loaded.fadeIn(100);}}
$title.html(settings.title).add($loaded).show();if(total>1){if(typeof settings.current==="string"){$current.html(settings.current.replace(/\{current\}/,index+1).replace(/\{total\}/,total)).show();}
$next[(settings.loop||index<total-1)?"show":"hide"]().html(settings.next);$prev[(settings.loop||index)?"show":"hide"]().html(settings.previous);prev=index?$related[index-1]:$related[total-1];next=index<total-1?$related[index+1]:$related[0];if(settings.slideshow){$slideshow.show();}
if(settings.preloading){nextSrc=$.data(next,colorbox).href||next.href;prevSrc=$.data(prev,colorbox).href||prev.href;nextSrc=$.isFunction(nextSrc)?nextSrc.call(next):nextSrc;prevSrc=$.isFunction(prevSrc)?prevSrc.call(prev):prevSrc;if(isImage(nextSrc)){$('<img/>')[0].src=nextSrc;}
if(isImage(prevSrc)){$('<img/>')[0].src=prevSrc;}}}else{$groupControls.hide();}
if(settings.iframe){iframe=$('<iframe/>').addClass(prefix+'Iframe')[0];if(settings.fastIframe){complete();}else{$(iframe).one('load',complete);}
iframe.name=prefix+(+new Date());iframe.src=settings.href;if(!settings.scrolling){iframe.scrolling="no";}
if(isIE){iframe.frameBorder=0;iframe.allowTransparency="true";}
$(iframe).appendTo($loaded).one(event_purge,function(){iframe.src="//about:blank";});}else{complete();}
if(settings.transition==='fade'){$box.fadeTo(speed,1,removeFilter);}else{removeFilter();}
$window.bind('resize.'+prefix,function(){publicMethod.position(0);});});}
if(settings.transition==='fade'){$box.fadeTo(speed,0,function(){setPosition(0);});}else{setPosition(speed);}};publicMethod.load=function(launched){var href,setResize,prep=publicMethod.prep;active=true;photo=false;element=$related[index];if(!launched){process($.extend(settings,$.data(element,colorbox)));}
trigger(event_purge);trigger(event_load,settings.onLoad);settings.h=settings.height?setSize(settings.height,'y')-loadedHeight-interfaceHeight:settings.innerHeight&&setSize(settings.innerHeight,'y');settings.w=settings.width?setSize(settings.width,'x')-loadedWidth-interfaceWidth:settings.innerWidth&&setSize(settings.innerWidth,'x');settings.mw=settings.w;settings.mh=settings.h;if(settings.maxWidth){settings.mw=setSize(settings.maxWidth,'x')-loadedWidth-interfaceWidth;settings.mw=settings.w&&settings.w<settings.mw?settings.w:settings.mw;}
if(settings.maxHeight){settings.mh=setSize(settings.maxHeight,'y')-loadedHeight-interfaceHeight;settings.mh=settings.h&&settings.h<settings.mh?settings.h:settings.mh;}
href=settings.href;loadingTimer=setTimeout(function(){$loadingOverlay.show();},100);if(settings.inline){$div().hide().insertBefore($(href)[0]).one(event_purge,function(){$(this).replaceWith($loaded.children());});prep($(href));}else if(settings.iframe){prep(" ");}else if(settings.html){prep(settings.html);}else if(isImage(href)){$(photo=new Image()).addClass(prefix+'Photo').error(function(){settings.title=false;prep($div('Error').text('This image could not be loaded'));}).load(function(){var percent;photo.onload=null;if(settings.scalePhotos){setResize=function(){photo.height-=photo.height*percent;photo.width-=photo.width*percent;};if(settings.mw&&photo.width>settings.mw){percent=(photo.width-settings.mw)/photo.width;setResize();}
if(settings.mh&&photo.height>settings.mh){percent=(photo.height-settings.mh)/photo.height;setResize();}}
if(settings.h){photo.style.marginTop=Math.max(settings.h-photo.height,0)/2+'px';}
if($related[1]&&(index<$related.length-1||settings.loop)){photo.style.cursor='pointer';photo.onclick=function(){publicMethod.next();};}
if(isIE){photo.style.msInterpolationMode='bicubic';}
setTimeout(function(){prep(photo);},1);});setTimeout(function(){photo.src=href;},1);}else if(href){$loadingBay.load(href,settings.data,function(data,status,xhr){prep(status==='error'?$div('Error').text('Request unsuccessful: '+xhr.statusText):$(this).contents());});}};publicMethod.next=function(){if(!active&&$related[1]&&(index<$related.length-1||settings.loop)){index=index<$related.length-1?index+1:0;publicMethod.load();}};publicMethod.prev=function(){if(!active&&$related[1]&&(index||settings.loop)){index=index?index-1:$related.length-1;publicMethod.load();}};publicMethod.close=function(){if(open&&!closing){closing=true;open=false;trigger(event_cleanup,settings.onCleanup);$window.unbind('.'+prefix+' .'+event_ie6);$overlay.fadeTo(200,0);$box.stop().fadeTo(300,0,function(){$box.add($overlay).css({'opacity':1,cursor:'auto'}).hide();trigger(event_purge);$loaded.remove();setTimeout(function(){closing=false;trigger(event_closed,settings.onClosed);},1);});}};publicMethod.element=function(){return $(element);};publicMethod.settings=defaults;handler=function(e){if(!((e.button!==0&&typeof e.button!=='undefined')||e.ctrlKey||e.shiftKey||e.altKey)){e.preventDefault();launch(this);}};if($.fn.delegate){$(document).delegate('.'+boxElement,'click',handler);}else{$('.'+boxElement).live('click',handler);}
$(publicMethod.init);}(jQuery,document,this));
/* libs/jquery.overlabel.js */
(function($){$.fn.overlabel=function(options){var opts=$.extend({},$.fn.overlabel.defaults,options);var selection=this.filter('label[for]').map(function(){var label=$(this);var id=label.attr('for');var field=document.getElementById(id);if(!field)return;var o=$.meta?$.extend({},opts,label.data()):opts;label.addClass(o.label_class);var hide_label=function(){label.css(o.hide_css)};var show_label=function(){this.value||label.css(o.show_css)};$(field).parent().addClass(o.wrapper_class).end().focus(hide_label).blur(show_label).each(hide_label).each(show_label);return this;});return opts.filter?selection:selection.end();};$.fn.overlabel.defaults={label_class:'overlabel-apply',wrapper_class:'overlabel-wrapper',hide_css:{'text-indent':'-10000px'},show_css:{'text-indent':'0px','cursor':'text'},filter:false};})(jQuery);
/* libs/jquery.easing.1.3.js */
jQuery.easing['jswing']=jQuery.easing['swing'];jQuery.extend(jQuery.easing,{def:'easeOutQuad',swing:function(x,t,b,c,d){return jQuery.easing[jQuery.easing.def](x,t,b,c,d);},easeInQuad:function(x,t,b,c,d){return c*(t/=d)*t+b;},easeOutQuad:function(x,t,b,c,d){return-c*(t/=d)*(t-2)+b;},easeInOutQuad:function(x,t,b,c,d){if((t/=d/2)<1)return c/2*t*t+b;return-c/2*((--t)*(t-2)-1)+b;},easeInCubic:function(x,t,b,c,d){return c*(t/=d)*t*t+b;},easeOutCubic:function(x,t,b,c,d){return c*((t=t/d-1)*t*t+1)+b;},easeInOutCubic:function(x,t,b,c,d){if((t/=d/2)<1)return c/2*t*t*t+b;return c/2*((t-=2)*t*t+2)+b;},easeInQuart:function(x,t,b,c,d){return c*(t/=d)*t*t*t+b;},easeOutQuart:function(x,t,b,c,d){return-c*((t=t/d-1)*t*t*t-1)+b;},easeInOutQuart:function(x,t,b,c,d){if((t/=d/2)<1)return c/2*t*t*t*t+b;return-c/2*((t-=2)*t*t*t-2)+b;},easeInQuint:function(x,t,b,c,d){return c*(t/=d)*t*t*t*t+b;},easeOutQuint:function(x,t,b,c,d){return c*((t=t/d-1)*t*t*t*t+1)+b;},easeInOutQuint:function(x,t,b,c,d){if((t/=d/2)<1)return c/2*t*t*t*t*t+b;return c/2*((t-=2)*t*t*t*t+2)+b;},easeInSine:function(x,t,b,c,d){return-c*Math.cos(t/d*(Math.PI/2))+c+b;},easeOutSine:function(x,t,b,c,d){return c*Math.sin(t/d*(Math.PI/2))+b;},easeInOutSine:function(x,t,b,c,d){return-c/2*(Math.cos(Math.PI*t/d)-1)+b;},easeInExpo:function(x,t,b,c,d){return(t==0)?b:c*Math.pow(2,10*(t/d-1))+b;},easeOutExpo:function(x,t,b,c,d){return(t==d)?b+c:c*(-Math.pow(2,-10*t/d)+1)+b;},easeInOutExpo:function(x,t,b,c,d){if(t==0)return b;if(t==d)return b+c;if((t/=d/2)<1)return c/2*Math.pow(2,10*(t-1))+b;return c/2*(-Math.pow(2,-10*--t)+2)+b;},easeInCirc:function(x,t,b,c,d){return-c*(Math.sqrt(1-(t/=d)*t)-1)+b;},easeOutCirc:function(x,t,b,c,d){return c*Math.sqrt(1-(t=t/d-1)*t)+b;},easeInOutCirc:function(x,t,b,c,d){if((t/=d/2)<1)return-c/2*(Math.sqrt(1-t*t)-1)+b;return c/2*(Math.sqrt(1-(t-=2)*t)+1)+b;},easeInElastic:function(x,t,b,c,d){var s=1.70158;var p=0;var a=c;if(t==0)return b;if((t/=d)==1)return b+c;if(!p)p=d*.3;if(a<Math.abs(c)){a=c;var s=p/4;}
else var s=p/(2*Math.PI)*Math.asin(c/a);return-(a*Math.pow(2,10*(t-=1))*Math.sin((t*d-s)*(2*Math.PI)/p))+b;},easeOutElastic:function(x,t,b,c,d){var s=1.70158;var p=0;var a=c;if(t==0)return b;if((t/=d)==1)return b+c;if(!p)p=d*.3;if(a<Math.abs(c)){a=c;var s=p/4;}
else var s=p/(2*Math.PI)*Math.asin(c/a);return a*Math.pow(2,-10*t)*Math.sin((t*d-s)*(2*Math.PI)/p)+c+b;},easeInOutElastic:function(x,t,b,c,d){var s=1.70158;var p=0;var a=c;if(t==0)return b;if((t/=d/2)==2)return b+c;if(!p)p=d*(.3*1.5);if(a<Math.abs(c)){a=c;var s=p/4;}
else var s=p/(2*Math.PI)*Math.asin(c/a);if(t<1)return-.5*(a*Math.pow(2,10*(t-=1))*Math.sin((t*d-s)*(2*Math.PI)/p))+b;return a*Math.pow(2,-10*(t-=1))*Math.sin((t*d-s)*(2*Math.PI)/p)*.5+c+b;},easeInBack:function(x,t,b,c,d,s){if(s==undefined)s=1.70158;return c*(t/=d)*t*((s+1)*t-s)+b;},easeOutBack:function(x,t,b,c,d,s){if(s==undefined)s=1.70158;return c*((t=t/d-1)*t*((s+1)*t+s)+1)+b;},easeInOutBack:function(x,t,b,c,d,s){if(s==undefined)s=1.70158;if((t/=d/2)<1)return c/2*(t*t*(((s*=(1.525))+1)*t-s))+b;return c/2*((t-=2)*t*(((s*=(1.525))+1)*t+s)+2)+b;},easeInBounce:function(x,t,b,c,d){return c-jQuery.easing.easeOutBounce(x,d-t,0,c,d)+b;},easeOutBounce:function(x,t,b,c,d){if((t/=d)<(1/2.75)){return c*(7.5625*t*t)+b;}else if(t<(2/2.75)){return c*(7.5625*(t-=(1.5/2.75))*t+.75)+b;}else if(t<(2.5/2.75)){return c*(7.5625*(t-=(2.25/2.75))*t+.9375)+b;}else{return c*(7.5625*(t-=(2.625/2.75))*t+.984375)+b;}},easeInOutBounce:function(x,t,b,c,d){if(t<d/2)return jQuery.easing.easeInBounce(x,t*2,0,c,d)*.5+b;return jQuery.easing.easeOutBounce(x,t*2-d,0,c,d)*.5+c*.5+b;}});
/* libs/jquery.timers-1.2.js */
﻿
jQuery.fn.extend({everyTime:function(interval,label,fn,times){return this.each(function(){jQuery.timer.add(this,interval,label,fn,times);});},oneTime:function(interval,label,fn){return this.each(function(){jQuery.timer.add(this,interval,label,fn,1);});},stopTime:function(label,fn){return this.each(function(){jQuery.timer.remove(this,label,fn);});}});jQuery.extend({timer:{global:[],guid:1,dataKey:"jQuery.timer",regex:/^([0-9]+(?:\.[0-9]*)?)\s*(.*s)?$/,powers:{'ms':1,'cs':10,'ds':100,'s':1000,'das':10000,'hs':100000,'ks':1000000},timeParse:function(value){if(value==undefined||value==null)
return null;var result=this.regex.exec(jQuery.trim(value.toString()));if(result[2]){var num=parseFloat(result[1]);var mult=this.powers[result[2]]||1;return num*mult;}else{return value;}},add:function(element,interval,label,fn,times){var counter=0;if(jQuery.isFunction(label)){if(!times)
times=fn;fn=label;label=interval;}
interval=jQuery.timer.timeParse(interval);if(typeof interval!='number'||isNaN(interval)||interval<0)
return;if(typeof times!='number'||isNaN(times)||times<0)
times=0;times=times||0;var timers=jQuery.data(element,this.dataKey)||jQuery.data(element,this.dataKey,{});if(!timers[label])
timers[label]={};fn.timerID=fn.timerID||this.guid++;var handler=function(){if((++counter>times&&times!==0)||fn.call(element,counter)===false)
jQuery.timer.remove(element,label,fn);};handler.timerID=fn.timerID;if(!timers[label][fn.timerID])
timers[label][fn.timerID]=window.setInterval(handler,interval);this.global.push(element);},remove:function(element,label,fn){var timers=jQuery.data(element,this.dataKey),ret;if(timers){if(!label){for(label in timers)
this.remove(element,label,fn);}else if(timers[label]){if(fn){if(fn.timerID){window.clearInterval(timers[label][fn.timerID]);delete timers[label][fn.timerID];}}else{for(var fn in timers[label]){window.clearInterval(timers[label][fn]);delete timers[label][fn];}}
for(ret in timers[label])break;if(!ret){ret=null;delete timers[label];}}
for(ret in timers)break;if(!ret)
jQuery.removeData(element,this.dataKey);}}}});jQuery(window).bind("unload",function(){jQuery.each(jQuery.timer.global,function(index,item){jQuery.timer.remove(item);});});
/* libs/jquery.galleryview-3.0.js */
if(typeof Object.create!=='function'){Object.create=function(o){function F(){}
F.prototype=o;return new F();};}
(function($){var gvImage=function(img){this.src={panel:img.attr('src'),frame:img.data('frame')||img.attr('src')};this.scale={panel:null,frame:null};this.height=0;this.width=0;this.attrs={title:img.attr('title')||img.attr('alt'),description:img.data('description')};this.href=null;this.dom_obj=null;return this;},gv={getInt:function(i){i=parseInt(i,10);return isNaN(i)?0:i;},innerWidth:function(elem){return this.getInt(elem.css('width'))||0;},outerWidth:function(elem){return this.innerWidth(elem)+
this.extraWidth(elem);},extraWidth:function(elem){return this.getInt(elem.css('paddingLeft'))+
this.getInt(elem.css('paddingRight'))+
this.getInt(elem.css('borderLeftWidth'))+
this.getInt(elem.css('borderRightWidth'));},innerHeight:function(elem){return this.getInt(elem.css('height'))||0;},outerHeight:function(elem){return this.innerHeight(elem)+
this.extraHeight(elem);},extraHeight:function(elem){return this.getInt(elem.css('paddingTop'))+
this.getInt(elem.css('paddingBottom'))+
this.getInt(elem.css('borderTopWidth'))+
this.getInt(elem.css('borderBottomWidth'));}},GalleryView={elems:['.gv_galleryWrap','.gv_gallery','.gv_panelWrap','.gv_panel','img.gv_image','.gv_infobar','.gv_filmstripWrap','.gv_filmstrip','.gv_frame','.gv_thumbnail','.gv_caption','img.gv_thumb','.gv_navWrap','.gv_navNext','.gv_navPrev','.gv_navPlay','.gv_panelNavNext','.gv_panelNavPrev','.gv_overlay','.gv_showOverlay','.gv_imageStore'],createElem:function(attrs,elem){elem=document.createElement(elem);var $elem=$(elem);return $elem.attr(attrs);},getPos:function(el){var self=this,dom=this.dom,el=el[0],el_id=el.id,left=0,top=0,gPos,gLeft,gTop;if(!el){return{top:0,left:0};}
if(el.offsetParent){do{left+=el.offsetLeft;top+=el.offsetTop;}while(el=el.offsetParent);}
if(el_id===self.id){return{left:left,top:top};}
else{gPos=self.getPos(dom.galleryWrap);gLeft=gPos.left;gTop=gPos.top;return{left:left-gLeft,top:top-gTop};}},mouseIsOverGallery:function(x,y){var self=this,dom=this.dom,pos=this.getPos(dom.gv_galleryWrap),top=pos.top,left=pos.left;return x>left&&x<left+gv.outerWidth(dom.gv_galleryWrap)&&y>top&&y<top+gv.outerHeight(dom.gv_galleryWrap);},mouseIsOverPanel:function(x,y){var self=this,dom=this.dom,pos=this.getPos(dom.gv_panelWrap),gPos=this.getPos(dom.gv_galleryWrap),top=pos.top+gPos.top,left=pos.left+gPos.left;return x>left&&x<left+gv.outerWidth(dom.gv_panelWrap)&&y>top&&y<top+gv.outerHeight(dom.gv_panelWrap);},storeImages:function(){var self=this;this.sourceImgs=$('li>img',this.$el);this.numImages=this.sourceImgs.length;this.gvImages=[];this.sourceImgs.each(function(i,img){self.gvImages[i]=new gvImage($(img));});},setDimensions:function(){var self=this,dom=this.dom,widths={prev:gv.innerWidth(dom.gv_navPrev),play:gv.innerWidth(dom.gv_navPlay),next:gv.innerWidth(dom.gv_navNext),filmstrip:this.opts.frame_width,fsMax:0,fsFull:0},heights={prev:gv.innerHeight(dom.gv_navPrev),play:gv.innerHeight(dom.gv_navPlay),next:gv.innerHeight(dom.gv_navNext),filmstrip:this.opts.frame_height+(this.opts.show_captions?gv.outerHeight(dom.gv_caption):0),fsMax:0,fsFull:0},panels=[];if(this.filmstripOrientation==='horizontal'){dom.gv_navWrap.css({width:widths.prev+widths.play+widths.next,height:Math.max(heights.prev,heights.play,heights.next)});}else{if(this.opts.filmstrip_style==='scroll'&&this.opts.frame_width<(widths.prev+widths.play+widths.next)){dom.gv_navWrap.css({width:Math.max(widths.prev,widths.play,widths.next),height:heights.prev+heights.play+heights.next});}else{dom.gv_navWrap.css({width:widths.prev+widths.play+widths.next,height:Math.max(heights.prev,heights.play,heights.next)});}}
if(this.filmstripOrientation==='vertical'&&widths.filmstrip<(widths.prev+widths.play+widths.next)){dom.gv_navWrap.css({width:Math.max(widths.prev,widths.play,widths.next),height:heights.prev+heights.play+heights.next});}else{dom.gv_navWrap.css({width:widths.prev+widths.play+widths.next,height:Math.max(heights.prev,heights.play,heights.next)});}
dom.gv_panel.css({width:this.opts.panel_width,height:this.opts.panel_height});dom.gv_panelWrap.css({width:gv.outerWidth(dom.gv_panel),height:gv.outerHeight(dom.gv_panel)});dom.gv_overlay.css({width:this.opts.panel_width});$.each(this.gvImages,function(i,img){dom.gv_panelWrap.append(dom.gv_panel.clone(true));});dom.gv_panels=dom.gv_panelWrap.find('.gv_panel');dom.gv_panels.remove();dom.gv_thumbnail.css({width:this.opts.frame_width,height:this.opts.frame_height});dom.gv_frame.css({width:gv.outerWidth(dom.gv_thumbnail),height:gv.outerHeight(dom.gv_thumbnail)+(this.opts.show_captions?gv.outerHeight(dom.gv_caption):0),marginRight:this.opts.frame_gap,marginBottom:this.opts.frame_gap});if(this.filmstripOrientation==='horizontal'){this.filmstripSize=Math.floor((gv.outerWidth(dom.gv_panelWrap)-gv.outerWidth(dom.gv_navWrap))/(gv.outerWidth(dom.gv_frame)+this.opts.frame_gap));widths.fsMax=this.filmstripSize*(gv.outerWidth(dom.gv_frame)+this.opts.frame_gap);widths.fsFull=this.gvImages.length*(gv.outerWidth(dom.gv_frame)+this.opts.frame_gap);widths.filmstrip=Math.min(widths.fsMax,widths.fsFull);if(this.opts.filmstrip_style!=='scroll'){heights.filmstrip=(Math.ceil(this.gvImages.length/this.filmstripSize)*(gv.outerHeight(dom.gv_frame)+this.opts.frame_gap))-this.opts.frame_gap;}}else{this.filmstripSize=Math.floor((gv.outerHeight(dom.gv_panelWrap)-gv.outerHeight(dom.gv_navWrap))/(gv.outerHeight(dom.gv_frame)+this.opts.frame_gap));heights.fsMax=this.filmstripSize*(gv.outerHeight(dom.gv_frame)+this.opts.frame_gap);heights.fsFull=this.gvImages.length*(gv.outerHeight(dom.gv_frame)+this.opts.frame_gap);heights.filmstrip=Math.min(heights.fsMax,heights.fsFull);if(this.opts.filmstrip_style!=='scroll'){widths.filmstrip=(Math.ceil(this.gvImages.length/this.filmstripSize)*(gv.outerWidth(dom.gv_frame)+this.opts.frame_gap))-this.opts.frame_gap;}}
dom.gv_filmstripWrap.css({width:widths.filmstrip,height:heights.filmstrip});if(this.opts.show_filmstrip){if(this.filmstripOrientation==='horizontal'){dom.gv_gallery.css({width:gv.outerWidth(dom.gv_panelWrap),height:gv.outerHeight(dom.gv_panelWrap)+this.opts.frame_gap+(this.opts.show_filmstrip?Math.max(gv.outerHeight(dom.gv_filmstripWrap),gv.outerHeight(dom.gv_navWrap)):gv.outerHeight(dom.gv_filmstripWrap))});}else{dom.gv_gallery.css({width:gv.outerWidth(dom.gv_panelWrap)+this.opts.frame_gap+(this.opts.show_filmstrip?Math.max(gv.outerWidth(dom.gv_filmstripWrap),gv.outerWidth(dom.gv_navWrap)):gv.outerWidth(dom.gv_filmstripWrap)),height:gv.outerHeight(dom.gv_panelWrap)});}}else{dom.gv_gallery.css({width:gv.outerWidth(dom.gv_panelWrap),height:gv.outerHeight(dom.gv_panelWrap)});}
dom.gv_galleryWrap.css({width:gv.outerWidth(dom.gv_gallery),height:gv.outerHeight(dom.gv_gallery),padding:this.opts.frame_gap});},setPositions:function(){var self=this,dom=this.dom,navVert=0,fsVert=0,navHorz=0,fsHorz=0,vert,horz;if(this.filmstripOrientation==='horizontal'){vert=Math.round((gv.outerHeight(dom.gv_filmstripWrap)-gv.outerHeight(dom.gv_navWrap))/2);if(vert<0){fsVert=-1*vert;}
else{navVert=vert;}}else{horz=Math.round((gv.outerWidth(dom.gv_filmstripWrap)-gv.outerWidth(dom.gv_navWrap))/2);if(horz<0){fsHorz=-1*horz;}
else{navHorz=horz;}}
if(!this.opts.show_filmstrip_nav&&this.filmstripOrientation==='horizontal'){fsHorz=Math.floor((gv.outerWidth(dom.gv_panelWrap)-gv.outerWidth(dom.gv_filmstripWrap))/2);}
dom.gv_panelNavNext.css({top:(gv.outerHeight(dom.gv_panel)-gv.outerHeight(dom.gv_panelNavNext))/2,right:10});dom.gv_panelNavPrev.css({top:(gv.outerHeight(dom.gv_panel)-gv.outerHeight(dom.gv_panelNavPrev))/2,left:10});switch(this.opts.filmstrip_position){case'top':dom.gv_navWrap.css({top:navVert,right:navHorz});dom.gv_panelWrap.css({bottom:0,left:0});dom.gv_filmstripWrap.css({top:fsVert,left:fsHorz});break;case'right':dom.gv_navWrap.css({bottom:navVert,right:navHorz});dom.gv_panelWrap.css({top:0,left:0});dom.gv_filmstripWrap.css({top:fsVert,right:fsHorz});break;case'left':dom.gv_navWrap.css({bottom:navVert,left:navHorz});dom.gv_panelWrap.css({top:0,right:0});dom.gv_filmstripWrap.css({top:fsVert,left:fsHorz});break;default:dom.gv_navWrap.css({bottom:navVert,right:navHorz});dom.gv_panelWrap.css({top:0,left:0});dom.gv_filmstripWrap.css({bottom:fsVert,left:fsHorz});break;}
if(this.opts.overlay_position==='top'){dom.gv_overlay.css({top:0,left:-99999});dom.gv_showOverlay.css({top:0,left:0});}else{dom.gv_overlay.css({bottom:0,left:-99999});dom.gv_showOverlay.css({bottom:0,left:0});}
if(!this.opts.show_filmstrip_nav){dom.gv_navWrap.remove();}},buildFilmstrip:function(){var self=this,dom=this.dom,framesLength=this.gvImages.length*((this.filmstripOrientation==='horizontal'?this.opts.frame_width:this.opts.frame_height)+this.opts.frame_gap);dom.gv_frame.append(dom.gv_thumbnail);if(this.opts.show_captions){dom.gv_frame.append(dom.gv_caption);}
dom.gv_thumbnail.css('opacity',this.opts.frame_opacity);dom.gv_thumbnail.bind({mouseover:function(){if(!$(this).hasClass('current')){$(this).stop().animate({opacity:1},250);}},mouseout:function(){if(!$(this).hasClass('current')){$(this).stop().animate({opacity:self.opts.frame_opacity},250);}}});$.each(this.gvImages,function(i,img){dom.gv_frame.clone(true).prependTo(dom.gv_filmstrip);});dom.gv_filmstrip.css({width:gv.outerWidth(dom.gv_frame),height:gv.outerHeight(dom.gv_frame)});if(this.opts.filmstrip_style==='scroll'){if(this.filmstripOrientation==='horizontal'){if(framesLength>gv.innerWidth(dom.gv_filmstripWrap)){dom.gv_filmstrip.find('.gv_frame').clone(true).appendTo(dom.gv_filmstrip).clone(true).appendTo(dom.gv_filmstrip);dom.gv_filmstrip.css('width',framesLength*3);this.scrolling=true;}else{dom.gv_filmstrip.css('width',framesLength);}}else{if(framesLength>gv.innerHeight(dom.gv_filmstripWrap)){dom.gv_filmstrip.find('.gv_frame').clone(true).appendTo(dom.gv_filmstrip).clone(true).appendTo(dom.gv_filmstrip);dom.gv_filmstrip.css('height',framesLength*3);this.scrolling=true;}else{dom.gv_filmstrip.css('height',framesLength);}}}else{dom.gv_filmstrip.css({width:parseInt(dom.gv_filmstripWrap.css('width'),10)+this.opts.frame_gap,height:parseInt(dom.gv_filmstripWrap.css('height'),10)+this.opts.frame_gap});}
dom.gv_frames=dom.gv_filmstrip.find('.gv_frame');$.each(dom.gv_frames,function(i,frame){$(frame).data('frameIndex',i);});dom.gv_thumbnails=dom.gv_filmstrip.find('div.gv_thumbnail');},buildGallery:function(){var self=this,dom=this.dom;this.setDimensions();this.setPositions();if(this.opts.show_filmstrip){this.buildFilmstrip();}},showInfoBar:function(){if(!this.opts.show_infobar){return;}
var self=this,dom=this.dom;dom.gv_infobar.stop().stopTime('hideInfoBar_'+self.id).html((this.iterator+1)+' of '+this.numImages).show().css('opacity',this.opts.infobar_opacity);dom.gv_infobar.oneTime(2000+this.opts.transition_speed,'hideInfoBar_'+self.id,function(){dom.gv_infobar.fadeOut(1000);});},initImages:function(){var self=this,dom=this.dom;$.each(this.gvImages,function(i,gvImage){var img=$('<img/>');img.css('visibility','hidden').data('index',i);img.bind('load.galleryview',function(){var _img=$(this),index=_img.data('index'),width=this.width,height=this.height,parent=dom[(_img.data('parent')).type].eq((_img.data('parent')).index),widthFactor=gv.innerWidth(parent)/width,heightFactor=gv.innerHeight(parent)/height,parentType=parent.hasClass('gv_panel')?'panel':'frame',heightOffset=0,widthOffset=0;gvImage.scale[parentType]=self.opts[parentType+'_scale']==='fit'?Math.min(widthFactor,heightFactor):Math.max(widthFactor,heightFactor);widthOffset=Math.round((gv.innerWidth(parent)-(width*gvImage.scale[parentType]))/2);heightOffset=Math.round((gv.innerHeight(parent)-(height*gvImage.scale[parentType]))/2);_img.css({width:width*gvImage.scale[parentType],height:height*gvImage.scale[parentType],top:heightOffset,left:widthOffset});_img.hide().css('visibility','visible');_img.remove().appendTo(parent);if(parentType==='frame'){_img.fadeIn();parent.parent().removeClass('gv_frame-loading');parent.parent().find('.gv_caption').html(gvImage.attrs.title);}else if(index===self.opts.start_frame-1){parent.prependTo(dom.gv_panelWrap);parent.removeClass('gv_panel-loading');_img.fadeIn();self.showInfoBar();}else{parent.removeClass('gv_panel-loading');_img.show();}});if(self.opts.show_panels){img.clone(true).data('parent',{type:'gv_panels',index:i}).appendTo(dom.gv_imageStore).attr('src',gvImage.src.panel);}
if(self.opts.show_filmstrip){img.clone(true).data('parent',{type:'gv_thumbnails',index:i}).appendTo(dom.gv_imageStore).attr('src',gvImage.src.frame);if(dom.gv_frames.length>dom.gv_panels.length){img.clone(true).data('parent',{type:'gv_thumbnails',index:i+self.numImages}).appendTo(dom.gv_imageStore).attr('src',gvImage.src.frame);img.clone(true).data('parent',{type:'gv_thumbnails',index:i+self.numImages+self.numImages}).appendTo(dom.gv_imageStore).attr('src',gvImage.src.frame);}}});},showNext:function(){this.navAction='next';this.showItem(this.frameIterator+1);},showPrev:function(){this.navAction='prev';this.showItem(this.frameIterator-1);},showItem:function(i){if(isNaN(i)){return;}
if(!this.opts.show_filmstrip){i=i%this.numImages;}
var self=this,dom=this.dom,frame_i=i,newPanelStart,oldPanelEnd,oldIterator,panel,playing=false;if(i>=this.numImages){i=i%this.numImages;}else if(i<0){i=this.numImages-1;if(dom.gv_frames!=undefined){frame_i=dom.gv_frames.length-1;}else{frame_i=dom.gv_panels.length-1;}}
panel=dom.gv_panels.eq(i);playing=this.playing;if(playing){this.stopSlideshow(false);}
this.unbindActions();dom.gv_gallery.oneTime(this.opts.transition_speed,'bindActions_'+self.id,function(){if(playing){self.startSlideshow(false);}self.bindActions();});switch(this.opts.panel_animation){case'crossfade':dom.gv_panels.eq(this.iterator).fadeOut(this.opts.transition_speed,function(){$(this).remove();});panel.hide().prependTo(dom.gv_panelWrap).fadeIn(this.opts.transition_speed);break;case'fade':dom.gv_panels.eq(this.iterator).remove();panel.hide().prependTo(dom.gv_panelWrap).fadeIn(this.opts.transition_speed);break;case'slide':if(this.navAction==='next'||(this.navAction==='frame'&&frame_i>this.iterator)){newPanelStart=gv.outerWidth(dom.gv_panel);oldPanelEnd=-1*gv.outerWidth(dom.gv_panel);}else{newPanelStart=-1*gv.outerWidth(dom.gv_panel);oldPanelEnd=gv.outerWidth(dom.gv_panel);}
panel.css({left:newPanelStart}).appendTo(dom.gv_panelWrap).animate({left:0},{duration:this.opts.transition_speed,easing:this.opts.easing});dom.gv_panels.eq(this.iterator).animate({left:oldPanelEnd},{duration:this.opts.transition_speed,easing:this.opts.easing,complete:function(){$(this).remove();}});break;default:dom.gv_panels.eq(this.iterator).remove();panel.prependTo(dom.gv_panelWrap);break;}
this.updateOverlay(i);this.iterator=i;this.updateFilmstrip(frame_i);this.showInfoBar();},updateOverlay:function(i){var self=this,dom=this.dom;if(this.overlayVisible){this.hideOverlay(null,function(){dom.gv_overlay.html('<h4>'+self.gvImages[i].attrs.title+'</h4><p>'+self.gvImages[i].attrs.description+'</p>');self.showOverlay();});}else{dom.gv_overlay.html('<h4>'+self.gvImages[i].attrs.title+'</h4><p>'+self.gvImages[i].attrs.description+'</p>');dom.gv_overlay.css(this.opts.overlay_position,-1*dom.gv_overlay.outerHeight());}},hideOverlay:function(s,callback){var self=this,dom=this.dom,endOverlay={},endButton={},speed=s||self.opts.transition_speed/2;callback=callback||function(){};endOverlay[this.opts.overlay_position]=-1*dom.gv_overlay.outerHeight();endButton[this.opts.overlay_position]=0;dom.gv_overlay.animate(endOverlay,{duration:speed,easing:'swing',complete:callback});dom.gv_showOverlay.animate(endButton,{duration:speed,easing:'swing'});this.overlayVisible=false;},showOverlay:function(s){var self=this,dom=this.dom,startOverlay={},endOverlay={},endButton={},speed=s||self.opts.transition_speed/2;startOverlay[this.opts.overlay_position]=-1*dom.gv_overlay.outerHeight();startOverlay.left=0;endOverlay[this.opts.overlay_position]=0;endButton[this.opts.overlay_position]=dom.gv_overlay.outerHeight();dom.gv_overlay.css(startOverlay);dom.gv_overlay.animate(endOverlay,{duration:speed,easing:'swing'});dom.gv_showOverlay.animate(endButton,{duration:speed,easing:'swing'});this.overlayVisible=true;},updateFilmstrip:function(to){if(!this.opts.show_filmstrip){this.frameIterator=to;return;}
var self=this,dom=this.dom,targetThumbs=dom.gv_thumbnails.eq(this.iterator),filmstripIterator,distance;if(this.scrolling){targetThumbs=targetThumbs.add(dom.gv_thumbnails.eq(this.iterator+this.numImages)).add(dom.gv_thumbnails.eq(this.iterator+(2*this.numImages)));}
dom.gv_thumbnails.removeClass('current').animate({opacity:this.opts.frame_opacity});targetThumbs.stop().addClass('current').animate({opacity:1},500);if(this.scrolling){if(this.filmstripOrientation==='horizontal'){distance=(gv.outerWidth(dom.gv_frame)+this.opts.frame_gap)*(this.frameIterator-to);if(distance>0){distance='+='+Math.abs(distance);}else{distance='-='+Math.abs(distance);}
dom.gv_filmstrip.animate({left:distance},{duration:this.opts.transition_speed,easing:this.opts.easing,complete:function(){if(to<self.numImages){dom.gv_filmstrip.css('left',gv.getInt(dom.gv_filmstrip.css('left'))-(self.numImages*(gv.outerWidth(dom.gv_frame)+self.opts.frame_gap)));}else if(to>=(self.numImages*2)){dom.gv_filmstrip.css('left',gv.getInt(dom.gv_filmstrip.css('left'))+(self.numImages*(gv.outerWidth(dom.gv_frame)+self.opts.frame_gap)));}
self.frameIterator=(to%self.numImages)+self.numImages;}});}else{distance=(gv.outerHeight(dom.gv_frame)+this.opts.frame_gap)*(this.frameIterator-to);if(distance>0){distance='+='+Math.abs(distance);}else{distance='-='+Math.abs(distance);}
dom.gv_filmstrip.animate({top:distance},{duration:this.opts.transition_speed,easing:this.opts.easing,complete:function(){if(to===0){dom.gv_filmstrip.css('top',gv.getInt(dom.gv_filmstrip.css('top'))-(self.numImages*(gv.outerHeight(dom.gv_frame)+self.opts.frame_gap)));self.frameIterator=self.numImages;}else if(to>((self.numImages*3)-(self.filmstripSize*2))){dom.gv_filmstrip.css('top',gv.getInt(dom.gv_filmstrip.css('top'))+(self.numImages*(gv.outerHeight(dom.gv_frame)+self.opts.frame_gap)));self.frameIterator=to-self.numImages;}else{self.frameIterator=to;}}});}}else{this.frameIterator=to;}},startSlideshow:function(changeIcon){var self=this,dom=this.dom;if(!self.opts.enable_slideshow){return;}
if(changeIcon){dom.gv_navPlay.removeClass('gv_navPlay').addClass('gv_navPause');}
this.playing=true;dom.gv_galleryWrap.everyTime(this.opts.transition_interval,'slideshow_'+this.id,function(){self.showNext();});},stopSlideshow:function(changeIcon){var self=this,dom=this.dom;if(changeIcon){dom.gv_navPlay.removeClass('gv_navPause').addClass('gv_navPlay');}
this.playing=false;dom.gv_galleryWrap.stopTime('slideshow_'+this.id);},enablePanning:function(){var self=this,dom=this.dom;if(!self.opts.enable_slideshow){return;}
dom.gv_panel.css('cursor','url(http://www.google.com/intl/en_ALL/mapfiles/openhand.cur), n-resize');if(this.opts.pan_style==='drag'){dom.gv_panelWrap.delegate('.gv_panel img','mousedown.galleryview',function(e){self.isMouseDown=true;$(this).css('cursor','url(http://www.google.com/intl/en_ALL/mapfiles/closedhand.cur), n-resize');}).delegate('.gv_panel img','mouseup.galleryview',function(e){self.isMouseDown=false;$(this).css('cursor','url(http://www.google.com/intl/en_ALL/mapfiles/openhand.cur), n-resize');}).delegate('.gv_panel img','mousemove.galleryview',function(e){var distY,distX,image=$(this),new_top,new_left;if(self.isMouseDown){distY=e.pageY-self.mouse.y;distX=e.pageX-self.mouse.x;new_top=gv.getInt(image.css('top'))+distY;new_left=gv.getInt(image.css('left'))+distX;image.css('cursor','url(http://www.google.com/intl/en_ALL/mapfiles/closedhand.cur), n-resize');if(new_top>0)new_top=0;if(new_left>0)new_left=0;if(new_top<(-1*(gv.outerHeight(image)-gv.innerHeight(dom.gv_panel)))){new_top=-1*(gv.outerHeight(image)-gv.innerHeight(dom.gv_panel));}
if(new_left<(-1*(gv.outerWidth(image)-gv.innerWidth(dom.gv_panel)))){new_left=-1*(gv.outerWidth(image)-gv.innerWidth(dom.gv_panel));}
image.css('top',new_top);image.css('left',new_left);}else{image.css('cursor','url(http://www.google.com/intl/en_ALL/mapfiles/openhand.cur), n-resize');}});}else{}},bindActions:function(){var self=this,dom=this.dom;dom.gv_showOverlay.bind('click.galleryview',function(){if(self.overlayVisible){self.hideOverlay(250);}else{self.showOverlay(250);}});dom.gv_navWrap.delegate('div','click.galleryview',function(){var el=$(this);if(el.hasClass('gv_navNext')){self.showNext();}else if(el.hasClass('gv_navPrev')){self.showPrev();}else if(el.hasClass('gv_navPlay')){self.startSlideshow(true);}else if(el.hasClass('gv_navPause')){self.stopSlideshow(true);}
return false;});dom.gv_panelNavNext.bind('click.galleryview',function(){self.showNext();return false;});dom.gv_panelNavPrev.bind('click.galleryview',function(){self.showPrev();return false;});dom.gv_filmstripWrap.delegate('.gv_frame','click.galleryview',function(){var el=$(this),i=el.data('frameIndex');this.navAction='frame';self.showItem(i);return false;});dom.gv_panelWrap.bind('mouseover.galleryview',function(){self.showPanelNav();}).bind('mouseout.galleryview',function(){self.hidePanelNav();});},unbindActions:function(){var self=this,dom=this.dom;dom.gv_showOverlay.unbind('click.galleryview');dom.gv_panelNavNext.unbind('click.galleryview');dom.gv_panelNavPrev.unbind('click.galleryview');dom.gv_navWrap.undelegate('div','click.galleryview');dom.gv_filmstripWrap.undelegate('.gv_frame','click.galleryview');},showPanelNav:function(){var self=this,dom=this.dom;dom.gv_panelNavNext.show();dom.gv_panelNavPrev.show();},hidePanelNav:function(){var self=this,dom=this.dom;dom.gv_panelNavNext.hide();dom.gv_panelNavPrev.hide();},init:function(options,el){var self=this,dom=this.dom={};this.opts=$.extend({},$.fn.galleryView.defaults,options);this.el=el;this.$el=$(el);this.id=el.id;this.iterator=this.frameIterator=this.opts.start_frame-1;this.overlayVisible=false;this.playing=false;this.scrolling=false;this.isMouseDown=false;this.mouse={x:0,y:0};this.filmstripOrientation=(this.opts.filmstrip_position==='top'||this.opts.filmstrip_position==='bottom')?'horizontal':'vertical';$(document).bind('mousemove.galleryview',function(e){self.mouse={x:e.pageX,y:e.pageY};});$.each(this.elems,function(i,elem){var elem=elem.split('.');if(elem[0]===''){elem[0]='div';}
dom[elem[1]]=self.createElem({'class':elem[1]},elem[0]);});dom.gv_imageStore.appendTo($('body'));dom.gv_galleryWrap.delegate('img','mousedown.galleryview',function(e){if(e.preventDefault){e.preventDefault();}});dom.gv_panel.addClass('gv_panel-loading');dom.gv_frame.addClass('gv_frame-loading');dom.gv_galleryWrap.hide().append(dom.gv_gallery);if(this.opts.show_panels){dom.gv_gallery.append(dom.gv_panelWrap);if(this.opts.show_panel_nav){dom.gv_panelWrap.append(dom.gv_panelNavNext,dom.gv_panelNavPrev);}
if(this.opts.show_infobar){dom.gv_panelWrap.append(dom.gv_infobar);}}
if(this.opts.show_filmstrip){dom.gv_gallery.append(dom.gv_filmstripWrap.append(dom.gv_filmstrip));if(this.opts.show_filmstrip_nav){dom.gv_gallery.append(dom.gv_navWrap.append(dom.gv_navPrev,(this.opts.enable_slideshow?dom.gv_navPlay:$('<span></span>')),dom.gv_navNext));}}
if(this.opts.enable_overlays){dom.gv_panelWrap.append(dom.gv_overlay,dom.gv_showOverlay);}
if(this.opts.show_captions){dom.gv_frame.append(dom.gv_caption).appendTo(dom.gv_gallery);}
this.$el.replaceWith(dom.gv_galleryWrap);if(this.opts.pan_images){this.enablePanning();}
this.storeImages();this.buildGallery();this.initImages();this.bindActions();dom.gv_frame.remove();dom.gv_galleryWrap.show();if(this.opts.autoplay){this.startSlideshow(true);}
this.updateOverlay(this.iterator);this.updateFilmstrip(this.frameIterator);}};$.fn.galleryView=function(options){if(this.length){return this.each(function(){var gallery=Object.create(GalleryView);gallery.init(options,this);});}};$.fn.galleryView.defaults={transition_speed:1000,transition_interval:5000,easing:'swing',show_panels:true,show_panel_nav:true,enable_overlays:false,panel_width:800,panel_height:400,panel_animation:'fade',panel_scale:'crop',overlay_position:'bottom',pan_images:false,pan_style:'drag',pan_smoothness:15,start_frame:1,show_filmstrip:true,show_filmstrip_nav:true,enable_slideshow:true,autoplay:false,show_captions:false,filmstrip_size:3,filmstrip_style:'scroll',filmstrip_position:'bottom',frame_width:80,frame_height:40,frame_opacity:0.4,frame_scale:'crop',frame_gap:5,show_infobar:true,infobar_opacity:1};})(jQuery);
/* libs/jquery.jtweet.js */
(function($)
{$.fn.jTweetsAnywhere=function(options)
{var options=$.extend({username:'tbillenstein',list:null,searchParams:null,count:0,tweetProfileImagePresent:null,tweetFilter:defaultTweetFilter,showTweetFeed:true,showFollowButton:false,showConnectButton:false,showLoginInfo:false,showTweetBox:false,mainDecorator:defaultMainDecorator,tweetFeedDecorator:defaultTweetFeedDecorator,tweetDecorator:defaultTweetDecorator,tweetProfileImageDecorator:defaultTweetProfileImageDecorator,tweetBodyDecorator:defaultTweetBodyDecorator,tweetUsernameDecorator:defaultTweetUsernameDecorator,tweetTextDecorator:defaultTweetTextDecorator,tweetAttributesDecorator:defaultTweetAttributesDecorator,tweetTimestampDecorator:defaultTweetTimestampDecorator,tweetSourceDecorator:defaultTweetSourceDecorator,tweetGeoLocationDecorator:defaultTweetGeoLocationDecorator,tweetInReplyToDecorator:defaultTweetInReplyToDecorator,tweetRetweeterDecorator:defaultTweetRetweeterDecorator,tweetFeedControlsDecorator:defaultTweetFeedControlsDecorator,tweetFeedControlsMoreBtnDecorator:defaultTweetFeedControlsMoreBtnDecorator,tweetFeedControlsPrevBtnDecorator:defaultTweetFeedControlsPrevBtnDecorator,tweetFeedControlsNextBtnDecorator:defaultTweetFeedControlsNextBtnDecorator,tweetFeedAutorefreshTriggerDecorator:defaultTweetFeedAutorefreshTriggerDecorator,tweetFeedAutorefreshTriggerContentDecorator:defaultTweetFeedAutorefreshTriggerContentDecorator,connectButtonDecorator:defaultConnectButtonDecorator,loginInfoDecorator:defaultLoginInfoDecorator,loginInfoContentDecorator:defaultLoginInfoContentDecorator,followButtonDecorator:defaultFollowButtonDecorator,tweetBoxDecorator:defaultTweetBoxDecorator,linkDecorator:defaultLinkDecorator,usernameDecorator:defaultUsernameDecorator,hashtagDecorator:defaultHashtagDecorator,loadingDecorator:defaultLoadingDecorator,errorDecorator:defaultErrorDecorator,noDataDecorator:defaultNoDataDecorator,tweetTimestampFormatter:defaultTweetTimestampFormatter,tweetTimestampTooltipFormatter:defaultTweetTimestampTooltipFormatter,tweetVisualizer:defaultTweetVisualizer,loadingIndicatorVisualizer:defaultLoadingIndicatorVisualizer,autorefreshTriggerVisualizer:defaultAutorefreshTriggerVisualizer,onDataRequestHandler:defaultOnDataRequestHandler,onRateLimitDataHandler:defaultOnRateLimitDataHandler,_tweetFeedConfig:{expandHovercards:false,showTimestamp:{refreshInterval:0},showSource:false,showGeoLocation:true,showInReplyTo:true,showProfileImages:null,showUserScreenNames:null,showUserFullNames:false,includeRetweets:true,paging:{mode:"none",_limit:0,_offset:0},autorefresh:{mode:"none",interval:60,duration:3600,_startTime:null,_triggerElement:null},_pageParam:0,_maxId:null,_recLevel:0,_noData:false,_clearBeforePopulate:false},_tweetBoxConfig:{counter:true,width:515,height:65,label:"What's happening?",defaultContent:'',onTweet:function(textTweet,htmlTweet){}},_connectButtonConfig:{size:"medium"},_baseSelector:null,_baseElement:null,_tweetFeedElement:null,_tweetFeedControlsElement:null,_followButtonElement:null,_loginInfoElement:null,_connectButtonElement:null,_tweetBoxElement:null,_loadingIndicatorElement:null,_noDataElement:null,_tweetsCache:[],_autorefreshTweetsCache:[],_stats:{dataRequestCount:0,rateLimitPreventionCount:0,rateLimit:{remaining_hits:150,hourly_limit:150}}},options);if(!options.mainDecorator)
{return;}
options._baseSelector=this.selector;if(typeof(options.username)!='string')
{if(!options.searchParams)
{options.searchParams=['q=from:'+options.username.join(" OR from:")];}
options.username=options.username[0];}
if(typeof(options.showTweetFeed)=='object')
{$.extend(true,options._tweetFeedConfig,options.showTweetFeed);}
if(typeof(options.showTweetBox)=='object')
{options._tweetBoxConfig=options.showTweetBox;options.showTweetBox=true;}
if(typeof(options.showConnectButton)=='object')
{options._connectButtonConfig=options.showConnectButton;options.showConnectButton=true;}
if(options._tweetFeedConfig.showProfileImages==null)
{options._tweetFeedConfig.showProfileImages=options.tweetProfileImagePresent;}
if(options._tweetFeedConfig.showProfileImages==null)
{options._tweetFeedConfig.showProfileImages=(options.list||options.searchParams)&&options.tweetProfileImageDecorator;}
if(options._tweetFeedConfig.showUserScreenNames==null)
{if(options.list||options.searchParams)
{options._tweetFeedConfig.showUserScreenNames=true;}
if(!options.tweetUsernameDecorator)
{options._tweetFeedConfig.showUserScreenNames=false;}}
if(options._tweetFeedConfig.showUserFullNames==null)
{if(options.list||options.searchParams)
{options._tweetFeedConfig.showUserFullNames=true;}
if(!options.tweetUsernameDecorator)
{options._tweetFeedConfig.showUserFullNames=false;}}
options.count=validateRange(options.count,0,options.searchParams?100:20);options._tweetFeedConfig.autorefresh.interval=Math.max(30,options._tweetFeedConfig.autorefresh.interval);options._tweetFeedConfig.paging._offset=0;options._tweetFeedConfig.paging._limit=options.count;if(options.count==0||!options.showTweetFeed)
{options.tweetFeedDecorator=null;options.tweetFeedControlsDecorator=null;}
if(options._tweetFeedConfig.paging.mode=='none')
{options.tweetFeedControlsDecorator=null;}
if(!options.showFollowButton)
{options.followButtonDecorator=null;}
if(!options.showTweetBox)
{options.tweetBoxDecorator=null;}
if(!options.showConnectButton)
{options.connectButtonDecorator=null;}
if(!options.showLoginInfo)
{options.loginInfoDecorator=null;}
if(!options._tweetFeedConfig.showTimestamp)
{options.tweetTimestampDecorator=null;}
if(!options._tweetFeedConfig.showSource)
{options.tweetSourceDecorator=null;}
if(!options._tweetFeedConfig.showGeoLocation)
{options.tweetGeoLocationDecorator=null;}
if(!options._tweetFeedConfig.showInReplyTo)
{options.tweetInReplyToDecorator=null;}
$.ajaxSetup({cache:true});return this.each(function()
{options._baseElement=$(this);options._tweetFeedElement=options.tweetFeedDecorator?$(options.tweetFeedDecorator(options)):null;options._tweetFeedControlsElement=options.tweetFeedControlsDecorator?$(options.tweetFeedControlsDecorator(options)):null;options._followButtonElement=options.followButtonDecorator?$(options.followButtonDecorator(options)):null;options._tweetBoxElement=options.tweetBoxDecorator?$(options.tweetBoxDecorator(options)):null;options._connectButtonElement=options.connectButtonDecorator?$(options.connectButtonDecorator(options)):null;options._loginInfoElement=options.loginInfoDecorator?$(options.loginInfoDecorator(options)):null;options.mainDecorator(options);populateTweetFeed(options);bindEventHandlers(options);options._tweetFeedConfig.autorefresh._startTime=new Date().getTime();startAutorefresh(options);startTimestampRefresh(options);});};defaultMainDecorator=function(options)
{if(options._tweetFeedElement)
{options._baseElement.append(options._tweetFeedElement);}
if(options._tweetFeedControlsElement)
{options._baseElement.append(options._tweetFeedControlsElement);}
if(options._connectButtonElement)
{options._baseElement.append(options._connectButtonElement);}
if(options._loginInfoElement)
{options._baseElement.append(options._loginInfoElement);}
if(options._followButtonElement)
{options._baseElement.append(options._followButtonElement);}
if(options._tweetBoxElement)
{options._baseElement.append(options._tweetBoxElement);}};defaultTweetFeedControlsDecorator=function(options)
{var html='';if(options._tweetFeedConfig.paging.mode=='prev-next')
{if(options.tweetFeedControlsPrevBtnDecorator)
{html+=options.tweetFeedControlsPrevBtnDecorator(options);}
if(options.tweetFeedControlsNextBtnDecorator)
{html+=options.tweetFeedControlsNextBtnDecorator(options);}}
else if(options._tweetFeedConfig.paging.mode=='endless-scroll')
{}
else
{if(options.tweetFeedControlsMoreBtnDecorator)
{html+=options.tweetFeedControlsMoreBtnDecorator(options);}}
return'<div class="jta-tweet-list-controls">'+html+'</div>';};defaultTweetFeedControlsMoreBtnDecorator=function(options)
{return'<span class="jta-tweet-list-controls-button jta-tweet-list-controls-button-more">'+'More'+'</span>';};defaultTweetFeedControlsPrevBtnDecorator=function(options)
{return'<span class="jta-tweet-list-controls-button jta-tweet-list-controls-button-prev">'+'Prev'+'</span>';};defaultTweetFeedControlsNextBtnDecorator=function(options)
{return'<span class="jta-tweet-list-controls-button jta-tweet-list-controls-button-next">'+'Next'+'</span>';};defaultTweetFeedAutorefreshTriggerDecorator=function(count,options)
{var html='';if(options.tweetFeedAutorefreshTriggerContentDecorator)
{html=options.tweetFeedAutorefreshTriggerContentDecorator(count,options);}
return'<li class="jta-tweet-list-autorefresh-trigger">'+html+'</li>';};defaultTweetFeedAutorefreshTriggerContentDecorator=function(count,options)
{var content=''+count+' new '+(count>1?' tweets':' tweet');return'<span class="jta-tweet-list-autorefresh-trigger-content">'+content+'</span>';};defaultTweetFeedDecorator=function(options)
{return'<ul class="jta-tweet-list"></ul>';};defaultTweetDecorator=function(tweet,options)
{var html='';if(options._tweetFeedConfig.showProfileImages)
{html+=options.tweetProfileImageDecorator(tweet,options);}
if(options.tweetBodyDecorator)
{html+=options.tweetBodyDecorator(tweet,options);}
html+='<div class="jta-clear">&nbsp;</div>';return'<li class="jta-tweet-list-item">'+html+'</li>';};defaultTweetProfileImageDecorator=function(tweet,options)
{var t=tweet.retweeted_status||tweet;var screenName=t.user?t.user.screen_name:false||t.from_user;var imageUrl=t.user?t.user.profile_image_url:false||t.profile_image_url;var html='<a class="jta-tweet-profile-image-link" href="http://twitter.com/'+screenName+'" target="_blank">'+'<img src="'+imageUrl+'" alt="'+screenName+'"'+
(isAnywherePresent()?'':(' title="'+screenName+'"'))+'/>'+'</a>';return'<div class="jta-tweet-profile-image">'+html+'</div>';};defaultTweetBodyDecorator=function(tweet,options)
{var html='';if(options.tweetTextDecorator)
{html+=options.tweetTextDecorator(tweet,options);}
if(options.tweetAttributesDecorator)
{html+=options.tweetAttributesDecorator(tweet,options);}
return'<div class="jta-tweet-body '+(options._tweetFeedConfig.showProfileImages?'jta-tweet-body-list-profile-image-present':'')+'">'+html+'</div>';};defaultTweetTextDecorator=function(tweet,options)
{var tweetText=tweet.text;if(tweet.retweeted_status&&(options._tweetFeedConfig.showUserScreenNames||options._tweetFeedConfig.showUserScreenNames==null||options._tweetFeedConfig.showUserFullNames||options._tweetFeedConfig.showUserFullNames==null))
{tweetText=tweet.retweeted_status.text;}
if(options.linkDecorator)
{tweetText=options.linkDecorator(tweetText,options);}
if(options.usernameDecorator)
{tweetText=options.usernameDecorator(tweetText,options);}
if(options.hashtagDecorator)
{tweetText=options.hashtagDecorator(tweetText,options);}
if(options._tweetFeedConfig.showUserScreenNames||options._tweetFeedConfig.showUserFullNames||tweet.retweeted_status&&(options._tweetFeedConfig.showUserScreenNames==null||options._tweetFeedConfig.showUserFullNames==null))
{tweetText=options.tweetUsernameDecorator(tweet,options)+' '+tweetText;}
return'<span class="jta-tweet-text">'+tweetText+'</span>';};defaultTweetUsernameDecorator=function(tweet,options)
{var t=tweet.retweeted_status||tweet;var screenName=t.user?t.user.screen_name:false||t.from_user;var fullName=t.user?t.user.name:null;var htmlScreenName;if(screenName&&(options._tweetFeedConfig.showUserScreenNames||(options._tweetFeedConfig.showUserScreenNames==null&&tweet.retweeted_status)))
{htmlScreenName='<span class="jta-tweet-user-screen-name">'+'<a class="jta-tweet-user-screen-name-link" href="http://twitter.com/'+screenName+'" target="_blank">'+
screenName+'</a>'+'</span>';}
var htmlFullName;if(fullName&&(options._tweetFeedConfig.showUserFullNames||(options._tweetFeedConfig.showUserFullNames==null&&tweet.retweeted_status)))
{htmlFullName='<span class="jta-tweet-user-full-name">'+
(htmlScreenName?' (':'')+'<a class="jta-tweet-user-full-name-link" href="http://twitter.com/'+screenName+'" name="'+screenName+'" target="_blank">'+
fullName+'</a>'+
(htmlScreenName?')':'')+'</span>';}
var html="";if(htmlScreenName)
{html+=htmlScreenName;}
if(htmlFullName)
{if(htmlScreenName)
{html+=' ';}
html+=htmlFullName;}
if(htmlScreenName||htmlFullName)
{html='<span class="jta-tweet-user-name">'+
(tweet.retweeted_status?'RT ':'')+
html+'</span>';}
return html;};defaultTweetAttributesDecorator=function(tweet,options)
{var html='';if(options.tweetTimestampDecorator||options.tweetSourceDecorator||options.tweetGeoLocationDecorator||options.tweetInReplyToDecorator||(tweet.retweeted_status&&options.tweetRetweeterDecorator))
{html+='<span class="jta-tweet-attributes">';if(options.tweetTimestampDecorator)
{html+=options.tweetTimestampDecorator(tweet,options);}
if(options.tweetSourceDecorator)
{html+=options.tweetSourceDecorator(tweet,options);}
if(options.tweetGeoLocationDecorator)
{html+=options.tweetGeoLocationDecorator(tweet,options);}
if(options.tweetInReplyToDecorator)
{html+=options.tweetInReplyToDecorator(tweet,options);}
if(tweet.retweeted_status&&options.tweetRetweeterDecorator)
{html+=options.tweetRetweeterDecorator(tweet,options);}
html+='</span>';}
return html;};defaultTweetTimestampDecorator=function(tweet,options)
{var tw=tweet.retweeted_status||tweet;var createdAt=formatDate(tw.created_at);var tweetTimestamp=options.tweetTimestampFormatter(createdAt);var tweetTimestampTooltip=options.tweetTimestampTooltipFormatter(createdAt);var screenName=tw.user?tw.user.screen_name:false||tw.from_user;var html='<span class="jta-tweet-timestamp">'+'<a class="jta-tweet-timestamp-link" data-timestamp="'+createdAt+'" href="http://twitter.com/'+screenName+'/status/'+tw.id+'" target="_blank" title="'+
tweetTimestampTooltip+'">'+
tweetTimestamp+'</a>'+'</span>';return html;};defaultTweetTimestampTooltipFormatter=function(timeStamp)
{var d=new Date(timeStamp);return d.toLocaleString();};defaultTweetTimestampFormatter=function(timeStamp)
{var now=new Date();var diff=parseInt((now.getTime()-Date.parse(timeStamp))/1000);var tweetTimestamp='';if(diff<60)
{tweetTimestamp+=diff+' second'+(diff==1?'':'s')+' ago';}
else if(diff<3600)
{var t=parseInt((diff+30)/60);tweetTimestamp+=t+' minute'+(t==1?'':'s')+' ago';}
else if(diff<86400)
{var t=parseInt((diff+1800)/3600);tweetTimestamp+=t+' hour'+(t==1?'':'s')+' ago';}
else
{var d=new Date(timeStamp);var period='AM';var hours=d.getHours();if(hours>12)
{hours-=12;period='PM';}
var mins=d.getMinutes();var minutes=(mins<10?'0':'')+mins;var monthName=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];tweetTimestamp+=monthName[d.getMonth()]+' '+d.getDate();if(d.getFullYear()<now.getFullYear())
{tweetTimestamp+=', '+d.getFullYear();}
var t=parseInt((diff+43200)/86400);tweetTimestamp+=' ('+t+' day'+(t==1?'':'s')+' ago)';}
return tweetTimestamp;};exTimestampFormatter=function(timeStamp)
{var diff=parseInt((new Date().getTime()-Date.parse(timeStamp))/1000);var tweetTimestamp='';if(diff<60)
{tweetTimestamp+='less than a minute ago';}
else if(diff<3600)
{var t=parseInt((diff+30)/60);tweetTimestamp+=t+' minute'+(t==1?'':'s')+' ago';}
else if(diff<86400)
{var t=parseInt((diff+1800)/3600);tweetTimestamp+='about '+t+' hour'+(t==1?'':'s')+' ago';}
else
{var t=parseInt((diff+43200)/86400);tweetTimestamp+='about '+t+' day'+(t==1?'':'s')+' ago';var d=new Date(timeStamp);var period='AM';var hours=d.getHours();if(hours>12)
{hours-=12;period='PM';}
var mins=d.getMinutes();var minutes=(mins<10?'0':'')+mins;tweetTimestamp+=' ('+hours+':'+minutes+' '+period+' '+(d.getMonth()+1)+'/'+d.getDate()+'/'+d.getFullYear()+')';}
return tweetTimestamp;};defaultTweetSourceDecorator=function(tweet,options)
{var tw=tweet.retweeted_status||tweet;var source=tw.source.replace(/\&lt\;/gi,'<').replace(/\&gt\;/gi,'>').replace(/\&quot\;/gi,'"');var html='<span class="jta-tweet-source">'+' via '+'<span class="jta-tweet-source-link">'+
source+'</span>'+'</span>';return html;};defaultTweetGeoLocationDecorator=function(tweet,options)
{var html='';var tw=tweet.retweeted_status||tweet;var q;if(tw.geo&&tw.geo.coordinates)
{q=tw.geo.coordinates.join();}
else if(tw.place&&tw.place.full_name)
{q=tw.place.full_name;}
if(q)
{var location='here';if(tw.place&&tw.place.full_name)
{location=tw.place.full_name;}
var link='http://maps.google.com/maps?q='+q;html='<span class="jta-tweet-location">'+' from '+'<a class="jta-tweet-location-link" href="'+link+'" target="_blank">'+
location+'</a>'+'</span>';}
return html;};defaultTweetInReplyToDecorator=function(tweet,options)
{var tw=tweet.retweeted_status||tweet;var html='';if(tw.in_reply_to_status_id&&tw.in_reply_to_screen_name)
{html='<span class="jta-tweet-inreplyto">'+' '+'<a class="jta-tweet-inreplyto-link" href="http://twitter.com/'+tw.in_reply_to_screen_name+'/status/'+tw.in_reply_to_status_id+'" target="_blank">'+'in reply to '+tw.in_reply_to_screen_name+'</a>'+'</span>';}
return html;};defaultTweetRetweeterDecorator=function(tweet,options)
{var html='';if(tweet.retweeted_status)
{var screenName=tweet.user?tweet.user.screen_name:false||tweet.from_user;var rtc=(tweet.retweeted_status.retweet_count||0)-1;var link='<a class="jta-tweet-retweeter-link" href="http://twitter.com/'+screenName+'" target="_blank">'+
screenName+'</a>';var rtcount=' and '+rtc+(rtc>1?' others':' other');html='<br/>'+'<span class="jta-tweet-retweeter">'+'Retweeted by '+link+
(rtc>0?rtcount:'')+'</span>';}
return html;};defaultConnectButtonDecorator=function(options)
{return'<div class="jta-connect-button"></div>';};defaultLoginInfoDecorator=function(options)
{return'<div class="jta-login-info"></div>';};defaultLoginInfoContentDecorator=function(options,T)
{var html='';if(T.isConnected())
{var screenName=T.currentUser.data('screen_name');var imageUrl=T.currentUser.data('profile_image_url');html='<div class="jta-login-info-profile-image">'+'<a href="http://twitter.com/'+screenName+'" target="_blank">'+'<img src="'+imageUrl+'" alt="'+screenName+'" title="'+screenName+'"/>'+'</a>'+'</div>'+'<div class="jta-login-info-block">'+'<div class="jta-login-info-screen-name">'+'<a href="http://twitter.com/'+screenName+'" target="_blank">'+screenName+'</a>'+'</div>'+'<div class="jta-login-info-sign-out">'+'Sign out'+'</div>'+'</div>'+'<div class="jta-clear">&nbsp;</div>';}
return html;};defaultFollowButtonDecorator=function(options)
{return'<div class="jta-follow-button"></div>';};defaultTweetBoxDecorator=function(options)
{return'<div class="jta-tweet-box"></div>';};defaultLinkDecorator=function(text,options)
{return text.replace(/((ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?)/gi,'<a href="$1" class="jta-tweet-a jta-tweet-link" target="_blank" rel="nofollow">$1<\/a>');};defaultUsernameDecorator=function(text,options)
{return isAnywherePresent()?text:text.replace(/@([a-zA-Z0-9_]+)/gi,'@<a href="http://twitter.com/$1" class="jta-tweet-a twitter-anywhere-user" target="_blank" rel="nofollow">$1<\/a>');};defaultHashtagDecorator=function(text,options)
{return text.replace(/#([a-zA-Z0-9_]+)/gi,'<a href="http://search.twitter.com/search?q=%23$1" class="jta-tweet-a jta-tweet-hashtag" title="#$1" target="_blank" rel="nofollow">#$1<\/a>');};defaultLoadingDecorator=function(options)
{return'<li class="jta-loading">loading ...</li>';};defaultErrorDecorator=function(errorText,options)
{return'<li class="jta-error">ERROR: '+errorText+'</li>';};defaultNoDataDecorator=function(options)
{return'<li class="jta-nodata">No more data</li>';};defaultTweetFilter=function(tweet,options)
{return true;};defaultTweetVisualizer=function(tweetFeedElement,tweetElement,inserter,options)
{tweetFeedElement[inserter](tweetElement);};defaultLoadingIndicatorVisualizer=function(tweetFeedElement,loadingIndicatorElement,options,callback)
{defaultVisualizer(tweetFeedElement,loadingIndicatorElement,'append','fadeIn',600,'fadeOut',200,callback);};defaultAutorefreshTriggerVisualizer=function(tweetFeedElement,triggerElement,options,callback)
{defaultVisualizer(tweetFeedElement,triggerElement,'prepend','slideDown',600,'fadeOut',200,callback);};defaultVisualizer=function(container,element,inserter,effectIn,durationIn,effectOut,durationOut,callback)
{var cb=function()
{if(callback)
{callback();}};if(container)
{element.hide();container[inserter](element);element[effectIn](durationIn,cb);}
else
{element[effectOut](durationOut,function()
{element.remove();cb();});}};defaultOnDataRequestHandler=function(stats,options)
{return true;};defaultOnRateLimitDataHandler=function(stats,options)
{};updateLoginInfoElement=function(options,T)
{if(options._loginInfoElement&&options.loginInfoContentDecorator)
{options._loginInfoElement.children().remove();options._loginInfoElement.append(options.loginInfoContentDecorator(options,T));$(options._baseSelector+' .jta-login-info-sign-out').bind('click',function()
{twttr.anywhere.signOut();});}};getFeedUrl=function(options,flPaging)
{var url=('https:'==document.location.protocol?'https:':'http:');if(options.searchParams)
{url+='//search.twitter.com/search.json?'+
((options.searchParams instanceof Array)?options.searchParams.join('&'):options.searchParams)+'&rpp=100';}
else if(options.list)
{url+='//api.twitter.com/1/'+options.username+'/lists/'+options.list+'/statuses.json?per_page=20';}
else
{url+='//api.twitter.com/1/statuses/user_timeline.json?screen_name='+options.username+'&count=20';if(options._tweetFeedConfig.includeRetweets)
url+='&include_rts=true';}
if(flPaging)
{url+=(options._tweetFeedConfig._maxId?'&max_id='+options._tweetFeedConfig._maxId:'')+'&page='+options._tweetFeedConfig._pageParam;}
url+='&callback=?';return url;};isAnywherePresent=function()
{return typeof(twttr)!='undefined';};clearTweetFeed=function(options)
{if(options._tweetFeedElement)
{options._tweetFeedElement.empty();}};populateTweetFeed=function(options)
{if(options.tweetDecorator&&options._tweetFeedElement)
{getPagedTweets(options,function(tweets,options)
{if(options._tweetFeedConfig._clearBeforePopulate)
{clearTweetFeed(options);}
hideLoadingIndicator(options,function()
{$.each(tweets,function(idx,tweet)
{options.tweetVisualizer(options._tweetFeedElement,$(options.tweetDecorator(tweet,options)),'append',options);});if(options._tweetFeedConfig._noData&&options.noDataDecorator&&!options._tweetFeedConfig._noDataElement)
{options._tweetFeedConfig._noDataElement=$(options.noDataDecorator(options));options._tweetFeedElement.append(options._tweetFeedConfig._noDataElement);}
if(options._tweetFeedConfig._clearBeforePopulate)
{options._tweetFeedElement.scrollTop(0);}});});}};populateTweetFeed2=function(options)
{if(options._tweetFeedElement&&options._autorefreshTweetsCache.length>0)
{if(options._tweetFeedConfig.autorefresh.mode=='trigger-insert')
{if(options._tweetFeedConfig.autorefresh._triggerElement)
{if(options.tweetFeedAutorefreshTriggerContentDecorator)
{options._tweetFeedConfig.autorefresh._triggerElement.html(options.tweetFeedAutorefreshTriggerContentDecorator(options._autorefreshTweetsCache.length,options));}}
else
{if(options.tweetFeedAutorefreshTriggerDecorator)
{options._tweetFeedConfig.autorefresh._triggerElement=$(options.tweetFeedAutorefreshTriggerDecorator(options._autorefreshTweetsCache.length,options));options._tweetFeedConfig.autorefresh._triggerElement.bind('click',function()
{options.autorefreshTriggerVisualizer(null,options._tweetFeedConfig.autorefresh._triggerElement,options,function()
{insertTriggerTweets(options);});options._tweetFeedConfig.autorefresh._triggerElement=null;});options.autorefreshTriggerVisualizer(options._tweetFeedElement,options._tweetFeedConfig.autorefresh._triggerElement,options);}}}
else
{insertTriggerTweets(options);}}};insertTriggerTweets=function(options)
{if(options.tweetDecorator&&options._autorefreshTweetsCache.length>0)
{while(options._autorefreshTweetsCache.length>0)
{var tweet=options._autorefreshTweetsCache.pop();options._tweetsCache.unshift(tweet);options._tweetFeedConfig.paging._offset++;options.tweetVisualizer(options._tweetFeedElement,$(options.tweetDecorator(tweet,options)),'prepend',options);}
addHovercards(options);}};addHovercards=function(options)
{if(isAnywherePresent())
{twttr.anywhere(function(T)
{T(options._baseSelector+' .jta-tweet-list').hovercards({expanded:options._tweetFeedConfig.expandHovercards});T(options._baseSelector+' .jta-tweet-profile-image img').hovercards({expanded:options._tweetFeedConfig.expandHovercards,username:function(node){return node.alt;}});T(options._baseSelector+' .jta-tweet-retweeter-link').hovercards({expanded:options._tweetFeedConfig.expandHovercards,username:function(node){return node.text;}});T(options._baseSelector+' .jta-tweet-user-screen-name-link').hovercards({expanded:options._tweetFeedConfig.expandHovercards,username:function(node){return node.text;}});T(options._baseSelector+' .jta-tweet-user-full-name-link').hovercards({expanded:options._tweetFeedConfig.expandHovercards,username:function(node){return node.name;}});});}};populateAnywhereControls=function(options)
{if(isAnywherePresent())
{twttr.anywhere(function(T)
{if(options.tweetBoxDecorator)
{T(options._baseSelector+' .jta-tweet-box').tweetBox(options._tweetBoxConfig);}
if(options.followButtonDecorator)
{T(options._baseSelector+' .jta-follow-button').followButton(options.username);}
if(options.connectButtonDecorator)
{var o=$.extend({authComplete:function(user)
{updateLoginInfoElement(options,T);},signOut:function()
{updateLoginInfoElement(options,T);}},options._connectButtonConfig);T(options._baseSelector+' .jta-connect-button').connectButton(o);updateLoginInfoElement(options,T);}});}};bindEventHandlers=function(options)
{if(options.tweetFeedControlsDecorator)
{if(options._tweetFeedConfig.paging.mode=='prev-next')
{$(options._baseSelector+' .jta-tweet-list-controls-button-prev').bind('click',function()
{if(!isLoading(options)&&options._tweetFeedConfig.paging._offset>0)
{prevPage(options,true);}});$(options._baseSelector+' .jta-tweet-list-controls-button-next').bind('click',function()
{if(!isLoading(options))
{nextPage(options,true);}});}
else if(options._tweetFeedConfig.paging.mode=='endless-scroll')
{options._tweetFeedElement.bind("scroll",function()
{if(!isLoading(options)&&($(this)[0].scrollHeight-$(this).scrollTop()==$(this).outerHeight()))
{nextPage(options,false);}});}
else
{$(options._baseSelector+' .jta-tweet-list-controls-button-more').bind('click',function()
{if(!isLoading(options))
{nextPage(options,false);}});}}};nextPage=function(options,flClear)
{doPage(options,flClear,Math.min(options._tweetFeedConfig.paging._offset+options._tweetFeedConfig.paging._limit,options._tweetsCache.length));};prevPage=function(options,flClear)
{doPage(options,flClear,Math.max(0,options._tweetFeedConfig.paging._offset-options._tweetFeedConfig.paging._limit));};doPage=function(options,flClear,newOffset)
{options._tweetFeedConfig.paging._offset=newOffset;options._tweetFeedConfig._clearBeforePopulate=flClear;populateTweetFeed(options);};startAutorefresh=function(options)
{if(options._tweetFeedConfig.autorefresh.mode!='none'&&options._tweetFeedConfig.paging.mode!='prev-next'&&options._tweetFeedConfig.autorefresh.duration!=0&&(options._tweetFeedConfig.autorefresh.duration<0||(new Date().getTime()-options._tweetFeedConfig.autorefresh._startTime)<=options._tweetFeedConfig.autorefresh.duration*1000))
{window.setTimeout(function(){processAutorefresh(options);},options._tweetFeedConfig.autorefresh.interval*1000);}};stopAutorefresh=function(options)
{options._tweetFeedConfig.autorefresh.duration=0;};processAutorefresh=function(options)
{if(options._tweetFeedConfig.autorefresh.duration!=0)
{getRateLimitedData(options,true,getFeedUrl(options,false),function(data,options)
{var tweets=(data.results||data).slice(0);tweets.reverse();$.each(tweets,function(idx,tweet)
{if(!isTweetInCache(tweet,options))
{if(options.tweetFilter(tweet,options))
{options._autorefreshTweetsCache.unshift(tweet);}}});populateTweetFeed2(options);});startAutorefresh(options);}};startTimestampRefresh=function(options)
{if(options.tweetTimestampDecorator&&typeof(options._tweetFeedConfig.showTimestamp)=='object'&&options._tweetFeedConfig.showTimestamp.refreshInterval>0)
{window.setTimeout(function(){processTimestampRefresh(options);},options._tweetFeedConfig.showTimestamp.refreshInterval*1000);}};processTimestampRefresh=function(options)
{$.each(options._tweetFeedElement.find('.jta-tweet-timestamp-link'),function(idx,element)
{var dataTimestamp=$(element).attr('data-timestamp');$(element).html(options.tweetTimestampFormatter(dataTimestamp));});startTimestampRefresh(options);};isTweetInCache=function(tweet,options)
{var l=options._tweetsCache.length;for(var i=0;i<l;i++)
{if(tweet.id==options._tweetsCache[i].id)
{return true;}}
return false;};showLoadingIndicator=function(options)
{if(options._tweetFeedElement&&options.loadingDecorator&&!options._loadingIndicatorElement)
{options._loadingIndicatorElement=$(options.loadingDecorator(options));options.loadingIndicatorVisualizer(options._tweetFeedElement,options._loadingIndicatorElement,options,null);options._tweetFeedElement.scrollTop(1000000);}};hideLoadingIndicator=function(options,callback)
{if(options._loadingIndicatorElement)
{options.loadingIndicatorVisualizer(null,options._loadingIndicatorElement,options,callback);options._loadingIndicatorElement=null;}
else
{if(callback)
{callback();}}};isLoading=function(options)
{return options._loadingIndicatorElement!=null;};formatDate=function(dateStr)
{return dateStr.replace(/^([a-z]{3})( [a-z]{3} \d\d?)(.*)( \d{4})$/i,'$1,$2$4$3');};validateRange=function(num,lo,hi)
{if(num<lo)
num=lo;if(num>hi)
num=hi;return num;};showError=function(options,errorText)
{if(options.errorDecorator&&options._tweetFeedElement)
{options._tweetFeedElement.append(options.errorDecorator(errorText,options));}};getPagedTweets=function(options,callback)
{options._tweetFeedConfig._recLevel=0;getRecPagedTweets(options,options._tweetFeedConfig.paging._offset,options._tweetFeedConfig.paging._limit,callback);};getRecPagedTweets=function(options,offset,limit,callback)
{++options._tweetFeedConfig._recLevel;if(offset+limit<=options._tweetsCache.length||options._tweetFeedConfig._recLevel>3||options._tweetFeedConfig._noData)
{if(offset+limit>options._tweetsCache.length)
{limit=Math.max(0,options._tweetsCache.length-offset);}
var tweets=[];for(var i=0;i<limit;i++)
{tweets[i]=options._tweetsCache[offset+i];}
callback(tweets,options);}
else
{++options._tweetFeedConfig._pageParam;getRateLimitedData(options,false,getFeedUrl(options,true),function(data,options)
{var tweets=data.results||data;if(tweets.length==0)
{options._tweetFeedConfig._noData=true;}
else
{$.each(tweets,function(idx,tweet)
{if(tweet.id_str){tweet.id=tweet.id_str;}
if(tweet.in_reply_to_status_id_str){tweet.in_reply_to_status_id=tweet.in_reply_to_status_id_str;}
if(!options._tweetFeedConfig._maxId)
{options._tweetFeedConfig._maxId=tweet.id;}
if(options.tweetFilter(tweet,options))
{options._tweetsCache.push(tweet);}});}
getRecPagedTweets(options,offset,limit,callback);});}};getRateLimitedData=function(options,flAutorefresh,url,callback)
{getRateLimit(options,function(rateLimit)
{if(rateLimit&&rateLimit.remaining_hits<=0)
{options._stats.rateLimitPreventionCount++;hideLoadingIndicator(options,null);return;}
getData(options,flAutorefresh,url,callback);});};getData=function(options,flAutorefresh,url,callback)
{options._stats.dataRequestCount++;if(!options.onDataRequestHandler(options._stats,options))
{hideLoadingIndicator(options,null);return;}
if(!flAutorefresh)
{showLoadingIndicator(options);}
$.getJSON(url,function(data)
{if(data.error)
{showError(options,data.error);}
else
{callback(data,options);}});};getRateLimit=function(options,callback)
{$.getJSON("http://api.twitter.com/1/account/rate_limit_status.json?callback=?",function(rateLimit)
{options._stats.rateLimit=rateLimit;options.onRateLimitDataHandler(options._stats,options);callback(rateLimit);});};})(jQuery);
/* libs/jquery.ui.widget.js */
(function($){var _remove=$.fn.remove;$.fn.remove=function(){$("*",this).add(this).each(function(){$(this).triggerHandler("remove");});return _remove.apply(this,arguments);};$.widget=function(name,base,prototype){var namespace=name.split(".")[0],fullName;name=name.split(".")[1];fullName=namespace+'-'+name;if(!prototype){prototype=base;base=$.Widget;}
$.expr[':'][fullName]=function(elem){return!!$.data(elem,name);};$[namespace]=$[namespace]||{};$[namespace][name]=function(options,element){(arguments.length&&this._widgetInit(options,element));};var basePrototype=new base();basePrototype.options=$.extend({},basePrototype.options);$[namespace][name].prototype=$.extend(true,basePrototype,{namespace:namespace,widgetName:name,widgetEventPrefix:$[namespace][name].prototype.widgetEventPrefix||name,widgetBaseClass:fullName},prototype);$.widget.bridge(name,$[namespace][name]);};$.widget.bridge=function(name,object){$.fn[name]=function(options){var isMethodCall=(typeof options=='string'),args=Array.prototype.slice.call(arguments,1),returnValue=this;options=!isMethodCall&&args.length?$.extend.apply(null,[true,options].concat(args)):options;if(isMethodCall&&options.substring(0,1)=='_'){return returnValue;}
(isMethodCall?this.each(function(){var instance=$.data(this,name),methodValue=(instance&&$.isFunction(instance[options])?instance[options].apply(instance,args):instance);if(methodValue!==instance&&methodValue!==undefined){returnValue=methodValue;return false;}}):this.each(function(){($.data(this,name)||$.data(this,name,new object(options,this)));}));return returnValue;};};$.Widget=function(options,element){(arguments.length&&this._widgetInit(options,element));};$.Widget.prototype={widgetName:'widget',widgetEventPrefix:'',options:{disabled:false},_widgetInit:function(options,element){this.element=$(element).data(this.widgetName,this);this.options=$.extend(true,{},this.options,$[this.namespace][this.widgetName].defaults,$.metadata&&$.metadata.get(element)[this.widgetName],options);var self=this;this.element.bind('remove.'+this.widgetName,function(){self.destroy();});(this._init&&this._init(options,element));},destroy:function(){this.element.unbind('.'+this.widgetName).removeData(this.widgetName);this.widget().unbind('.'+this.widgetName).removeAttr('aria-disabled').removeClass(this.widgetBaseClass+'-disabled '+
this.namespace+'-state-disabled');},widget:function(){return this.element;},option:function(key,value){var options=key,self=this;if(arguments.length===0){return $.extend({},self.options);}
if(typeof key=="string"){if(value===undefined){return this.options[key];}
options={};options[key]=value;}
$.each(options,function(key,value){self._setOption(key,value);});return self;},_setOption:function(key,value){this.options[key]=value;if(key=='disabled'){this.widget()
[value?'addClass':'removeClass'](this.widgetBaseClass+'-disabled'+' '+
this.namespace+'-state-disabled').attr("aria-disabled",value);}
return this;},enable:function(){return this._setOption('disabled',false);},disable:function(){return this._setOption('disabled',true);},_trigger:function(type,event,data){var callback=this.options[type];event=$.Event(event);event.type=(type==this.widgetEventPrefix?type:this.widgetEventPrefix+type).toLowerCase();data=data||{};if(event.originalEvent){for(var i=$.event.props.length,prop;i;){prop=$.event.props[--i];event[prop]=event.originalEvent[prop];}}
this.element.trigger(event,data);return!($.isFunction(callback)&&callback.call(this.element[0],event,data)===false||event.isDefaultPrevented());}};$.widget.prototype=$.Widget.prototype;})(jQuery);
/* libs/wdCalendar_lang_US.js */
var i18n=$.extend({},i18n||{},{xgcalendar:{dateformat:{"fulldaykey":"MMddyyyy","fulldayshow":"L d yyyy","fulldayvalue":"M/d/yyyy","Md":"W M/d","Md3":"L d","separator":"/","year_index":2,"month_index":0,"day_index":1,"day":"d","sun":"Sun","mon":"Mon","tue":"Tue","wed":"Wed","thu":"Thu","fri":"Fri","sat":"Sat","jan":"Jan","feb":"Feb","mar":"Mar","apr":"Apr","may":"May","jun":"Jun","jul":"Jul","aug":"Aug","sep":"Sep","oct":"Oct","nov":"Nov","dec":"Dec","week":"Week"},"no_implemented":"No implemented yet","to_date_view":"Click to the view of current date","i_undefined":"Undefined","allday_event":"All day event","repeat_event":"Repeat event","time":"Time","event":"Event","location":"Location","participant":"Participant","get_data_exception":"Exception when getting data","new_event":"New event","confirm_delete_event":"Do you confirm to delete this event? ","confrim_delete_event_or_all":"Do you want to all repeat events or only this event? \r\nClick [OK] to delete only this event, click [Cancel] delete all events","data_format_error":"Data format error! ","invalid_title":"Event title can not be blank or contains ($<>)","view_no_ready":"View is not ready","example":"e.g., $300","content":"Price","create_event":"Update","update_detail":"Update","status":"Status","click_to_detail":"View details","i_delete":"Delete","day_plural":"days","others":"Others","item":"","title":"Property"}});
/* libs/datepicker_lang_US.js */
﻿var i18n=$.extend({},i18n||{},{datepicker:{dateformat:{"fulldayvalue":"M/d/yyyy","separator":"/","year_index":2,"month_index":0,"day_index":1,"sun":"Sun","mon":"Mon","tue":"Tue","wed":"Wed","thu":"Thu","fri":"Fri","sat":"Sat","jan":"Jan","feb":"Feb","mar":"Mar","apr":"Apr","may":"May","jun":"Jun","jul":"Jul","aug":"Aug","sep":"Sep","oct":"Oct","nov":"Nov","dec":"Dec","postfix":""},ok:" Ok ",cancel:"Cancel",today:"Today",prev_month_title:"prev month",next_month_title:"next month"}});
/* libs/jquery.calendar.js */
;(function($){var property_list=Array();var currency_symbol='';var monthly=Array();var weekly=Array();var __WDAY=new Array(i18n.xgcalendar.dateformat.sun,i18n.xgcalendar.dateformat.mon,i18n.xgcalendar.dateformat.tue,i18n.xgcalendar.dateformat.wed,i18n.xgcalendar.dateformat.thu,i18n.xgcalendar.dateformat.fri,i18n.xgcalendar.dateformat.sat,i18n.xgcalendar.dateformat.week);var __MonthName=new Array(i18n.xgcalendar.dateformat.jan,i18n.xgcalendar.dateformat.feb,i18n.xgcalendar.dateformat.mar,i18n.xgcalendar.dateformat.apr,i18n.xgcalendar.dateformat.may,i18n.xgcalendar.dateformat.jun,i18n.xgcalendar.dateformat.jul,i18n.xgcalendar.dateformat.aug,i18n.xgcalendar.dateformat.sep,i18n.xgcalendar.dateformat.oct,i18n.xgcalendar.dateformat.nov,i18n.xgcalendar.dateformat.dec);if(!Clone||typeof(Clone)!="function"){var Clone=function(obj){var objClone=new Object();if(obj.constructor==Object){objClone=new obj.constructor();}else{objClone=new obj.constructor(obj.valueOf());}
for(var key in obj){if(objClone[key]!=obj[key]){if(typeof(obj[key])=='object'){objClone[key]=Clone(obj[key]);}else{objClone[key]=obj[key];}}}
objClone.toString=obj.toString;objClone.valueOf=obj.valueOf;return objClone;}}
if(!dateFormat||typeof(dateFormat)!="function"){var dateFormat=function(format){var o={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"H+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),"w":"0123456".indexOf(this.getDay()),"W":__WDAY[this.getDay()],"L":__MonthName[this.getMonth()]};if(/(y+)/.test(format)){format=format.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length));}
for(var k in o){if(new RegExp("("+k+")").test(format))
format=format.replace(RegExp.$1,RegExp.$1.length==1?o[k]:("00"+o[k]).substr((""+o[k]).length));}
return format;};}
if(!DateAdd||typeof(DateDiff)!="function"){var DateAdd=function(interval,number,idate){number=parseInt(number);var date;if(typeof(idate)=="string"){date=idate.split(/\D/);eval("var date = new Date("+date.join(",")+")");}
if(typeof(idate)=="object"){date=new Date(idate.toString());}
switch(interval){case"y":date.setFullYear(date.getFullYear()+number);break;case"m":date.setMonth(date.getMonth()+number);break;case"d":date.setDate(date.getDate()+number);break;case"w":date.setDate(date.getDate()+7*number);break;case"h":date.setHours(date.getHours()+number);break;case"n":date.setMinutes(date.getMinutes()+number);break;case"s":date.setSeconds(date.getSeconds()+number);break;case"l":date.setMilliseconds(date.getMilliseconds()+number);break;}
return date;}}
if(!DateDiff||typeof(DateDiff)!="function"){var DateDiff=function(interval,d1,d2){switch(interval){case"d":case"w":d1=new Date(d1.getFullYear(),d1.getMonth(),d1.getDate());d2=new Date(d2.getFullYear(),d2.getMonth(),d2.getDate());break;case"h":d1=new Date(d1.getFullYear(),d1.getMonth(),d1.getDate(),d1.getHours());d2=new Date(d2.getFullYear(),d2.getMonth(),d2.getDate(),d2.getHours());break;case"n":d1=new Date(d1.getFullYear(),d1.getMonth(),d1.getDate(),d1.getHours(),d1.getMinutes());d2=new Date(d2.getFullYear(),d2.getMonth(),d2.getDate(),d2.getHours(),d2.getMinutes());break;case"s":d1=new Date(d1.getFullYear(),d1.getMonth(),d1.getDate(),d1.getHours(),d1.getMinutes(),d1.getSeconds());d2=new Date(d2.getFullYear(),d2.getMonth(),d2.getDate(),d2.getHours(),d2.getMinutes(),d2.getSeconds());break;}
var t1=d1.getTime(),t2=d2.getTime();var diff=NaN;switch(interval){case"y":diff=d2.getFullYear()-d1.getFullYear();break;case"m":diff=(d2.getFullYear()-d1.getFullYear())*12+d2.getMonth()-d1.getMonth();break;case"d":diff=1;case"w":diff=Math.floor((t2+345600000)/(604800000))-Math.floor((t1+345600000)/(604800000));break;case"h":diff=Math.floor(t2/3600000)-Math.floor(t1/3600000);break;case"n":diff=Math.floor(t2/60000)-Math.floor(t1/60000);break;case"s":diff=Math.floor(t2/1000)-Math.floor(t1/1000);break;case"l":diff=t2-t1;break;}
return diff;}}
if($.fn.noSelect==undefined){$.fn.noSelect=function(p){if(p==null)
prevent=true;else
prevent=p;if(prevent){return this.each(function(){if($.browser.msie||$.browser.safari)$(this).bind('selectstart',function(){return false;});else if($.browser.mozilla){$(this).css('MozUserSelect','none');$('body').trigger('focus');}
else if($.browser.opera)$(this).bind('mousedown',function(){return false;});else $(this).attr('unselectable','on');});}else{return this.each(function(){if($.browser.msie||$.browser.safari)$(this).unbind('selectstart');else if($.browser.mozilla)$(this).css('MozUserSelect','inherit');else if($.browser.opera)$(this).unbind('mousedown');else $(this).removeAttr('unselectable','on');});}};}
$.fn.bcalendar=function(option){var def={view:"month",weekstartday:0,theme:0,height:false,url:"",eventItems:[],method:"POST",showday:new Date(),onBeforeRequestData:false,onAfterRequestData:false,onRequestDataError:false,onWeekOrMonthToDay:false,quickAddHandler:false,quickAddUrl:"",quickUpdateUrl:"",quickDeleteUrl:"",autoload:false,readonly:false,extParam:[],enableDrag:true,loadDateR:[]};var eventDiv=$("#gridEvent");if(eventDiv.length==0){eventDiv=$("<div id='gridEvent' style='display:none;'></div>").appendTo(document.body);}
var gridcontainer=$(this);var gridcontainer1=$("#gridcontainer1");option=$.extend(def,option);if(option.quickUpdateUrl==null||option.quickUpdateUrl==""){option.enableDrag=false;}
var __SCOLLEVENTTEMP="<DIV style=\"WIDTH:${width};top:${top};left:${left};\" title=\"${title}\" class=\"chip chip${i} ${drag}\"><div class=\"dhdV\" style=\"display:none\">${data}</div><DIV style=\"BORDER-BOTTOM-COLOR:${bdcolor}\" class=ct>&nbsp;</DIV><DL style=\"BORDER-BOTTOM-COLOR:${bdcolor}; BACKGROUND-COLOR:${bgcolor1}; BORDER-TOP-COLOR: ${bdcolor}; HEIGHT: ${height}px; BORDER-RIGHT-COLOR:${bdcolor}; BORDER-LEFT-COLOR:${bdcolor}\"><DT style=\"BACKGROUND-COLOR:${bgcolor2}\">${starttime} - ${endtime} ${icon}</DT><DD><SPAN>${content}</SPAN></DD><DIV class='resizer' style='display:${redisplay}'><DIV class=rszr_icon>&nbsp;</DIV></DIV></DL><DIV style=\"BORDER-BOTTOM-COLOR:${bdcolor}; BACKGROUND-COLOR:${bgcolor1}; BORDER-TOP-COLOR: ${bdcolor}; BORDER-RIGHT-COLOR: ${bdcolor}; BORDER-LEFT-COLOR:${bdcolor}\" class=cb1>&nbsp;</DIV><DIV style=\"BORDER-BOTTOM-COLOR:${bdcolor}; BORDER-TOP-COLOR:${bdcolor}; BORDER-RIGHT-COLOR:${bdcolor}; BORDER-LEFT-COLOR:${bdcolor}\" class=cb2>&nbsp;</DIV></DIV>";var __ALLDAYEVENTTEMP='<div class="rb-o ${eclass}" id="${id}" title="${title}" style="color:${color};"><div class="dhdV" style="display:none">${data}</div><div class="${extendClass} rb-m" style="background-color:${color}">${extendHTML}<div class="rb-i">${content}</div></div></div>';var __ALLDAYEVENTTEMP1='<div class="rb-o ${eclass}" id="${id}" title="${title}" style="color:${color};"><div class="dhdV" style="display:none">${data}</div><div class="${extendClass} rb-m" style="background-color:${color}">${extendHTML}<div class="rb-i">${content}</div></div></div>';var __MonthDays=[31,28,31,30,31,30,31,31,30,31,30,31];var __LASSOTEMP="<div class='drag-lasso' style='left:${left}px;top:${top}px;width:${width}px;height:${height}px;'>&nbsp;</div>";var _dragdata;var _dragevent;clearcontainer();if(!option.height){option.height=document.documentElement.scrollHeight;}
gridcontainer.css("overflow-y","visible").height(option.height-8);if(option.url&&option.autoload){populate();}
else{render();var d=getRdate();}
function clearcontainer(){gridcontainer.empty();}
function getRdate(){return{start:option.vstart,end:option.vend};}
function pushER(start,end){var ll=option.loadDateR.length;if(!end){end=start;}
if(ll==0){option.loadDateR.push({startdate:start,enddate:end});}
else{for(var i=0;i<ll;i++){var dr=option.loadDateR[i];var diff=DateDiff("d",start,dr.startdate);if(diff==0||diff==1){if(dr.enddate<end){dr.enddate=end;}
break;}
else if(diff>1){var d2=DateDiff("d",end,dr.startdate);if(d2>1){option.loadDateR.splice(0,0,{startdate:start,enddate:end});}
else{dr.startdate=start;if(dr.enddate<end){dr.enddate=end;}}
break;}
else{var d3=DateDiff("d",end,dr.startdate);if(dr.enddate<end){if(d3<1){dr.enddate=end;break;}
else{if(i==ll-1){option.loadDateR.push({startdate:start,enddate:end});}}}}}
ll=option.loadDateR.length;if(ll>1){for(var i=0;i<ll-1;){var d1=option.loadDateR[i];var d2=option.loadDateR[i+1];var diff1=DateDiff("d",d2.startdate,d1.enddate);if(diff1<=1){d1.startdate=d2.startdate>d1.startdate?d1.startdate:d2.startdate;d1.enddate=d2.enddate>d1.enddate?d2.enddate:d1.enddate;option.loadDateR.splice(i+1,1);ll--;continue;}
i++;}}}}
function render(){var showday=new Date(option.showday.getFullYear(),option.showday.getMonth(),option.showday.getDate());var events=option.eventItems;var config={view:option.view,weekstartday:option.weekstartday,theme:option.theme};if(option.view=="day"||option.view=="week"){var $dvtec=$("#dvtec");if($dvtec.length>0){option.scoll=$dvtec.attr("scrollTop");}}
switch(option.view){case"day":BuildDaysAndWeekView(showday,1,events,config);break;case"week":BuildDaysAndWeekView(showday,7,events,config);break;case"month":BuildMonthView(showday,events,config);break;default:alert(i18n.xgcalendar.no_implement);break;}
initevents(option.view);ResizeView();}
function BuildDaysAndWeekView(startday,l,events,config){var days=[];if(l==1){var show=dateFormat.call(startday,i18n.xgcalendar.dateformat.Md);days.push({display:show,date:startday,day:startday.getDate(),year:startday.getFullYear(),month:startday.getMonth()+1});option.datestrshow=CalDateShow(days[0].date);option.vstart=days[0].date;option.vend=days[0].date;}
else{var w=0;if(l==7){w=config.weekstartday-startday.getDay();if(w>0)w=w-7;}
var ndate;for(var i=w,j=0;j<l;i=i+1,j++){ndate=DateAdd("d",i,startday);var show=dateFormat.call(ndate,i18n.xgcalendar.dateformat.Md);days.push({display:show,date:ndate,day:ndate.getDate(),year:ndate.getFullYear(),month:ndate.getMonth()+1});}
option.vstart=days[0].date;option.vend=days[l-1].date;option.datestrshow=CalDateShow(days[0].date,days[l-1].date);}
var allDayEvents=[];var scollDayEvents=[];var dM=PropareEvents(days,events,allDayEvents,scollDayEvents);var html=[];html.push("<div id=\"dvwkcontaienr\" class=\"wktopcontainer\">");html.push("<table class=\"wk-top\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\">");BuildWT(html,days,allDayEvents,dM);html.push("</table>");html.push("</div>");html.push("<div id=\"dvtec\"  class=\"scolltimeevent\"><table style=\"table-layout: fixed;",jQuery.browser.msie?"":"width:100%","\" cellspacing=\"0\" cellpadding=\"0\"><tbody><tr><td>");html.push("<table style=\"height: 1008px\" id=\"tgTable\" class=\"tg-timedevents\" cellspacing=\"0\" cellpadding=\"0\"><tbody>");BuildDayScollEventContainer(html,days,scollDayEvents);html.push("</tbody></table></td></tr></tbody></table></div>");gridcontainer.html(html.join(""));html=null;}
function BuildMonthView(showday,events,config){var cc="<div id='cal-month-cc' class='cc'><div id='cal-month-cc-header'><div class='cc-close' id='cal-month-closebtn'></div><div id='cal-month-cc-title' class='cc-title'></div></div><div id='cal-month-cc-body' class='cc-body'><div id='cal-month-cc-content' class='st-contents'><table class='st-grid' cellSpacing='0' cellPadding='0'><tbody></tbody></table></div></div></div>";var html=[];html.push(cc);html.push("<div id=\"mvcontainer\" class=\"mv-container\">");html.push("<table id=\"mvweek\" class=\"mv-daynames-table\" cellSpacing=\"0\" cellPadding=\"0\"><tbody><tr>");for(var i=config.weekstartday,j=0;j<7;i++,j++){if(i>6)i=0;var p={dayname:__WDAY[i]};html.push("<th class=\"mv-dayname\" title=\"",__WDAY[i],"\">",__WDAY[i],"");}
html.push("</tr></tbody></table>");html.push("</div>");var bH=GetMonthViewBodyHeight()-GetMonthViewHeaderHeight();html.push("<div id=\"mvEventContainer\" class=\"mv-event-container\" style=\"height:",bH,"px;","\">");BuilderMonthBody(html,showday,config.weekstartday,events,bH);html.push("</div>");gridcontainer.html(html.join(""));html=null;$("#cal-month-closebtn").click(closeCc);var cweek="<div id='cal-month-cc' class='cc'><div id='cal-month-cc-header'><div class='cc-close' id='cal-month-closebtn'></div><div id='cal-month-cc-title' class='cc-title'></div></div><div id='cal-month-cc-body' class='cc-body'><div id='cal-month-cc-content' class='st-contents'><table class='st-grid' cellSpacing='0' cellPadding='0'><tbody></tbody></table></div></div></div>";var html=[];html.push(cweek);html.push("<div id=\"mvcontainer\" class=\"mv-container\">");html.push("<table id=\"mvweek\" class=\"mv-daynames-table\" cellSpacing=\"0\" cellPadding=\"0\"><tbody><tr>");html.push("<th class=\"mv-dayname\" title=\"",__WDAY[7],"\">",__WDAY[7],"");html.push("</tr></tbody></table>");html.push("</div>");var bH=GetMonthViewBodyHeight()-GetMonthViewHeaderHeight();html.push("<div id=\"mvEventContainer1\" class=\"mv-event-container\" style=\"height:",bH,"px;","\">");BuilderMonthBodyWeek(html,showday,config.weekstartday,events,bH);html.push("</div>");$('#gridcontainer1').html(html.join(""));html=null;}
function BuilderMonthBodyWeek(htb,showday,startday,events,bodyHeight){var firstdate=new Date(showday.getFullYear(),showday.getMonth(),1);var diffday=startday-firstdate.getDay();var showmonth=showday.getMonth();if(diffday>0){diffday-=7;}
var startdate=DateAdd("d",diffday,firstdate);var enddate=DateAdd("d",34,startdate);var rc=5;if(enddate.getFullYear()==showday.getFullYear()&&enddate.getMonth()==showday.getMonth()&&enddate.getDate()<__MonthDays[showmonth]){enddate=DateAdd("d",7,enddate);rc=6;}
option.vstart=startdate;option.vend=enddate;option.datestrshow=CalDateShow(startdate,enddate);$('#txtdatetimeshow').text(option.datestrshow);bodyHeight=bodyHeight-18*rc;var rowheight=bodyHeight/rc;var roweventcount=parseInt(rowheight/21);if(rowheight%21>15){roweventcount++;}
var p=100/rc;var formatevents=[];var hastdata=formartEventsInHashtable(events,startday,7,startdate,enddate);var B=[];var C=[];for(var j=0;j<rc;j++){var k=0;formatevents[j]=b=[];for(var i=0;i<7;i++){var newkeyDate=DateAdd("d",j*7+i,startdate);C[j*7+i]=newkeyDate;var newkey=dateFormat.call(newkeyDate,i18n.xgcalendar.dateformat.fulldaykey);b[i]=hastdata[newkey];if(b[i]&&b[i].length>0){k+=b[i].length;}}
B[j]=k;}
eventDiv.data("mvdata",formatevents);for(var j=0;j<rc;j++){htb.push("<div id='mvrow_",j,"' style=\"HEIGHT:",p,"%; TOP:",p*j,"%\"  class=\"month-row\">");htb.push("<table class=\"st-bg-table\" cellSpacing=\"0\" cellPadding=\"0\"><tbody><tr>");var dMax=B[j];var i=0;var day=C[j*7+i];htb.push("<td abbr='",dateFormat.call(day,i18n.xgcalendar.dateformat.fulldayvalue),"' ch='qkadd' axis='00:00' title=''");if(dateFormat.call(day,"yyyyMMdd")==dateFormat.call(new Date(),"yyyyMMdd")){htb.push(" class=\"st-bg st-bg-today\">");}
else if(dateFormat.call(day,"yyyyMMdd")<dateFormat.call(new Date(),"yyyyMMdd")){htb.push(" class=\"st-bg st-bg-pastday\">");}
else{htb.push(" class=\"st-bg\">");}
htb.push("&nbsp;</td>");htb.push("</tr></tbody></table>");htb.push("<table class=\"st-grid\" cellpadding=\"0\" cellspacing=\"0\"><tbody>");htb.push("<tr>");var titletemp="<td class=\"st-dtitle${titleClass}\" ch='qkadd' abbr='${abbr}' axis='00:00' title=\"${title}\"><span class='monthdayshow'>W"+(j+1)+"</span></a></td>";var o={titleClass:"",dayshow:""};var day=C[j*7+i];if(dateFormat.call(day,"yyyyMMdd")==dateFormat.call(new Date(),"yyyyMMdd")){o.titleClass=" st-dtitle-today";}
if(day.getMonth()!=showmonth){o.titleClass=" st-dtitle-nonmonth";}
o.title=dateFormat.call(day,i18n.xgcalendar.dateformat.fulldayshow);if(day.getDate()==1){if(day.getMonth==0){o.dayshow=dateFormat.call(day,i18n.xgcalendar.dateformat.fulldayshow);}
else{o.dayshow=dateFormat.call(day,i18n.xgcalendar.dateformat.Md3);}}
else{o.dayshow=day.getDate();}
o.abbr=dateFormat.call(day,i18n.xgcalendar.dateformat.fulldayvalue);htb.push(Tp(titletemp,o));htb.push("</tr>");var sfirstday=C[j*7];q=0;if(weekly[j]){$.each(weekly[j],function(index,value){datas=value.join("$");title='';price_detail='';if(value[11]=='available'){title=value[14]+' '+value[15]+'('+currency_symbol+value[13]+')';price_detail=currency_symbol+value[13];}
else{title=value[14]+' '+value[15]+'('+value[11]+')';price_detail=value[11];}
if(q<7){htb.push('<tr><td title="" abbr="" ch="show" axis="" class="st-c"><div style="color: '+value[7]+';" title="'+title+'" id="bbit_cal_event_'+value[16]+'_'+j+'" class="rb-o drag"><div style="display: none;" class="dhdV">'+datas+'</div><div style="background-color: '+value[7]+';" class=" rb-m"><div class="st-ad-mr"></div><div class="rb-i">'+value[14]+' <span style="cursor: pointer;">'+price_detail+'</span></div></div></div></td></tr>');}
q++;});}
if(weekly[j]&&weekly[j].length>9){total=weekly[j].length-9;htb.push('<tr><td title="" abbr="'+j+'" ch="more" axis="0" class="st-c st-more st-moreul">Others '+total+'</td></tr>');}
htb.push("</tbody></table>");htb.push("</div>");}
formatevents=B=C=hastdata=null;return htb;}
function closeCc(){$("#cal-month-cc").css("visibility","hidden");}
function PropareEvents(dayarrs,events,aDE,sDE){var l=dayarrs.length;var el=events.length;var fE=[];var deB=aDE;var deA=sDE;for(var j=0;j<el;j++){var sD=events[j][2];var eD=events[j][3];var s={};s.event=events[j];s.day=sD.getDate();s.year=sD.getFullYear();s.month=sD.getMonth()+1;s.allday=events[j][4]==1;s.crossday=events[j][5]==1;s.reevent=events[j][6]==1;s.daystr=[s.year,s.month,s.day].join("/");s.st={};s.st.hour=sD.getHours();s.st.minute=sD.getMinutes();s.st.p=s.st.hour*60+s.st.minute;s.et={};s.et.hour=eD.getHours();s.et.minute=eD.getMinutes();s.et.p=s.et.hour*60+s.et.minute;fE.push(s);}
var dMax=0;for(var i=0;i<l;i++){var da=dayarrs[i];deA[i]=[];deB[i]=[];da.daystr=da.year+"/"+da.month+"/"+da.day;for(var j=0;j<fE.length;j++){if(!fE[j].crossday&&!fE[j].allday){if(da.daystr==fE[j].daystr)
deA[i].push(fE[j]);}
else{if(da.daystr==fE[j].daystr){deB[i].push(fE[j]);dMax++;}
else{if(i==0&&da.date>=fE[j].event[2]&&da.date<=fE[j].event[3])
{deB[i].push(fE[j]);dMax++;}}}}}
var lrdate=dayarrs[l-1].date;for(var i=0;i<l;i++){var de=deB[i];if(de.length>0){for(var j=0;j<de.length;j++){var end=DateDiff("d",lrdate,de[j].event[3])>0?lrdate:de[j].event[3];de[j].colSpan=DateDiff("d",dayarrs[i].date,end)+1}}
de=null;}
for(var i=0;i<l;i++){var de=deA[i];if(de.length>0){var x=[];var y=[];var D=[];var dl=de.length;var Ia;for(var j=0;j<dl;++j){var ge=de[j];for(var La=ge.st.p,Ia=0;y[Ia]>La;)Ia++;ge.PO=Ia;ge.ne=[];y[Ia]=ge.et.p||1440;x[Ia]=ge;if(!D[Ia]){D[Ia]=[];}
D[Ia].push(ge);if(Ia!=0){ge.pe=[x[Ia-1]];x[Ia-1].ne.push(ge);}
for(Ia=Ia+1;y[Ia]<=La;)Ia++;if(x[Ia]){var k=x[Ia];ge.ne.push(k);k.pe.push(ge);}
ge.width=1/(ge.PO+1);ge.left=1-ge.width;}
var k=Array.prototype.concat.apply([],D);x=y=D=null;var t=k.length;for(var y=t;y--;){var H=1;var La=0;var x=k[y];for(var D=x.ne.length;D--;){var Ia=x.ne[D];La=Math.max(La,Ia.VL);H=Math.min(H,Ia.left)}
x.VL=La+1;x.width=H/(x.PO+1);x.left=H-x.width;}
for(var y=0;y<t;y++){var x=k[y];x.left=0;if(x.pe)for(var D=x.pe.length;D--;){var H=x.pe[D];x.left=Math.max(x.left,H.left+H.width);}
var p=(1-x.left)/x.VL;x.width=Math.max(x.width,p);x.aQ=Math.min(1-x.left,x.width+0.7*p);}
de=null;deA[i]=k;}}
return dMax;}
function BuildWT(ht,dayarrs,events,dMax){ht.push("<tr>","<th width=\"60\" rowspan=\"3\">&nbsp;</th>");for(var i=0;i<dayarrs.length;i++){var ev,title,cl;if(dayarrs.length==1){ev="";title="";cl="";}
else{ev="";title=i18n.xgcalendar.to_date_view;cl="wk-daylink";}
ht.push("<th abbr='",dateFormat.call(dayarrs[i].date,i18n.xgcalendar.dateformat.fulldayvalue),"' class='gcweekname' scope=\"col\"><div title='",title,"' ",ev," class='wk-dayname'><span class='",cl,"'>",dayarrs[i].display,"</span></div></th>");}
ht.push("<th width=\"16\" rowspan=\"3\">&nbsp;</th>");ht.push("</tr>");ht.push("<tr>");ht.push("<td class=\"wk-allday\"");if(dayarrs.length>1){ht.push(" colSpan='",dayarrs.length,"'");}
ht.push("><div id=\"weekViewAllDaywk\" ><table class=\"st-grid\" cellpadding=\"0\" cellspacing=\"0\"><tbody>");if(dMax==0){ht.push("<tr>");for(var i=0;i<dayarrs.length;i++){ht.push("<td class=\"st-c st-s\""," ch='qkadd' abbr='",dateFormat.call(dayarrs[i].date,"yyyy-M-d"),"' axis='00:00'>&nbsp;</td>");}
ht.push("</tr>");}
else{var l=events.length;var el=0;var x=[];for(var j=0;j<l;j++){x.push(0);}
for(var j=0;el<dMax;j++){ht.push("<tr>");for(var h=0;h<l;){var e=events[h][x[h]];ht.push("<td class='st-c");if(e){x[h]=x[h]+1;ht.push("'");var t=BuildMonthDayEvent(e,dayarrs[h].date,l-h);if(e.colSpan>1){ht.push(" colSpan='",e.colSpan,"'");h+=e.colSpan;}
else{h++;}
ht.push(" ch='show'>",t);t=null;el++;}
else{ht.push(" st-s' ch='qkadd' abbr='",dateFormat.call(dayarrs[h].date,i18n.xgcalendar.dateformat.fulldayvalue),"' axis='00:00'>&nbsp;");h++;}
ht.push("</td>");}
ht.push("</tr>");}
ht.push("<tr>");for(var h=0;h<l;h++){ht.push("<td class='st-c st-s' ch='qkadd' abbr='",dateFormat.call(dayarrs[h].date,i18n.xgcalendar.dateformat.fulldayvalue),"' axis='00:00'>&nbsp;</td>");}
ht.push("</tr>");}
ht.push("</tbody></table></div></td></tr>");ht.push("<tr>");ht.push("<td style=\"height: 5px;\"");if(dayarrs.length>1){ht.push(" colSpan='",dayarrs.length,"'");}
ht.push("></td>");ht.push("</tr>");}
function BuildDayScollEventContainer(ht,dayarrs,events){ht.push("<tr>");ht.push("<td style='width:60px;'></td>");ht.push("<td");if(dayarrs.length>1){ht.push(" colSpan='",dayarrs.length,"'");}
ht.push("><div id=\"tgspanningwrapper\" class=\"tg-spanningwrapper\"><div style=\"font-size: 20px\" class=\"tg-hourmarkers\">");for(var i=0;i<24;i++){ht.push("<div class=\"tg-dualmarker\"></div>");}
ht.push("</div></div></td></tr>");ht.push("<tr>");ht.push("<td style=\"width: 60px\" class=\"tg-times\">");var now=new Date();var h=now.getHours();var m=now.getMinutes();var mHg=gP(h,m)-4;ht.push("<div id=\"tgnowptr\" class=\"tg-nowptr\" style=\"left:0px;top:",mHg,"px\"></div>");var tmt="";for(var i=0;i<24;i++){tmt=fomartTimeShow(i);ht.push("<div style=\"height: 41px\" class=\"tg-time\">",tmt,"</div>");}
ht.push("</td>");var l=dayarrs.length;for(var i=0;i<l;i++){ht.push("<td class=\"tg-col\" ch='qkadd' abbr='",dateFormat.call(dayarrs[i].date,i18n.xgcalendar.dateformat.fulldayvalue),"'>");var istoday=dateFormat.call(dayarrs[i].date,"yyyyMMdd")==dateFormat.call(new Date(),"yyyyMMdd");if(istoday){ht.push("<div style=\"margin-bottom: -1008px; height:1008px\" class=\"tg-today\">&nbsp;</div>");}
ht.push("<div  style=\"margin-bottom: -1008px; height: 1008px\" id='tgCol",i,"' class=\"tg-col-eventwrapper\">");BuildEvents(ht,events[i],dayarrs[i]);ht.push("</div>");ht.push("<div class=\"tg-col-overlaywrapper\" id='tgOver",i,"'>");if(istoday){var mhh=mHg+4;ht.push("<div id=\"tgnowmarker\" class=\"tg-hourmarker tg-nowmarker\" style=\"left:0px;top:",mhh,"px\"></div>");}
ht.push("</div>");ht.push("</td>");}
ht.push("</tr>");}
function BuildEvents(hv,events,sday){for(var i=0;i<events.length;i++){var c;if(events[i].event[7]&&events[i].event[7]>=0){c=tc(events[i].event[7]);}
else{c=tc();}
var tt=BuildDayEvent(c,events[i],i);hv.push(tt);}}
function getTitle(event){var timeshow,locationshow,attendsshow,eventshow;var showtime=event[4]!=1;eventshow=event[1];var startformat=getymformat(event[2],null,showtime,true);var endformat=getymformat(event[3],event[2],showtime,true);timeshow=dateFormat.call(event[2],startformat)+" - "+dateFormat.call(event[3],endformat);locationshow=(event[9]!=undefined&&event[9]!="")?event[9]:i18n.xgcalendar.i_undefined;attendsshow=(event[10]!=undefined&&event[10]!="")?event[10]:"";var ret=[];if(event[4]==1){ret.push("["+i18n.xgcalendar.allday_event+"]",$.browser.mozilla?"":"\r\n");}
else{if(event[5]==1){ret.push("["+i18n.xgcalendar.repeat_event+"]",$.browser.mozilla?"":"\r\n");}}
ret.push(i18n.xgcalendar.time+":",timeshow,$.browser.mozilla?"":"\r\n",i18n.xgcalendar.event+":",eventshow,$.browser.mozilla?"":"\r\n",i18n.xgcalendar.location+":",locationshow);if(attendsshow!=""){ret.push($.browser.mozilla?"":"\r\n",i18n.xgcalendar.participant+":",attendsshow);}
return ret.join("");}
function BuildDayEvent(theme,e,index){var p={bdcolor:theme[0],bgcolor2:theme[0],bgcolor1:theme[2],width:"70%",icon:"",title:"",data:""};p.starttime=pZero(e.st.hour)+":"+pZero(e.st.minute);p.endtime=pZero(e.et.hour)+":"+pZero(e.et.minute);p.content=e.event[1];p.title=getTitle(e.event);p.data=e.event.join("$");var icons=[];p.icon=icons.join("");var sP=gP(e.st.hour,e.st.minute);var eP=gP(e.et.hour,e.et.minute);p.top=sP+"px";p.left=(e.left*100)+"%";p.width=(e.aQ*100)+"%";p.height=(eP-sP-4);p.i=index;if(option.enableDrag&&e.event[8]==1){p.drag="drag";p.redisplay="block";}
else{p.drag="";p.redisplay="none";}
var newtemp=Tp(__SCOLLEVENTTEMP,p);p=null;return newtemp;}
function GetMonthViewBodyHeight(){return option.height;}
function GetMonthViewHeaderHeight(){return 21;}
function BuilderMonthBody(htb,showday,startday,events,bodyHeight){var firstdate=new Date(showday.getFullYear(),showday.getMonth(),1);var diffday=startday-firstdate.getDay();var showmonth=showday.getMonth();if(diffday>0){diffday-=7;}
var startdate=DateAdd("d",diffday,firstdate);var enddate=DateAdd("d",34,startdate);var rc=5;if(enddate.getFullYear()==showday.getFullYear()&&enddate.getMonth()==showday.getMonth()&&enddate.getDate()<__MonthDays[showmonth]){enddate=DateAdd("d",7,enddate);rc=6;}
option.vstart=startdate;option.vend=enddate;option.datestrshow=CalDateShow(startdate,enddate);$('#txtdatetimeshow').text(option.datestrshow);bodyHeight=bodyHeight-18*rc;var rowheight=bodyHeight/rc;var roweventcount=parseInt(rowheight/21);if(rowheight%21>15){roweventcount++;}
var p=100/rc;var formatevents=[];var hastdata=formartEventsInHashtable(events,startday,7,startdate,enddate);var B=[];var C=[];for(var j=0;j<rc;j++){var k=0;formatevents[j]=b=[];for(var i=0;i<7;i++){var newkeyDate=DateAdd("d",j*7+i,startdate);C[j*7+i]=newkeyDate;var newkey=dateFormat.call(newkeyDate,i18n.xgcalendar.dateformat.fulldaykey);b[i]=hastdata[newkey];if(b[i]&&b[i].length>0){k+=b[i].length;}}
B[j]=k;}
eventDiv.data("mvdata",formatevents);for(var j=0;j<rc;j++){htb.push("<div id='mvrow_",j,"' style=\"HEIGHT:",p,"%; TOP:",p*j,"%\"  class=\"month-row\">");htb.push("<table class=\"st-bg-table\" cellSpacing=\"0\" cellPadding=\"0\"><tbody><tr>");var dMax=B[j];for(var i=0;i<7;i++){var day=C[j*7+i];htb.push("<td abbr='",dateFormat.call(day,i18n.xgcalendar.dateformat.fulldayvalue),"' ch='qkadd' axis='00:00' title=''");if(dateFormat.call(day,"yyyyMMdd")==dateFormat.call(new Date(),"yyyyMMdd")){htb.push(" class=\"st-bg st-bg-today\">");}
else if(dateFormat.call(day,"yyyyMMdd")<dateFormat.call(new Date(),"yyyyMMdd")){htb.push(" class=\"st-bg st-bg-pastday\">");}
else{htb.push(" class=\"st-bg\">");}
htb.push("&nbsp;</td>");}
htb.push("</tr></tbody></table>");htb.push("<table class=\"st-grid\" cellpadding=\"0\" cellspacing=\"0\"><tbody>");htb.push("<tr>");var titletemp="<td class=\"st-dtitle${titleClass}\" ch='qkadd' abbr='${abbr}' axis='00:00' title=\"${title}\"><span class='monthdayshow'>${dayshow}</span></a></td>";for(var i=0;i<7;i++){var o={titleClass:"",dayshow:""};var day=C[j*7+i];if(dateFormat.call(day,"yyyyMMdd")==dateFormat.call(new Date(),"yyyyMMdd")){o.titleClass=" st-dtitle-today";}
if(day.getMonth()!=showmonth){o.titleClass=" st-dtitle-nonmonth";}
o.title=dateFormat.call(day,i18n.xgcalendar.dateformat.fulldayshow);if(day.getDate()==1){if(day.getMonth==0){o.dayshow=dateFormat.call(day,i18n.xgcalendar.dateformat.fulldayshow);}
else{o.dayshow=dateFormat.call(day,i18n.xgcalendar.dateformat.Md3);}}
else{o.dayshow=day.getDate();}
o.abbr=dateFormat.call(day,i18n.xgcalendar.dateformat.fulldayvalue);htb.push(Tp(titletemp,o));}
htb.push("</tr>");var sfirstday=C[j*7];BuildMonthRow(htb,formatevents[j],dMax,roweventcount,sfirstday);htb.push("</tbody></table>");htb.push("</div>");}
formatevents=B=C=hastdata=null;}
function formartEventsInHashtable(events,startday,daylength,rbdate,redate){var hast=new Object();var l=events.length;for(var i=0;i<l;i++){var sD=events[i][2];var eD=events[i][3];var diff=DateDiff("d",sD,eD);var s={};s.event=events[i];s.day=sD.getDate();s.year=sD.getFullYear();s.month=sD.getMonth()+1;s.allday=events[i][4]==1;s.crossday=events[i][5]==1;s.reevent=events[i][6]==1;s.daystr=s.year+"/"+s.month+"/"+s.day;s.st={};s.st.hour=sD.getHours();s.st.minute=sD.getMinutes();s.st.p=s.st.hour*60+s.st.minute;s.et={};s.et.hour=eD.getHours();s.et.minute=eD.getMinutes();s.et.p=s.et.hour*60+s.et.minute;if(diff>0){if(sD<rbdate){sD=rbdate;}
if(eD>redate){eD=redate;}
var f=startday-sD.getDay();if(f>0){f-=daylength;}
var sdtemp=DateAdd("d",f,sD);for(;sdtemp<=eD;sD=sdtemp=DateAdd("d",daylength,sdtemp)){var d=Clone(s);var key=dateFormat.call(sD,i18n.xgcalendar.dateformat.fulldaykey);var x=DateDiff("d",sdtemp,eD);if(hast[key]==null){hast[key]=[];}
d.colSpan=(x>=daylength)?daylength-DateDiff("d",sdtemp,sD):DateDiff("d",sD,eD)+1;hast[key].push(d);d=null;}}
else{var key=dateFormat.call(events[i][2],i18n.xgcalendar.dateformat.fulldaykey);if(hast[key]==null){hast[key]=[];}
s.colSpan=1;hast[key].push(s);}
s=null;}
return hast;}
function BuildMonthRow(htr,events,dMax,sc,day){var x=[];var y=[];var z=[];var cday=[];var l=events.length;var el=0;for(var j=0;j<l;j++){x.push(0);y.push(0);z.push(0);cday.push(DateAdd("d",j,day));}
for(var j=0;j<l;j++){var ec=events[j]?events[j].length:0;y[j]+=ec;for(var k=0;k<ec;k++){var e=events[j][k];if(e&&e.colSpan>1){for(var m=1;m<e.colSpan;m++){y[j+m]++;}}}}
var tdtemp="<td class='${cssclass}' axis='${axis}' ch='${ch}' abbr='${abbr}' title='${title}' ${otherAttr}>${html}</td>";for(var j=0;j<sc&&el<dMax;j++){htr.push("<tr>");for(var h=0;h<l;){var e=events[h]?events[h][x[h]]:undefined;var tempdata={"class":"",axis:"",ch:"",title:"",abbr:"",html:"",otherAttr:"",click:"javascript:void(0);"};var tempCss=["st-c"];if(e){x[h]=x[h]+1;var bs=false;if(z[h]+1==y[h]&&e.colSpan==1){bs=true;}
if(!bs&&j==(sc-1)&&z[h]<y[h]){el++;$.extend(tempdata,{"axis":h,ch:"more","abbr":dateFormat.call(cday[h],i18n.xgcalendar.dateformat.fulldayvalue),html:i18n.xgcalendar.others+(y[h]-z[h])+i18n.xgcalendar.item,click:"javascript:alert('more event');"});tempCss.push("st-more st-moreul");h++;}
else{tempdata.html=BuildMonthDayEvent(e,cday[h],l-h);tempdata.ch="show";if(e.colSpan>1){tempdata.otherAttr=" colSpan='"+e.colSpan+"'";for(var m=0;m<e.colSpan;m++){z[h+m]=z[h+m]+1;}
h+=e.colSpan;}
else{z[h]=z[h]+1;h++;}
el++;}}
else{if(j==(sc-1)&&z[h]<y[h]&&y[h]>0){$.extend(tempdata,{"axis":h,ch:"more","abbr":dateFormat.call(cday[h],i18n.xgcalendar.dateformat.fulldayvalue),html:i18n.xgcalendar.others+(y[h]-z[h])+i18n.xgcalendar.item,click:"javascript:alert('more event');"});tempCss.push("st-more st-moreul");h++;}
else{$.extend(tempdata,{html:"&nbsp;",ch:"qkadd","axis":"00:00","abbr":dateFormat.call(cday[h],i18n.xgcalendar.dateformat.fulldayvalue),title:""});tempCss.push("st-s");h++;}}
tempdata.cssclass=tempCss.join(" ");tempCss=null;htr.push(Tp(tdtemp,tempdata));tempdata=null;}
htr.push("</tr>");}
x=y=z=cday=null;}
function BuildMonthDayEvent(e,cday,length){var theme;if(e.event[7]&&e.event[7]>=0){theme=tc(e.event[7]);}
else{theme=tc();}
var p={color:'',title:"",extendClass:"",extendHTML:"",data:""};p.title=getTitle(e.event);p.color=e.event[7];p.id="bbit_cal_event_"+e.event[0];if(option.enableDrag&&e.event[8]==1){p.eclass="drag";}
else{p.eclass="cal_"+e.event[0];}
p.data=e.event.join("$");var sp="<span style=\"cursor: pointer\">${content}</span>";var i="<I class=\"cic cic-tmr\">&nbsp;</I>";var i2="<I class=\"cic cic-rcr\">&nbsp;</I>";var ml="<div class=\"st-ad-ml\"></div>";var mr="<div class=\"st-ad-mr\"></div>";var arrm=[];var sf=e.event[2]<cday;var ef=DateDiff("d",cday,e.event[3])>=length;if(sf||ef){if(sf){arrm.push(ml);p.extendClass="st-ad-mpad ";}
if(ef)
{arrm.push(mr);}
p.extendHTML=arrm.join("");}
var cen;if(!e.allday&&!sf){cen=pZero(e.st.hour)+":"+pZero(e.st.minute)+" "+e.event[1];}
else{if(e.event[11]=='booked'){cen=e.event[1];position=cen.lastIndexOf("at price")+8;sub_str=cen.substring(position,cen.length);cen=cen.replace(sub_str,currency_symbol+sub_str);}
else if(e.event[11]=='available'){if(e.event[1]!='Not available'){cen=currency_symbol+e.event[1];}
else{cen=e.event[1];}}
else
cen=currency_symbol+e.event[1];}
var content=[];content.push(Tp(sp,{content:cen}));if(e.reevent)
{content.push(i2);}
p.content=content.join("");if(e.event[14]){p.content=e.event[14]+p.content;}
p.title=e.event[14]+' '+e.event[15]+' ('+cen+')';if(dateFormat.call(cday,"yyyyMMdd")<dateFormat.call(new Date(),"yyyyMMdd")){return Tp(__ALLDAYEVENTTEMP1,p);}
else
return Tp(__ALLDAYEVENTTEMP,p);}
function populate(){if(option.isloading){return true;}
if(option.url&&option.url!=""){option.isloading=true;if(option.onBeforeRequestData&&$.isFunction(option.onBeforeRequestData)){option.onBeforeRequestData(1);}
var zone=new Date().getTimezoneOffset()/60*-1;var param=[{name:"showdate",value:dateFormat.call(option.showday,i18n.xgcalendar.dateformat.fulldayvalue)},{name:"viewtype",value:option.view},{name:"timezone",value:zone}];if(option.extParam){for(var pi=0;pi<option.extParam.length;pi++){param[param.length]=option.extParam[pi];}}
$.ajax({type:option.method,url:option.url,data:param,dataType:"json",dataFilter:function(data,type){return data;},success:function(data){if(data!=null&&data.error!=null){if(option.onRequestDataError){option.onRequestDataError(1,data);}}
else{property_list=data["property"];currency_symbol=data["currency_symbol"];monthly=data["monthly"];weekly=data["weeks"];data["start"]=parseDate(data["start"]);data["end"]=parseDate(data["end"]);$.each(data.events,function(index,value){value[2]=parseDate(value[2]);value[3]=parseDate(value[3]);});if(monthly.length>0){$('#js-edit-month-price').removeAttr("disabled");$('#js-edit-month-price').removeClass("disabled");$('#js-edit-month-price').removeClass("round-3");$('#js-edit-month-price').click(monthshow);}
else{$('#js-edit-month-price').addClass("disabled round-3");$('#js-edit-month-price').attr('disabled','disabled');}
responseData(data,data.start,data.end);pushER(data.start,data.end);}
if(option.onAfterRequestData&&$.isFunction(option.onAfterRequestData)){option.onAfterRequestData(1);}
option.isloading=false;},error:function(data){try{if(option.onRequestDataError){option.onRequestDataError(1,data);}else{alert(i18n.xgcalendar.get_data_exception);}
if(option.onAfterRequestData&&$.isFunction(option.onAfterRequestData)){option.onAfterRequestData(1);}
option.isloading=false;}catch(e){}}});}
else{alert("url"+i18n.xgcalendar.i_undefined);}}
function responseData(data,start,end){var events;if(data.issort==false){if(data.events&&data.events.length>0){events=data.sort(function(l,r){return l[2]>r[2]?-1:1;});}
else{events=[];}}
else{events=data.events;}
ConcatEvents(events,start,end);render();}
function clearrepeat(events,start,end){var jl=events.length;if(jl>0){var es=events[0][2];var el=events[jl-1][2];for(var i=0,l=option.eventItems.length;i<l;i++){if(option.eventItems[i][2]>el||jl==0){break;}
if(option.eventItems[i][2]>=es){for(var j=0;j<jl;j++){if(option.eventItems[i][0]==events[j][0]&&option.eventItems[i][2]<start){events.splice(j,1);jl--;break;}}}}}}
function ConcatEvents(events,start,end){if(!events){events=[];}
if(events){option.eventItems=events;}}
function weekormonthtoday(e){var th=$(this);var daystr=th.attr("abbr");option.showday=strtodate(daystr+" 00:00");option.view="day";render();if(option.onweekormonthtoday){option.onweekormonthtoday(option);}
return false;}
function parseDate(str){return new Date(Date.parse(str));}
function gP(h,m){return h*42+parseInt(m/60*42);}
function gW(ts1,ts2){var t1=ts1/42;var t2=parseInt(t1);var t3=t1-t2>=0.5?30:0;var t4=ts2/42;var t5=parseInt(t4);var t6=t4-t5>=0.5?30:0;return{sh:t2,sm:t3,eh:t5,em:t6,h:ts2-ts1};}
function gH(y1,y2,pt){var sy1=Math.min(y1,y2);var sy2=Math.max(y1,y2);var t1=(sy1-pt)/42;var t2=parseInt(t1);var t3=t1-t2>=0.5?30:0;var t4=(sy2-pt)/42;var t5=parseInt(t4);var t6=t4-t5>=0.5?30:0;return{sh:t2,sm:t3,eh:t5,em:t6,h:sy2-sy1};}
function pZero(n){return n<10?"0"+n:""+n;}
function tc(d){function zc(c,i){var d="666666888888aaaaaabbbbbbdddddda32929cc3333d96666e69999f0c2c2b1365fdd4477e67399eea2bbf5c7d67a367a994499b373b3cca2cce1c7e15229a36633cc8c66d9b399e6d1c2f029527a336699668cb399b3ccc2d1e12952a33366cc668cd999b3e6c2d1f01b887a22aa9959bfb391d5ccbde6e128754e32926265ad8999c9b1c2dfd00d78131096184cb05288cb8cb8e0ba52880066aa008cbf40b3d580d1e6b388880eaaaa11bfbf4dd5d588e6e6b8ab8b00d6ae00e0c240ebd780f3e7b3be6d00ee8800f2a640f7c480fadcb3b1440edd5511e6804deeaa88f5ccb8865a5aa87070be9494d4b8b8e5d4d47057708c6d8ca992a9c6b6c6ddd3dd4e5d6c6274878997a5b1bac3d0d6db5a69867083a894a2beb8c1d4d4dae54a716c5c8d8785aaa5aec6c3cedddb6e6e41898951a7a77dc4c4a8dcdccb8d6f47b08b59c4a883d8c5ace7dcce";return"#"+d.substring(c*30+i*6,c*30+(i+1)*6);}
var c=d!=null&&d!=undefined?d:option.theme;return[zc(c,0),zc(c,1),zc(c,2),zc(c,3)];}
function Tp(temp,dataarry){return temp.replace(/\$\{([\w]+)\}/g,function(s1,s2){var s=dataarry[s2];if(typeof(s)!="undefined"){return s;}else{return s1;}});}
function Ta(temp,dataarry){return temp.replace(/\{([\d])\}/g,function(s1,s2){var s=dataarry[s2];if(typeof(s)!="undefined"){return encodeURIComponent(s);}else{return"";}});}
function fomartTimeShow(h){return h<10?"0"+h+":00":h+":00";}
function getymformat(date,comparedate,isshowtime,isshowweek,showcompare){var showyear=isshowtime!=undefined?(date.getFullYear()!=new Date().getFullYear()):true;var showmonth=true;var showday=true;var showtime=isshowtime||false;var showweek=isshowweek||false;if(comparedate){showyear=comparedate.getFullYear()!=date.getFullYear();if(comparedate.getFullYear()==date.getFullYear()&&date.getMonth()==comparedate.getMonth()&&date.getDate()==comparedate.getDate()){showyear=showmonth=showday=showweek=false;}}
var a=[];if(showyear){a.push(i18n.xgcalendar.dateformat.fulldayshow)}else if(showmonth){a.push(i18n.xgcalendar.dateformat.Md3)}else if(showday){a.push(i18n.xgcalendar.dateformat.day);}
a.push(showweek?" (W)":"",showtime?" HH:mm":"");return a.join("");}
function CalDateShow(startday,endday,isshowtime,isshowweek){if(!endday){return dateFormat.call(startday,getymformat(startday,null,isshowtime));}else{var strstart=dateFormat.call(startday,getymformat(startday,null,isshowtime,isshowweek));var strend=dateFormat.call(endday,getymformat(endday,startday,isshowtime,isshowweek));var join=(strend!=""?" - ":"");return[strstart,strend].join(join);}}
function dochange(){var d=getRdate();var loaded=checkInEr(d.start,d.end);if(!loaded){populate();}}
function checkInEr(start,end){var ll=option.loadDateR.length;if(ll==0){return false;}
var r=false;var r2=false;for(var i=0;i<ll;i++){r=false,r2=false;var dr=option.loadDateR[i];if(start>=dr.startdate&&start<=dr.enddate){r=true;}
if(dateFormat.call(start,"yyyyMMdd")==dateFormat.call(dr.startdate,"yyyyMMdd")||dateFormat.call(start,"yyyyMMdd")==dateFormat.call(dr.enddate,"yyyyMMdd")){r=true;}
if(!end)
{r2=true;}
else{if(end>=dr.startdate&&end<=dr.enddate){r2=true;}
if(dateFormat.call(end,"yyyyMMdd")==dateFormat.call(dr.startdate,"yyyyMMdd")||dateFormat.call(end,"yyyyMMdd")==dateFormat.call(dr.enddate,"yyyyMMdd")){r2=true;}}
if(r&&r2){break;}}
return r&&r2;}
function buildtempdayevent(sh,sm,eh,em,h,title,w,resize,thindex){var theme=thindex!=undefined&&thindex>=0?tc(thindex):tc();var newtemp=Tp(__SCOLLEVENTTEMP,{bdcolor:theme[0],bgcolor2:theme[0],bgcolor1:theme[2],data:"",starttime:[pZero(sh),pZero(sm)].join(":"),endtime:[pZero(eh),pZero(em)].join(":"),content:title?title:i18n.xgcalendar.new_event,title:title?title:i18n.xgcalendar.new_event,icon:"<I class=\"cic cic-tmr\">&nbsp;</I>",top:"0px",left:"",width:w?w:"100%",height:h-4,i:"-1",drag:"drag-chip",redisplay:resize?"block":"none"});return newtemp;}
function getdata(chip){var hddata=chip.find("div.dhdV");if(hddata.length==1){var str=hddata.text();return parseED(str.split("$"));}
return null;}
function parseED(data){if(data.length>6){var e=[];e.push(data[0],data[1],new Date(data[2]),new Date(data[3]),parseInt(data[4]),parseInt(data[5]),parseInt(data[6]),data[7]!=undefined?parseInt(data[7]):-1,data[8]!=undefined?parseInt(data[8]):0,data[9],data[10],data[11],data[12],data[13],data[14],data[15]);return e;}
return null;}
function quickd(type){$("#bbit-cs-buddle").css("visibility","hidden");var calid=$("#bbit-cs-id").val();var param=[{"name":"calendarId",value:calid},{"name":"type",value:type}];var de=rebyKey(calid,true);option.onBeforeRequestData&&option.onBeforeRequestData(3);$.post(option.quickDeleteUrl,param,function(data){if(data){if(data.IsSuccess){de=null;option.onAfterRequestData&&option.onAfterRequestData(3);}
else{option.onRequestDataError&&option.onRequestDataError(3,data);Ind(de);render();option.onAfterRequestData&&option.onAfterRequestData(3);}}},"json");render();}
function getbuddlepos(x,y){var tleft=x-110;var ttop=y-217;var maxLeft=document.documentElement.scrollWidth;var maxTop=document.documentElement.scrollHeight;var ishide=false;if(tleft<=0||ttop<=0||tleft+400>maxLeft){tleft=x-200<=0?10:x-200;ttop=y-159<=0?10:y-159;if(tleft+400>=maxLeft){tleft=maxLeft-410;}
if(ttop+164>=maxTop){ttop=maxTop-165;}
ishide=true;}
return{left:tleft,top:ttop,hide:ishide};}
function weekmoreshow(mv){var me=$(this);var divIndex=mv.id.split('_')[1];var pdiv=$(mv);var offsetMe=me.position();var offsetP=pdiv.position();var width=(me.width()+2)*1.5;var top=offsetP.top+15;var left=offsetMe.left;var daystr=this.abbr;var cc=$("#cal-month-cc");var ccontent=$("#cal-month-cc-content table tbody");var ctitle=$("#cal-month-cc-title");week=parseInt(daystr);ctitle.html('W'+(week+1));ccontent.empty();var edata=$("#gridEvent").data("mvdata");var events=edata[divIndex];var index=parseInt(this.axis);var htm=[];for(var i=0;i<=index;i++){var ec=weekly[week]?weekly[week].length:0;for(var j=0;j<ec;j++){var e=weekly[week][j];if(e){htm.push("<tr><td class='st-c'>");datas=e.join("$");title='';price_detail='';if(e[11]=='available'){title=e[14]+' '+e[15]+'('+currency_symbol+e[13]+')';price_detail=currency_symbol+e[13];}
else{title=e[14]+' '+e[15]+'('+e[11]+')';price_detail=e[11];}
htm.push('<div class="rb-o drag" id="bbit_cal_event_'+e[16]+'_'+j+'" title="'+title+'" style="color:'+e[7]+';"><div class="dhdV" style="display:none">'+datas+'</div><div class=" rb-m" style="background-color:'+e[7]+'"><div class="st-ad-mr"></div><div class="rb-i">'+e[14]+' <span style="cursor: pointer">'+price_detail+'</span></div></div></div>');htm.push("</td></tr>");}}}
ccontent.html(htm.join(""));ccontent.find("div.rb-o").each(function(i){$(this).click(dayshow);});edata=events=null;var height=cc.height();var maxleft=document.documentElement.scrollWidth;var maxtop=document.documentElement.scrollHeight;if(left+width>=maxleft){left=offsetMe.left-(me.width()+2)*0.5;}
if(top+height>=maxtop){top=maxtop-height-2;}
var newOff={left:left,top:top,"z-index":180,width:width,"visibility":"visible"};cc.css(newOff);$(document).one("click",closeCc);return false;}
function weekshow(e,data){if(data==undefined){data=getdata($(this));}
if(data!=null){if(option.quickDeleteUrl!=""&&data[8]==1&&option.readonly!=true){var temparr=[];temparr.push('<div id="bbit-cal-buddle" style="z-index: 180; width: 400px;visibility:hidden;" class="bubble">');temparr.push('<table class="bubble-table" cellSpacing="0" cellPadding="0"><tbody><tr><td class="bubble-cell-side"><div id="tl1" class="bubble-corner"><div class="bubble-sprite bubble-tl"></div></div>');temparr.push('<td class="bubble-cell-main"><div class="bubble-top"></div><td class="bubble-cell-side"><div id="tr1" class="bubble-corner"><div class="bubble-sprite bubble-tr"></div></div>  <tr><td class="bubble-mid" colSpan="3"><div style="overflow: hidden" id="bubbleContent1"><div><div></div><div class="cb-root">');temparr.push('<table class="cb-table" cellSpacing="0" cellPadding="0"><tbody><tr ><th class="cb-key">');temparr.push(i18n.xgcalendar.title,':</th><td class="cb-value"><div class="textbox-fill-title"></div></td></tr><tr><th class="cb-key">');temparr.push(i18n.xgcalendar.time,':</th><td class=cb-value><div id="bbit-cal-buddle-timeshow"></div></td></tr><tr class="js-price"><th class="cb-key">');temparr.push(i18n.xgcalendar.content,':</th><td class="cb-value"><div class="textbox-fill-wrapper"><div class="textbox-fill-mid"><input id="bbit-cal-what" class="textbox-fill-input"/></div></div></td></tr><tr><th class="cb-key"><span class="js-toggle-status">');temparr.push(i18n.xgcalendar.status,':</span></th><td class="cb-value"><div class="textbox-fill-wrapper js-toggle-status"><div class="textbox-fill-mid js-status"></div></div>');temparr.push('</td></tr></tbody></table><input id="bbit-cal-start" type="hidden"/><input id="bbit-cal-end" type="hidden"/><input id="bbit-cal-allday" type="hidden"/><input id="bbit-cal-quickAddBTN" value="');temparr.push(i18n.xgcalendar.update_detail,'" class="submit-button" type="button"/>');temparr.push('<input id="bbit-cal-quickConfirmBTN" value="Confirm" class="submit-button" type="button"/>');temparr.push('<input id="bbit-cal-quickRejectBTN" value="Reject" class="submit-button" type="button"/>');temparr.push('<div id="bbit-cal-quickNegotiateBTN" class="cancel-block"><a href="'+__cfg('path_absolute')+'activity/'+data[0]+'">Negotiate</a></div>');temparr.push('</div></div></div><tr><td><div id="bl1" class="bubble-corner"><div class="bubble-sprite bubble-bl"></div></div><td><div class="bubble-bottom"></div><td><div id="br1" class="bubble-corner"><div class="bubble-sprite bubble-br"></div></div></tr></tbody></table><div id="bubbleClose1" class="bubble-closebutton"></div><div id="prong2" class="prong"><div class=bubble-sprite></div></div></div>');var tempquickAddHanler=temparr.join("");temparr=null;$("#bbit-cal-buddle").remove();var bud=$("#bbit-cal-buddle");if(bud.length==0){bud=$(tempquickAddHanler).appendTo(document.body);$('#bbit-cal-quickConfirmBTN').hide();$('#bbit-cal-quickRejectBTN').hide();$('#bbit-cal-quickNegotiateBTN').hide();var calbutton=$("#bbit-cs-delete");var lbtn=$("#bbit-cs-editLink");var closebtn=$("#bubbleClose1").click(function(){$("#bbit-cal-buddle").css("visibility","hidden");});calbutton.click(function(){var data=$("#bbit-cal-buddle").data("cdata");if(option.DeleteCmdhandler&&$.isFunction(option.DeleteCmdhandler)){option.DeleteCmdhandler.call(this,data,quickd);}
else{if(confirm(i18n.xgcalendar.confirm_delete_event+"?")){var s=0;if(data[6]==1){if(confirm(i18n.xgcalendar.confrim_delete_event_or_all)){s=0;}
else{s=1;}}
else{s=0;}
quickd(s);}}});$("#bbit-cs-what").click(function(e){if(!option.ViewCmdhandler){alert("ViewCmdhandler"+i18n.xgcalendar.i_undefined);}
else{if(option.ViewCmdhandler&&$.isFunction(option.ViewCmdhandler)){option.ViewCmdhandler.call(this,$("#bbit-cs-buddle").data("cdata"));}}
$("#bbit-cs-buddle").css("visibility","hidden");return false;});lbtn.click(function(e){if(!option.EditCmdhandler){alert("EditCmdhandler"+i18n.xgcalendar.i_undefined);}
else{if(option.EditCmdhandler&&$.isFunction(option.EditCmdhandler)){option.EditCmdhandler.call(this,$("#bbit-cs-buddle").data("cdata"));}}
$("#bbit-cs-buddle").css("visibility","hidden");return false;});bud.click(function(){return false});}
var pos=getbuddlepos(e.pageX,e.pageY);if(pos.hide){$("#prong1").hide()}
else{$("#prong1").show()}
var ss=[];var iscos=DateDiff("d",data[2],data[3])!=0;ss.push(dateFormat.call(data[2],i18n.xgcalendar.dateformat.Md3)," (",__WDAY[data[2].getDay()],")");if(data[4]!=1){ss.push(",",dateFormat.call(data[2],"HH:mm"));}
if(iscos){ss.push(" - ",dateFormat.call(data[3],i18n.xgcalendar.dateformat.Md3)," (",__WDAY[data[3].getDay()],")");if(data[4]!=1){ss.push(",",dateFormat.call(data[3],"HH:mm"));}}
var ts=$("#bbit-cal-buddle-timeshow").html(ss.join(""));$("#bbit-cal-what").val(data[13]);$(".textbox-fill-title").html(data[14]+data[15]);$("#bbit-cal-id").val(data[0]);var html;html='';if(data[9]==99||data[9]==0)
{var status_id=data[9];if(status_id==99)
{status_id=1;}
html+='<select  class="js-select">';for(var k=0;k<=1;k++)
{var caption;if(k==0)
{caption='Not Availabletttt';}
else if(k==1)
{caption='Available';}
html+='<option ';html+=' value="'+k+'" ';if(status_id==k)
{html+='selected="selected" ';}
html+='>'+caption+'</option>';}
html+='</select>';$(".js-status").html(html);$('.js-price').show();$('#bbit-cal-quickAddBTN').show();$('#bbit-cal-quickNegotiateBTN').hide();}
else if(data[9]==2||data[9]==5||data[9]==7||data[9]==6||data[9]==8)
{$(".js-status").html(data[1]);$('.js-price').hide();$('#bbit-cal-quickAddBTN').hide();$('#bbit-cal-quickNegotiateBTN').hide();}
else if(data[9]==51)
{$(".js-status").html(data[1]);$(".js-toggle-status").show();$('.js-price').hide();$('#bbit-cal-quickAddBTN').hide();$('#bbit-cal-quickConfirmBTN').hide();$('#bbit-cal-quickRejectBTN').hide();$('#bbit-cal-quickNegotiateBTN').show();}
else if(data[9]==1)
{html+='<select class="js-select">';var status_id=2;for(var k=2;k<=3;k++)
{var caption;if(k==2)
{caption='Confirm';}
else if(k==3)
{caption='Reject';}
html+='<option ';html+=' value="'+k+'" ';if(status_id==k)
{html+='selected="selected" ';}
html+='>'+caption+'</option>';}
html+='</select>';$(".js-status").html(html);$('.js-price').hide();$(".js-toggle-status").hide();$('#bbit-cal-quickAddBTN').hide();$('#bbit-cal-quickNegotiateBTN').hide();$('#bbit-cal-quickConfirmBTN').show();$('#bbit-cal-quickRejectBTN').show();}
var calbutton=$("#bbit-cal-quickAddBTN");$("#bbit-cal-quickAddBTN, #bbit-cal-quickConfirmBTN, #bbit-cal-quickRejectBTN").click(function(e){if(option.isloading){return false;}
var status=$('.js-select').val();if($(this).attr('value')=='Confirm'){status=2;}
else if($(this).attr('value')=='Reject'){status=3;}
option.isloading=true;var price=$("#bbit-cal-what").val();var datestart=$("#bbit-cal-start").val();var dateend=$("#bbit-cal-end").val();var property_id=data[10];var price=price;var desc='';var model=data[12];var color=data[7];var zone=new Date().getTimezoneOffset()/60*-1;if(typeof(data[0])=="undefined")
{var primary_id=0;}
else if(data[0]=="")
{var primary_id=0;}
else
{var primary_id=data[0];}
var param=[{"name":"id",value:primary_id},{"name":"property_id",value:property_id},{"name":"stpartdate",value:datestart},{"name":"etpartdate",value:dateend},{"name":"price",value:price},{"name":"status",value:status},{"name":"Description",value:desc},{"name":"model",value:model},{"name":"colorvalue",value:color},{"name":"timezone",value:zone}];if(option.extParam){for(var pi=0;pi<option.extParam.length;pi++){param[param.length]=option.extParam[pi];}}
if(option.quickAddHandler&&$.isFunction(option.quickAddHandler)){option.quickAddHandler.call(this,param);$("#bbit-cal-buddle").css("visibility","hidden");realsedragevent();}else{$("#bbit-cal-buddle").css("visibility","hidden");var newdata=[];var tId=-1;option.onBeforeRequestData&&option.onBeforeRequestData(2);$.post(option.quickUpdateUrl,param,function(data){if(data){if(data.IsSuccess==true){option.isloading=false;option.eventItems[tId][0]=data.Data;populate();}
else{option.onRequestDataError&&option.onRequestDataError(2,data);option.isloading=false;option.onAfterRequestData&&option.onAfterRequestData(2);}}},"json");}});$("#bbit-cal-start").val(dateFormat.call(data[2],i18n.xgcalendar.dateformat.fulldayvalue+" HH:mm"));$("#bbit-cal-end").val(dateFormat.call(data[3],i18n.xgcalendar.dateformat.fulldayvalue+" HH:mm"));bud.data("cdata",data);pos.top=pos.top-60;bud.css({"visibility":"visible",left:pos.left,top:pos.top});$(document).one("click",function(){$("#bbit-cs-buddle").css("visibility","hidden");});}
else{if(!option.ViewCmdhandler){alert("ViewCmdhandler"+i18n.xgcalendar.i_undefined);}
else{return false;if(option.ViewCmdhandler&&$.isFunction(option.ViewCmdhandler)){option.ViewCmdhandler.call(this,data);}}}}
else{alert(i18n.xgcalendar.data_format_error);}
return false;}
function monthshow(e,data){if(monthly.length>0){$('#js-edit-month-price').removeAttr("disabled");$('#js-edit-month-price').removeClass("disabled");$('#js-edit-month-price').removeClass("round-3");var temparr=[];temparr.push('<div id="bbit-cal-buddle" style="z-index: 180; width: 400px;" class="bubble">');temparr.push('<table class="bubble-table" cellSpacing="0" cellPadding="0"><tbody><tr><td class="bubble-cell-side"><div id="tl1" class="bubble-corner"><div class="bubble-sprite bubble-tl"></div></div>');temparr.push('<td class="bubble-cell-main"><div class="bubble-top"></div><td class="bubble-cell-side"><div id="tr1" class="bubble-corner"><div class="bubble-sprite bubble-tr"></div></div>  <tr><td class="bubble-mid" colSpan="3"><div style="overflow: hidden" id="bubbleContent1"><div><div></div><div class="cb-root">');temparr.push('<table class="cb-table" cellSpacing="0" cellPadding="0"><tbody><tr ><th class="cb-key">');temparr.push(i18n.xgcalendar.title,':</th><td class="cb-value"><div class="textbox-fill-title" id="js-property-list"> </div></td></tr><tr><th class="cb-key">');temparr.push(i18n.xgcalendar.time,':</th><td class=cb-value><div id="bbit-cal-buddle-timeshow"></div></td></tr><tr class="js-price"><th class="cb-key">');temparr.push(i18n.xgcalendar.content,':</th><td class="cb-value"><div class="textbox-fill-wrapper"><div class="textbox-fill-mid"><input id="bbit-cal-what" class="textbox-fill-input"/></div></div></td></tr>');temparr.push('</tbody></table><input id="bbit-cal-start" type="hidden"/><input id="bbit-cal-end" type="hidden"/><input id="js-propertiypermonth-id" type="hidden"/><input id="bbit-cal-allday" type="hidden"/><input id="bbit-cal-quickAddBTN" value="');temparr.push(i18n.xgcalendar.update_detail,'" class="submit-button" type="button"/>');temparr.push('</div></div></div><tr><td><div id="bl1" class="bubble-corner"><div class="bubble-sprite bubble-bl"></div></div><td><div class="bubble-bottom"></div><td><div id="br1" class="bubble-corner"><div class="bubble-sprite bubble-br"></div></div></tr></tbody></table><div id="bubbleClose1" class="bubble-closebutton"></div><div id="prong2" class="prong"><div class=bubble-sprite></div></div></div>');var tempquickAddHanler=temparr.join("");temparr=null;$("#bbit-cal-buddle").remove();var bud=$("#bbit-cal-buddle");bud=$(tempquickAddHanler).appendTo(document.body);var closebtn=$("#bubbleClose1").click(function(){bud.css("visibility","hidden");});var pos=getbuddlepos(e.pageX,e.pageY);if(pos.hide){$("#prong2").hide();}
else{$("#prong2").show();}
pos.top=pos.top-40;bud.click(function(){return false});bud.data("cdata",data);bud.css({"visibility":"visible",left:pos.left,top:pos.top});$(document).one("click",function(){$("#bbit-cal-buddle").css("visibility","hidden");});var html;html='';html+='<select  id="js-property_list_select">';$.each(monthly,function(index,value){html+='<option ';html+=' value="'+value[0]+'" ';html+='>'+value[1]+'</option>';});html+='</select>';$("#js-property-list").html(html);select_property=$('#js-property_list_select').val();start_date=end_date='';available=1;var price;$.each(monthly,function(index,value){if(value[0]==select_property){start_date=parseDate(value[3]);end_date=parseDate(value[4]);price=parseFloat(value[5]);$("#bbit-cal-start").val(value[3]);$("#bbit-cal-end").val(value[4]);$('#js-propertiypermonth-id').val(value[2]);}});var ss=[];var iscos=DateDiff("d",start_date,end_date)!=0;ss.push(dateFormat.call(start_date,i18n.xgcalendar.dateformat.Md3)," (",__WDAY[start_date.getDay()],")");if(iscos){ss.push(" - ",dateFormat.call(end_date,i18n.xgcalendar.dateformat.Md3)," (",__WDAY[end_date.getDay()],")");}
var ts=$("#bbit-cal-buddle-timeshow").html(ss.join(""));$('#bbit-cal-what').val(price);$("#js-property_list_select").change(function(e){select_property=$(this).val();$.each(monthly,function(index,value){if(value[0]==select_property){$('#bbit-cal-what').val(parseFloat(value[5]));$("#bbit-cal-start").val(value[3]);$("#bbit-cal-end").val(value[4]);$('#js-propertiypermonth-id').val(value[2]);}});});$("#bbit-cal-quickAddBTN").click(function(e){if(option.isloading){return false;}
var status=1;option.isloading=true;var price=$("#bbit-cal-what").val();var datestart=$("#bbit-cal-start").val();var dateend=$("#bbit-cal-end").val();var property_id=$('#js-property_list_select').val();var price=price;var desc='';var model='CustomPricePerMonth';var color='';var primary_id=$('#js-propertiypermonth-id').val();var zone=new Date().getTimezoneOffset()/60*-1;var param=[{"name":"id",value:primary_id},{"name":"property_id",value:property_id},{"name":"stpartdate",value:datestart},{"name":"etpartdate",value:dateend},{"name":"price",value:price},{"name":"status",value:status},{"name":"Description",value:desc},{"name":"model",value:model},{"name":"colorvalue",value:color},{"name":"timezone",value:zone}];if(option.extParam){for(var pi=0;pi<option.extParam.length;pi++){param[param.length]=option.extParam[pi];}}
if(option.quickAddHandler&&$.isFunction(option.quickAddHandler)){option.quickAddHandler.call(this,param);$("#bbit-cal-buddle").css("visibility","hidden");realsedragevent();}
else{$("#bbit-cal-buddle").css("visibility","hidden");var newdata=[];var tId=-1;option.onBeforeRequestData&&option.onBeforeRequestData(2);$.post(option.quickUpdateUrl,param,function(data){if(data){if(data.IsSuccess==true){option.isloading=false;populate();}
else{option.onRequestDataError&&option.onRequestDataError(2,data);option.isloading=false;option.onAfterRequestData&&option.onAfterRequestData(2);}}},"json");}});}
else{$('#js-edit-month-price').attr('disabled','disabled');$('#js-edit-month-price').addClass("disabled round-3");}
return false;}
function dayshow(e,data){if(data==undefined){data=getdata($(this));}
if(data!=null){if(option.quickDeleteUrl!=""&&data[8]==1&&option.readonly!=true){var temparr=[];temparr.push('<div id="bbit-cal-buddle" style="z-index: 180; width: 400px;visibility:hidden;" class="bubble">');temparr.push('<table class="bubble-table" cellSpacing="0" cellPadding="0"><tbody><tr><td class="bubble-cell-side"><div id="tl1" class="bubble-corner"><div class="bubble-sprite bubble-tl"></div></div></td>');temparr.push('<td class="bubble-cell-main"><div class="bubble-top"></div></td><td class="bubble-cell-side"><div id="tr1" class="bubble-corner"><div class="bubble-sprite bubble-tr"></div></div></td></tr><tr><td class="bubble-mid" colspan="3"><div style="overflow: hidden" id="bubbleContent1"><div><div></div><div class="cb-root">');temparr.push('<table class="cb-table" cellSpacing="0" cellPadding="0"><tbody><tr><th class="cb-key">');temparr.push(i18n.xgcalendar.title,':</th><td class="cb-value"><div class="textbox-fill-title"></div></td></tr><tr><th class="cb-key">');temparr.push(i18n.xgcalendar.time,':</th><td class=cb-value><div id="bbit-cal-buddle-timeshow"></div></td></tr><tr class="js-price"><th class="cb-key">');temparr.push(i18n.xgcalendar.content,':</th><td class="cb-value"><div class="textbox-fill-wrapper"><div class="textbox-fill-mid"><input id="bbit-cal-what" class="textbox-fill-input"/></div></div></td></tr><tr><th class="cb-key"><span class="js-toggle-status">');temparr.push(i18n.xgcalendar.status,':</span></th><td class="cb-value"><div class="textbox-fill-wrapper js-toggle-status"><div class="textbox-fill-mid js-status"></div></div>');temparr.push('</td></tr></tbody></table><input id="bbit-cal-start" type="hidden"/><input id="bbit-cal-end" type="hidden"/><input id="bbit-cal-allday" type="hidden"/><input id="bbit-cal-quickAddBTN" value="');temparr.push(i18n.xgcalendar.update_detail,'" class="submit-button" type="button"/>');temparr.push('<input id="bbit-cal-quickConfirmBTN" value="Confirm" class="submit-button" type="button"/>');temparr.push('<input id="bbit-cal-quickRejectBTN" value="Reject" class="submit-button" type="button"/>');temparr.push('<div id="bbit-cal-quickNegotiateBTN" class="cancel-block"><a href="'+__cfg('path_absolute')+'activity/'+data[0]+'">Negotiate</a></div>');temparr.push('</div></div></div></td></tr><tr><td><div id="bl1" class="bubble-corner"><div class="bubble-sprite bubble-bl"></div></div></td><td><div class="bubble-bottom"></div></td><td><div id="br1" class="bubble-corner"><div class="bubble-sprite bubble-br"></div></div></td></tr></tbody></table><div id="bubbleClose1" class="bubble-closebutton"></div><div id="prong2" class="prong"><div class=bubble-sprite></div></div></div>');var tempquickAddHanler=temparr.join("");temparr=null;$("#bbit-cal-buddle").remove();var bud=$("#bbit-cal-buddle");if(bud.length==0){bud=$(tempquickAddHanler).appendTo(document.body);$('#bbit-cal-quickConfirmBTN').hide();$('#bbit-cal-quickRejectBTN').hide();$('#bbit-cal-quickNegotiateBTN').hide();var calbutton=$("#bbit-cs-delete");var lbtn=$("#bbit-cs-editLink");var closebtn=$("#bubbleClose1").click(function(){$("#bbit-cal-buddle").css("visibility","hidden");});calbutton.click(function(){var data=$("#bbit-cal-buddle").data("cdata");if(option.DeleteCmdhandler&&$.isFunction(option.DeleteCmdhandler)){option.DeleteCmdhandler.call(this,data,quickd);}
else{if(confirm(i18n.xgcalendar.confirm_delete_event+"?")){var s=0;if(data[6]==1){if(confirm(i18n.xgcalendar.confrim_delete_event_or_all)){s=0;}
else{s=1;}}
else{s=0;}
quickd(s);}}});$("#bbit-cs-what").click(function(e){if(!option.ViewCmdhandler){alert("ViewCmdhandler"+i18n.xgcalendar.i_undefined);}
else{if(option.ViewCmdhandler&&$.isFunction(option.ViewCmdhandler)){option.ViewCmdhandler.call(this,$("#bbit-cs-buddle").data("cdata"));}}
$("#bbit-cs-buddle").css("visibility","hidden");return false;});lbtn.click(function(e){if(!option.EditCmdhandler){alert("EditCmdhandler"+i18n.xgcalendar.i_undefined);}
else{if(option.EditCmdhandler&&$.isFunction(option.EditCmdhandler)){option.EditCmdhandler.call(this,$("#bbit-cs-buddle").data("cdata"));}}
$("#bbit-cs-buddle").css("visibility","hidden");return false;});bud.click(function(){return false});}
var pos=getbuddlepos(e.pageX,e.pageY);if(pos.hide){$("#prong1").hide()}
else{$("#prong1").show()}
var ss=[];var iscos=DateDiff("d",data[2],data[3])!=0;ss.push(dateFormat.call(data[2],i18n.xgcalendar.dateformat.Md3)," (",__WDAY[data[2].getDay()],")");if(data[4]!=1){ss.push(",",dateFormat.call(data[2],"HH:mm"));}
if(iscos){ss.push(" - ",dateFormat.call(data[3],i18n.xgcalendar.dateformat.Md3)," (",__WDAY[data[3].getDay()],")");if(data[4]!=1){ss.push(",",dateFormat.call(data[3],"HH:mm"));}}
var ts=$("#bbit-cal-buddle-timeshow").html(ss.join(""));$("#bbit-cal-what").val(data[13]);$(".textbox-fill-title").html(data[14]+data[15]);$("#bbit-cal-id").val(data[0]);var html;html='';if(data[9]==99||data[9]==0)
{var status_id=data[9];if(status_id==99)
{status_id=1;}
html+='<select  class="js-select">';for(var k=0;k<=1;k++)
{var caption;if(k==0)
{caption='Not Available';}
else if(k==1)
{caption='Available';}
html+='<option ';html+=' value="'+k+'" ';if(status_id==k)
{html+='selected="selected" ';}
html+='>'+caption+'</option>';}
html+='</select>';$(".js-status").html(html);$('.js-price').show();$('#bbit-cal-quickAddBTN').show();$('#bbit-cal-quickNegotiateBTN').hide();}
else if(data[9]==2||data[9]==5||data[9]==7||data[9]==6||data[9]==8)
{$(".js-status").html(data[1]);$('.js-price').hide();$('#bbit-cal-quickAddBTN').hide();$('#bbit-cal-quickNegotiateBTN').hide();}
else if(data[9]==51)
{$(".js-status").html(data[1]);$(".js-toggle-status").show();$('.js-price').hide();$('#bbit-cal-quickAddBTN').hide();$('#bbit-cal-quickConfirmBTN').hide();$('#bbit-cal-quickRejectBTN').hide();$('#bbit-cal-quickNegotiateBTN').show();}
else if(data[9]==1)
{html+='<select class="js-select">';var status_id=2;for(var k=2;k<=3;k++)
{var caption;if(k==2)
{caption='Confirm';}
else if(k==3)
{caption='Reject';}
html+='<option ';html+=' value="'+k+'" ';if(status_id==k)
{html+='selected="selected" ';}
html+='>'+caption+'</option>';}
html+='</select>';$(".js-status").html(html);$('.js-price').hide();$(".js-toggle-status").hide();$('#bbit-cal-quickAddBTN').hide();$('#bbit-cal-quickConfirmBTN').show();$('#bbit-cal-quickRejectBTN').show();$('#bbit-cal-quickNegotiateBTN').hide();}
var calbutton=$("#bbit-cal-quickAddBTN");$("#bbit-cal-quickAddBTN, #bbit-cal-quickConfirmBTN, #bbit-cal-quickRejectBTN").click(function(e){if(option.isloading){return false;}
var status=$('.js-select').val();if($(this).attr('value')=='Confirm'){status=2;}
else if($(this).attr('value')=='Reject'){status=3;}
option.isloading=true;var price=$("#bbit-cal-what").val();var datestart=$("#bbit-cal-start").val();var dateend=$("#bbit-cal-end").val();var property_id=data[10];var price=price;var desc='';var model=data[12];var color=data[7];var zone=new Date().getTimezoneOffset()/60*-1;if(typeof(data[0])=="undefined")
{var primary_id=0;}
else if(data[0]=="")
{var primary_id=0;}
else
{var primary_id=data[0];}
var param=[{"name":"id",value:primary_id},{"name":"property_id",value:property_id},{"name":"stpartdate",value:datestart},{"name":"etpartdate",value:dateend},{"name":"price",value:price},{"name":"status",value:status},{"name":"Description",value:desc},{"name":"model",value:model},{"name":"colorvalue",value:color},{"name":"timezone",value:zone}];if(option.extParam){for(var pi=0;pi<option.extParam.length;pi++){param[param.length]=option.extParam[pi];}}
if(option.quickAddHandler&&$.isFunction(option.quickAddHandler)){option.quickAddHandler.call(this,param);$("#bbit-cal-buddle").css("visibility","hidden");realsedragevent();}
else{$("#bbit-cal-buddle").css("visibility","hidden");var newdata=[];var tId=-1;option.onBeforeRequestData&&option.onBeforeRequestData(2);$.post(option.quickUpdateUrl,param,function(data){if(data){if(data.IsSuccess==true){option.isloading=false;populate();}
else{option.onRequestDataError&&option.onRequestDataError(2,data);option.isloading=false;option.onAfterRequestData&&option.onAfterRequestData(2);}}},"json");}});$("#bbit-cal-start").val(dateFormat.call(data[2],i18n.xgcalendar.dateformat.fulldayvalue+" HH:mm"));$("#bbit-cal-end").val(dateFormat.call(data[3],i18n.xgcalendar.dateformat.fulldayvalue+" HH:mm"));bud.data("cdata",data);pos.top=pos.top-60;bud.css({"visibility":"visible",left:pos.left,top:pos.top});$(document).one("click",function(){$("#bbit-cs-buddle").css("visibility","hidden");});}
else{if(!option.ViewCmdhandler){alert("ViewCmdhandler"+i18n.xgcalendar.i_undefined);}
else{if(option.ViewCmdhandler&&$.isFunction(option.ViewCmdhandler)){option.ViewCmdhandler.call(this,data);}}}}
else{alert(i18n.xgcalendar.data_format_error);}
return false;}
function moreshow(mv){var me=$(this);var divIndex=mv.id.split('_')[1];var pdiv=$(mv);var offsetMe=me.position();var offsetP=pdiv.position();var width=(me.width()+2)*1.5;var top=offsetP.top+15;var left=offsetMe.left;var daystr=this.abbr;var arrdays=daystr.split('/');var day=new Date(arrdays[2],(arrdays[0]-1),arrdays[1]);var cc=$("#cal-month-cc");var ccontent=$("#cal-month-cc-content table tbody");var ctitle=$("#cal-month-cc-title");ctitle.html(dateFormat.call(day,i18n.xgcalendar.dateformat.Md3)+" "+__WDAY[day.getDay()]);ccontent.empty();var edata=$("#gridEvent").data("mvdata");var events=edata[divIndex];var index=parseInt(this.axis);var htm=[];for(var i=0;i<=index;i++){var ec=events[i]?events[i].length:0;for(var j=0;j<ec;j++){var e=events[i][j];if(e){if((e.colSpan+i-1)>=index){htm.push("<tr><td class='st-c'>");htm.push(BuildMonthDayEvent(e,day,1));htm.push("</td></tr>");}}}}
ccontent.html(htm.join(""));ccontent.find("div.rb-o").each(function(i){$(this).click(dayshow);});edata=events=null;var height=cc.height();var maxleft=document.documentElement.scrollWidth;var maxtop=document.documentElement.scrollHeight;if(left+width>=maxleft){left=offsetMe.left-(me.width()+2)*0.5;}
if(top+height>=maxtop){top=maxtop-height-2;}
var newOff={left:left,top:top,"z-index":180,width:width,"visibility":"visible"};cc.css(newOff);$(document).one("click",closeCc);return false;}
function dayupdate(data,start,end){if(option.quickUpdateUrl!=""&&data[8]==1&&option.readonly!=true){if(option.isloading){return false;}
option.isloading=true;var id=data[0];var os=data[2];var od=data[3];var zone=new Date().getTimezoneOffset()/60*-1;var param=[{"name":"calendarId",value:id},{"name":"CalendarStartTime",value:dateFormat.call(start,i18n.xgcalendar.dateformat.fulldayvalue+" HH:mm")},{"name":"CalendarEndTime",value:dateFormat.call(end,i18n.xgcalendar.dateformat.fulldayvalue+" HH:mm")},{"name":"timezone",value:zone}];var d;if(option.quickUpdateHandler&&$.isFunction(option.quickUpdateHandler)){option.quickUpdateHandler.call(this,param);}
else{option.onBeforeRequestData&&option.onBeforeRequestData(4);$.post(option.quickUpdateUrl,param,function(data){if(data){if(data.IsSuccess==true){option.isloading=false;option.onAfterRequestData&&option.onAfterRequestData(4);}
else{option.onRequestDataError&&option.onRequestDataError(4,data);option.isloading=false;d=rebyKey(id,true);d[2]=os;d[3]=od;Ind(d);render();d=null;option.onAfterRequestData&&option.onAfterRequestData(4);}}},"json");d=rebyKey(id,true);if(d){d[2]=start;d[3]=end;}
Ind(d);render();}}}
function quickadd(start,end,isallday,pos){if((!option.quickAddHandler&&option.quickAddUrl=="")||option.readonly){return;}
$("#bbit-cal-buddle").remove();var buddle=$("#bbit-cal-buddle");if(buddle.length==0){var temparr=[];temparr.push('<div id="bbit-cal-buddle" style="z-index: 180; width: 400px;visibility:hidden;" class="bubble">');temparr.push('<table class="bubble-table" cellSpacing="0" cellPadding="0"><tbody><tr><td class="bubble-cell-side"><div id="tl1" class="bubble-corner"><div class="bubble-sprite bubble-tl"></div></div>');temparr.push('<td class="bubble-cell-main"><div class="bubble-top"></div><td class="bubble-cell-side"><div id="tr1" class="bubble-corner"><div class="bubble-sprite bubble-tr"></div></div>  <tr><td class="bubble-mid" colSpan="3"><div style="overflow: hidden" id="bubbleContent1"><div><div></div><div class="cb-root">');temparr.push('<table class="cb-table" cellSpacing="0" cellPadding="0"><tbody><tr><th class="cb-key">');temparr.push(i18n.xgcalendar.title,':</th><td class="cb-value"><div class="textbox-fill-title js-propertity-list"></div></td></tr><tr><th class="cb-key">');temparr.push(i18n.xgcalendar.time,':</th><td class=cb-value><div id="bbit-cal-buddle-timeshow"></div></td></tr><tr><th class="cb-key">');temparr.push(i18n.xgcalendar.content,':</th><td class="cb-value"><div class="textbox-fill-wrapper"><div class="textbox-fill-mid"><input id="bbit-cal-what" class="textbox-fill-input"/></div></div><div class="cb-example">');temparr.push(i18n.xgcalendar.example,'</div></td></tr>');temparr.push('<tr><th class="cb-key"><span class="js-toggle-status">');temparr.push(i18n.xgcalendar.status,':</span></th><td class="cb-value"><div class="textbox-fill-wrapper js-toggle-status"><div class="textbox-fill-mid js-status"></div></div></td></tr>');temparr.push('</tbody></table><input id="bbit-cal-start" type="hidden"/><input id="bbit-cal-end" type="hidden"/><input id="bbit-cal-allday" type="hidden"/><input id="bbit-cal-quickAddBTN" value="');temparr.push(i18n.xgcalendar.create_event,'" type="button" class="submit-button"/>');temparr.push('</div></div></div><tr><td><div id="bl1" class="bubble-corner"><div class="bubble-sprite bubble-bl"></div></div><td><div class="bubble-bottom"></div><td><div id="br1" class="bubble-corner"><div class="bubble-sprite bubble-br"></div></div></tr></tbody></table><div id="bubbleClose1" class="bubble-closebutton"></div><div id="prong2" class="prong"><div class=bubble-sprite></div></div></div>');var tempquickAddHanler=temparr.join("");temparr=null;$(document.body).append(tempquickAddHanler);buddle=$("#bbit-cal-buddle");var calbutton=$("#bbit-cal-quickAddBTN");var lbtn=$("#bbit-cal-editLink");var closebtn=$("#bubbleClose1").click(function(){$("#bbit-cal-buddle").css("visibility","hidden");realsedragevent();});calbutton.click(function(e){if(option.isloading){return false;}
option.isloading=true;var what=$("#bbit-cal-what").val();var datestart=$("#bbit-cal-start").val();var dateend=$("#bbit-cal-end").val();var allday=$("#bbit-cal-allday").val();var is_available=$("#js-quickadd-available").val();var property_id=$("#js-property_list_select").val();var f=/^[^\$\<\>]+$/.test(what);if(!f){alert(i18n.xgcalendar.invalid_title);$("#bbit-cal-what").focus();option.isloading=false;return false;}
var zone=new Date().getTimezoneOffset()/60*-1;var param=[{"name":"CalendarTitle",value:what},{"name":"CalendarStartTime",value:datestart},{"name":"CalendarEndTime",value:dateend},{"name":"IsAllDayEvent",value:allday},{"name":"property_id",value:property_id},{"name":"is_available",value:is_available},{"name":"timezone",value:zone}];if(option.extParam){for(var pi=0;pi<option.extParam.length;pi++){param[param.length]=option.extParam[pi];}}
if(option.quickAddHandler&&$.isFunction(option.quickAddHandler)){option.quickAddHandler.call(this,param);$("#bbit-cal-buddle").css("visibility","hidden");realsedragevent();}
else{$("#bbit-cal-buddle").css("visibility","hidden");var newdata=[];var tId=-1;option.onBeforeRequestData&&option.onBeforeRequestData(2);$.post(option.quickAddUrl,param,function(data){if(data){if(data.IsSuccess==true){option.isloading=false;option.eventItems[tId][0]=data.Data;option.eventItems[tId][8]=1;populate();option.onAfterRequestData&&option.onAfterRequestData(2);}
else{option.onRequestDataError&&option.onRequestDataError(2,data);option.isloading=false;option.onAfterRequestData&&option.onAfterRequestData(2);$("#errorpannel").removeClass('loaderror').addClass('loadicon').html('Custom price could not be added for this date.');}}},"json");newdata.push(-1,what);var sd=strtodate(datestart);var ed=strtodate(dateend);var diff=DateDiff("d",sd,ed);newdata.push(sd,ed,allday=="1"?1:0,diff>0?1:0,0);newdata.push(-1,0,"","");tId=Ind(newdata);realsedragevent();option.view='month';populate();}});lbtn.click(function(e){if(!option.EditCmdhandler){alert("EditCmdhandler"+i18n.xgcalendar.i_undefined);}
else{if(option.EditCmdhandler&&$.isFunction(option.EditCmdhandler)){option.EditCmdhandler.call(this,['0',$("#bbit-cal-what").val(),$("#bbit-cal-start").val(),$("#bbit-cal-end").val(),$("#bbit-cal-allday").val()]);}
$("#bbit-cal-buddle").css("visibility","hidden");realsedragevent();}
return false;});buddle.mousedown(function(e){return false});}
html='';html+='<select id="js-quickadd-available" class="js-select">';for(var k=0;k<=1;k++)
{var caption;if(k==0)
caption='Not Availables';else if(k==1)
caption='Available';html+='<option ';html+=' value="'+k+'" ';html+='>'+caption+'</option>';}
html+='</select>';$(".js-status").html(html);var dateshow=CalDateShow(start,end,!isallday,true);var off=getbuddlepos(pos.left,pos.top);if(off.hide){$("#prong2").hide()}
else{$("#prong2").show()}
off.top=off.top-80;buddle.css({"visibility":"visible",left:off.left,top:off.top});$("#bbit-cal-buddle-timeshow").html(dateshow);var html;html='';html+='<select  id="js-property_list_select">';$.each(property_list,function(index,value){html+='<option ';html+=' value="'+value["id"]+'" ';html+='>'+value["title"]+'</option>';});html+='</select>';$(".js-propertity-list").html(html);if(property_list[0]){$('#js-property_list_select').val(property_list[0]['id']);$("#bbit-cal-what").val(property_list[0]['price']);}
$("#js-property_list_select").change(function(e){select_property=$(this).val();$.each(property_list,function(index,value){if(value['id']==select_property){$('#bbit-cal-what').val(parseFloat(value['price']));$('#js-property_list_select').val(value['id']);}});});var calwhat=$("#bbit-cal-what");$("#bbit-cal-allday").val(isallday?"1":"0");$("#bbit-cal-start").val(dateFormat.call(start,i18n.xgcalendar.dateformat.fulldayvalue+" HH:mm"));$("#bbit-cal-end").val(dateFormat.call(end,i18n.xgcalendar.dateformat.fulldayvalue+" HH:mm"));buddle.css({"visibility":"visible",left:off.left,top:off.top});calwhat.blur().focus();$(document).one("mousedown",function(){$("#bbit-cal-buddle").css("visibility","hidden");realsedragevent();});return false;}
function strtodate(str){var arr=str.split(" ");var arr2=arr[0].split(i18n.xgcalendar.dateformat.separator);var arr3=arr[1].split(":");var y=arr2[i18n.xgcalendar.dateformat.year_index];var m=arr2[i18n.xgcalendar.dateformat.month_index].indexOf("0")==0?arr2[i18n.xgcalendar.dateformat.month_index].substr(1,1):arr2[i18n.xgcalendar.dateformat.month_index];var d=arr2[i18n.xgcalendar.dateformat.day_index].indexOf("0")==0?arr2[i18n.xgcalendar.dateformat.day_index].substr(1,1):arr2[i18n.xgcalendar.dateformat.day_index];var h=arr3[0].indexOf("0")==0?arr3[0].substr(1,1):arr3[0];var n=arr3[1].indexOf("0")==0?arr3[1].substr(1,1):arr3[1];return new Date(y,parseInt(m)-1,d,h,n);}
function rebyKey(key,remove){if(option.eventItems&&option.eventItems.length>0){var sl=option.eventItems.length;var i=-1;for(var j=0;j<sl;j++){if(option.eventItems[j][0]==key){i=j;break;}}
if(i>=0){var t=option.eventItems[i];if(remove){option.eventItems.splice(i,1);}
return t;}}
return null;}
function Ind(event,i){var d=0;if(!i){if(option.eventItems&&option.eventItems.length>0){var sl=option.eventItems.length;var s=event[2];var d1=s.getTime()-option.eventItems[0][2].getTime();var d2=option.eventItems[sl-1][2].getTime()-s.getTime();var diff=d1-d2;if(d1<0||diff<0){for(var j=0;j<sl;j++){if(option.eventItems[j][2]>=s){i=j;break;}}}
else if(d2<0){i=sl;}
else{for(var j=sl-1;j>=0;j--){if(option.eventItems[j][2]<s){i=j+1;break;}}}}
else{i=0;}}
else{d=1;}
if(option.eventItems&&option.eventItems.length>0){if(i==option.eventItems.length){option.eventItems.push(event);}
else{option.eventItems.splice(i,d,event);}}
else{option.eventItems=[event];}
return i;}
function ResizeView(){var _MH=document.documentElement.scrollHeight;var _viewType=option.view;if(_viewType=="day"||_viewType=="week"){var $dvwkcontaienr=$("#dvwkcontaienr");var $dvtec=$("#dvtec");if($dvwkcontaienr.length==0||$dvtec.length==0){alert(i18n.xgcalendar.view_no_ready);return;}
var dvwkH=$dvwkcontaienr.height()+2;var calH=option.height-8-dvwkH;$dvtec.height(calH);if(typeof(option.scoll)=="undefined"){var currentday=new Date();var h=currentday.getHours();var m=currentday.getMinutes();var th=gP(h,m);var ch=$dvtec.attr("scrollHeight ");var sh=th-0.5*ch;var ph=$dvtec.attr("scrollHeight");if(sh<0)sh=0;if(sh>ph-ch)sh=ph-ch-10*(23-h);$dvtec.attr("scrollTop",sh);}
else{$dvtec.attr("scrollTop",option.scoll);}}
else if(_viewType=="month"){}}
function returnfalse(){return false;}
function initevents(viewtype){if(viewtype=="week"||viewtype=="day"){$("div.chip",gridcontainer).each(function(i){var chip=$(this);chip.click(dayshow);if(chip.hasClass("drag")){chip.mousedown(function(e){dragStart.call(this,"dw3",e);return false;});chip.find("div.resizer").mousedown(function(e){dragStart.call($(this).parent().parent(),"dw4",e);return false;});}
else{chip.mousedown(returnfalse)}});$("div.rb-o",gridcontainer).each(function(i){var chip=$(this);chip.click(dayshow);if(chip.hasClass("drag")&&viewtype=="week"){chip.mousedown(function(e){dragStart.call(this,"dw5",e);return false;});}
else{chip.mousedown(returnfalse)}});if(option.readonly==false){$("td.tg-col",gridcontainer).each(function(i){$(this).mousedown(function(e){dragStart.call(this,"dw1",e);return false;});});$("#weekViewAllDaywk").mousedown(function(e){dragStart.call(this,"dw2",e);return false;});}
if(viewtype=="week"){$("#dvwkcontaienr th.gcweekname").each(function(i){$(this).click(weekormonthtoday);});}}
else if(viewtype="month"){$("div.rb-o",gridcontainer).each(function(i){var chip=$(this);chip.click(dayshow);if(chip.hasClass("drag")){chip.mousedown(function(e){dragStart.call(this,"m2",e);return false;});}
else{chip.mousedown(returnfalse)}});gridcontainer1=$('#gridcontainer1');$("div.rb-o",gridcontainer1).each(function(i){var chip=$(this);chip.click(weekshow);});$("td.st-moreul",gridcontainer1).each(function(i){$(this).click(function(e){weekmoreshow.call(this,$(this).parent().parent().parent().parent()[0]);return false;}).mousedown(function(){return false;});});$("td.st-moreul",gridcontainer).each(function(i){$(this).click(function(e){moreshow.call(this,$(this).parent().parent().parent().parent()[0]);return false;}).mousedown(function(){return false;});});if(option.readonly==false){$("#mvEventContainer").mousedown(function(e){dragStart.call(this,"m1",e);return false;});}}}
function realsedragevent(){if(_dragevent){_dragevent();_dragevent=null;}}
function dragStart(type,e){var obj=$(this);var source=e.srcElement||e.target;realsedragevent();switch(type){case"dw1":_dragdata={type:1,target:obj,sx:e.pageX,sy:e.pageY};break;case"dw2":var w=obj.width();var h=obj.height();var offset=obj.offset();var left=offset.left;var top=offset.top;var l=option.view=="day"?1:7;var py=w%l;var pw=parseInt(w/l);if(py>l/2+1){pw++;}
var xa=[];var ya=[];for(var i=0;i<l;i++){xa.push({s:i*pw+left,e:(i+1)*pw+left});}
ya.push({s:top,e:top+h});_dragdata={type:2,target:obj,sx:e.pageX,sy:e.pageY,pw:pw,xa:xa,ya:ya,h:h};w=left=l=py=pw=xa=null;break;case"dw3":var evid=obj.parent().attr("id").replace("tgCol","");var p=obj.parent();var pos=p.offset();var w=p.width()+10;var h=obj.height();var data=getdata(obj);_dragdata={type:4,target:obj,sx:e.pageX,sy:e.pageY,pXMin:pos.left,pXMax:pos.left+w,pw:w,h:h,cdi:parseInt(evid),fdi:parseInt(evid),data:data};break;case"dw4":var h=obj.height();var data=getdata(obj);_dragdata={type:5,target:obj,sx:e.pageX,sy:e.pageY,h:h,data:data};break;case"dw5":var con=$("#weekViewAllDaywk");var w=con.width();var h=con.height();var offset=con.offset();var moffset=obj.offset();var left=offset.left;var top=offset.top;var l=7;var py=w%l;var pw=parseInt(w/l);if(py>l/2+1){pw++;}
var xa=[];var ya=[];var di=0;for(var i=0;i<l;i++){xa.push({s:i*pw+left,e:(i+1)*pw+left});if(moffset.left>=xa[i].s&&moffset.left<xa[i].e){di=i;}}
var fdi={x:di,y:0,di:di};ya.push({s:top,e:top+h});var data=getdata(obj);var dp=DateDiff("d",data[2],data[3])+1;_dragdata={type:6,target:obj,sx:e.pageX,sy:e.pageY,data:data,xa:xa,ya:ya,fdi:fdi,h:h,dp:dp,pw:pw};break;case"m1":var w=obj.width();var offset=obj.offset();var left=offset.left;var top=offset.top;var l=7;var yl=obj.children().length;var py=w%l;var pw=parseInt(w/l);if(py>l/2+1){pw++;}
var h=$("#mvrow_0").height();var xa=[];var ya=[];for(var i=0;i<l;i++){xa.push({s:i*pw+left,e:(i+1)*pw+left});}
var xa=[];var ya=[];for(var i=0;i<l;i++){xa.push({s:i*pw+left,e:(i+1)*pw+left});}
for(var i=0;i<yl;i++){ya.push({s:i*h+top,e:(i+1)*h+top});}
_dragdata={type:3,target:obj,sx:e.pageX,sy:e.pageY,pw:pw,xa:xa,ya:ya,h:h};break;case"m2":var row0=$("#mvrow_0");var row1=$("#mvrow_1");var w=row0.width();var offset=row0.offset();var diffset=row1.offset();var moffset=obj.offset();var h=diffset.top-offset.top;var left=offset.left;var top=offset.top;var l=7;var yl=row0.parent().children().length;var py=w%l;var pw=parseInt(w/l);if(py>l/2+1){pw++;}
var xa=[];var ya=[];var xi=0;var yi=0;for(var i=0;i<l;i++){xa.push({s:i*pw+left,e:(i+1)*pw+left});if(moffset.left>=xa[i].s&&moffset.left<xa[i].e){xi=i;}}
for(var i=0;i<yl;i++){ya.push({s:i*h+top,e:(i+1)*h+top});if(moffset.top>=ya[i].s&&moffset.top<ya[i].e){yi=i;}}
var fdi={x:xi,y:yi,di:yi*7+xi};var data=getdata(obj);var dp=DateDiff("d",data[2],data[3])+1;_dragdata={type:7,target:obj,sx:e.pageX,sy:e.pageY,data:data,xa:xa,ya:ya,fdi:fdi,h:h,dp:dp,pw:pw};break;}
$('body').noSelect();}
function dragMove(e){if(_dragdata){if(e.pageX<0||e.pageY<0||e.pageX>document.documentElement.scrollWidth||e.pageY>=document.documentElement.scrollHeight){dragEnd(e);return false;}
var d=_dragdata;switch(d.type){case 1:var sy=d.sy;var y=e.pageY;var diffy=y-sy;if(diffy>11||diffy<-11||d.cpwrap){if(diffy==0){diffy=21;}
var dy=diffy%21;if(dy!=0){diffy=dy>0?diffy+21-dy:diffy-21-dy;y=d.sy+diffy;if(diffy<0){sy=sy+21;}}
if(!d.tp){d.tp=$(d.target).offset().top;}
var gh=gH(sy,y,d.tp);var ny=gP(gh.sh,gh.sm);var tempdata;if(!d.cpwrap){tempdata=buildtempdayevent(gh.sh,gh.sm,gh.eh,gh.em,gh.h);var cpwrap=$("<div class='ca-evpi drag-chip-wrapper' style='top:"+ny+"px'/>").html(tempdata);$(d.target).find("div.tg-col-overlaywrapper").append(cpwrap);d.cpwrap=cpwrap;}
else{if(d.cgh.sh!=gh.sh||d.cgh.eh!=gh.eh||d.cgh.sm!=gh.sm||d.cgh.em!=gh.em){tempdata=buildtempdayevent(gh.sh,gh.sm,gh.eh,gh.em,gh.h);d.cpwrap.css("top",ny+"px").html(tempdata);}}
d.cgh=gh;}
break;case 2:var sx=d.sx;var x=e.pageX;var diffx=x-sx;if(diffx>5||diffx<-5||d.lasso){if(!d.lasso){d.lasso=$("<div style='z-index: 10; display: block' class='drag-lasso-container'/>");$(document.body).append(d.lasso);}
if(!d.sdi){d.sdi=getdi(d.xa,d.ya,sx,d.sy);}
var ndi=getdi(d.xa,d.ya,x,e.pageY);if(!d.fdi||d.fdi.di!=ndi.di){addlasso(d.lasso,d.sdi,ndi,d.xa,d.ya,d.h);}
d.fdi=ndi;}
break;case 3:var sx=d.sx;var x=e.pageX;var sy=d.sy;var y=e.pageY;var diffx=x-sx;var diffy=y-sy;if(diffx>5||diffx<-5||diffy<-5||diffy>5||d.lasso){if(!d.lasso){d.lasso=$("<div style='z-index: 10; display: block' class='drag-lasso-container'/>");$(document.body).append(d.lasso);}
if(!d.sdi){d.sdi=getdi(d.xa,d.ya,sx,sy);}
var ndi=getdi(d.xa,d.ya,x,y);if(!d.fdi||d.fdi.di!=ndi.di){addlasso(d.lasso,d.sdi,ndi,d.xa,d.ya,d.h);}
d.fdi=ndi;}
break;case 4:var data=d.data;if(data!=null&&data[8]==1){var sx=d.sx;var x=e.pageX;var sy=d.sy;var y=e.pageY;var diffx=x-sx;var diffy=y-sy;if(diffx>5||diffx<-5||diffy>5||diffy<-5||d.cpwrap){var gh,ny,tempdata;if(!d.cpwrap){gh={sh:data[2].getHours(),sm:data[2].getMinutes(),eh:data[3].getHours(),em:data[3].getMinutes(),h:d.h};d.target.hide();ny=gP(gh.sh,gh.sm);d.top=ny;tempdata=buildtempdayevent(gh.sh,gh.sm,gh.eh,gh.em,gh.h,data[1],false,false,data[7]);var cpwrap=$("<div class='ca-evpi drag-chip-wrapper' style='top:"+ny+"px'/>").html(tempdata);var evid=d.target.parent().attr("id").replace("tgCol","#tgOver");$(evid).append(cpwrap);d.cpwrap=cpwrap;d.ny=ny;}
else{var pd=0;if(x<d.pXMin){pd=-1;}
else if(x>d.pXMax){pd=1;}
if(pd!=0){d.cdi=d.cdi+pd;var ov=$("#tgOver"+d.cdi);if(ov.length==1){d.pXMin=d.pXMin+d.pw*pd;d.pXMax=d.pXMax+d.pw*pd;ov.append(d.cpwrap);}
else{d.cdi=d.cdi-pd;}}
ny=d.top+diffy;var pny=ny%21;if(pny!=0){ny=ny-pny;}
if(d.ny!=ny){gh=gW(ny,ny+d.h);tempdata=buildtempdayevent(gh.sh,gh.sm,gh.eh,gh.em,gh.h,data[1],false,false,data[7]);d.cpwrap.css("top",ny+"px").html(tempdata);}
d.ny=ny;}}}
break;case 5:var data=d.data;if(data!=null&&data[8]==1){var sy=d.sy;var y=e.pageY;var diffy=y-sy;if(diffy!=0||d.cpwrap){var gh,ny,tempdata;if(!d.cpwrap){gh={sh:data[2].getHours(),sm:data[2].getMinutes(),eh:data[3].getHours(),em:data[3].getMinutes(),h:d.h};d.target.hide();ny=gP(gh.sh,gh.sm);d.top=ny;tempdata=buildtempdayevent(gh.sh,gh.sm,gh.eh,gh.em,gh.h,data[1],"100%",true,data[7]);var cpwrap=$("<div class='ca-evpi drag-chip-wrapper' style='top:"+ny+"px'/>").html(tempdata);var evid=d.target.parent().attr("id").replace("tgCol","#tgOver");$(evid).append(cpwrap);d.cpwrap=cpwrap;}
else{nh=d.h+diffy;var pnh=nh%21;nh=pnh>1?nh-pnh+21:nh-pnh;if(d.nh!=nh){var sp=gP(data[2].getHours(),data[2].getMinutes());var ep=sp+nh;gh=gW(d.top,d.top+nh);tempdata=buildtempdayevent(gh.sh,gh.sm,gh.eh,gh.em,gh.h,data[1],"100%",true,data[7]);d.cpwrap.html(tempdata);}
d.nh=nh;}}}
break;case 6:var sx=d.sx;var x=e.pageX;var y=e.pageY;var diffx=x-sx;if(diffx>5||diffx<-5||d.lasso){if(!d.lasso){var w1=d.dp>1?(d.pw-4)*1.5:(d.pw-4);var cp=d.target.clone();if(d.dp>1){cp.find("div.rb-i>span").prepend("("+d.dp+" "+i18n.xgcalendar.day_plural+")&nbsp;");}
var cpwrap=$("<div class='drag-event st-contents' style='width:"+w1+"px'/>").append(cp).appendTo(document.body);d.cpwrap=cpwrap;d.lasso=$("<div style='z-index: 10; display: block' class='drag-lasso-container'/>");$(document.body).append(d.lasso);cp=cpwrap=null;}
fixcppostion(d.cpwrap,e,d.xa,d.ya);var ndi=getdi(d.xa,d.ya,x,e.pageY);if(!d.cdi||d.cdi.di!=ndi.di){addlasso(d.lasso,ndi,{x:ndi.x,y:ndi.y,di:ndi.di+d.dp-1},d.xa,d.ya,d.h);}
d.cdi=ndi;}
break;case 7:var sx=d.sx;var sy=d.sy;var x=e.pageX;var y=e.pageY;var diffx=x-sx;var diffy=y-sy;if(diffx>5||diffx<-5||diffy>5||diffy<-5||d.lasso){if(!d.lasso){var w1=d.dp>1?(d.pw-4)*1.5:(d.pw-4);var cp=d.target.clone();if(d.dp>1){cp.find("div.rb-i>span").prepend("("+d.dp+" "+i18n.xgcalendar.day_plural+")&nbsp;");}
var cpwrap=$("<div class='drag-event st-contents' style='width:"+w1+"px'/>").append(cp).appendTo(document.body);d.cpwrap=cpwrap;d.lasso=$("<div style='z-index: 10; display: block' class='drag-lasso-container'/>");$(document.body).append(d.lasso);cp=cpwrap=null;}
fixcppostion(d.cpwrap,e,d.xa,d.ya);var ndi=getdi(d.xa,d.ya,x,e.pageY);if(!d.cdi||d.cdi.di!=ndi.di){addlasso(d.lasso,ndi,{x:ndi.x,y:ndi.y,di:ndi.di+d.dp-1},d.xa,d.ya,d.h);}
d.cdi=ndi;}
break;}}
return false;}
function findRow(xa,ya,x,y)
{var ty=0;var tx=0;var lx=0;var ly=0;if(xa&&xa.length!=0){lx=xa.length;if(x>=xa[lx-1].e){tx=lx-1;}
else{for(var i=0;i<lx;i++){if(x>xa[i].s&&x<=xa[i].e){tx=i;break;}}}}
if(ya&&ya.length!=0){ly=ya.length;if(y>=ya[ly-1].e){ty=ly-1;}
else{for(var j=0;j<ly;j++){if(y>ya[j].s&&y<=ya[j].e){ty=j;break;}}}}
return ty;}
function dragEnd(e){if(_dragdata){var d=_dragdata;switch(d.type){case 1:var wrapid=new Date().getTime();tp=d.target.offset().top;if(!d.cpwrap){var gh=gH(d.sy,d.sy+42,tp);var ny=gP(gh.sh,gh.sm);var tempdata=buildtempdayevent(gh.sh,gh.sm,gh.eh,gh.em,gh.h);d.cpwrap=$("<div class='ca-evpi drag-chip-wrapper' style='top:"+ny+"px'/>").html(tempdata);$(d.target).find("div.tg-col-overlaywrapper").append(d.cpwrap);d.cgh=gh;}
var pos=d.cpwrap.offset();pos.left=pos.left+30;d.cpwrap.attr("id",wrapid);var start=strtodate(d.target.attr("abbr")+" "+d.cgh.sh+":"+d.cgh.sm);var end=strtodate(d.target.attr("abbr")+" "+d.cgh.eh+":"+d.cgh.em);_dragevent=function(){$("#"+wrapid).remove();$("#bbit-cal-buddle").css("visibility","hidden");};quickadd(start,end,false,pos);break;case 2:case 3:var source=e.srcElement||e.target;var lassoid=new Date().getTime();if(!d.lasso){if($(source).hasClass("monthdayshow"))
{weekormonthtoday.call($(source).parent()[0],e);break;}
d.fdi=d.sdi=getdi(d.xa,d.ya,d.sx,d.sy);d.lasso=$("<div style='z-index: 10; display: block' class='drag-lasso-container'/>");$(document.body).append(d.lasso);addlasso(d.lasso,d.sdi,d.fdi,d.xa,d.ya,d.h);}
d.lasso.attr("id",lassoid);var si=Math.min(d.fdi.di,d.sdi.di);var ei=Math.max(d.fdi.di,d.sdi.di);var firstday=option.vstart;var start=DateAdd("d",si,firstday);var end=DateAdd("d",ei,firstday);var quick_call=true;if(dateFormat.call(start,"yyyyMMdd")<dateFormat.call(new Date(),"yyyyMMdd")||dateFormat.call(end,"yyyyMMdd")<dateFormat.call(new Date(),"yyyyMMdd")){quick_call=false;}
_dragevent=function(){$("#"+lassoid).remove();};if(quick_call==true)
{quickadd(start,end,true,{left:e.pageX,top:e.pageY});}
break;case 4:if(d.cpwrap){var start=DateAdd("d",d.cdi,option.vstart);var end=DateAdd("d",d.cdi,option.vstart);var gh=gW(d.ny,d.ny+d.h);start.setHours(gh.sh,gh.sm);end.setHours(gh.eh,gh.em);if(start.getTime()==d.data[2].getTime()&&end.getTime()==d.data[3].getTime()){d.cpwrap.remove();d.target.show();}
else{dayupdate(d.data,start,end);}}
break;case 5:if(d.cpwrap){var start=new Date(d.data[2].toString());var end=new Date(d.data[3].toString());var gh=gW(d.top,d.top+nh);start.setHours(gh.sh,gh.sm);end.setHours(gh.eh,gh.em);if(start.getTime()==d.data[2].getTime()&&end.getTime()==d.data[3].getTime()){d.cpwrap.remove();d.target.show();}
else{dayupdate(d.data,start,end);}}
break;case 6:case 7:if(d.lasso){d.cpwrap.remove();d.lasso.remove();var start=new Date(d.data[2].toString());var end=new Date(d.data[3].toString());var currrentdate=DateAdd("d",d.cdi.di,option.vstart);var diff=DateDiff("d",start,currrentdate);start=DateAdd("d",diff,start);end=DateAdd("d",diff,end);if(start.getTime()!=d.data[2].getTime()||end.getTime()!=d.data[3].getTime()){dayupdate(d.data,start,end);}}
break;}
d=_dragdata=null;$('body').noSelect(false);return false;}}
function getdi(xa,ya,x,y){var ty=0;var tx=0;var lx=0;var ly=0;if(xa&&xa.length!=0){lx=xa.length;if(x>=xa[lx-1].e){tx=lx-1;}
else{for(var i=0;i<lx;i++){if(x>xa[i].s&&x<=xa[i].e){tx=i;break;}}}}
if(ya&&ya.length!=0){ly=ya.length;if(y>=ya[ly-1].e){ty=ly-1;}
else{for(var j=0;j<ly;j++){if(y>ya[j].s&&y<=ya[j].e){ty=j;break;}}}}
return{x:tx,y:ty,di:ty*lx+tx};}
function addlasso(lasso,sdi,edi,xa,ya,height){var diff=sdi.di>edi.di?sdi.di-edi.di:edi.di-sdi.di;diff++;var sp=sdi.di>edi.di?edi:sdi;var ep=sdi.di>edi.di?sdi:edi;var l=xa.length>0?xa.length:1;var h=ya.length>0?ya.length:1;var play=[];var width=xa[0].e-xa[0].s;var i=sp.x;var j=sp.y;var max=Math.min(document.documentElement.scrollWidth,xa[l-1].e)-2;while(j<h&&diff>0){var left=xa[i].s;var d=i+diff>l?l-i:diff;var wid=width*d;while(left+wid>=max){wid--;}
play.push(Tp(__LASSOTEMP,{left:left,top:ya[j].s,height:height,width:wid}));i=0;diff=diff-d;j++;}
lasso.html(play.join(""));}
function fixcppostion(cpwrap,e,xa,ya){var x=e.pageX-6;var y=e.pageY-4;var w=cpwrap.width();var h=21;var lmin=xa[0].s+6;var tmin=ya[0].s+4;var lmax=xa[xa.length-1].e-w-2;var tmax=ya[ya.length-1].e-h-2;if(x>lmax){x=lmax;}
if(x<=lmin){x=lmin+1;}
if(y<=tmin){y=tmin+1;}
if(y>tmax){y=tmax;}
cpwrap.css({left:x,top:y});}
$(document).mousemove(dragMove).mouseup(dragEnd);var c={sv:function(view){if(view==option.view){return;}
option.view=view;populate();},rf:function(){populate();},gt:function(d){if(!d){d=new Date();}
option.showday=d;populate();},pv:function(){switch(option.view){case"day":option.showday=DateAdd("d",-1,option.showday);break;case"week":option.showday=DateAdd("w",-1,option.showday);break;case"month":option.showday=DateAdd("m",-1,option.showday);break;}
populate();},nt:function(){switch(option.view){case"day":option.showday=DateAdd("d",1,option.showday);break;case"week":option.showday=DateAdd("w",1,option.showday);break;case"month":var od=option.showday.getDate();option.showday=DateAdd("m",1,option.showday);var nd=option.showday.getDate();if(od!=nd)
{option.showday=DateAdd("d",0-nd,option.showday);}
break;}
populate();},go:function(){return option;},so:function(p){option=$.extend(option,p);}};this[0].bcal=c;return this;};$.fn.swtichView=function(view){return this.each(function(){if(this.bcal){this.bcal.sv(view);}})};$.fn.reload=function(){return this.each(function(){if(this.bcal){this.bcal.rf();}})};$.fn.gotoDate=function(d){return this.each(function(){if(this.bcal){this.bcal.gt(d);}})};$.fn.previousRange=function(){return this.each(function(){if(this.bcal){this.bcal.pv();}})};$.fn.nextRange=function(){return this.each(function(){if(this.bcal){this.bcal.nt();}})};$.fn.BcalGetOp=function(){if(this[0].bcal){return this[0].bcal.go();}
return null;};$.fn.BcalSetOp=function(p){if(this[0].bcal){return this[0].bcal.so(p);}};})(jQuery);
/* libs/selectToUISlider.jQuery.js */
jQuery.fn.selectToUISlider=function(settings){var selects=jQuery(this);var options=jQuery.extend({labels:3,tooltip:true,tooltipSrc:'value',labelSrc:'value',sliderOptions:null},settings);var handleIds=(function(){var tempArr=[];selects.each(function(){tempArr.push('handle_'+jQuery(this).attr('id'));});return tempArr;})();var selectOptions=(function(){var opts=[];selects.eq(0).find('option').each(function(){opts.push({value:jQuery(this).attr('value'),text:jQuery(this).text()});});return opts;})();var groups=(function(){if(selects.eq(0).find('optgroup').size()>0){var groupedData=[];selects.eq(0).find('optgroup').each(function(i){groupedData[i]={};groupedData[i].label=jQuery(this).attr('label');groupedData[i].options=[];jQuery(this).find('option').each(function(){groupedData[i].options.push({text:jQuery(this).text(),value:jQuery(this).attr('value')});});});return groupedData;}
else return null;})();function isArray(obj){return obj.constructor==Array;}
function ttText(optIndex){return(options.tooltipSrc=='text')?selectOptions[optIndex].text:selectOptions[optIndex].value;}
var sliderOptions={step:1,min:0,orientation:'horizontal',max:selectOptions.length-1,range:selects.length>1,slide:function(e,ui){var thisHandle=jQuery(ui.handle);var textval=ttText(ui.value);thisHandle.attr('aria-valuetext',textval).attr('aria-valuenow',ui.value).find('.ui-slider-tooltip .ttContent').text(textval);var currSelect=jQuery('#'+thisHandle.attr('id').split('handle_')[1]);currSelect.find('option').eq(ui.value).attr('selected','selected');},values:(function(){var values=[];selects.each(function(){values.push(jQuery(this).get(0).selectedIndex);});return values;})()};options.sliderOptions=(settings)?jQuery.extend(sliderOptions,settings.sliderOptions):sliderOptions;selects.bind('change keyup click',function(){var thisIndex=jQuery(this).get(0).selectedIndex;var thisHandle=jQuery('#handle_'+jQuery(this).attr('id'));var handleIndex=thisHandle.data('handleNum');thisHandle.parents('.ui-slider:eq(0)').slider("values",handleIndex,thisIndex);});var sliderComponent=jQuery('<div></div>');selects.each(function(i){var hidett='';var thisLabel=jQuery('label[for='+jQuery(this).attr('id')+']');var labelText=(thisLabel.size()>0)?'Slider control for '+thisLabel.text()+'':'';var thisLabelId=thisLabel.attr('id')||thisLabel.attr('id','label_'+handleIds[i]).attr('id');if(options.tooltip==false){hidett=' style="display: none;"';}
jQuery('<a '+'href="#" tabindex="0" '+'id="'+handleIds[i]+'" '+'class="ui-slider-handle" '+'role="slider" '+'aria-labelledby="'+thisLabelId+'" '+'aria-valuemin="'+options.sliderOptions.min+'" '+'aria-valuemax="'+options.sliderOptions.max+'" '+'aria-valuenow="'+options.sliderOptions.values[i]+'" '+'aria-valuetext="'+ttText(options.sliderOptions.values[i])+'" '+'><span class="screenReaderContext">'+labelText+'</span>'+'<span class="ui-slider-tooltip ui-widget-content ui-corner-all"'+hidett+'><span class="ttContent"></span>'+'<span class="ui-tooltip-pointer-down ui-widget-content"><span class="ui-tooltip-pointer-down-inner"></span></span>'+'</span></a>').data('handleNum',i).appendTo(sliderComponent);});if(groups){var inc=0;var scale=sliderComponent.append('<dl class="ui-slider-scale ui-helper-reset" role="presentation"></dl>').find('.ui-slider-scale:eq(0)');jQuery(groups).each(function(h){scale.append('<dt style="width: '+(100/groups.length).toFixed(2)+'%'+'; left:'+(h/(groups.length-1)*100).toFixed(2)+'%'+'"><span>'+this.label+'</span></dt>');var groupOpts=this.options;jQuery(this.options).each(function(i){var style=(inc==selectOptions.length-1||inc==0)?'style="display: none;"':'';var labelText=(options.labelSrc=='text')?groupOpts[i].text:groupOpts[i].value;scale.append('<dd style="left:'+leftVal(inc)+'"><span class="ui-slider-label">'+labelText+'</span><span class="ui-slider-tic ui-widget-content"'+style+'></span></dd>');inc++;});});}
else{var scale=sliderComponent.append('<ol class="ui-slider-scale ui-helper-reset" role="presentation"></ol>').find('.ui-slider-scale:eq(0)');jQuery(selectOptions).each(function(i){var style=(i==selectOptions.length-1||i==0)?'style="display: none;"':'';var labelText=(options.labelSrc=='text')?this.text:this.value;scale.append('<li style="left:'+leftVal(i)+'"><span class="ui-slider-label">'+labelText+'</span><span class="ui-slider-tic ui-widget-content"'+style+'></span></li>');});}
function leftVal(i){return(i/(selectOptions.length-1)*100).toFixed(2)+'%';}
if(options.labels>1)sliderComponent.find('.ui-slider-scale li:last span.ui-slider-label, .ui-slider-scale dd:last span.ui-slider-label').addClass('ui-slider-label-show');var increm=Math.max(1,Math.round(selectOptions.length/options.labels));for(var j=0;j<selectOptions.length;j+=increm){if((selectOptions.length-j)>increm){sliderComponent.find('.ui-slider-scale li:eq('+j+') span.ui-slider-label, .ui-slider-scale dd:eq('+j+') span.ui-slider-label').addClass('ui-slider-label-show');}}
sliderComponent.find('.ui-slider-scale dt').each(function(i){jQuery(this).css({'left':((100/(groups.length))*i).toFixed(2)+'%'});});sliderComponent.insertAfter(jQuery(this).eq(this.length-1)).slider(options.sliderOptions).attr('role','application').find('.ui-slider-label').each(function(){jQuery(this).css('marginLeft',-jQuery(this).width()/2);});sliderComponent.find('.ui-tooltip-pointer-down-inner').each(function(){var bWidth=jQuery('.ui-tooltip-pointer-down-inner').css('borderTopWidth');var bColor=jQuery(this).parents('.ui-slider-tooltip').css('backgroundColor')
jQuery(this).css('border-top',bWidth+' solid '+bColor);});var values=sliderComponent.slider('values');if(isArray(values)){jQuery(values).each(function(i){sliderComponent.find('.ui-slider-tooltip .ttContent').eq(i).text(ttText(this));});}
else{sliderComponent.find('.ui-slider-tooltip .ttContent').eq(0).text(ttText(values));}
return this;}
/* libs/date.format.js */
function date(format,timestamp){var that=this,jsdate,f,formatChr=/\\?([a-z])/gi,formatChrCb,_pad=function(n,c){if((n=n+"").length<c){return new Array((++c)-n.length).join("0")+n;}else{return n;}},txt_words=["Sun","Mon","Tues","Wednes","Thurs","Fri","Satur","January","February","March","April","May","June","July","August","September","October","November","December"],txt_ordin={1:"st",2:"nd",3:"rd",21:"st",22:"nd",23:"rd",31:"st"};formatChrCb=function(t,s){return f[t]?f[t]():s;};f={d:function(){return _pad(f.j(),2);},D:function(){return f.l().slice(0,3);},j:function(){return jsdate.getDate();},l:function(){return txt_words[f.w()]+'day';},N:function(){return f.w()||7;},S:function(){return txt_ordin[f.j()]||'th';},w:function(){return jsdate.getDay();},z:function(){var a=new Date(f.Y(),f.n()-1,f.j()),b=new Date(f.Y(),0,1);return Math.round((a-b)/864e5)+1;},W:function(){var a=new Date(f.Y(),f.n()-1,f.j()-f.N()+3),b=new Date(a.getFullYear(),0,4);return 1+Math.round((a-b)/864e5/7);},F:function(){return txt_words[6+f.n()];},m:function(){return _pad(f.n(),2);},M:function(){return f.F().slice(0,3);},n:function(){return jsdate.getMonth()+1;},t:function(){return(new Date(f.Y(),f.n(),0)).getDate();},L:function(){var y=f.Y(),a=y&3,b=y%4e2,c=y%1e2;return 0+(!a&&(c||!b));},o:function(){var n=f.n(),W=f.W(),Y=f.Y();return Y+(n===12&&W<9?-1:n===1&&W>9);},Y:function(){return jsdate.getFullYear();},y:function(){return(f.Y()+"").slice(-2);},a:function(){return jsdate.getHours()>11?"pm":"am";},A:function(){return f.a().toUpperCase();},B:function(){var H=jsdate.getUTCHours()*36e2,i=jsdate.getUTCMinutes()*60,s=jsdate.getUTCSeconds();return _pad(Math.floor((H+i+s+36e2)/86.4)%1e3,3);},g:function(){return f.G()%12||12;},G:function(){return jsdate.getHours();},h:function(){return _pad(f.g(),2);},H:function(){return _pad(f.G(),2);},i:function(){return _pad(jsdate.getMinutes(),2);},s:function(){return _pad(jsdate.getSeconds(),2);},u:function(){return _pad(jsdate.getMilliseconds()*1000,6);},e:function(){return'UTC';},I:function(){var a=new Date(f.Y(),0),c=Date.UTC(f.Y(),0),b=new Date(f.Y(),6),d=Date.UTC(f.Y(),6);return 0+((a-c)!==(b-d));},O:function(){var a=jsdate.getTimezoneOffset();return(a>0?"-":"+")+_pad(Math.abs(a/60*100),4);},P:function(){var O=f.O();return(O.substr(0,3)+":"+O.substr(3,2));},T:function(){return'UTC';},Z:function(){return-jsdate.getTimezoneOffset()*60;},c:function(){return'Y-m-d\\Th:i:sP'.replace(formatChr,formatChrCb);},r:function(){return'D, d M Y H:i:s O'.replace(formatChr,formatChrCb);},U:function(){return Math.round(jsdate.getTime()/1000);}};this.date=function(format,timestamp){that=this;jsdate=((typeof timestamp==='undefined')?new Date():(timestamp instanceof Date)?new Date(timestamp):new Date(timestamp*1000));return format.replace(formatChr,formatChrCb);};return this.date(format,timestamp);}
/* libs/jquery.timepickr.js */
;jQuery.ui||(function($){var _remove=$.fn.remove,isFF2=$.browser.mozilla&&(parseFloat($.browser.version)<1.9);$.ui={version:"0.6.6",plugin:{add:function(module,option,set){var proto=$.ui[module].prototype;for(var i in set){proto.plugins[i]=proto.plugins[i]||[];proto.plugins[i].push([option,set[i]]);}},call:function(instance,name,args){var set=instance.plugins[name];if(!set||!instance.element[0].parentNode){return;}
for(var i=0;i<set.length;i++){if(instance.options[set[i][0]]){set[i][1].apply(instance.element,args);}}}},contains:function(a,b){return document.compareDocumentPosition?a.compareDocumentPosition(b)&16:a!==b&&a.contains(b);},hasScroll:function(el,a){if($(el).css('overflow')=='hidden'){return false;}
var scroll=(a&&a=='left')?'scrollLeft':'scrollTop',has=false;if(el[scroll]>0){return true;}
el[scroll]=1;has=(el[scroll]>0);el[scroll]=0;return has;},isOverAxis:function(x,reference,size){return(x>reference)&&(x<(reference+size));},isOver:function(y,x,top,left,height,width){return $.ui.isOverAxis(y,top,height)&&$.ui.isOverAxis(x,left,width);},keyCode:{BACKSPACE:8,CAPS_LOCK:20,COMMA:188,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38}};if(isFF2){var attr=$.attr,removeAttr=$.fn.removeAttr,ariaNS="http://www.w3.org/2005/07/aaa",ariaState=/^aria-/,ariaRole=/^wairole:/;$.attr=function(elem,name,value){var set=value!==undefined;return(name=='role'?(set?attr.call(this,elem,name,"wairole:"+value):(attr.apply(this,arguments)||"").replace(ariaRole,"")):(ariaState.test(name)?(set?elem.setAttributeNS(ariaNS,name.replace(ariaState,"aaa:"),value):attr.call(this,elem,name.replace(ariaState,"aaa:"))):attr.apply(this,arguments)));};$.fn.removeAttr=function(name){return(ariaState.test(name)?this.each(function(){this.removeAttributeNS(ariaNS,name.replace(ariaState,""));}):removeAttr.call(this,name));};}
$.fn.extend({remove:function(){$("*",this).add(this).each(function(){$(this).triggerHandler("remove");});return _remove.apply(this,arguments);},enableSelection:function(){return this.attr('unselectable','off').css('MozUserSelect','').unbind('selectstart.ui');},disableSelection:function(){return this.attr('unselectable','on').css('MozUserSelect','none').bind('selectstart.ui',function(){return false;});},scrollParent:function(){var scrollParent;if(($.browser.msie&&(/(static|relative)/).test(this.css('position')))||(/absolute/).test(this.css('position'))){scrollParent=this.parents().filter(function(){return(/(relative|absolute|fixed)/).test($.curCSS(this,'position',1))&&(/(auto|scroll)/).test($.curCSS(this,'overflow',1)+$.curCSS(this,'overflow-y',1)+$.curCSS(this,'overflow-x',1));}).eq(0);}else{scrollParent=this.parents().filter(function(){return(/(auto|scroll)/).test($.curCSS(this,'overflow',1)+$.curCSS(this,'overflow-y',1)+$.curCSS(this,'overflow-x',1));}).eq(0);}
return(/fixed/).test(this.css('position'))||!scrollParent.length?$(document):scrollParent;}});$.extend($.expr[':'],{data:function(elem,i,match){return!!$.data(elem,match[3]);},focusable:function(element){var nodeName=element.nodeName.toLowerCase(),tabIndex=$.attr(element,'tabindex');return(/input|select|textarea|button|object/.test(nodeName)?!element.disabled:'a'==nodeName||'area'==nodeName?element.href||!isNaN(tabIndex):!isNaN(tabIndex))&&!$(element)['area'==nodeName?'parents':'closest'](':hidden').length;},tabbable:function(element){var tabIndex=$.attr(element,'tabindex');return(isNaN(tabIndex)||tabIndex>=0)&&$(element).is(':focusable');}});function getter(namespace,plugin,method,args){function getMethods(type){var methods=$[namespace][plugin][type]||[];return(typeof methods=='string'?methods.split(/,?\s+/):methods);}
var methods=getMethods('getter');if(args.length==1&&typeof args[0]=='string'){methods=methods.concat(getMethods('getterSetter'));}
return($.inArray(method,methods)!=-1);}
$.widget=function(name,prototype){var namespace=name.split(".")[0];name=name.split(".")[1];$.fn[name]=function(options){var isMethodCall=(typeof options=='string'),args=Array.prototype.slice.call(arguments,1);if(isMethodCall&&options.substring(0,1)=='_'){return this;}
if(isMethodCall&&getter(namespace,name,options,args)){var instance=$.data(this[0],name);return(instance?instance[options].apply(instance,args):undefined);}
return this.each(function(){var instance=$.data(this,name);(!instance&&!isMethodCall&&$.data(this,name,new $[namespace][name](this,options))._init());(instance&&isMethodCall&&$.isFunction(instance[options])&&instance[options].apply(instance,args));});};$[namespace]=$[namespace]||{};$[namespace][name]=function(element,options){var self=this;this.namespace=namespace;this.widgetName=name;this.widgetEventPrefix=$[namespace][name].eventPrefix||name;this.widgetBaseClass=namespace+'-'+name;this.options=$.extend({},$.widget.defaults,$[namespace][name].defaults,$.metadata&&$.metadata.get(element)[name],options);this.element=$(element).bind('setData.'+name,function(event,key,value){if(event.target==element){return self._setData(key,value);}}).bind('getData.'+name,function(event,key){if(event.target==element){return self._getData(key);}}).bind('remove',function(){return self.destroy();});};$[namespace][name].prototype=$.extend({},$.widget.prototype,prototype);$[namespace][name].getterSetter='option';};$.widget.prototype={_init:function(){},destroy:function(){this.element.removeData(this.widgetName).removeClass(this.widgetBaseClass+'-disabled'+' '+this.namespace+'-state-disabled').removeAttr('aria-disabled');},option:function(key,value){var options=key,self=this;if(typeof key=="string"){if(value===undefined){return this._getData(key);}
options={};options[key]=value;}
$.each(options,function(key,value){self._setData(key,value);});},_getData:function(key){return this.options[key];},_setData:function(key,value){this.options[key]=value;if(key=='disabled'){this.element
[value?'addClass':'removeClass'](this.widgetBaseClass+'-disabled'+' '+
this.namespace+'-state-disabled').attr("aria-disabled",value);}},enable:function(){this._setData('disabled',false);},disable:function(){this._setData('disabled',true);},_trigger:function(type,event,data){var callback=this.options[type],eventName=(type==this.widgetEventPrefix?type:this.widgetEventPrefix+type);event=$.Event(event);event.type=eventName;if(event.originalEvent){for(var i=$.event.props.length,prop;i;){prop=$.event.props[--i];event[prop]=event.originalEvent[prop];}}
this.element.trigger(event,data);return!($.isFunction(callback)&&callback.call(this.element[0],event,data)===false||event.isDefaultPrevented());}};$.widget.defaults={disabled:false};$.ui.mouse={_mouseInit:function(){var self=this;this.element.bind('mousedown.'+this.widgetName,function(event){return self._mouseDown(event);}).bind('click.'+this.widgetName,function(event){if(self._preventClickEvent){self._preventClickEvent=false;event.stopImmediatePropagation();return false;}});if($.browser.msie){this._mouseUnselectable=this.element.attr('unselectable');this.element.attr('unselectable','on');}
this.started=false;},_mouseDestroy:function(){this.element.unbind('.'+this.widgetName);($.browser.msie&&this.element.attr('unselectable',this._mouseUnselectable));},_mouseDown:function(event){event.originalEvent=event.originalEvent||{};if(event.originalEvent.mouseHandled){return;}
(this._mouseStarted&&this._mouseUp(event));this._mouseDownEvent=event;var self=this,btnIsLeft=(event.which==1),elIsCancel=(typeof this.options.cancel=="string"?$(event.target).parents().add(event.target).filter(this.options.cancel).length:false);if(!btnIsLeft||elIsCancel||!this._mouseCapture(event)){return true;}
this.mouseDelayMet=!this.options.delay;if(!this.mouseDelayMet){this._mouseDelayTimer=setTimeout(function(){self.mouseDelayMet=true;},this.options.delay);}
if(this._mouseDistanceMet(event)&&this._mouseDelayMet(event)){this._mouseStarted=(this._mouseStart(event)!==false);if(!this._mouseStarted){event.preventDefault();return true;}}
this._mouseMoveDelegate=function(event){return self._mouseMove(event);};this._mouseUpDelegate=function(event){return self._mouseUp(event);};$(document).bind('mousemove.'+this.widgetName,this._mouseMoveDelegate).bind('mouseup.'+this.widgetName,this._mouseUpDelegate);($.browser.safari||event.preventDefault());event.originalEvent.mouseHandled=true;return true;},_mouseMove:function(event){if($.browser.msie&&!event.button){return this._mouseUp(event);}
if(this._mouseStarted){this._mouseDrag(event);return event.preventDefault();}
if(this._mouseDistanceMet(event)&&this._mouseDelayMet(event)){this._mouseStarted=(this._mouseStart(this._mouseDownEvent,event)!==false);(this._mouseStarted?this._mouseDrag(event):this._mouseUp(event));}
return!this._mouseStarted;},_mouseUp:function(event){$(document).unbind('mousemove.'+this.widgetName,this._mouseMoveDelegate).unbind('mouseup.'+this.widgetName,this._mouseUpDelegate);if(this._mouseStarted){this._mouseStarted=false;this._preventClickEvent=(event.target==this._mouseDownEvent.target);this._mouseStop(event);}
return false;},_mouseDistanceMet:function(event){return(Math.max(Math.abs(this._mouseDownEvent.pageX-event.pageX),Math.abs(this._mouseDownEvent.pageY-event.pageY))>=this.options.distance);},_mouseDelayMet:function(event){return this.mouseDelayMet;},_mouseStart:function(event){},_mouseDrag:function(event){},_mouseStop:function(event){},_mouseCapture:function(event){return true;}};$.ui.mouse.defaults={cancel:null,distance:1,delay:0};})(jQuery);(function($){$.extend($.expr[':'],{icontains:function(a,i,m){return(a.textContent||a.innerText||jQuery(a).text()||"").toLowerCase().indexOf(m[3].toLowerCase())>=0;}});$.iterators={getText:function(){return $(this).text();},parseInt:function(v){return parseInt(v,10);}};$.extend({range:function(){if(!arguments.length){return[];}
var min,max,step;if(arguments.length==1){min=0;max=arguments[0]-1;step=1;}
else{min=arguments[0];max=arguments[1]-1;step=arguments[2]||1;}
if(step<0&&min>=max){step*=-1;var tmp=min;min=max;max=tmp;min+=((max-min)%step);}
var a=[];for(var i=min;i<=max;i+=step){a.push(i);}
return a;},keyCode:{BACKSPACE:8,CAPS_LOCK:20,COMMA:188,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38},keyIs:function(k,e){return parseInt($.keyCode[k.toUpperCase()],10)==parseInt((typeof(e)=='number')?e:e.keyCode,10);},redirect:function(url){window.location.href=url;return url;},stop:function(e,preventDefault,stopPropagation){if(preventDefault){e.preventDefault();}
if(stopPropagation){e.stopPropagation();}
return preventDefault&&false||true;},basename:function(path){var t=path.split('/');return t[t.length]===''&&s||t.slice(0,t.length).join('/');},filename:function(path){return path.split('/').pop();},filesizeformat:function(bytes,suffixes){var b=parseInt(bytes,10);var s=suffixes||['byte','bytes','KB','MB','GB'];if(isNaN(b)||b===0){return'0 '+s[0];}
if(b==1){return'1 '+s[0];}
if(b<1024){return b.toFixed(2)+' '+s[1];}
if(b<1048576){return(b/1024).toFixed(2)+' '+s[2];}
if(b<1073741824){return(b/1048576).toFixed(2)+' '+s[3];}
else{return(b/1073741824).toFixed(2)+' '+s[4];}},fileExtension:function(s){var tokens=s.split('.');return tokens[tokens.length-1]||false;},isString:function(o){return typeof(o)=='string'&&true||false;},isRegExp:function(o){return o&&o.constructor.toString().indexOf('RegExp()')!=-1||false;},isArray:function(o){if(!o){return false;}
return o.constructor&&Object.prototype.toString.apply(o.constructor.prototype)==='[object Array]';},isObject:function(o){return(typeof(o)=='object');},toCurrency:function(i){i=parseFloat(i,10).toFixed(2);return(i=='NaN')?'0.00':i;},pxToEm:function(i,settings){settings=jQuery.extend({scope:'body',reverse:false},settings);var pxVal=(i==='')?0:parseFloat(i);var scopeVal;var getWindowWidth=function(){var de=document.documentElement;return self.innerWidth||(de&&de.clientWidth)||document.body.clientWidth;};if(settings.scope=='body'&&$.browser.msie&&(parseFloat($('body').css('font-size'))/getWindowWidth()).toFixed(1)>0.0){var calcFontSize=function(){return(parseFloat($('body').css('font-size'))/getWindowWidth()).toFixed(3)*16;};scopeVal=calcFontSize();}
else{scopeVal=parseFloat(jQuery(settings.scope).css("font-size"));}
var result=(settings.reverse===true)?(pxVal*scopeVal).toFixed(2)+'px':(pxVal/scopeVal).toFixed(2)+'em';return result;}});$.extend($.fn,{selectRange:function(start,end){if($(this).get(0).createTextRange){var range=$(this).get(0).createTextRange();range.collapse(true);range.moveEnd('character',end);range.moveStart('character',start);range.select();}
else if($(this).get(0).setSelectionRange){$(this).bind('focus',function(e){e.preventDefault();}).get(0).setSelectionRange(start,end);}
return $(this);},equalHeights:function(px){$(this).each(function(){var currentTallest=0;$(this).children().each(function(i){if($(this).height()>currentTallest){currentTallest=$(this).height();}});if(!px||!$.pxToEm){currentTallest=$.pxToEm(currentTallest);}
if($.browser.msie&&$.browser.version==6.0){$(this).children().css({'height':currentTallest});}
$(this).children().css({'min-height':currentTallest});});return this;},delay:function(time,callback){jQuery.fx.step.delay=function(){};return this.animate({delay:1},time,callback);}});})(jQuery);(function($){var strings={strConversion:{__repr:function(i){switch(this.__getType(i)){case'array':case'date':case'number':return i.toString();case'object':var o=[];for(x=0;x<i.length;i++){o.push(i+': '+this.__repr(i[x]));}
return o.join(', ');case'string':return i;default:return i;}},__getType:function(i){if(!i||!i.constructor){return typeof(i);}
var match=i.constructor.toString().match(/Array|Number|String|Object|Date/);return match&&match[0].toLowerCase()||typeof(i);},__pad:function(str,l,s,t){var p=s||' ';var o=str;if(l-str.length>0){o=new Array(Math.ceil(l/p.length)).join(p).substr(0,t=!t?l:t==1?0:Math.ceil(l/2))+str+p.substr(0,l-t);}
return o;},__getInput:function(arg,args){var key=arg.getKey();switch(this.__getType(args)){case'object':var keys=key.split('.');var obj=args;for(var subkey=0;subkey<keys.length;subkey++){obj=obj[keys[subkey]];}
if(typeof(obj)!='undefined'){if(strings.strConversion.__getType(obj)=='array'){return arg.getFormat().match(/\.\*/)&&obj[1]||obj;}
return obj;}
else{}
break;case'array':key=parseInt(key,10);if(arg.getFormat().match(/\.\*/)&&typeof args[key+1]!='undefined'){return args[key+1];}
else if(typeof args[key]!='undefined'){return args[key];}
else{return key;}
break;}
return'{'+key+'}';},__formatToken:function(token,args){var arg=new Argument(token,args);return strings.strConversion[arg.getFormat().slice(-1)](this.__getInput(arg,args),arg);},d:function(input,arg){var o=parseInt(input,10);var p=arg.getPaddingLength();if(p){return this.__pad(o.toString(),p,arg.getPaddingString(),0);}
else{return o;}},i:function(input,args){return this.d(input,args);},o:function(input,arg){var o=input.toString(8);if(arg.isAlternate()){o=this.__pad(o,o.length+1,'0',0);}
return this.__pad(o,arg.getPaddingLength(),arg.getPaddingString(),0);},u:function(input,args){return Math.abs(this.d(input,args));},x:function(input,arg){var o=parseInt(input,10).toString(16);o=this.__pad(o,arg.getPaddingLength(),arg.getPaddingString(),0);return arg.isAlternate()?'0x'+o:o;},X:function(input,arg){return this.x(input,arg).toUpperCase();},e:function(input,arg){return parseFloat(input,10).toExponential(arg.getPrecision());},E:function(input,arg){return this.e(input,arg).toUpperCase();},f:function(input,arg){return this.__pad(parseFloat(input,10).toFixed(arg.getPrecision()),arg.getPaddingLength(),arg.getPaddingString(),0);},F:function(input,args){return this.f(input,args);},g:function(input,arg){var o=parseFloat(input,10);return(o.toString().length>6)?Math.round(o.toExponential(arg.getPrecision())):o;},G:function(input,args){return this.g(input,args);},c:function(input,args){var match=input.match(/\w|\d/);return match&&match[0]||'';},r:function(input,args){return this.__repr(input);},s:function(input,args){return input.toString&&input.toString()||''+input;}},format:function(str,args){var end=0;var start=0;var match=false;var buffer=[];var token='';var tmp=(str||'').split('');for(start=0;start<tmp.length;start++){if(tmp[start]=='{'&&tmp[start+1]!='{'){end=str.indexOf('}',start);token=tmp.slice(start+1,end).join('');if(tmp[start-1]!='{'&&tmp[end+1]!='}'){var tokenArgs=(typeof arguments[1]!='object')?arguments2Array(arguments,2):args||[];buffer.push(strings.strConversion.__formatToken(token,tokenArgs));}
else{buffer.push(token);}}
else if(start>end||buffer.length<1){buffer.push(tmp[start]);}}
return(buffer.length>1)?buffer.join(''):buffer[0];},calc:function(str,args){return eval(format(str,args));},repeat:function(s,n){return new Array(n+1).join(s);},UTF8encode:function(s){return unescape(encodeURIComponent(s));},UTF8decode:function(s){return decodeURIComponent(escape(s));},tpl:function(){var out='',render=true;if(arguments.length==2&&$.isArray(arguments[1])){this[arguments[0]]=arguments[1].join('');return jQuery;}
if(arguments.length==2&&$.isString(arguments[1])){this[arguments[0]]=arguments[1];return jQuery;}
if(arguments.length==1){return $(this[arguments[0]]);}
if(arguments.length==2&&arguments[1]==false){return this[arguments[0]];}
if(arguments.length==2&&$.isObject(arguments[1])){return $($.format(this[arguments[0]],arguments[1]));}
if(arguments.length==3&&$.isObject(arguments[1])){return(arguments[2]==true)?$.format(this[arguments[0]],arguments[1]):$($.format(this[arguments[0]],arguments[1]));}}};var Argument=function(arg,args){this.__arg=arg;this.__args=args;this.__max_precision=parseFloat('1.'+(new Array(32)).join('1'),10).toString().length-3;this.__def_precision=6;this.getString=function(){return this.__arg;};this.getKey=function(){return this.__arg.split(':')[0];};this.getFormat=function(){var match=this.getString().split(':');return(match&&match[1])?match[1]:'s';};this.getPrecision=function(){var match=this.getFormat().match(/\.(\d+|\*)/g);if(!match){return this.__def_precision;}
else{match=match[0].slice(1);if(match!='*'){return parseInt(match,10);}
else if(strings.strConversion.__getType(this.__args)=='array'){return this.__args[1]&&this.__args[0]||this.__def_precision;}
else if(strings.strConversion.__getType(this.__args)=='object'){return this.__args[this.getKey()]&&this.__args[this.getKey()][0]||this.__def_precision;}
else{return this.__def_precision;}}};this.getPaddingLength=function(){var match=false;if(this.isAlternate()){match=this.getString().match(/0?#0?(\d+)/);if(match&&match[1]){return parseInt(match[1],10);}}
match=this.getString().match(/(0|\.)(\d+|\*)/g);return match&&parseInt(match[0].slice(1),10)||0;};this.getPaddingString=function(){var o='';if(this.isAlternate()){o=' ';}
if(this.getFormat().match(/#0|0#|^0|\.\d+/)){o='0';}
return o;};this.getFlags=function(){var match=this.getString().matc(/^(0|\#|\-|\+|\s)+/);return match&&match[0].split('')||[];};this.isAlternate=function(){return!!this.getFormat().match(/^0?#/);};};var arguments2Array=function(args,shift){var o=[];for(l=args.length,x=(shift||0)-1;x<l;x++){o.push(args[x]);}
return o;};$.extend(strings);})(jQuery);(function($){$.widget('ui.dropslide',$.extend({},$.ui.mouse,{getter:'showLevel showNextLevel getSelection',_init:function(){var widget=this;this.wrapper=this.element.next();this.element.bind(this.options.trigger+'.dropslide',function(){widget.show();});this.wrapper.data('dropslide',this).css({width:this.options.width}).find('li, li ol li').bind('mouseover.dropslide',function(e){$(this).siblings().removeClass('hover').find('ol').hide().end().find('span').removeClass('ui-state-hover').end();$(this).find('ol').show().end().addClass('hover').children(0).addClass('ui-state-hover');widget.showNextLevel();}).bind('click.dropslide',function(e){$(widget.element).triggerHandler('dropslideclick',[e,widget],widget.options.click);$(widget.element).triggerHandler('select',[e,widget],widget.options.select);}).end().find('ol').bind('mousemove.dropslide',function(e){return widget._redraw();}).addClass('ui-widget clearfix ui-helper-reset').hide().end().find('span').addClass('ui-state-default ui-corner-all');this._redraw();},showLevel:function(id){var ols=this.wrapper.find('ol');var ds=this;if(id==0){ols.eq(0).css('left',this.element.position().left);this.wrapper.css('top',ds.element.position().top+ds.element.height()+ds.options.top);this.wrapper.css('z-index',1000);}
setTimeout(function(){ols.removeClass('active').eq(id).addClass('active').show(ds.options.animSpeed);},ds.options.showDelay);},showNextLevel:function(){this.wrapper.find('ol.active').removeClass('active').next('ol').addClass('active').show(this.options.animSpeed);},getSelection:function(level){return level&&this.wrapper.find('ol').eq(level).find('li span.ui-state-hover')||$.makeArray(this.wrapper.find('span.ui-state-hover').map($.iterators.getText));},_redraw:function(){var prevLI,prevOL,nextOL,pos=false;var offset=this.element.position().left+this.options.left;var ols=$(this.wrapper).find('ol');$(this.wrapper).css({top:this.element.position().top+this.element.height()+this.options.top,left:this.element.position().left});ols.each(function(i){prevOL=$(this).prevAll('ol:visible:first');if(prevOL.get(0)){prevLI=prevOL.find('li.hover').get(0)&&prevOL.find('li.hover')||prevOL.find('li:first');$(this).css('margin-left',prevLI.position().left);}});},show:function(e){this.showLevel(0);},hide:function(){var widget=this;setTimeout(function(){widget.wrapper.find('ol').hide();},widget.options.hideDelay);},activate:function(e){this.element.focus();this.show(this.options.animSpeed);},destroy:function(e){this.wrapper.remove();}}));$.ui.dropslide.defaults={tree:false,trigger:'mouseover',top:6,left:0,showDelay:0,hideDelay:0,animSpeed:0,select:function(){},click:function(e,ui){ui.hide();}};})(jQuery);(function($){$.tpl('timepickr.menu','<span class="ui-helper-reset ui-dropslide ui-timepickr ui-widget" />');$.tpl('timepickr.row','<ol class="ui-timepickr" />');$.tpl('timepickr.button','<li class="{className:s}"><span>{label:s}</span></li>');$.widget('ui.timepickr',{_init:function(){var ui=this;var menu=ui._buildMenu();var element=ui.element;element.data('timepickr.initialValue',element.val());menu.insertAfter(ui.element);element.addClass('ui-timepickr').dropslide(ui.options.dropslide).bind('select',ui.select);element.blur(function(e){$(this).dropslide('hide');if(ui.options.resetOnBlur){$(this).val($(this).data('timepickr.initialValue'));}});if(ui.options.val){element.val(this.options.val);}
if(ui.options.handle){$(this.options.handle).click(function(){$(element).dropslide('show');});}
if(ui.options.resetOnBlur){menu.find('li > span').bind('mousedown.timepickr',function(){$(element).data('timepickr.initialValue',$(element).val());});}
if(ui.options.updateLive){menu.find('li').bind('mouseover.timepickr',function(){$(element).timepickr('update');});}
var hrs=menu.find('ol:eq(1)').find('li:first').addClass('hover').find('span').addClass('ui-state-hover').end().end();var min=menu.find('ol:eq(2)').find('li:first').addClass('hover').find('span').addClass('ui-state-hover').end().end();var sec=menu.find('ol:eq(3)').find('li:first').addClass('hover').find('span').addClass('ui-state-hover').end().end();if(this.options.convention===24){var day=menu.find('ol:eq(0) li:eq(0)');var night=menu.find('ol:eq(0) li:eq(1)');var dayHours=hrs.find('li').slice(0,12);var nightHours=hrs.find('li').slice(12,24);var index=0;var selectHr=function(id){hrs.find('li').removeClass('hover');hrs.find('span').removeClass('ui-state-hover');hrs.find('li').eq(id).addClass('hover').find('span').addClass('ui-state-hover')};day.mouseover(function(){nightHours.hide();dayHours.show(0);index=hrs.find('li.hover').data('id')||hrs.find('li:first').data('id');selectHr(index>11&&index-12||index);element.dropslide('redraw');});night.mouseover(function(){dayHours.hide();nightHours.show(0);index=hrs.find('li.hover').data('id')||hrs.find('li:first').data('id');selectHr(index<12&&index+12||index);element.dropslide('redraw');});}
element.dropslide('redraw');element.data('timepickr',this);},update:function(){var frmt=this.options.convention===24&&'format24'||'format12';var val={h:this.getValue('hour'),m:this.getValue('minute'),s:this.getValue('second'),prefix:this.getValue('prefix'),suffix:this.getValue('suffix')};var o=$.format(this.options[frmt],val);$(this.element).val(o);},select:function(e){var dropslide=$(this).data('dropslide');$(dropslide.element).timepickr('update');e.stopPropagation();},getHour:function(){return this.getValue('hour');},getMinute:function(){return this.getValue('minute');},getSecond:function(){return this.getValue('second');},getValue:function(type){return $('.ui-timepickr.'+type+'.hover',this.element.next()).text();},activate:function(){this.element.dropslide('activate');},destroy:function(){this.element.dropslide('destroy');},_createButton:function(i,format,className){var o=format&&$.format(format,i)||i;var cn=className&&'ui-timepickr '+className||'ui-timepickr';return $.tpl('timepickr.button',{className:cn,label:o}).data('id',i);},_createRow:function(range,format,className){var row=$.tpl('timepickr.row');var button=this._createButton;$.each(range,function(idx,val){row.append(button(val,format||false,className||false));});return row;},_getRanges12:function(){var o=[],opt=this.options;if(opt.hours){o.push(this._createRow($.range(1,13),'{0:0.2d}','hour'));}
if(opt.minutes){o.push(this._createRow(opt.rangeMin,'{0:0.2d}','minute'));}
if(opt.seconds){o.push(this._createRow(opt.rangeSec,'{0:0.2d}','second'));}
if(opt.suffix){o.push(this._createRow(opt.suffix,false,'suffix'));}
return o;},_getRanges24:function(){var o=[],opt=this.options;o.push(this._createRow(opt.prefix,false,'prefix'));if(opt.hours){o.push(this._createRow($.range(0,24),'{0:0.2d}','hour'));}
if(opt.minutes){o.push(this._createRow(opt.rangeMin,'{0:0.2d}','minute'));}
if(opt.seconds){o.push(this._createRow(opt.rangeSec,'{0:0.2d}','second'));}
return o;},_buildMenu:function(){var menu=$.tpl('timepickr.menu');var ranges=this.options.convention===24&&this._getRanges24()||this._getRanges12();$.each(ranges,function(idx,val){menu.append(val);});return menu;}});$.extend($.ui.timepickr,{version:'0.6.6',eventPrefix:'',getter:'',defaults:{convention:24,dropslide:{trigger:'focus'},format12:'{h:02.d}:{m:02.d} {suffix:s}',format24:'{h:02.d}:{m:02.d}',handle:false,hours:true,minutes:true,seconds:false,prefix:['am','pm'],suffix:['am','pm'],rangeMin:$.range(0,60,15),rangeSec:$.range(0,60,15),updateLive:true,resetOnBlur:true,val:false}});})(jQuery);
/* libs/jquery.datepick.js */
﻿
(function($){function Datepicker(){this._defaults={pickerClass:'',showOnFocus:true,showTrigger:null,showAnim:'show',showOptions:{},showSpeed:'normal',popupContainer:null,alignment:'bottom',fixedWeeks:false,firstDay:0,calculateWeek:this.iso8601Week,monthsToShow:1,monthsOffset:0,monthsToStep:1,monthsToJump:12,useMouseWheel:true,changeMonth:true,yearRange:'c-10:c+10',shortYearCutoff:'+10',showOtherMonths:false,selectOtherMonths:false,defaultDate:null,selectDefaultDate:false,minDate:null,maxDate:null,dateFormat:'mm/dd/yyyy',autoSize:false,rangeSelect:false,rangeSeparator:' - ',multiSelect:0,multiSeparator:',',onDate:null,onShow:null,onChangeMonthYear:null,onSelect:null,onClose:null,altField:null,altFormat:null,constrainInput:true,commandsAsDateFormat:false,commands:this.commands};this.regional={'':{monthNames:['January','February','March','April','May','June','July','August','September','October','November','December'],monthNamesShort:['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'],dayNames:['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'],dayNamesShort:['Sun','Mon','Tue','Wed','Thu','Fri','Sat'],dayNamesMin:['Su','Mo','Tu','We','Th','Fr','Sa'],dateFormat:'mm/dd/yyyy',firstDay:0,renderer:this.defaultRenderer,prevText:'<span class="ui-icon ui-icon-circle-triangle-w">&lt;Prev</span>',prevStatus:'Show the previous month',prevJumpText:'&lt;&lt;',prevJumpStatus:'Show the previous year',nextText:'<span class="ui-icon ui-icon-circle-triangle-e">Next&gt;</span>',nextStatus:'Show the next month',nextJumpText:'&gt;&gt;',nextJumpStatus:'Show the next year',currentText:'Current',currentStatus:'Show the current month',todayText:'Today',todayStatus:'Show today\'s month',clearText:'Clear',clearStatus:'Clear all the dates',closeText:'Close',closeStatus:'Close the datepicker',yearStatus:'Change the year',monthStatus:'Change the month',weekText:'Wk',weekStatus:'Week of the year',dayStatus:'DD, M d, yyyy',defaultStatus:'Select a date',isRTL:false}};$.extend(this._defaults,this.regional['']);this._disabled=[];}
$.extend(Datepicker.prototype,{dataName:'datepick',markerClass:'hasDatepick',_popupClass:'datepick-popup',_triggerClass:'datepick-trigger',_disableClass:'datepick-disable',_coverClass:'datepick-cover',_monthYearClass:'datepick-month-year',_curMonthClass:'datepick-month-',_anyYearClass:'datepick-any-year',_curDoWClass:'datepick-dow-',commands:{prev:{text:'prevText',status:'prevStatus',keystroke:{keyCode:33},enabled:function(inst){var minDate=inst.curMinDate();return(!minDate||$.datepick.add($.datepick.day($.datepick._applyMonthsOffset($.datepick.add($.datepick.newDate(inst.drawDate),1-inst.get('monthsToStep'),'m'),inst),1),-1,'d').getTime()>=minDate.getTime());},date:function(inst){return $.datepick.day($.datepick._applyMonthsOffset($.datepick.add($.datepick.newDate(inst.drawDate),-inst.get('monthsToStep'),'m'),inst),1);},action:function(inst){$.datepick.changeMonth(this,-inst.get('monthsToStep'));}},prevJump:{text:'prevJumpText',status:'prevJumpStatus',keystroke:{keyCode:33,ctrlKey:true},enabled:function(inst){var minDate=inst.curMinDate();return(!minDate||$.datepick.add($.datepick.day($.datepick._applyMonthsOffset($.datepick.add($.datepick.newDate(inst.drawDate),1-inst.get('monthsToJump'),'m'),inst),1),-1,'d').getTime()>=minDate.getTime());},date:function(inst){return $.datepick.day($.datepick._applyMonthsOffset($.datepick.add($.datepick.newDate(inst.drawDate),-inst.get('monthsToJump'),'m'),inst),1);},action:function(inst){$.datepick.changeMonth(this,-inst.get('monthsToJump'));}},next:{text:'nextText',status:'nextStatus',keystroke:{keyCode:34},enabled:function(inst){var maxDate=inst.get('maxDate');return(!maxDate||$.datepick.day($.datepick._applyMonthsOffset($.datepick.add($.datepick.newDate(inst.drawDate),inst.get('monthsToStep'),'m'),inst),1).getTime()<=maxDate.getTime());},date:function(inst){return $.datepick.day($.datepick._applyMonthsOffset($.datepick.add($.datepick.newDate(inst.drawDate),inst.get('monthsToStep'),'m'),inst),1);},action:function(inst){$.datepick.changeMonth(this,inst.get('monthsToStep'));}},nextJump:{text:'nextJumpText',status:'nextJumpStatus',keystroke:{keyCode:34,ctrlKey:true},enabled:function(inst){var maxDate=inst.get('maxDate');return(!maxDate||$.datepick.day($.datepick._applyMonthsOffset($.datepick.add($.datepick.newDate(inst.drawDate),inst.get('monthsToJump'),'m'),inst),1).getTime()<=maxDate.getTime());},date:function(inst){return $.datepick.day($.datepick._applyMonthsOffset($.datepick.add($.datepick.newDate(inst.drawDate),inst.get('monthsToJump'),'m'),inst),1);},action:function(inst){$.datepick.changeMonth(this,inst.get('monthsToJump'));}},current:{text:'currentText',status:'currentStatus',keystroke:{keyCode:36,ctrlKey:true},enabled:function(inst){var minDate=inst.curMinDate();var maxDate=inst.get('maxDate');var curDate=inst.selectedDates[0]||$.datepick.today();return(!minDate||curDate.getTime()>=minDate.getTime())&&(!maxDate||curDate.getTime()<=maxDate.getTime());},date:function(inst){return inst.selectedDates[0]||$.datepick.today();},action:function(inst){var curDate=inst.selectedDates[0]||$.datepick.today();$.datepick.showMonth(this,curDate.getFullYear(),curDate.getMonth()+1);}},today:{text:'todayText',status:'todayStatus',keystroke:{keyCode:36,ctrlKey:true},enabled:function(inst){var minDate=inst.curMinDate();var maxDate=inst.get('maxDate');return(!minDate||$.datepick.today().getTime()>=minDate.getTime())&&(!maxDate||$.datepick.today().getTime()<=maxDate.getTime());},date:function(inst){return $.datepick.today();},action:function(inst){$.datepick.showMonth(this);}},clear:{text:'clearText',status:'clearStatus',keystroke:{keyCode:35,ctrlKey:true},enabled:function(inst){return true;},date:function(inst){return null;},action:function(inst){$.datepick.clear(this);}},close:{text:'closeText',status:'closeStatus',keystroke:{keyCode:27},enabled:function(inst){return true;},date:function(inst){return null;},action:function(inst){$.datepick.hide(this);}},prevWeek:{text:'prevWeekText',status:'prevWeekStatus',keystroke:{keyCode:38,ctrlKey:true},enabled:function(inst){var minDate=inst.curMinDate();return(!minDate||$.datepick.add($.datepick.newDate(inst.drawDate),-7,'d').getTime()>=minDate.getTime());},date:function(inst){return $.datepick.add($.datepick.newDate(inst.drawDate),-7,'d');},action:function(inst){$.datepick.changeDay(this,-7);}},prevDay:{text:'prevDayText',status:'prevDayStatus',keystroke:{keyCode:37,ctrlKey:true},enabled:function(inst){var minDate=inst.curMinDate();return(!minDate||$.datepick.add($.datepick.newDate(inst.drawDate),-1,'d').getTime()>=minDate.getTime());},date:function(inst){return $.datepick.add($.datepick.newDate(inst.drawDate),-1,'d');},action:function(inst){$.datepick.changeDay(this,-1);}},nextDay:{text:'nextDayText',status:'nextDayStatus',keystroke:{keyCode:39,ctrlKey:true},enabled:function(inst){var maxDate=inst.get('maxDate');return(!maxDate||$.datepick.add($.datepick.newDate(inst.drawDate),1,'d').getTime()<=maxDate.getTime());},date:function(inst){return $.datepick.add($.datepick.newDate(inst.drawDate),1,'d');},action:function(inst){$.datepick.changeDay(this,1);}},nextWeek:{text:'nextWeekText',status:'nextWeekStatus',keystroke:{keyCode:40,ctrlKey:true},enabled:function(inst){var maxDate=inst.get('maxDate');return(!maxDate||$.datepick.add($.datepick.newDate(inst.drawDate),7,'d').getTime()<=maxDate.getTime());},date:function(inst){return $.datepick.add($.datepick.newDate(inst.drawDate),7,'d');},action:function(inst){$.datepick.changeDay(this,7);}}},defaultRenderer:{picker:'<div class="datepick">'+'<div class="datepick-nav">{link:prev}{link:today}{link:next}</div>{months}'+'{popup:start}<div class="datepick-ctrl">{link:clear}{link:close}</div>{popup:end}'+'<div class="datepick-clear-fix"></div></div>',monthRow:'<div class="datepick-month-row">{months}</div>',month:'<div class="datepick-month"><div class="datepick-month-header">{monthHeader}</div>'+'<table><thead>{weekHeader}</thead><tbody>{weeks}</tbody></table></div>',weekHeader:'<tr>{days}</tr>',dayHeader:'<th>{day}</th>',week:'<tr>{days}</tr>',day:'<td>{day}</td>',monthSelector:'.datepick-month',daySelector:'td',rtlClass:'datepick-rtl',multiClass:'datepick-multi',defaultClass:'',selectedClass:'datepick-selected',highlightedClass:'datepick-highlight',todayClass:'datepick-today',otherMonthClass:'datepick-other-month',weekendClass:'datepick-weekend',commandClass:'datepick-cmd',commandButtonClass:'',commandLinkClass:'',disabledClass:'datepick-disabled'},setDefaults:function(settings){$.extend(this._defaults,settings||{});return this;},_ticksTo1970:(((1970-1)*365+Math.floor(1970/4)-Math.floor(1970/100)+
Math.floor(1970/400))*24*60*60*10000000),_msPerDay:24*60*60*1000,ATOM:'yyyy-mm-dd',COOKIE:'D, dd M yyyy',FULL:'DD, MM d, yyyy',ISO_8601:'yyyy-mm-dd',JULIAN:'J',RFC_822:'D, d M yy',RFC_850:'DD, dd-M-yy',RFC_1036:'D, d M yy',RFC_1123:'D, d M yyyy',RFC_2822:'D, d M yyyy',RSS:'D, d M yy',TICKS:'!',TIMESTAMP:'@',W3C:'yyyy-mm-dd',formatDate:function(format,date,settings){if(typeof format!='string'){settings=date;date=format;format='';}
if(!date){return'';}
format=format||this._defaults.dateFormat;settings=settings||{};var dayNamesShort=settings.dayNamesShort||this._defaults.dayNamesShort;var dayNames=settings.dayNames||this._defaults.dayNames;var monthNamesShort=settings.monthNamesShort||this._defaults.monthNamesShort;var monthNames=settings.monthNames||this._defaults.monthNames;var calculateWeek=settings.calculateWeek||this._defaults.calculateWeek;var doubled=function(match,step){var matches=1;while(iFormat+matches<format.length&&format.charAt(iFormat+matches)==match){matches++;}
iFormat+=matches-1;return Math.floor(matches/(step||1))>1;};var formatNumber=function(match,value,len,step){var num=''+value;if(doubled(match,step)){while(num.length<len){num='0'+num;}}
return num;};var formatName=function(match,value,shortNames,longNames){return(doubled(match)?longNames[value]:shortNames[value]);};var output='';var literal=false;for(var iFormat=0;iFormat<format.length;iFormat++){if(literal){if(format.charAt(iFormat)=="'"&&!doubled("'")){literal=false;}
else{output+=format.charAt(iFormat);}}
else{switch(format.charAt(iFormat)){case'd':output+=formatNumber('d',date.getDate(),2);break;case'D':output+=formatName('D',date.getDay(),dayNamesShort,dayNames);break;case'o':output+=formatNumber('o',this.dayOfYear(date),3);break;case'w':output+=formatNumber('w',calculateWeek(date),2);break;case'm':output+=formatNumber('m',date.getMonth()+1,2);break;case'M':output+=formatName('M',date.getMonth(),monthNamesShort,monthNames);break;case'y':output+=(doubled('y',2)?date.getFullYear():(date.getFullYear()%100<10?'0':'')+date.getFullYear()%100);break;case'@':output+=Math.floor(date.getTime()/1000);break;case'!':output+=date.getTime()*10000+this._ticksTo1970;break;case"'":if(doubled("'")){output+="'";}
else{literal=true;}
break;default:output+=format.charAt(iFormat);}}}
return output;},parseDate:function(format,value,settings){if(value==null){throw'Invalid arguments';}
value=(typeof value=='object'?value.toString():value+'');if(value==''){return null;}
format=format||this._defaults.dateFormat;settings=settings||{};var shortYearCutoff=settings.shortYearCutoff||this._defaults.shortYearCutoff;shortYearCutoff=(typeof shortYearCutoff!='string'?shortYearCutoff:this.today().getFullYear()%100+parseInt(shortYearCutoff,10));var dayNamesShort=settings.dayNamesShort||this._defaults.dayNamesShort;var dayNames=settings.dayNames||this._defaults.dayNames;var monthNamesShort=settings.monthNamesShort||this._defaults.monthNamesShort;var monthNames=settings.monthNames||this._defaults.monthNames;var year=-1;var month=-1;var day=-1;var doy=-1;var shortYear=false;var literal=false;var doubled=function(match,step){var matches=1;while(iFormat+matches<format.length&&format.charAt(iFormat+matches)==match){matches++;}
iFormat+=matches-1;return Math.floor(matches/(step||1))>1;};var getNumber=function(match,step){var isDoubled=doubled(match,step);var size=[2,3,isDoubled?4:2,11,20]['oy@!'.indexOf(match)+1];var digits=new RegExp('^-?\\d{1,'+size+'}');var num=value.substring(iValue).match(digits);if(!num){throw'Missing number at position {0}'.replace(/\{0\}/,iValue);}
iValue+=num[0].length;return parseInt(num[0],10);};var getName=function(match,shortNames,longNames,step){var names=(doubled(match,step)?longNames:shortNames);for(var i=0;i<names.length;i++){if(value.substr(iValue,names[i].length)==names[i]){iValue+=names[i].length;return i+1;}}
throw'Unknown name at position {0}'.replace(/\{0\}/,iValue);};var checkLiteral=function(){if(value.charAt(iValue)!=format.charAt(iFormat)){throw'Unexpected literal at position {0}'.replace(/\{0\}/,iValue);}
iValue++;};var iValue=0;for(var iFormat=0;iFormat<format.length;iFormat++){if(literal){if(format.charAt(iFormat)=="'"&&!doubled("'")){literal=false;}
else{checkLiteral();}}
else{switch(format.charAt(iFormat)){case'd':day=getNumber('d');break;case'D':getName('D',dayNamesShort,dayNames);break;case'o':doy=getNumber('o');break;case'w':getNumber('w');break;case'm':month=getNumber('m');break;case'M':month=getName('M',monthNamesShort,monthNames);break;case'y':var iSave=iFormat;shortYear=!doubled('y',2);iFormat=iSave;year=getNumber('y',2);break;case'@':var date=this._normaliseDate(new Date(getNumber('@')*1000));year=date.getFullYear();month=date.getMonth()+1;day=date.getDate();break;case'!':var date=this._normaliseDate(new Date((getNumber('!')-this._ticksTo1970)/10000));year=date.getFullYear();month=date.getMonth()+1;day=date.getDate();break;case'*':iValue=value.length;break;case"'":if(doubled("'")){checkLiteral();}
else{literal=true;}
break;default:checkLiteral();}}}
if(iValue<value.length){throw'Additional text found at end';}
if(year==-1){year=this.today().getFullYear();}
else if(year<100&&shortYear){year+=(shortYearCutoff==-1?1900:this.today().getFullYear()-
this.today().getFullYear()%100-(year<=shortYearCutoff?0:100));}
if(doy>-1){month=1;day=doy;for(var dim=this.daysInMonth(year,month);day>dim;dim=this.daysInMonth(year,month)){month++;day-=dim;}}
var date=this.newDate(year,month,day);if(date.getFullYear()!=year||date.getMonth()+1!=month||date.getDate()!=day){throw'Invalid date';}
return date;},determineDate:function(dateSpec,defaultDate,currentDate,dateFormat,settings){if(currentDate&&typeof currentDate!='object'){settings=dateFormat;dateFormat=currentDate;currentDate=null;}
if(typeof dateFormat!='string'){settings=dateFormat;dateFormat='';}
var offsetString=function(offset){try{return $.datepick.parseDate(dateFormat,offset,settings);}
catch(e){}
offset=offset.toLowerCase();var date=(offset.match(/^c/)&&currentDate?$.datepick.newDate(currentDate):null)||$.datepick.today();var pattern=/([+-]?[0-9]+)\s*(d|w|m|y)?/g;var matches=pattern.exec(offset);while(matches){date=$.datepick.add(date,parseInt(matches[1],10),matches[2]||'d');matches=pattern.exec(offset);}
return date;};defaultDate=(defaultDate?$.datepick.newDate(defaultDate):null);dateSpec=(dateSpec==null?defaultDate:(typeof dateSpec=='string'?offsetString(dateSpec):(typeof dateSpec=='number'?(isNaN(dateSpec)||dateSpec==Infinity||dateSpec==-Infinity?defaultDate:$.datepick.add($.datepick.today(),dateSpec,'d')):$.datepick.newDate(dateSpec))));return dateSpec;},daysInMonth:function(year,month){month=(year.getFullYear?year.getMonth()+1:month);year=(year.getFullYear?year.getFullYear():year);return this.newDate(year,month+1,0).getDate();},dayOfYear:function(year,month,day){var date=(year.getFullYear?year:this.newDate(year,month,day));var newYear=this.newDate(date.getFullYear(),1,1);return Math.floor((date.getTime()-newYear.getTime())/this._msPerDay)+1;},iso8601Week:function(year,month,day){var checkDate=(year.getFullYear?new Date(year.getTime()):this.newDate(year,month,day));checkDate.setDate(checkDate.getDate()+4-(checkDate.getDay()||7));var time=checkDate.getTime();checkDate.setMonth(0,1);return Math.floor(Math.round((time-checkDate)/86400000)/7)+1;},today:function(){return this._normaliseDate(new Date());},newDate:function(year,month,day){return(!year?null:(year.getFullYear?this._normaliseDate(new Date(year.getTime())):new Date(year,month-1,day,12)));},_normaliseDate:function(date){if(date){date.setHours(12,0,0,0);}
return date;},year:function(date,year){date.setFullYear(year);return this._normaliseDate(date);},month:function(date,month){date.setMonth(month-1);return this._normaliseDate(date);},day:function(date,day){date.setDate(day);return this._normaliseDate(date);},add:function(date,amount,period){if(period=='d'||period=='w'){this._normaliseDate(date);date.setDate(date.getDate()+amount*(period=='w'?7:1));}
else{var year=date.getFullYear()+(period=='y'?amount:0);var month=date.getMonth()+(period=='m'?amount:0);date.setTime($.datepick.newDate(year,month+1,Math.min(date.getDate(),this.daysInMonth(year,month+1))).getTime());}
return date;},_applyMonthsOffset:function(date,inst){var monthsOffset=inst.get('monthsOffset');if($.isFunction(monthsOffset)){monthsOffset=monthsOffset.apply(inst.target[0],[date]);}
return $.datepick.add(date,-monthsOffset,'m');},_attachPicker:function(target,settings){target=$(target);if(target.hasClass(this.markerClass)){return;}
target.addClass(this.markerClass);var inst={target:target,selectedDates:[],drawDate:null,pickingRange:false,inline:($.inArray(target[0].nodeName.toLowerCase(),['div','span'])>-1),get:function(name){var value=this.settings[name]!==undefined?this.settings[name]:$.datepick._defaults[name];if($.inArray(name,['defaultDate','minDate','maxDate'])>-1){value=$.datepick.determineDate(value,null,this.selectedDates[0],this.get('dateFormat'),inst.getConfig());}
return value;},curMinDate:function(){return(this.pickingRange?this.selectedDates[0]:this.get('minDate'));},getConfig:function(){return{dayNamesShort:this.get('dayNamesShort'),dayNames:this.get('dayNames'),monthNamesShort:this.get('monthNamesShort'),monthNames:this.get('monthNames'),calculateWeek:this.get('calculateWeek'),shortYearCutoff:this.get('shortYearCutoff')};}};$.data(target[0],this.dataName,inst);var inlineSettings=($.fn.metadata?target.metadata():{});inst.settings=$.extend({},settings||{},inlineSettings||{});if(inst.inline){inst.drawDate=$.datepick._checkMinMax($.datepick.newDate(inst.selectedDates[0]||inst.get('defaultDate')||$.datepick.today()),inst);inst.prevDate=$.datepick.newDate(inst.drawDate);this._update(target[0]);if($.fn.mousewheel){target.mousewheel(this._doMouseWheel);}}
else{this._attachments(target,inst);target.bind('keydown.'+this.dataName,this._keyDown).bind('keypress.'+this.dataName,this._keyPress).bind('keyup.'+this.dataName,this._keyUp);if(target.attr('disabled')){this.disable(target[0]);}}},options:function(target,name){var inst=$.data(target,this.dataName);return(inst?(name?(name=='all'?inst.settings:inst.settings[name]):$.datepick._defaults):{});},option:function(target,settings,value){target=$(target);if(!target.hasClass(this.markerClass)){return;}
settings=settings||{};if(typeof settings=='string'){var name=settings;settings={};settings[name]=value;}
var inst=$.data(target[0],this.dataName);var dates=inst.selectedDates;extendRemove(inst.settings,settings);this.setDate(target[0],dates,null,false,true);inst.pickingRange=false;inst.drawDate=$.datepick.newDate(this._checkMinMax((settings.defaultDate?inst.get('defaultDate'):inst.drawDate)||inst.get('defaultDate')||$.datepick.today(),inst));if(!inst.inline){this._attachments(target,inst);}
if(inst.inline||inst.div){this._update(target[0]);}},_attachments:function(target,inst){target.unbind('focus.'+this.dataName);if(inst.get('showOnFocus')){target.bind('focus.'+this.dataName,this.show);}
if(inst.trigger){inst.trigger.remove();}
var trigger=inst.get('showTrigger');inst.trigger=(!trigger?$([]):$(trigger).clone().removeAttr('id').addClass(this._triggerClass)
[inst.get('isRTL')?'insertBefore':'insertAfter'](target).click(function(){if(!$.datepick.isDisabled(target[0])){$.datepick[$.datepick.curInst==inst?'hide':'show'](target[0]);}}));this._autoSize(target,inst);var dates=this._extractDates(inst,target.val());if(dates){this.setDate(target[0],dates,null,true);}
if(inst.get('selectDefaultDate')&&inst.get('defaultDate')&&inst.selectedDates.length==0){this.setDate(target[0],$.datepick.newDate(inst.get('defaultDate')||$.datepick.today()));}},_autoSize:function(target,inst){if(inst.get('autoSize')&&!inst.inline){var date=$.datepick.newDate(2009,10,20);var dateFormat=inst.get('dateFormat');if(dateFormat.match(/[DM]/)){var findMax=function(names){var max=0;var maxI=0;for(var i=0;i<names.length;i++){if(names[i].length>max){max=names[i].length;maxI=i;}}
return maxI;};date.setMonth(findMax(inst.get(dateFormat.match(/MM/)?'monthNames':'monthNamesShort')));date.setDate(findMax(inst.get(dateFormat.match(/DD/)?'dayNames':'dayNamesShort'))+20-date.getDay());}
inst.target.attr('size',$.datepick.formatDate(dateFormat,date,inst.getConfig()).length);}},destroy:function(target){target=$(target);if(!target.hasClass(this.markerClass)){return;}
var inst=$.data(target[0],this.dataName);if(inst.trigger){inst.trigger.remove();}
target.removeClass(this.markerClass).empty().unbind('.'+this.dataName);if(inst.inline&&$.fn.mousewheel){target.unmousewheel();}
if(!inst.inline&&inst.get('autoSize')){target.removeAttr('size');}
$.removeData(target[0],this.dataName);},multipleEvents:function(fns){var funcs=arguments;return function(args){for(var i=0;i<funcs.length;i++){funcs[i].apply(this,arguments);}};},enable:function(target){var $target=$(target);if(!$target.hasClass(this.markerClass)){return;}
var inst=$.data(target,this.dataName);if(inst.inline)
$target.children('.'+this._disableClass).remove().end().find('button,select').attr('disabled','').end().find('a').attr('href','javascript:void(0)');else{target.disabled=false;inst.trigger.filter('button.'+this._triggerClass).attr('disabled','').end().filter('img.'+this._triggerClass).css({opacity:'1.0',cursor:''});}
this._disabled=$.map(this._disabled,function(value){return(value==target?null:value);});},disable:function(target){var $target=$(target);if(!$target.hasClass(this.markerClass))
return;var inst=$.data(target,this.dataName);if(inst.inline){var inline=$target.children(':last');var offset=inline.offset();var relOffset={left:0,top:0};inline.parents().each(function(){if($(this).css('position')=='relative'){relOffset=$(this).offset();return false;}});var zIndex=$target.css('zIndex');zIndex=(zIndex=='auto'?0:parseInt(zIndex,10))+1;$target.prepend('<div class="'+this._disableClass+'" style="'+'width: '+inline.outerWidth()+'px; left: '+(offset.left-relOffset.left)+'px; top: '+
(offset.top-relOffset.top)+'px; z-index: '+zIndex+'"></div>').find('button,select').attr('disabled','disabled').end().find('a').removeAttr('href');}
else{target.disabled=true;inst.trigger.filter('button.'+this._triggerClass).attr('disabled','disabled').end().filter('img.'+this._triggerClass).css({opacity:'0.5',cursor:'default'});}
this._disabled=$.map(this._disabled,function(value){return(value==target?null:value);});this._disabled.push(target);},isDisabled:function(target){return(target&&$.inArray(target,this._disabled)>-1);},show:function(target){target=target.target||target;var inst=$.data(target,$.datepick.dataName);if($.datepick.curInst==inst){return;}
if($.datepick.curInst){$.datepick.hide($.datepick.curInst,true);}
if(inst){inst.lastVal=null;inst.selectedDates=$.datepick._extractDates(inst,$(target).val());inst.pickingRange=false;inst.drawDate=$.datepick._checkMinMax($.datepick.newDate(inst.selectedDates[0]||inst.get('defaultDate')||$.datepick.today()),inst);inst.prevDate=$.datepick.newDate(inst.drawDate);$.datepick.curInst=inst;$.datepick._update(target,true);var offset=$.datepick._checkOffset(inst);inst.div.css({left:offset.left,top:offset.top});var showAnim=inst.get('showAnim');var showSpeed=inst.get('showSpeed');showSpeed=(showSpeed=='normal'&&$.ui&&$.ui.version>='1.8'?'_default':showSpeed);var postProcess=function(){var cover=inst.div.find('.'+$.datepick._coverClass);if(cover.length){var borders=$.datepick._getBorders(inst.div);cover.css({left:-borders[0],top:-borders[1],width:inst.div.outerWidth()+borders[0],height:inst.div.outerHeight()+borders[1]});}};if($.effects&&$.effects[showAnim]){var data=inst.div.data();for(var key in data){if(key.match(/^ec\.storage\./)){data[key]=inst._mainDiv.css(key.replace(/ec\.storage\./,''));}}
inst.div.data(data).show(showAnim,inst.get('showOptions'),showSpeed,postProcess);}
else{inst.div[showAnim||'show']((showAnim?showSpeed:''),postProcess);}
if(!showAnim){postProcess();}}},_extractDates:function(inst,datesText){if(datesText==inst.lastVal){return;}
inst.lastVal=datesText;var dateFormat=inst.get('dateFormat');var multiSelect=inst.get('multiSelect');var rangeSelect=inst.get('rangeSelect');datesText=datesText.split(multiSelect?inst.get('multiSeparator'):(rangeSelect?inst.get('rangeSeparator'):'\x00'));var dates=[];for(var i=0;i<datesText.length;i++){try{var date=$.datepick.parseDate(dateFormat,datesText[i],inst.getConfig());if(date){var found=false;for(var j=0;j<dates.length;j++){if(dates[j].getTime()==date.getTime()){found=true;break;}}
if(!found){dates.push(date);}}}
catch(e){}}
dates.splice(multiSelect||(rangeSelect?2:1),dates.length);if(rangeSelect&&dates.length==1){dates[1]=dates[0];}
return dates;},_update:function(target,hidden){target=$(target.target||target);var inst=$.data(target[0],$.datepick.dataName);if(inst){if(inst.inline||$.datepick.curInst==inst){var onChange=inst.get('onChangeMonthYear');if(onChange&&(!inst.prevDate||inst.prevDate.getFullYear()!=inst.drawDate.getFullYear()||inst.prevDate.getMonth()!=inst.drawDate.getMonth())){onChange.apply(target[0],[inst.drawDate.getFullYear(),inst.drawDate.getMonth()+1]);}}
if(inst.inline){target.html(this._generateContent(target[0],inst));}
else if($.datepick.curInst==inst){if(!inst.div){inst.div=$('<div></div>').addClass(this._popupClass).css({display:(hidden?'none':'static'),position:'absolute',left:target.offset().left,top:target.offset().top+target.outerHeight()}).appendTo($(inst.get('popupContainer')||'body'));if($.fn.mousewheel){inst.div.mousewheel(this._doMouseWheel);}}
inst.div.html(this._generateContent(target[0],inst));target.focus();}}},_updateInput:function(target,keyUp){var inst=$.data(target,this.dataName);if(inst){var value='';var altValue='';var sep=(inst.get('multiSelect')?inst.get('multiSeparator'):inst.get('rangeSeparator'));var dateFormat=inst.get('dateFormat');var altFormat=inst.get('altFormat')||dateFormat;for(var i=0;i<inst.selectedDates.length;i++){value+=(keyUp?'':(i>0?sep:'')+$.datepick.formatDate(dateFormat,inst.selectedDates[i],inst.getConfig()));altValue+=(i>0?sep:'')+$.datepick.formatDate(altFormat,inst.selectedDates[i],inst.getConfig());}
if(!inst.inline&&!keyUp){$(target).val(value);}
$(inst.get('altField')).val(altValue);var onSelect=inst.get('onSelect');if(onSelect&&!keyUp&&!inst.inSelect){inst.inSelect=true;onSelect.apply(target,[inst.selectedDates]);inst.inSelect=false;}}},_getBorders:function(elem){var convert=function(value){var extra=($.browser.msie?1:0);return{thin:1+extra,medium:3+extra,thick:5+extra}[value]||value;};return[parseFloat(convert(elem.css('border-left-width'))),parseFloat(convert(elem.css('border-top-width')))];},_checkOffset:function(inst){var base=(inst.target.is(':hidden')&&inst.trigger?inst.trigger:inst.target);var offset=base.offset();var isFixed=false;$(inst.target).parents().each(function(){isFixed|=$(this).css('position')=='fixed';return!isFixed;});if(isFixed&&$.browser.opera){offset.left-=document.documentElement.scrollLeft;offset.top-=document.documentElement.scrollTop;}
var browserWidth=(!$.browser.mozilla||document.doctype?document.documentElement.clientWidth:0)||document.body.clientWidth;var browserHeight=(!$.browser.mozilla||document.doctype?document.documentElement.clientHeight:0)||document.body.clientHeight;if(browserWidth==0){return offset;}
var alignment=inst.get('alignment');var isRTL=inst.get('isRTL');var scrollX=document.documentElement.scrollLeft||document.body.scrollLeft;var scrollY=document.documentElement.scrollTop||document.body.scrollTop;var above=offset.top-inst.div.outerHeight()-
(isFixed&&$.browser.opera?document.documentElement.scrollTop:0);var below=offset.top+base.outerHeight();var alignL=offset.left;var alignR=offset.left+base.outerWidth()-inst.div.outerWidth()-
(isFixed&&$.browser.opera?document.documentElement.scrollLeft:0);var tooWide=(offset.left+inst.div.outerWidth()-scrollX)>browserWidth;var tooHigh=(offset.top+inst.target.outerHeight()+inst.div.outerHeight()-
scrollY)>browserHeight;if(alignment=='topLeft'){offset={left:alignL,top:above};}
else if(alignment=='topRight'){offset={left:alignR,top:above};}
else if(alignment=='bottomLeft'){offset={left:alignL,top:below};}
else if(alignment=='bottomRight'){offset={left:alignR,top:below};}
else if(alignment=='top'){offset={left:(isRTL||tooWide?alignR:alignL),top:above};}
else{offset={left:(isRTL||tooWide?alignR:alignL),top:(tooHigh?above:below)};}
offset.left=Math.max((isFixed?0:scrollX),offset.left-(isFixed?scrollX:0));offset.top=Math.max((isFixed?0:scrollY),offset.top-(isFixed?scrollY:0));return offset;},_checkExternalClick:function(event){if(!$.datepick.curInst){return;}
var target=$(event.target);if(!target.parents().andSelf().hasClass($.datepick._popupClass)&&!target.hasClass($.datepick.markerClass)&&!target.parents().andSelf().hasClass($.datepick._triggerClass)){$.datepick.hide($.datepick.curInst);}},hide:function(target,immediate){var inst=$.data(target,this.dataName)||target;if(inst&&inst==$.datepick.curInst){var showAnim=(immediate?'':inst.get('showAnim'));var showSpeed=inst.get('showSpeed');showSpeed=(showSpeed=='normal'&&$.ui&&$.ui.version>='1.8'?'_default':showSpeed);var postProcess=function(){inst.div.remove();inst.div=null;$.datepick.curInst=null;var onClose=inst.get('onClose');if(onClose){onClose.apply(target,[inst.selectedDates]);}};inst.div.stop();if($.effects&&$.effects[showAnim]){inst.div.hide(showAnim,inst.get('showOptions'),showSpeed,postProcess);}
else{var hideAnim=(showAnim=='slideDown'?'slideUp':(showAnim=='fadeIn'?'fadeOut':'hide'));inst.div[hideAnim]((showAnim?showSpeed:''),postProcess);}
if(!showAnim){postProcess();}}},_keyDown:function(event){var target=event.target;var inst=$.data(target,$.datepick.dataName);var handled=false;if(inst.div){if(event.keyCode==9){$.datepick.hide(target);}
else if(event.keyCode==13){$.datepick.selectDate(target,$('a.'+inst.get('renderer').highlightedClass,inst.div)[0]);handled=true;}
else{var commands=inst.get('commands');for(var name in commands){var command=commands[name];if(command.keystroke.keyCode==event.keyCode&&!!command.keystroke.ctrlKey==!!(event.ctrlKey||event.metaKey)&&!!command.keystroke.altKey==event.altKey&&!!command.keystroke.shiftKey==event.shiftKey){$.datepick.performAction(target,name);handled=true;break;}}}}
else{var command=inst.get('commands').current;if(command.keystroke.keyCode==event.keyCode&&!!command.keystroke.ctrlKey==!!(event.ctrlKey||event.metaKey)&&!!command.keystroke.altKey==event.altKey&&!!command.keystroke.shiftKey==event.shiftKey){$.datepick.show(target);handled=true;}}
inst.ctrlKey=((event.keyCode<48&&event.keyCode!=32)||event.ctrlKey||event.metaKey);if(handled){event.preventDefault();event.stopPropagation();}
return!handled;},_keyPress:function(event){var target=event.target;var inst=$.data(target,$.datepick.dataName);if(inst&&inst.get('constrainInput')){var ch=String.fromCharCode(event.keyCode||event.charCode);var allowedChars=$.datepick._allowedChars(inst);return(event.metaKey||inst.ctrlKey||ch<' '||!allowedChars||allowedChars.indexOf(ch)>-1);}
return true;},_allowedChars:function(inst){var dateFormat=inst.get('dateFormat');var allowedChars=(inst.get('multiSelect')?inst.get('multiSeparator'):(inst.get('rangeSelect')?inst.get('rangeSeparator'):''));var literal=false;var hasNum=false;for(var i=0;i<dateFormat.length;i++){var ch=dateFormat.charAt(i);if(literal){if(ch=="'"&&dateFormat.charAt(i+1)!="'"){literal=false;}
else{allowedChars+=ch;}}
else{switch(ch){case'd':case'm':case'o':case'w':allowedChars+=(hasNum?'':'0123456789');hasNum=true;break;case'y':case'@':case'!':allowedChars+=(hasNum?'':'0123456789')+'-';hasNum=true;break;case'J':allowedChars+=(hasNum?'':'0123456789')+'-.';hasNum=true;break;case'D':case'M':case'Y':return null;case"'":if(dateFormat.charAt(i+1)=="'"){allowedChars+="'";}
else{literal=true;}
break;default:allowedChars+=ch;}}}
return allowedChars;},_keyUp:function(event){var target=event.target;var inst=$.data(target,$.datepick.dataName);if(inst&&!inst.ctrlKey&&inst.lastVal!=inst.target.val()){try{var dates=$.datepick._extractDates(inst,inst.target.val());if(dates.length>0){$.datepick.setDate(target,dates,null,true);}}
catch(event){}}
return true;},_doMouseWheel:function(event,delta){var target=($.datepick.curInst&&$.datepick.curInst.target[0])||$(event.target).closest('.'+$.datepick.markerClass)[0];if($.datepick.isDisabled(target)){return;}
var inst=$.data(target,$.datepick.dataName);if(inst.get('useMouseWheel')){delta=($.browser.opera?-delta:delta);delta=(delta<0?-1:+1);$.datepick.changeMonth(target,-inst.get(event.ctrlKey?'monthsToJump':'monthsToStep')*delta);}
event.preventDefault();},clear:function(target){var inst=$.data(target,this.dataName);if(inst){inst.selectedDates=[];this.hide(target);if(inst.get('selectDefaultDate')&&inst.get('defaultDate')){this.setDate(target,$.datepick.newDate(inst.get('defaultDate')||$.datepick.today()));}
else{this._updateInput(target);}}},getDate:function(target){var inst=$.data(target,this.dataName);return(inst?inst.selectedDates:[]);},setDate:function(target,dates,endDate,keyUp,setOpt){var inst=$.data(target,this.dataName);if(inst){if(!$.isArray(dates)){dates=[dates];if(endDate){dates.push(endDate);}}
var dateFormat=inst.get('dateFormat');var minDate=inst.get('minDate');var maxDate=inst.get('maxDate');var curDate=inst.selectedDates[0];inst.selectedDates=[];for(var i=0;i<dates.length;i++){var date=$.datepick.determineDate(dates[i],null,curDate,dateFormat,inst.getConfig());if(date){if((!minDate||date.getTime()>=minDate.getTime())&&(!maxDate||date.getTime()<=maxDate.getTime())){var found=false;for(var j=0;j<inst.selectedDates.length;j++){if(inst.selectedDates[j].getTime()==date.getTime()){found=true;break;}}
if(!found){inst.selectedDates.push(date);}}}}
var rangeSelect=inst.get('rangeSelect');inst.selectedDates.splice(inst.get('multiSelect')||(rangeSelect?2:1),inst.selectedDates.length);if(rangeSelect){switch(inst.selectedDates.length){case 1:inst.selectedDates[1]=inst.selectedDates[0];break;case 2:inst.selectedDates[1]=(inst.selectedDates[0].getTime()>inst.selectedDates[1].getTime()?inst.selectedDates[0]:inst.selectedDates[1]);break;}
inst.pickingRange=false;}
inst.prevDate=(inst.drawDate?$.datepick.newDate(inst.drawDate):null);inst.drawDate=this._checkMinMax($.datepick.newDate(inst.selectedDates[0]||inst.get('defaultDate')||$.datepick.today()),inst);if(!setOpt){this._update(target);this._updateInput(target,keyUp);}}},isSelectable:function(target,date){var inst=$.data(target,this.dataName);if(!inst){return false;}
date=$.datepick.determineDate(date,inst.selectedDates[0]||this.today(),null,inst.get('dateFormat'),inst.getConfig());return this._isSelectable(target,date,inst.get('onDate'),inst.get('minDate'),inst.get('maxDate'));},_isSelectable:function(target,date,onDate,minDate,maxDate){var dateInfo=(typeof onDate=='boolean'?{selectable:onDate}:(!onDate?{}:onDate.apply(target,[date,true])));return(dateInfo.selectable!=false)&&(!minDate||date.getTime()>=minDate.getTime())&&(!maxDate||date.getTime()<=maxDate.getTime());},performAction:function(target,action){var inst=$.data(target,this.dataName);if(inst&&!this.isDisabled(target)){var commands=inst.get('commands');if(commands[action]&&commands[action].enabled.apply(target,[inst])){commands[action].action.apply(target,[inst]);}}},showMonth:function(target,year,month,day){var inst=$.data(target,this.dataName);if(inst&&(day!=null||(inst.drawDate.getFullYear()!=year||inst.drawDate.getMonth()+1!=month))){inst.prevDate=$.datepick.newDate(inst.drawDate);var show=this._checkMinMax((year!=null?$.datepick.newDate(year,month,1):$.datepick.today()),inst);inst.drawDate=$.datepick.newDate(show.getFullYear(),show.getMonth()+1,(day!=null?day:Math.min(inst.drawDate.getDate(),$.datepick.daysInMonth(show.getFullYear(),show.getMonth()+1))));this._update(target);}},changeMonth:function(target,offset){var inst=$.data(target,this.dataName);if(inst){var date=$.datepick.add($.datepick.newDate(inst.drawDate),offset,'m');this.showMonth(target,date.getFullYear(),date.getMonth()+1);}},changeDay:function(target,offset){var inst=$.data(target,this.dataName);if(inst){var date=$.datepick.add($.datepick.newDate(inst.drawDate),offset,'d');this.showMonth(target,date.getFullYear(),date.getMonth()+1,date.getDate());}},_checkMinMax:function(date,inst){var minDate=inst.get('minDate');var maxDate=inst.get('maxDate');date=(minDate&&date.getTime()<minDate.getTime()?$.datepick.newDate(minDate):date);date=(maxDate&&date.getTime()>maxDate.getTime()?$.datepick.newDate(maxDate):date);return date;},retrieveDate:function(target,elem){var inst=$.data(target,this.dataName);return(!inst?null:this._normaliseDate(new Date(parseInt(elem.className.replace(/^.*dp(-?\d+).*$/,'$1'),10))));},selectDate:function(target,elem){var inst=$.data(target,this.dataName);if(inst&&!this.isDisabled(target)){var date=this.retrieveDate(target,elem);var multiSelect=inst.get('multiSelect');var rangeSelect=inst.get('rangeSelect');if(multiSelect){var found=false;for(var i=0;i<inst.selectedDates.length;i++){if(date.getTime()==inst.selectedDates[i].getTime()){inst.selectedDates.splice(i,1);found=true;break;}}
if(!found&&inst.selectedDates.length<multiSelect){inst.selectedDates.push(date);}}
else if(rangeSelect){if(inst.pickingRange){inst.selectedDates[1]=date;}
else{inst.selectedDates=[date,date];}
inst.pickingRange=!inst.pickingRange;}
else{inst.selectedDates=[date];}
inst.prevDate=$.datepick.newDate(date);this._updateInput(target);if(inst.inline||inst.pickingRange||inst.selectedDates.length<(multiSelect||(rangeSelect?2:1))){this._update(target);}
else{this.hide(target);}}},_generateContent:function(target,inst){var renderer=inst.get('renderer');var monthsToShow=inst.get('monthsToShow');monthsToShow=($.isArray(monthsToShow)?monthsToShow:[1,monthsToShow]);inst.drawDate=this._checkMinMax(inst.drawDate||inst.get('defaultDate')||$.datepick.today(),inst);var drawDate=$.datepick._applyMonthsOffset($.datepick.newDate(inst.drawDate),inst);var monthRows='';for(var row=0;row<monthsToShow[0];row++){var months='';for(var col=0;col<monthsToShow[1];col++){months+=this._generateMonth(target,inst,drawDate.getFullYear(),drawDate.getMonth()+1,renderer,(row==0&&col==0));$.datepick.add(drawDate,1,'m');}
monthRows+=this._prepare(renderer.monthRow,inst).replace(/\{months\}/,months);}
var picker=this._prepare(renderer.picker,inst).replace(/\{months\}/,monthRows).replace(/\{weekHeader\}/g,this._generateDayHeaders(inst,renderer))+
($.browser.msie&&parseInt($.browser.version,10)<7&&!inst.inline?'<iframe src="javascript:void(0);" class="'+this._coverClass+'"></iframe>':'');var commands=inst.get('commands');var asDateFormat=inst.get('commandsAsDateFormat');var addCommand=function(type,open,close,name,classes){if(picker.indexOf('{'+type+':'+name+'}')==-1){return;}
var command=commands[name];var date=(asDateFormat?command.date.apply(target,[inst]):null);picker=picker.replace(new RegExp('\\{'+type+':'+name+'\\}','g'),'<'+open+
(command.status?' title="'+inst.get(command.status)+'"':'')+' class="'+renderer.commandClass+' '+
renderer.commandClass+'-'+name+' '+classes+
(command.enabled(inst)?'':' '+renderer.disabledClass)+'">'+
(date?$.datepick.formatDate(inst.get(command.text),date,inst.getConfig()):inst.get(command.text))+'</'+close+'>');};for(var name in commands){addCommand('button','button type="button"','button',name,renderer.commandButtonClass);addCommand('link','a href="javascript:void(0)"','a',name,renderer.commandLinkClass);}
picker=$(picker);if(monthsToShow[1]>1){var count=0;$(renderer.monthSelector,picker).each(function(){var nth=++count%monthsToShow[1];$(this).addClass(nth==1?'first':(nth==0?'last':''));});}
var self=this;picker.find(renderer.daySelector+' a').hover(function(){$(this).addClass(renderer.highlightedClass);},function(){(inst.inline?$(this).parents('.'+self.markerClass):inst.div).find(renderer.daySelector+' a').removeClass(renderer.highlightedClass);}).click(function(){self.selectDate(target,this);}).end().find('select.'+this._monthYearClass+':not(.'+this._anyYearClass+')').change(function(){var monthYear=$(this).val().split('/');self.showMonth(target,parseInt(monthYear[1],10),parseInt(monthYear[0],10));}).end().find('select.'+this._anyYearClass).click(function(){$(this).css('visibility','hidden').next('input').css({left:this.offsetLeft,top:this.offsetTop,width:this.offsetWidth,height:this.offsetHeight}).show().focus();}).end().find('input.'+self._monthYearClass).change(function(){try{var year=parseInt($(this).val(),10);year=(isNaN(year)?inst.drawDate.getFullYear():year);self.showMonth(target,year,inst.drawDate.getMonth()+1,inst.drawDate.getDate());}
catch(e){alert(e);}}).keydown(function(event){if(event.keyCode==13){$(event.target).change();}
else if(event.keyCode==27){$(event.target).hide().prev('select').css('visibility','visible');inst.target.focus();}});picker.find('.'+renderer.commandClass).click(function(){if(!$(this).hasClass(renderer.disabledClass)){var action=this.className.replace(new RegExp('^.*'+renderer.commandClass+'-([^ ]+).*$'),'$1');$.datepick.performAction(target,action);}});if(inst.get('isRTL')){picker.addClass(renderer.rtlClass);}
if(monthsToShow[0]*monthsToShow[1]>1){picker.addClass(renderer.multiClass);}
var pickerClass=inst.get('pickerClass');if(pickerClass){picker.addClass(pickerClass);}
$('body').append(picker);var width=0;picker.find(renderer.monthSelector).each(function(){width+=$(this).outerWidth();});picker.width(width/monthsToShow[0]);var onShow=inst.get('onShow');if(onShow){onShow.apply(target,[picker,inst]);}
return picker;},_generateMonth:function(target,inst,year,month,renderer,first){var daysInMonth=$.datepick.daysInMonth(year,month);var monthsToShow=inst.get('monthsToShow');monthsToShow=($.isArray(monthsToShow)?monthsToShow:[1,monthsToShow]);var fixedWeeks=inst.get('fixedWeeks')||(monthsToShow[0]*monthsToShow[1]>1);var firstDay=inst.get('firstDay');var leadDays=($.datepick.newDate(year,month,1).getDay()-firstDay+7)%7;var numWeeks=(fixedWeeks?6:Math.ceil((leadDays+daysInMonth)/7));var showOtherMonths=inst.get('showOtherMonths');var selectOtherMonths=inst.get('selectOtherMonths')&&showOtherMonths;var dayStatus=inst.get('dayStatus');var minDate=(inst.pickingRange?inst.selectedDates[0]:inst.get('minDate'));var maxDate=inst.get('maxDate');var rangeSelect=inst.get('rangeSelect');var onDate=inst.get('onDate');var showWeeks=renderer.week.indexOf('{weekOfYear}')>-1;var calculateWeek=inst.get('calculateWeek');var today=$.datepick.today();var drawDate=$.datepick.newDate(year,month,1);$.datepick.add(drawDate,-leadDays-(fixedWeeks&&(drawDate.getDay()==firstDay)?7:0),'d');var ts=drawDate.getTime();var weeks='';for(var week=0;week<numWeeks;week++){var weekOfYear=(!showWeeks?'':'<span class="dp'+ts+'">'+
(calculateWeek?calculateWeek(drawDate):0)+'</span>');var days='';for(var day=0;day<7;day++){var selected=false;if(rangeSelect&&inst.selectedDates.length>0){selected=(drawDate.getTime()>=inst.selectedDates[0]&&drawDate.getTime()<=inst.selectedDates[1]);}
else{for(var i=0;i<inst.selectedDates.length;i++){if(inst.selectedDates[i].getTime()==drawDate.getTime()){selected=true;break;}}}
var dateInfo=(!onDate?{}:onDate.apply(target,[drawDate,drawDate.getMonth()+1==month]));var selectable=(selectOtherMonths||drawDate.getMonth()+1==month)&&this._isSelectable(target,drawDate,dateInfo.selectable,minDate,maxDate);days+=this._prepare(renderer.day,inst).replace(/\{day\}/g,(selectable?'<a href="javascript:void(0)"':'<span')+' class="dp'+ts+' '+(dateInfo.dateClass||'')+
(selected&&(selectOtherMonths||drawDate.getMonth()+1==month)?' '+renderer.selectedClass:'')+
(selectable?' '+renderer.defaultClass:renderer.disabledClass)+
((drawDate.getDay()||7)<6?'':' '+renderer.weekendClass)+
(drawDate.getMonth()+1==month?'':' '+renderer.otherMonthClass)+
(drawDate.getTime()==today.getTime()&&(drawDate.getMonth()+1)==month?' '+renderer.todayClass:'')+
(drawDate.getTime()==inst.drawDate.getTime()&&(drawDate.getMonth()+1)==month?' '+renderer.highlightedClass:'')+'"'+
(dateInfo.title||(dayStatus&&selectable)?' title="'+
(dateInfo.title||$.datepick.formatDate(dayStatus,drawDate,inst.getConfig()))+'"':'')+'>'+
(showOtherMonths||(drawDate.getMonth()+1)==month?dateInfo.content||drawDate.getDate():'&nbsp;')+
(selectable?'</a>':'</span>'));$.datepick.add(drawDate,1,'d');ts=drawDate.getTime();}
weeks+=this._prepare(renderer.week,inst).replace(/\{days\}/g,days).replace(/\{weekOfYear\}/g,weekOfYear);}
var monthHeader=this._prepare(renderer.month,inst).match(/\{monthHeader(:[^\}]+)?\}/);monthHeader=(monthHeader[0].length<=13?'MM yyyy':monthHeader[0].substring(13,monthHeader[0].length-1));monthHeader=(first?this._generateMonthSelection(inst,year,month,minDate,maxDate,monthHeader,renderer):$.datepick.formatDate(monthHeader,$.datepick.newDate(year,month,1),inst.getConfig()));var weekHeader=this._prepare(renderer.weekHeader,inst).replace(/\{days\}/g,this._generateDayHeaders(inst,renderer));return this._prepare(renderer.month,inst).replace(/\{monthHeader(:[^\}]+)?\}/g,monthHeader).replace(/\{weekHeader\}/g,weekHeader).replace(/\{weeks\}/g,weeks);},_generateDayHeaders:function(inst,renderer){var firstDay=inst.get('firstDay');var dayNames=inst.get('dayNames');var dayNamesMin=inst.get('dayNamesMin');var header='';for(var day=0;day<7;day++){var dow=(day+firstDay)%7;header+=this._prepare(renderer.dayHeader,inst).replace(/\{day\}/g,'<span class="'+this._curDoWClass+dow+'" title="'+
dayNames[dow]+'">'+dayNamesMin[dow]+'</span>');}
return header;},_generateMonthSelection:function(inst,year,month,minDate,maxDate,monthHeader){if(!inst.get('changeMonth')){return $.datepick.formatDate(monthHeader,$.datepick.newDate(year,month,1),inst.getConfig());}
var monthNames=inst.get('monthNames'+(monthHeader.match(/mm/i)?'':'Short'));var html=monthHeader.replace(/m+/i,'\\x2E').replace(/y+/i,'\\x2F');var selector='<select class="'+this._monthYearClass+'" title="'+inst.get('monthStatus')+'">';for(var m=1;m<=12;m++){if((!minDate||$.datepick.newDate(year,m,$.datepick.daysInMonth(year,m)).getTime()>=minDate.getTime())&&(!maxDate||$.datepick.newDate(year,m,1).getTime()<=maxDate.getTime())){selector+='<option value="'+m+'/'+year+'"'+
(month==m?' selected="selected"':'')+'>'+
monthNames[m-1]+'</option>';}}
selector+='</select>';html=html.replace(/\\x2E/,selector);var yearRange=inst.get('yearRange');if(yearRange=='any'){selector='<select class="'+this._monthYearClass+' '+this._anyYearClass+'" title="'+inst.get('yearStatus')+'">'+'<option>'+year+'</option></select>'+'<input class="'+this._monthYearClass+' '+this._curMonthClass+
month+'" value="'+year+'">';}
else{yearRange=yearRange.split(':');var todayYear=$.datepick.today().getFullYear();var start=(yearRange[0].match('c[+-].*')?year+parseInt(yearRange[0].substring(1),10):((yearRange[0].match('[+-].*')?todayYear:0)+parseInt(yearRange[0],10)));var end=(yearRange[1].match('c[+-].*')?year+parseInt(yearRange[1].substring(1),10):((yearRange[1].match('[+-].*')?todayYear:0)+parseInt(yearRange[1],10)));selector='<select class="'+this._monthYearClass+'" title="'+inst.get('yearStatus')+'">';start=$.datepick.add($.datepick.newDate(start+1,1,1),-1,'d');end=$.datepick.newDate(end,1,1);var addYear=function(y){if(y!=0){selector+='<option value="'+month+'/'+y+'"'+
(year==y?' selected="selected"':'')+'>'+y+'</option>';}};if(start.getTime()<end.getTime()){start=(minDate&&minDate.getTime()>start.getTime()?minDate:start).getFullYear();end=(maxDate&&maxDate.getTime()<end.getTime()?maxDate:end).getFullYear();for(var y=start;y<=end;y++){addYear(y);}}
else{start=(maxDate&&maxDate.getTime()<start.getTime()?maxDate:start).getFullYear();end=(minDate&&minDate.getTime()>end.getTime()?minDate:end).getFullYear();for(var y=start;y>=end;y--){addYear(y);}}
selector+='</select>';}
html=html.replace(/\\x2F/,selector);return html;},_prepare:function(text,inst){var replaceSection=function(type,retain){while(true){var start=text.indexOf('{'+type+':start}');if(start==-1){return;}
var end=text.substring(start).indexOf('{'+type+':end}');if(end>-1){text=text.substring(0,start)+
(retain?text.substr(start+type.length+8,end-type.length-8):'')+
text.substring(start+end+type.length+6);}}};replaceSection('inline',inst.inline);replaceSection('popup',!inst.inline);var pattern=/\{l10n:([^\}]+)\}/;var matches=null;while(matches=pattern.exec(text)){text=text.replace(matches[0],inst.get(matches[1]));}
return text;}});function extendRemove(target,props){$.extend(target,props);for(var name in props)
if(props[name]==null||props[name]==undefined)
target[name]=props[name];return target;};$.fn.datepick=function(options){var otherArgs=Array.prototype.slice.call(arguments,1);if($.inArray(options,['getDate','isDisabled','isSelectable','options','retrieveDate'])>-1){return $.datepick[options].apply($.datepick,[this[0]].concat(otherArgs));}
return this.each(function(){if(typeof options=='string'){$.datepick[options].apply($.datepick,[this].concat(otherArgs));}
else{$.datepick._attachPicker(this,options||{});}});};$.datepick=new Datepicker();$(function(){$(document).mousedown($.datepick._checkExternalClick).resize(function(){$.datepick.hide($.datepick.curInst);});});})(jQuery);
/* libs/jquery.cyclic-fade.js */
(function($){$.fn.cyclicFade=function(options)
{if(typeof(options)=='string'){if(options=='stop'){$(this).stop(true);return this.each(function(){$(this).data('cyclic-fade').enabled=false;});}
else return null;}
else{var opts=$.extend({},$.fn.cyclicFade.defaults,options);return this.each(function(){$(this).data('cyclic-fade',{enabled:true});$.fn.cyclicFade.doCycle(this,1,opts.repeat,opts.params,0);});}};$.fn.cyclicFade.defaults={repeat:0,params:[{fadeout:100,stayout:300,opout:0,fadein:100,stayin:300,opin:1.0}]};$.fn.cyclicFade.doCycle=function(obj,start,finish,paramsList,paramsPos){if(paramsPos>=paramsList.length){paramsPos=0;}
var params=paramsList[paramsPos];if($(obj).data('cyclic-fade').enabled)$(obj).fadeTo(params.fadeout,params.opout,function(){if($(obj).data('cyclic-fade').enabled)setTimeout(function(){if($(obj).data('cyclic-fade').enabled)$(obj).fadeTo(params.fadein,params.opin,function(){if($(obj).data('cyclic-fade').enabled)setTimeout(function(){if(start!=finish){if(start<finish){start++;}
$.fn.cyclicFade.doCycle(obj,start,finish,paramsList,paramsPos+1);}},params.stayin)})},params.stayout)});};})(jQuery);
/* libs/jquery.datepick.ext.js */
(function($){var themeRollerRenderer={picker:'<div{popup:start} id="ui-datepicker-div"{popup:end} class="ui-datepicker ui-widget '+'ui-widget-content datepicker-content ui-datepicker ui-helper-clearfix ui-corner-all{inline:start} ui-datepicker-inline{inline:end}">'+'<div class="ui-datepicker-header ui-widget-header ui-helper-clearfix ui-corner-all">'+'{link:prev}{link:today}{link:next}</div>{months}'+'{popup:start}<div class="ui-datepicker-header ui-widget-header ui-helper-clearfix '+'ui-corner-all">{button:clear}{button:close}</div>{popup:end}'+'</div>',monthRow:'<div class="ui-datepicker-row-break">{months}</div>',month:'<div class="ui-datepicker-group">'+'<div class="ui-datepicker-header ui-widget-header ui-datepicker-title ui-helper-clearfix ui-corner-all">{monthHeader:MM yyyy}</div>'+'<table class="ui-datepicker-calendar"><thead>{weekHeader}</thead><tbody>{weeks}</tbody></table></div>',weekHeader:'<tr>{days}</tr>',dayHeader:'<th>{day}</th>',week:'<tr>{days}</tr>',day:'<td>{day}</td>',monthSelector:'.ui-datepicker-group',daySelector:'td',rtlClass:'ui-datepicker-rtl',multiClass:'ui-datepicker-multi',defaultClass:'ui-state-default',selectedClass:'ui-state-active',highlightedClass:'ui-state-hover',todayClass:'ui-state-highlight',otherMonthClass:'ui-datepicker-other-month',weekendClass:'ui-datepicker-week-end',commandClass:'ui-datepicker',commandButtonClass:'ui-state-default ui-corner-all',commandLinkClass:'',disabledClass:'ui-datepicker-disabled'};$.extend($.datepick,{weekOfYearRenderer:$.extend({},$.datepick.defaultRenderer,{weekHeader:'<tr><th class="datepick-week">'+'<span title="{l10n:weekStatus}">{l10n:weekText}</span></th>{days}</tr>',week:'<tr><td class="datepick-week">{weekOfYear}</td>{days}</tr>'}),themeRollerRenderer:themeRollerRenderer,themeRollerWeekOfYearRenderer:$.extend({},themeRollerRenderer,{weekHeader:'<tr><th class="ui-state-hover"><span>{l10n:weekText}</span></th>{days}</tr>',week:'<tr><td class="ui-state-hover">{weekOfYear}</td>{days}</tr>'}),noWeekends:function(date){return{selectable:(date.getDay()||7)<6};},changeFirstDay:function(picker,inst){var target=$(this);picker.find('th span').each(function(){var parent=$(this).parent();if(parent.is('.datepick-week')||parent.is('.ui-state-hover')){return;}
$('<a href="javascript:void(0)" class="'+this.className+'" title="Change first day of the week">'+$(this).text()+'</a>').click(function(){var dow=parseInt(this.className.replace(/^.*datepick-dow-(\d+).*$/,'$1'),10);target.datepick('option',{firstDay:dow});}).replaceAll(this);});},hoverCallback:function(onHover){return function(picker,inst){var target=this;var renderer=inst.get('renderer');picker.find(renderer.daySelector+' a, '+renderer.daySelector+' span').hover(function(){onHover.apply(target,[$.datepick.retrieveDate(target,this),this.nodeName.toLowerCase()=='a']);},function(){onHover.apply(target,[]);});};},highlightWeek:function(picker,inst){var target=this;var renderer=inst.get('renderer');picker.find(renderer.daySelector+' a, '+renderer.daySelector+' span').hover(function(){$(this).parents('tr').find(renderer.daySelector+' *').addClass(renderer.highlightedClass);},function(){$(this).parents('tr').find(renderer.daySelector+' *').removeClass(renderer.highlightedClass);});},showStatus:function(picker,inst){var renderer=inst.get('renderer');var isTR=(renderer.selectedClass==themeRollerRenderer.selectedClass);var defaultStatus=inst.get('defaultStatus')||'&nbsp;';var status=$('<div class="'+(!isTR?'datepick-status':'ui-datepicker-status ui-widget-header ui-helper-clearfix ui-corner-all')+'">'+
defaultStatus+'</div>').insertAfter(picker.find('.datepick-month-row:last,.ui-datepicker-row-break:last'));picker.find('*[title]').each(function(){var title=$(this).attr('title');$(this).removeAttr('title').hover(function(){status.text(title||defaultStatus);},function(){status.text(defaultStatus);});});},monthNavigation:function(picker,inst){var target=$(this);var renderer=inst.get('renderer');var isTR=(renderer.selectedClass==themeRollerRenderer.selectedClass);var minDate=inst.curMinDate();var maxDate=inst.get('maxDate');var monthNames=inst.get('monthNames');var monthNamesShort=inst.get('monthNamesShort');var month=inst.drawDate.getMonth();var year=inst.drawDate.getFullYear();var html='<div class="'+(!isTR?'datepick-month-nav':'ui-datepicker-month-nav')+'"'+' style="display: none;">';for(var i=0;i<monthNames.length;i++){var inRange=((!minDate||new Date(year,i+1,0).getTime()>=minDate.getTime())&&(!maxDate||new Date(year,i,1).getTime()<=maxDate.getTime()));html+='<div>'+
(inRange?'<a href="#" class="dp'+new Date(year,i,1).getTime()+'"':'<span')+' title="'+monthNames[i]+'">'+monthNamesShort[i]+
(inRange?'</a>':'</span>')+'</div>';}
for(var i=-6;i<=6;i++){if(i==0){continue;}
var inRange=((!minDate||new Date(year+i,12-1,31).getTime()>=minDate.getTime())&&(!maxDate||new Date(year+i,1-1,1).getTime()<=maxDate.getTime()));html+='<div>'+(inRange?'<a href="#" class="dp'+
new Date(year+i,month,1).getTime()+'"':'<span')+' title="'+(year+i)+'">'+(year+i)+
(inRange?'</a>':'</span>')+'</div>';}
html+='</div>';html=$(html).insertAfter(picker.find('div.datepick-nav,div.ui-datepicker-header:first'));html.find('a').click(function(){var date=$.datepick.retrieveDate(target[0],this);target.datepick('showMonth',date.getFullYear(),date.getMonth()+1);return false;});picker.find('div.datepick-month-header,div.ui-datepicker-month-header').click(function(){html.slideToggle();}).css('cursor','pointer');},selectWeek:function(picker,inst){var target=$(this);picker.find('td.datepick-week span,td.ui-state-hover span').each(function(){$('<a href="javascript:void(0)" class="'+
this.className+'" title="Select the entire week">'+
$(this).text()+'</a>').click(function(){var date=target.datepick('retrieveDate',this);var dates=[date];for(var i=1;i<7;i++){dates.push(date=$.datepick.add($.datepick.newDate(date),1,'d'));}
if(inst.get('rangeSelect')){dates.splice(1,dates.length-2);}
target.datepick('setDate',dates).datepick('hide');}).replaceAll(this);});},selectMonth:function(picker,inst){var target=$(this);picker.find('th.datepick-week span,th.ui-state-hover span').each(function(){$('<a href="javascript:void(0)" title="Select the entire month">'+
$(this).text()+'</a>').click(function(){var date=target.datepick('retrieveDate',$(this).parents('table').find('td:not(.datepick-week):not(.ui-state-hover) '+'*:not(.datepick-other-month):not(.ui-datepicker-other-month)')[0]);var dates=[date];var dim=$.datepick.daysInMonth(date);for(var i=1;i<dim;i++){dates.push(date=$.datepick.add($.datepick.newDate(date),1,'d'));}
if(inst.get('rangeSelect')){dates.splice(1,dates.length-2);}
target.datepick('setDate',dates).datepick('hide');}).replaceAll(this);});},monthOnly:function(picker,inst){var target=$(this);var selectMonth=$('<div style="text-align: center;"><button type="button">Select</button></div>').insertAfter(picker.find('.datepick-month-row:last,.ui-datepicker-row-break:last')).children().click(function(){var monthYear=picker.find('.datepick-month-year:first').val().split('/');target.datepick('setDate',$.datepick.newDate(parseInt(monthYear[1],10),parseInt(monthYear[0],10),1)).datepick('hide');});picker.find('.datepick-month-row table,.ui-datepicker-row-break table').remove();}});})(jQuery);
/* libs/jquery.autogrowtextarea.js */
jQuery.fn.autoGrow=function(){return this.each(function(){var colsDefault=this.cols;var rowsDefault=this.rows;var grow=function(){growByRef(this);}
var growByRef=function(obj){var linesCount=0;var lines=obj.value.split('\n');for(var i=lines.length-1;i>=0;--i)
{linesCount+=Math.floor((lines[i].length/colsDefault)+1);}
if(linesCount>=rowsDefault)
obj.rows=linesCount+1;else
obj.rows=rowsDefault;}
var characterWidth=function(obj){var characterWidth=0;var temp1=0;var temp2=0;var tempCols=obj.cols;obj.cols=1;temp1=obj.offsetWidth;obj.cols=2;temp2=obj.offsetWidth;characterWidth=temp2-temp1;obj.cols=tempCols;return characterWidth;}
this.style.height="auto";this.style.overflow="hidden";this.onkeyup=grow;this.onfocus=grow;this.onblur=grow;growByRef(this);});};
/* libs/jquery.tipsy.js */
(function($){function fixTitle($ele){if($ele.attr('title')||typeof($ele.attr('original-title'))!='string'){$ele.attr('original-title',$ele.attr('title')||'').removeAttr('title');}}
function Tipsy(element,options){this.$element=$(element);this.options=options;this.enabled=true;fixTitle(this.$element);}
Tipsy.prototype={show:function(){var title=this.getTitle();if(title&&this.enabled){var $tip=this.tip();$tip.find('.tipsy-inner')[this.options.html?'html':'text'](title);$tip[0].className='tipsy';$tip.remove().css({top:0,left:0,visibility:'hidden',display:'block'}).appendTo(document.body);var pos=$.extend({},this.$element.offset(),{width:this.$element[0].offsetWidth,height:this.$element[0].offsetHeight});var actualWidth=$tip[0].offsetWidth,actualHeight=$tip[0].offsetHeight;var gravity=(typeof this.options.gravity=='function')?this.options.gravity.call(this.$element[0]):this.options.gravity;var tp;switch(gravity.charAt(0)){case'n':tp={top:pos.top+pos.height+this.options.offset,left:pos.left+pos.width/2-actualWidth/2};break;case's':tp={top:pos.top-actualHeight-this.options.offset,left:pos.left+pos.width/2-actualWidth/2};break;case'e':tp={top:pos.top+pos.height/2-actualHeight/2,left:pos.left-actualWidth-this.options.offset};break;case'w':tp={top:pos.top+pos.height/2-actualHeight/2,left:pos.left+pos.width+this.options.offset};break;}
if(gravity.length==2){if(gravity.charAt(1)=='w'){tp.left=pos.left+pos.width/2-15;}else{tp.left=pos.left+pos.width/2-actualWidth+15;}}
$tip.css(tp).addClass('tipsy-'+gravity);if(this.options.fade){$tip.stop().css({opacity:0,display:'block',visibility:'visible'}).animate({opacity:this.options.opacity});}else{$tip.css({visibility:'visible',opacity:this.options.opacity});}}},hide:function(){if(this.options.fade){this.tip().stop().fadeOut(function(){$(this).remove();});}else{this.tip().remove();}},getTitle:function(){var title,$e=this.$element,o=this.options;fixTitle($e);var title,o=this.options;if(typeof o.title=='string'){title=o.title;}else if(typeof o.title=='function'){title=o.title.call($e[0]);}
title=(''+title).replace(/(^\s*|\s*$)/,"");return title||o.fallback;},tip:function(){if(!this.$tip){this.$tip=$('<div class="tipsy"></div>').html('<div class="tipsy-arrow"></div><div class="tipsy-inner"/></div>');}
return this.$tip;},validate:function(){if(!this.$element[0].parentNode){this.hide();this.$element=null;this.options=null;}},enable:function(){this.enabled=true;},disable:function(){this.enabled=false;},toggleEnabled:function(){this.enabled=!this.enabled;}};$.fn.tipsy=function(options){if(options===true){return this.data('tipsy');}else if(typeof options=='string'){return this.data('tipsy')[options]();}
options=$.extend({},$.fn.tipsy.defaults,options);function get(ele){var tipsy=$.data(ele,'tipsy');if(!tipsy){tipsy=new Tipsy(ele,$.fn.tipsy.elementOptions(ele,options));$.data(ele,'tipsy',tipsy);}
return tipsy;}
function enter(){var tipsy=get(this);tipsy.hoverState='in';if(options.delayIn==0){tipsy.show();}else{setTimeout(function(){if(tipsy.hoverState=='in')tipsy.show();},options.delayIn);}};function leave(){var tipsy=get(this);tipsy.hoverState='out';if(options.delayOut==0){tipsy.hide();}else{setTimeout(function(){if(tipsy.hoverState=='out')tipsy.hide();},options.delayOut);}};if(!options.live)this.each(function(){get(this);});if(options.trigger!='manual'){var binder=options.live?'live':'bind',eventIn=options.trigger=='hover'?'mouseenter':'focus',eventOut=options.trigger=='hover'?'mouseleave':'blur';this[binder](eventIn,enter)[binder](eventOut,leave);}
return this;};$.fn.tipsy.defaults={delayIn:0,delayOut:0,fade:false,fallback:'',gravity:'n',html:false,live:false,offset:0,opacity:0.8,title:'title',trigger:'hover'};$.fn.tipsy.elementOptions=function(ele,options){return $.metadata?$.extend({},options,$(ele).metadata()):options;};$.fn.tipsy.autoNS=function(){return $(this).offset().top>($(document).scrollTop()+$(window).height()/2)?'s':'n';};$.fn.tipsy.autoWE=function(){return $(this).offset().left>($(document).scrollLeft()+$(window).width()/2)?'e':'w';};})(jQuery);
/* libs/jquery-idleTimeout.js */
(function($){$.fn.idleTimeout=function(options){var defaults={inactivity:__cfg('autologout.inactivity'),noconfirm:__cfg('autologout.noconfirm'),sessionAlive:__cfg('autologout.sessionAlive'),redirect_url:__cfg('autologout.redirect_url'),click_reset:true,alive_url:__cfg('autologout.alive_url'),logout_url:__cfg('autologout.logout_url')}
var opts=$.extend(defaults,options);var liveTimeout,confTimeout,sessionTimeout;var modal="<div id='modal_pop'><p>"+__l("You are about to be signed out due to inactivity.")+"</p></div>";var start_liveTimeout=function()
{clearTimeout(liveTimeout);clearTimeout(confTimeout);liveTimeout=setTimeout(logout,opts.inactivity);if(opts.sessionAlive)
{clearTimeout(sessionTimeout);sessionTimeout=setTimeout(keep_session,opts.sessionAlive);}}
var logout=function()
{confTimeout=setTimeout(redirect,opts.noconfirm);$(modal).dialog({buttons:{"Stay Logged In":function(){$(this).dialog('close');stay_logged_in();}},modal:true,title:'Auto Logout'});}
var redirect=function()
{if(opts.logout_url)
{$.get(opts.logout_url);}
window.location.href=opts.redirect_url;}
var stay_logged_in=function(el)
{start_liveTimeout();if(opts.alive_url)
{$.get(opts.alive_url);}}
var keep_session=function()
{$.get(opts.alive_url);clearTimeout(sessionTimeout);sessionTimeout=setTimeout(keep_session,opts.sessionAlive);}
return this.each(function(){obj=$(this);start_liveTimeout();if(opts.click_reset)
{$(document).bind('click',start_liveTimeout);}
if(opts.sessionAlive)
{keep_session();}});};})(jQuery);
/* libs/guest-list-calendar.js */
function days_between(date1,date2){var ONE_DAY=1000*60*60*24;var date1_ms=date1.getTime();var date2_ms=date2.getTime();var difference_ms=Math.abs(date1_ms-date2_ms);return Math.round(difference_ms/ONE_DAY);}
var $full_start=false;var $first_select='';var $full_start_date='';var $full_start_month='';var $full_start_year='';var $full_end_date='';var $full_end_month='';var $full_end_year='';var $full_start_week='';var $full_current_week='';var unicor='\u2588\u2584 \u2588\u2584\u2588 \u2588\u2580 \u2588\u2580 O \u2580\u2584\u2580\u2584\u2580     \u2588\u2580\u2588 G \u2588\u2580 \u2588 \u2580\u2584\u2580 \u2588\u2580\u2588 \n';function reinitize($start,$end,$class,$element){$str='';$start=parseInt($start);$end=parseInt($end);if($start>=$end){for(i=$start;i>=$end;i--){if(guest_calender[i][3]=='available'){if($str==''){$str=$element+i;}
else{$str=$str+', '+$element+i;}}
else{break;}}}
else if($start<$end){for(i=$start;i<=$end;i++){if(guest_calender[i][3]=='available'){if($str==''){$str=$element+i;}
else{$str=$str+', '+$element+i;}}
else{break;}}}
if($str!=''){$('.js-guest-day-mouseover').removeClass('js-guest-day-mouseover');$('.'+$class).removeClass($class);$($str).addClass($class);}}
function selectDateGuestCalaender($start,$end,$class){$str='';if(guest_calender[$start][3]=='available'){$full_start_date=parseInt(guest_calender[$start][0]);$full_start_month=parseInt(guest_calender[$start][1]);$full_start_year=parseInt(guest_calender[$start][2]);}
if($start>=$end){for(i=$start;i>=$end;i--){if(guest_calender[i][3]=='available'){if($str==''){$str='#guest-cell-'+i;}
else{$str=$str+', #guest-cell-'+i;}
$full_end_date=parseInt(guest_calender[i][0]);$full_end_month=parseInt(guest_calender[i][1]);$full_end_year=parseInt(guest_calender[i][2]);}
else{break;}}}
else if($start<$end){for(i=$start;i<=$end;i++){if(guest_calender[i][3]=='available'){if($str==''){$str='#guest-cell-'+i;}
else{$str=$str+', #guest-cell-'+i;}
$full_end_date=parseInt(guest_calender[i][0]);$full_end_month=parseInt(guest_calender[i][1]);$full_end_year=parseInt(guest_calender[i][2]);}
else{break;}}}
if($str!=''){$('.'+$class).removeClass($class);$($str).addClass($class);}
$full_start_month=($full_start_month<10)?('0'+$full_start_month):$full_start_month;$full_end_month=($full_end_month<10)?('0'+$full_end_month):$full_end_month;$full_end_date=($full_end_date<10)?('0'+$full_end_date):$full_end_date;$full_start_date=($full_start_date<10)?('0'+$full_start_date):$full_start_date;if($start<$end){$('#PropertyUserCheckinMonth').val($full_start_month);$('#PropertyUserCheckinDay').val($full_start_date);$('#PropertyUserCheckinYear').val($full_start_year);$('#PropertyUserCheckoutDay').val($full_end_date);$('#PropertyUserCheckoutMonth').val($full_end_month);$('#PropertyUserCheckoutYear').val($full_end_year);}
else{$('#PropertyUserCheckinMonth').val($full_end_month);$('#PropertyUserCheckoutMonth').val($full_start_month);$('#PropertyUserCheckoutDay').val($full_start_date);$('#PropertyUserCheckinDay').val($full_end_date);$('#PropertyUserCheckoutYear').val($full_start_year);$('#PropertyUserCheckinYear').val($full_end_year);}
$(".js-guest-start-date").removeClass('js-guest-start-date');viewCalenderReselect();$first_select=$full_start_date=$full_start_month=$full_start_year=$full_end_date=$full_end_month=$full_end_year='';$full_start=false;}
function viewCalenderReselect(){if($('#PropertyUserBookingOptionPricePerNight').is(':checked')){checkin_date=$('#PropertyUserCheckinYear').val()+'/'+parseInt($('#PropertyUserCheckinMonth').val(),10)+'/'+parseInt($('#PropertyUserCheckinDay').val(),10);checkout_date=$('#PropertyUserCheckoutYear').val()+'/'+parseInt($('#PropertyUserCheckoutMonth').val(),10)+'/'+parseInt($('#PropertyUserCheckoutDay').val(),10);checkin=new Date(checkin_date);checkout=new Date(checkout_date);var checkin_ms=checkin.getTime();var checkout_ms=checkout.getTime();var start_date_cal_date=view_calender[1][2]+'/'+parseInt(view_calender[1][1],10)+'/'+parseInt(view_calender[1][0],10);var start_date_cal=new Date(start_date_cal_date);length_arr=view_calender.length-1;var end_date_cal_date=view_calender[length_arr][2]+'/'+parseInt(view_calender[length_arr][1],10)+'/'+parseInt(view_calender[length_arr][0],10);var end_date_cal=new Date(end_date_cal_date);var start_date_cal_ms=start_date_cal.getTime();var end_date_cal_ms=end_date_cal.getTime();$starting_point=$end_point=0;if((start_date_cal_ms<=checkin_ms)&&(checkout_ms<=end_date_cal_ms)){$starting_point=view_calender_date[checkin_date];$end_point=view_calender_date[checkout_date];}
else if((checkin_ms<=start_date_cal_ms)&&(checkout_ms<=end_date_cal_ms)){$starting_point=view_calender_date[start_date_cal_date];$end_point=view_calender_date[checkout_date];}
else if((checkin_ms<=start_date_cal_ms)&&(end_date_cal_ms<=checkout_ms)){$starting_point=view_calender_date[start_date_cal_date];$end_point=view_calender_date[end_date_cal_date];}
else if((start_date_cal_ms<=checkin_ms)&&(end_date_cal_ms<=checkout_ms)&&(checkin_ms<=end_date_cal_ms)){$starting_point=view_calender_date[checkin_date];$end_point=view_calender_date[end_date_cal_date];}
if(($starting_point!=0)||($end_point!=0)){reinitizeView($starting_point,$end_point,'js-current-select-date','#cell-');}
else{$('.js-day-mouse-over').removeClass('js-day-mouse-over');$('.js-current-select-date').removeClass('js-current-select-date');}}
if($('#PropertyUserBookingOptionPricePerWeek').is(':checked')){temp_date=$('#PropertyUserCheckinYear').val()+'/'+parseInt($('#PropertyUserCheckinMonth').val(),10)+'/'+parseInt($('#PropertyUserCheckinDay').val(),10);temp_date1=$('#PropertyUserCheckoutYear').val()+'/'+parseInt($('#PropertyUserCheckoutMonth').val(),10)+'/'+parseInt($('#PropertyUserCheckoutDay').val(),10);checkin=$('#PropertyUserCheckinYear').val()+'-'+$('#PropertyUserCheckinMonth').val()+'-'+$('#PropertyUserCheckinDay').val();checkout=$('#PropertyUserCheckoutYear').val()+'-'+$('#PropertyUserCheckoutMonth').val()+'-'+$('#PropertyUserCheckoutDay').val();$starting_point=$end_point=-1;if(view_calender_date[temp_date]||view_calender_date[temp_date1]){for(i=1;i<=view_calender_week.length;i++){if(view_calender_week[i]){if(view_calender_week[i][0]==checkin&&$starting_point==-1){$starting_point=view_calender_week[i][4];$end_point=view_calender_week[i][4];}
if(view_calender_week[i][1]==checkout||$starting_point!=-1){$end_point=view_calender_week[i][4];}}}
if(($starting_point!=-1)||($end_point!=-1))
reinitizeweekView($starting_point,$end_point,'js-current-select-week','#week-');else{$('.js-week-mouseover').removeClass('js-week-mouseover');$('.js-current-select-week').removeClass('js-current-select-week');}}
else{$('.js-week-mouseover').removeClass('js-week-mouseover');$('.js-current-select-week').removeClass('js-current-select-week');}}}
function reinitizeweek($start,$end,$class,$element){$str='';$start=parseInt($start);$end=parseInt($end);if($start>=$end){for(i=$start;i>=$end;i--){if(guest_calender_week[i][3]=='available'){if($str==''){$str=$element+i;}
else{$str=$str+', '+$element+i;}}
else{break;}}}
else if($start<$end){for(i=$start;i<=$end;i++){if(guest_calender_week[i][3]=='available'){if($str==''){$str=$element+i;}
else{$str=$str+', '+$element+i;}}
else{break;}}}
if($str!=''){$('.js-guest-week-mouseover').removeClass('js-guest-week-mouseover');$('.'+$class).removeClass($class);$($str).addClass($class);}}
jQuery(document).ready(function($){$('div#colorbox').delegate('.js-guest-day-booking','click',function(){$this=$(this);if($('#PropertyUserBookingOptionPricePerNight').is(':checked')){if($(".js-guest-start-date","div#colorbox").is(".js-guest-start-date")){$thist=$(".js-guest-start-date","div#colorbox");$full_start=true;$first_select=parseInt($thist.metadata().cell);$full_start_month=parseInt($thist.metadata().month);$full_start_date=parseInt($thist.metadata().date);$full_start_year=parseInt($thist.metadata().year);}
if($full_start==false){if($this.metadata().status=='available'){$this.addClass('js-guest-start-date');$full_start=true;$(".js-guest-current-select-date").removeClass('js-guest-current-select-date');$this.addClass('js-guest-current-select-date');$first_select=parseInt($this.metadata().cell);$full_start_month=parseInt($this.metadata().month);$full_start_date=parseInt($this.metadata().date);$full_start_year=parseInt($this.metadata().year);if($full_end_date!=''){$('#PropertyUserCheckinMonth').val($full_start_month);$('#PropertyUserCheckoutMonth').val($full_start_month);$('#PropertyUserCheckoutDay').val($full_start_date);$('#PropertyUserCheckinDay').val($full_start_date);$('#PropertyUserCheckoutYear').val($full_start_year);$('#PropertyUserCheckinYear').val($full_start_year);$('.js-price-for-product').productCalculation();}}}else{current_date=parseInt($this.metadata().cell);selectDateGuestCalaender($first_select,current_date,'js-guest-current-select-date');$('.js-price-for-product').productCalculation();$.colorbox.close();$('.tipsy').hide();return false;}}else{alert('Please select per night option');}
return false;});$('div#colorbox').delegate('.js-guest-day-booking','mouseenter',function(){$this=$(this);if($('#PropertyUserBookingOptionPricePerNight').is(':checked')){if($full_start==true){current_date=parseInt($this.metadata().cell);$(".js-guest-day-mouseover").removeClass('js-guest-day-mouseover');reinitize($first_select,current_date,'js-guest-day-mouseover','#guest-cell-');return false;}
else{if($this.metadata().status=='available'){cell=parseInt($this.metadata().cell);$('#guest-cell-'+cell).addClass('js-guest-day-mouseover');}}}
return false;}).delegate('td.js-guest-day-booking','mouseleave',function(){if($('#PropertyUserBookingOptionPricePerNight').is(':checked')){$this=$(this);if($this.metadata().status=='available'&&$full_start==false&&!($this.is('.js-guest-current-select-date'))){first_date['date']=parseInt($this.metadata().cell);$('#guest-cell-'+first_date['date']).removeClass('js-guest-day-mouseover');}}});$('div#colorbox').delegate('.js-guest-calender-prev, .js-guest-calender-next','click',function(){var $this=$(this);var url=$this.metadata().url;$('.js-guest-calendar-response').block();$.get(url,function(data){$('.js-guest-calendar-response').html(data);if(data.indexOf('js-disable_monthly')!=-1){if($('#PropertyUserBookingOptionPricePerMonth').is(':checked')){$('#PropertyUserBookingOptionPricePerNight').attr('checked','checked');}
$('#PropertyUserBookingOptionPricePerMonth').attr('disabled','disabled');}else{$('#PropertyUserBookingOptionPricePerMonth').removeAttr("disabled");}
$('td.js-month-booking').eachdaytooltipsadd();$('div#colorbox').productGuestFullCalenderLoad();$('.js-guest-calendar-response').unblock();return false;});return false;});$('div#colorbox').delegate('td.js-guest-week-booking','mouseenter',function(){$this=$(this);if($('#PropertyUserBookingOptionPricePerWeek').is(':checked')){if($full_start==true){$full_current_week=parseInt($this.metadata().week);$(".js-guest-week-mouseover").removeClass('js-guest-week-mouseover');reinitizeweek($full_start_week,$full_current_week,'js-guest-week-mouseover','#guest-week-');return false;}
else{if($this.metadata().status=='available'){week=parseInt($this.metadata().week);$('#guest-week-'+week).addClass('js-guest-week-mouseover');}}}
return false;}).delegate('td.js-guest-week-booking','mouseleave',function(){$this=$(this);if($('#PropertyUserBookingOptionPricePerWeek').is(':checked')){if($this.metadata().status=='available'&&$full_start==false&&!($this.is('.js-guest-current-select-week'))){first_date['date']=parseInt($this.metadata().week);$('#guest-week-'+first_date['date']).removeClass('js-guest-week-mouseover');}}
return false;});$('div#colorbox').delegate('td.js-guest-week-booking','click',function(){$this=$(this);if($('#PropertyUserBookingOptionPricePerWeek').is(':checked')){if($full_start==false){if($this.metadata().status=='available'){$this.addClass('js-guest-start-week');$full_start=true;$(".js-guest-current-select-week").removeClass('js-guest-current-select-week');$full_start_week=$(this).metadata().week;$this.addClass('js-guest-current-select-week');first_date=($(this).metadata().start_date).split('-');$full_start_month=parseInt(first_date[1]);$full_start_date=parseInt(first_date[2]);$full_start_year=parseInt(first_date[0]);temp_dates=($this.metadata().end_date).split('-');$temp_month=parseInt(temp_dates[1]);$temp_date=parseInt(temp_dates[2]);$temp_year=parseInt(temp_dates[0]);$full_start_month=($full_start_month<10)?('0'+$full_start_month):$full_start_month;$full_start_date=($full_start_date<10)?('0'+$full_start_date):$full_start_date;$temp_month=($temp_month<10)?('0'+$temp_month):$temp_month;$temp_date=($temp_date<10)?('0'+$temp_date):$temp_date;$(".js-guest-current-select-date").removeClass('js-guest-current-select-date');$('.js-guest-start-date').removeClass('js-guest-start-date');$('#PropertyUserCheckinDay').val($full_start_date);$('#PropertyUserCheckinMonth').val($full_start_month);$('#PropertyUserCheckinYear').val($full_start_year);$('#PropertyUserCheckoutDay').val($temp_date);$('#PropertyUserCheckoutMonth').val($temp_month);$('#PropertyUserCheckoutYear').val($temp_year);$('.js-price-for-product').productCalculation();viewCalenderReselect();}}else{$full_current_week=parseInt($this.metadata().week);if($full_start_week>=$full_current_week){for(i=$full_start_week;i>=$full_current_week;i--){if($('.guest-week-'+i).metadata().status!='available'){$full_current_week=i+1;}}}
else if($full_start_week<$full_current_week){for(i=$full_start_week;i<=$full_current_week;i++){if($('.guest-week-'+i).metadata().status!='available'){$full_current_week=i-1;}}}
if($full_start_week>=$full_current_week){for(i=$full_start_week;i>=$full_current_week;i--){if($('.guest-week-'+i).metadata().status=='available'){$('#guest-week-'+i).addClass('js-guest-current-select-week');first_date=($this.metadata().end_date).split('-');$full_end_month=parseInt(first_date[1]);$full_end_date=parseInt(first_date[2]);$full_end_year=parseInt(first_date[0]);}else{if($full_start_week!=''&&$full_current_week!=''){$(".js-guest-start-week").removeClass('js-guest-start-week');if($full_start_week<$full_current_week){first_date=($('.guest-week-'+$full_start_week).metadata().start_date).split('-');$full_start_month=parseInt(first_date[1],10);$full_start_date=parseInt(first_date[2],10);$full_start_year=parseInt(first_date[0]);second_date=($('.guest-week-'+$full_current_week).metadata().end_date).split('-');$full_end_month=parseInt(second_date[1],10);$full_end_date=parseInt(second_date[2],10);$full_end_year=parseInt(second_date[0]);}else{second_date=($('.guest-week-'+$full_current_week).metadata().start_date).split('-');first_date=($('.guest-week-'+$full_start_week).metadata().end_date).split('-');$full_start_month=parseInt(first_date[1],10);$full_start_date=parseInt(first_date[2],10);$full_start_year=parseInt(first_date[0]);$full_end_month=parseInt(second_date[1],10);$full_end_date=parseInt(second_date[2],10);$full_end_year=parseInt(second_date[0]);}
$full_start_month=($full_start_month<10)?('0'+$full_start_month):$full_start_month;$full_end_month=($full_end_month<10)?('0'+$full_end_month):$full_end_month;$full_end_date=($full_end_date<10)?('0'+$full_end_date):$full_end_date;$full_start_date=($full_start_date<10)?('0'+$full_start_date):$full_start_date;if($full_start_week<=$full_current_week){$('#PropertyUserCheckinDay').val($full_start_date);$('#PropertyUserCheckinMonth').val($full_start_month);$('#PropertyUserCheckinYear').val($full_start_year);$('#PropertyUserCheckoutDay').val($full_end_date);$('#PropertyUserCheckoutMonth').val($full_end_month);$('#PropertyUserCheckoutYear').val($full_end_year);}else{$('#PropertyUserCheckoutDay').val($full_start_date);$('#PropertyUserCheckoutMonth').val($full_start_month);$('#PropertyUserCheckoutYear').val($full_start_year);$('#PropertyUserCheckinDay').val($full_end_date);$('#PropertyUserCheckinMonth').val($full_end_month);$('#PropertyUserCheckinYear').val($full_end_year);}
viewCalenderReselect();$('.js-price-for-product').productCalculation();$full_start_date=$full_start_month=$full_start_year=$full_end_date=$full_end_month=$full_end_year=$full_start_week=$full_current_week='';$full_start=false;$.colorbox.close();}
return false;}}}else if($full_start_week<$full_current_week){for(i=$full_start_week;i<=$full_current_week;i++){if($('.guest-week-'+i).metadata().status=='available'){$('#guest-week-'+i).addClass('js-guest-current-select-week');first_date=($('.guest-week-'+i).metadata().end_date).split('-');$full_end_month=parseInt(first_date[1]);$full_end_date=parseInt(first_date[2]);$full_end_year=parseInt(first_date[0]);}else{if($full_start_week!=''&&$full_current_week!=''){$(".js-guest-start-week").removeClass('js-guest-start-week');if($full_start_week<=$full_current_week){first_date=($('.guest-week-'+$full_start_week).metadata().start_date).split('-');$full_start_month=parseInt(first_date[1],10);$full_start_date=parseInt(first_date[2],10);$full_start_year=parseInt(first_date[0]);second_date=($('.guest-week-'+$full_current_week).metadata().end_date).split('-');$full_end_month=parseInt(second_date[1],10);$full_end_date=parseInt(second_date[2],10);$full_end_year=parseInt(second_date[0]);}else{second_date=($('.guest-week-'+$full_current_week).metadata().start_date).split('-');first_date=($('.guest-week-'+$full_start_week).metadata().end_date).split('-');$full_start_month=parseInt(first_date[1],10);$full_start_date=parseInt(first_date[2],10);$full_start_year=parseInt(first_date[0]);$full_end_month=parseInt(second_date[1],10);$full_end_date=parseInt(second_date[2],10);$full_end_year=parseInt(second_date[0]);}
$full_start_month=($full_start_month<10)?('0'+$full_start_month):$full_start_month;$full_end_month=($full_end_month<10)?('0'+$full_end_month):$full_end_month;$full_end_date=($full_end_date<10)?('0'+$full_end_date):$full_end_date;$full_start_date=($full_start_date<10)?('0'+$full_start_date):$full_start_date;if($full_start_week<=$full_current_week){$('#PropertyUserCheckinDay').val($full_start_date);$('#PropertyUserCheckinMonth').val($full_start_month);$('#PropertyUserCheckinYear').val($full_start_year);$('#PropertyUserCheckoutDay').val($full_end_date);$('#PropertyUserCheckoutMonth').val($full_end_month);$('#PropertyUserCheckoutYear').val($full_end_year);}else{$('#PropertyUserCheckoutDay').val($full_start_date);$('#PropertyUserCheckoutMonth').val($full_start_month);$('#PropertyUserCheckoutYear').val($full_start_year);$('#PropertyUserCheckinDay').val($full_end_date);$('#PropertyUserCheckinMonth').val($full_end_month);$('#PropertyUserCheckinYear').val($full_end_year);}
viewCalenderReselect();$('.js-price-for-product').productCalculation();$full_start_date=$full_start_month=$full_start_year=$full_end_date=$full_end_month=$full_end_year=$full_start_week=$full_current_week='';$full_start=false;$.colorbox.close();}
return false;}}}
if($full_start_week!=''&&$full_current_week!=''){$(".js-guest-start-week").removeClass('js-guest-start-week');if($full_start_week<=$full_current_week){first_date=($('.guest-week-'+$full_start_week).metadata().start_date).split('-');$full_start_month=parseInt(first_date[1],10);$full_start_date=parseInt(first_date[2],10);$full_start_year=parseInt(first_date[0]);second_date=($('.guest-week-'+$full_current_week).metadata().end_date).split('-');$full_end_month=parseInt(second_date[1],10);$full_end_date=parseInt(second_date[2],10);$full_end_year=parseInt(second_date[0]);}else{second_date=($('.guest-week-'+$full_current_week).metadata().start_date).split('-');first_date=($('.guest-week-'+$full_start_week).metadata().end_date).split('-');$full_start_month=parseInt(first_date[1],10);$full_start_date=parseInt(first_date[2],10);$full_start_year=parseInt(first_date[0]);$full_end_month=parseInt(second_date[1],10);$full_end_date=parseInt(second_date[2],10);$full_end_year=parseInt(second_date[0]);}
$full_start_month=($full_start_month<10)?('0'+$full_start_month):$full_start_month;$full_end_month=($full_end_month<10)?('0'+$full_end_month):$full_end_month;$full_end_date=($full_end_date<10)?('0'+$full_end_date):$full_end_date;$full_start_date=($full_start_date<10)?('0'+$full_start_date):$full_start_date;if($full_start_week<=$full_current_week){$('#PropertyUserCheckinDay').val($full_start_date);$('#PropertyUserCheckinMonth').val($full_start_month);$('#PropertyUserCheckinYear').val($full_start_year);$('#PropertyUserCheckoutDay').val($full_end_date);$('#PropertyUserCheckoutMonth').val($full_end_month);$('#PropertyUserCheckoutYear').val($full_end_year);}else{$('#PropertyUserCheckoutDay').val($full_start_date);$('#PropertyUserCheckoutMonth').val($full_start_month);$('#PropertyUserCheckoutYear').val($full_start_year);$('#PropertyUserCheckinDay').val($full_end_date);$('#PropertyUserCheckinMonth').val($full_end_month);$('#PropertyUserCheckinYear').val($full_end_year);}
viewCalenderReselect();$('.js-price-for-product').productCalculation();$full_start_date=$full_start_month=$full_start_year=$full_end_date=$full_end_month=$full_end_year=$full_start_week=$full_current_week='';$full_start=false;$.colorbox.close();}}}else{alert('Please select per week option');}
return false;});});
/* libs/markerclusterer.js */
function MarkerClusterer(map,opt_markers,opt_options){this.extend(MarkerClusterer,google.maps.OverlayView);this.map_=map;this.markers_=[];this.clusters_=[];this.sizes=[90,78,78,56,53,66];this.styles_=[];this.ready_=false;var options=opt_options||{};this.gridSize_=options['gridSize']||60;this.maxZoom_=options['maxZoom']||null;this.styles_=options['styles']||[];this.imagePath_=options['imagePath']||this.MARKER_CLUSTER_IMAGE_PATH_;this.imageExtension_=options['imageExtension']||this.MARKER_CLUSTER_IMAGE_EXTENSION_;this.zoomOnClick_=true;if(options['zoomOnClick']!=undefined){this.zoomOnClick_=options['zoomOnClick'];}
this.averageCenter_=true;if(options['averageCenter']!=undefined){this.averageCenter_=options['averageCenter'];}
this.setupStyles_();this.setMap(map);this.prevZoom_=this.map_.getZoom();var that=this;google.maps.event.addListener(this.map_,'zoom_changed',function(){var maxZoom=that.map_.mapTypes[that.map_.getMapTypeId()].maxZoom;var zoom=that.map_.getZoom();if(zoom<0||zoom>maxZoom){return;}
if(that.prevZoom_!=zoom){that.prevZoom_=that.map_.getZoom();that.resetViewport();}});google.maps.event.addListener(this.map_,'idle',function(){that.redraw();});if(opt_markers&&opt_markers.length){this.addMarkers(opt_markers,false);}}
MarkerClusterer.prototype.MARKER_CLUSTER_IMAGE_PATH_='./img/m';MarkerClusterer.prototype.MARKER_CLUSTER_IMAGE_EXTENSION_='png';MarkerClusterer.prototype.extend=function(obj1,obj2){return(function(object){for(var property in object.prototype){this.prototype[property]=object.prototype[property];}
return this;}).apply(obj1,[obj2]);};MarkerClusterer.prototype.onAdd=function(){this.setReady_(true);};MarkerClusterer.prototype.draw=function(){};MarkerClusterer.prototype.setupStyles_=function(){if(this.styles_.length){return;}
for(var i=0,size;size=this.sizes[i];i++){this.styles_.push({url:this.imagePath_+(i+1)+'.'+this.imageExtension_,height:size,width:size});}};MarkerClusterer.prototype.setStyles=function(styles){this.styles_=styles;};MarkerClusterer.prototype.getStyles=function(){return this.styles_;};MarkerClusterer.prototype.isZoomOnClick=function(){return this.zoomOnClick_;};MarkerClusterer.prototype.isAverageCenter=function(){return this.averageCenter_;};MarkerClusterer.prototype.getMarkers=function(){return this.markers_;};MarkerClusterer.prototype.getTotalMarkers=function(){return this.markers_.length;};MarkerClusterer.prototype.setMaxZoom=function(maxZoom){this.maxZoom_=maxZoom;};MarkerClusterer.prototype.getMaxZoom=function(){return this.maxZoom_||this.map_.mapTypes[this.map_.getMapTypeId()].maxZoom;};MarkerClusterer.prototype.calculator_=function(markers,numStyles){var index=0;var count=0;for(var i=0;i<markers.length;i++)
{var x=parseInt(markers[i].count);count+=x;}
var dv=count;while(dv!==0){dv=parseInt(dv/10,10);index++;}
index=Math.min(index,numStyles);return{text:count,index:index};};MarkerClusterer.prototype.setCalculator=function(calculator){this.calculator_=calculator;};MarkerClusterer.prototype.getCalculator=function(){return this.calculator_;};MarkerClusterer.prototype.addMarkers=function(markers,opt_nodraw){for(var i=0,marker;marker=markers[i];i++){this.pushMarkerTo_(marker);}
if(!opt_nodraw){this.redraw();}};MarkerClusterer.prototype.pushMarkerTo_=function(marker){marker.setVisible(false);marker.setMap(null);marker.isAdded=false;if(marker['draggable']){var that=this;google.maps.event.addListener(marker,'dragend',function(){marker.isAdded=false;that.resetViewport();that.redraw();});}
this.markers_.push(marker);};MarkerClusterer.prototype.addMarker=function(marker,opt_nodraw){this.pushMarkerTo_(marker);if(!opt_nodraw){this.redraw();}};MarkerClusterer.prototype.removeMarker_=function(marker){var index=-1;if(this.markers_.indexOf){index=this.markers_.indexOf(marker);}else{for(var i=0,m;m=this.markers_[i];i++){if(m==marker){index=i;break;}}}
if(index==-1){return false;}
this.markers_.splice(index,1);marker.setVisible(false);marker.setMap(null);return true;};MarkerClusterer.prototype.removeMarker=function(marker,opt_nodraw){var removed=this.removeMarker_(marker);if(!opt_nodraw&&removed){this.resetViewport();this.redraw();return true;}else{return false;}};MarkerClusterer.prototype.removeMarkers=function(markers,opt_nodraw){var removed=false;for(var i=0,marker;marker=markers[i];i++){var r=this.removeMarker_(marker);removed=removed||r;}
if(!opt_nodraw&&removed){this.resetViewport();this.redraw();return true;}};MarkerClusterer.prototype.setReady_=function(ready){if(!this.ready_){this.ready_=ready;this.createClusters_();}};MarkerClusterer.prototype.getTotalClusters=function(){return this.clusters_.length;};MarkerClusterer.prototype.getMap=function(){return this.map_;};MarkerClusterer.prototype.setMap=function(map){this.map_=map;};MarkerClusterer.prototype.getGridSize=function(){return this.gridSize_;};MarkerClusterer.prototype.setGridSize=function(size){this.gridSize_=size;};MarkerClusterer.prototype.getExtendedBounds=function(bounds){var projection=this.getProjection();var tr=new google.maps.LatLng(bounds.getNorthEast().lat(),bounds.getNorthEast().lng());var bl=new google.maps.LatLng(bounds.getSouthWest().lat(),bounds.getSouthWest().lng());var trPix=projection.fromLatLngToDivPixel(tr);trPix.x+=this.gridSize_;trPix.y-=this.gridSize_;var blPix=projection.fromLatLngToDivPixel(bl);blPix.x-=this.gridSize_;blPix.y+=this.gridSize_;var ne=projection.fromDivPixelToLatLng(trPix);var sw=projection.fromDivPixelToLatLng(blPix);bounds.extend(ne);bounds.extend(sw);return bounds;};MarkerClusterer.prototype.isMarkerInBounds_=function(marker,bounds){return bounds.contains(marker.getPosition());};MarkerClusterer.prototype.clearMarkers=function(){this.resetViewport();this.markers_=[];};MarkerClusterer.prototype.resetViewport=function(){for(var i=0,cluster;cluster=this.clusters_[i];i++){cluster.remove();}
for(var i=0,marker;marker=this.markers_[i];i++){marker.isAdded=false;marker.setMap(null);marker.setVisible(false);}
this.clusters_=[];};MarkerClusterer.prototype.redraw=function(){this.createClusters_();};MarkerClusterer.prototype.distanceBetweenPoints_=function(p1,p2){if(!p1||!p2){return 0;}
var R=6371;var dLat=(p2.lat()-p1.lat())*Math.PI/180;var dLon=(p2.lng()-p1.lng())*Math.PI/180;var a=Math.sin(dLat/2)*Math.sin(dLat/2)+
Math.cos(p1.lat()*Math.PI/180)*Math.cos(p2.lat()*Math.PI/180)*Math.sin(dLon/2)*Math.sin(dLon/2);var c=2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a));var d=R*c;return d;};MarkerClusterer.prototype.addToClosestCluster_=function(marker){var distance=40000;var clusterToAddTo=null;var pos=marker.getPosition();for(var i=0,cluster;cluster=this.clusters_[i];i++){var center=cluster.getCenter();if(center){var d=this.distanceBetweenPoints_(center,marker.getPosition());if(d<distance){distance=d;clusterToAddTo=cluster;}}}
if(clusterToAddTo&&clusterToAddTo.isMarkerInClusterBounds(marker)){clusterToAddTo.addMarker(marker);}else{var cluster=new Cluster(this);cluster.addMarker(marker);this.clusters_.push(cluster);}};MarkerClusterer.prototype.createClusters_=function(){if(!this.ready_){return;}
var mapBounds=new google.maps.LatLngBounds(this.map_.getBounds().getSouthWest(),this.map_.getBounds().getNorthEast());var bounds=this.getExtendedBounds(mapBounds);for(var i=0,marker;marker=this.markers_[i];i++){if(!marker.isAdded&&this.isMarkerInBounds_(marker,bounds)){this.addToClosestCluster_(marker);}}};function Cluster(markerClusterer){this.markerClusterer_=markerClusterer;this.map_=markerClusterer.getMap();this.gridSize_=markerClusterer.getGridSize();this.averageCenter_=markerClusterer.isAverageCenter();this.center_=null;this.markers_=[];this.bounds_=null;this.clusterIcon_=new ClusterIcon(this,markerClusterer.getStyles(),markerClusterer.getGridSize());}
Cluster.prototype.isMarkerAlreadyAdded=function(marker){if(this.markers_.indexOf){return this.markers_.indexOf(marker)!=-1;}else{for(var i=0,m;m=this.markers_[i];i++){if(m==marker){return true;}}}
return false;};Cluster.prototype.addMarker=function(marker){if(this.isMarkerAlreadyAdded(marker)){return false;}
if(!this.center_){this.center_=marker.getPosition();this.calculateBounds_();}else{if(this.averageCenter_){var l=this.markers_.length+1;var lat=(this.center_.lat()*(l-1)+marker.getPosition().lat())/l;var lng=(this.center_.lng()*(l-1)+marker.getPosition().lng())/l;this.center_=new google.maps.LatLng(lat,lng);this.calculateBounds_();}}
if(this.markers_.length==0){marker.setMap(this.map_);marker.setVisible(true);}else if(this.markers_.length==1){this.markers_[0].setMap(null);this.markers_[0].setVisible(false);}
marker.isAdded=true;this.markers_.push(marker);this.updateIcon();return true;};Cluster.prototype.getMarkerClusterer=function(){return this.markerClusterer_;};Cluster.prototype.getBounds=function(){var bounds=new google.maps.LatLngBounds(this.center_,this.center_);var markers=this.getMarkers();for(var i=0,marker;marker=markers[i];i++){bounds.extend(marker.getPosition());}
return bounds;};Cluster.prototype.remove=function(){this.clusterIcon_.remove();this.markers_.length=0;delete this.markers_;};Cluster.prototype.getSize=function(){return this.markers_.length;};Cluster.prototype.getMarkers=function(){return this.markers_;};Cluster.prototype.getCenter=function(){return this.center_;};Cluster.prototype.calculateBounds_=function(){var bounds=new google.maps.LatLngBounds(this.center_,this.center_);this.bounds_=this.markerClusterer_.getExtendedBounds(bounds);};Cluster.prototype.isMarkerInClusterBounds=function(marker){return this.bounds_.contains(marker.getPosition());};Cluster.prototype.getMap=function(){return this.map_;};Cluster.prototype.updateIcon=function(){var zoom=this.map_.getZoom();var mz=this.markerClusterer_.getMaxZoom();if(zoom>mz){for(var i=0,marker;marker=this.markers_[i];i++){marker.setMap(this.map_);marker.setVisible(true);}
return;}
if(this.markers_.length<2){this.clusterIcon_.hide();return;}
var numStyles=this.markerClusterer_.getStyles().length;var sums=this.markerClusterer_.getCalculator()(this.markers_,numStyles);this.clusterIcon_.setCenter(this.center_);this.clusterIcon_.setSums(sums);this.clusterIcon_.show();};function ClusterIcon(cluster,styles,opt_padding){cluster.getMarkerClusterer().extend(ClusterIcon,google.maps.OverlayView);this.styles_=styles;this.padding_=opt_padding||0;this.cluster_=cluster;this.center_=null;this.map_=cluster.getMap();this.div_=null;this.sums_=null;this.visible_=false;this.setMap(this.map_);}
ClusterIcon.prototype.triggerClusterClick=function(){var markerClusterer=this.cluster_.getMarkerClusterer();google.maps.event.trigger(markerClusterer,'clusterclick',this.cluster_);if(markerClusterer.isZoomOnClick()){this.map_.fitBounds(this.cluster_.getBounds());}};ClusterIcon.prototype.onAdd=function(){this.div_=document.createElement('DIV');if(this.visible_){var pos=this.getPosFromLatLng_(this.center_);this.div_.style.cssText=this.createCss(pos);this.div_.innerHTML=this.sums_.text;}
var panes=this.getPanes();panes.overlayImage.appendChild(this.div_);var that=this;google.maps.event.addDomListener(this.div_,'click',function(){that.triggerClusterClick();});};ClusterIcon.prototype.getPosFromLatLng_=function(latlng){var pos=this.getProjection().fromLatLngToDivPixel(latlng);pos.x-=parseInt(this.width_/2,10);pos.y-=parseInt(this.height_/2,10);return pos;};ClusterIcon.prototype.draw=function(){if(this.visible_){var pos=this.getPosFromLatLng_(this.center_);this.div_.style.top=pos.y+'px';this.div_.style.left=pos.x+'px';}};ClusterIcon.prototype.hide=function(){if(this.div_){this.div_.style.display='none';}
this.visible_=false;};ClusterIcon.prototype.show=function(){if(this.div_){var pos=this.getPosFromLatLng_(this.center_);this.div_.style.cssText=this.createCss(pos);this.div_.style.display='';}
this.visible_=true;};ClusterIcon.prototype.remove=function(){this.setMap(null);};ClusterIcon.prototype.onRemove=function(){if(this.div_&&this.div_.parentNode){this.hide();this.div_.parentNode.removeChild(this.div_);this.div_=null;}};ClusterIcon.prototype.setSums=function(sums){this.sums_=sums;this.text_=sums.text;this.index_=sums.index;if(this.div_){this.div_.innerHTML=sums.text;}
this.useStyle();};ClusterIcon.prototype.useStyle=function(){var index=Math.max(0,this.sums_.index-1);index=Math.min(this.styles_.length-1,index);var minVal=0;var maxVal=5;var randVal=minVal+(Math.random()*(maxVal-minVal));index=typeof floatVal=='undefined'?Math.round(randVal):randVal.toFixed(floatVal);var style=this.styles_[index];this.url_=style['url'];this.height_=style['height'];this.width_=style['width'];this.textColor_=style['textColor'];this.anchor_=style['anchor'];this.textSize_=style['textSize'];this.backgroundPosition_=style['backgroundPosition'];};ClusterIcon.prototype.setCenter=function(center){this.center_=center;};ClusterIcon.prototype.createCss=function(pos){var style=[];if(document.all){style.push('filter:progid:DXImageTransform.Microsoft.AlphaImageLoader('+'sizingMethod=scale,src="'+this.url_+'");');}else{style.push('background-image:url('+this.url_+');');var backgroundPosition=this.backgroundPosition_?this.backgroundPosition_:'0 0';style.push('background-position:'+backgroundPosition+';');}
if(typeof this.anchor_==='object'){if(typeof this.anchor_[0]==='number'&&this.anchor_[0]>0&&this.anchor_[0]<this.height_){style.push('height:'+(this.height_-this.anchor_[0])+'px; padding-top:'+this.anchor_[0]+'px;');}else{style.push('height:'+this.height_+'px; line-height:'+this.height_+'px;');}
if(typeof this.anchor_[1]==='number'&&this.anchor_[1]>0&&this.anchor_[1]<this.width_){style.push('width:'+(this.width_-this.anchor_[1])+'px; padding-left:'+this.anchor_[1]+'px;');}else{style.push('width:'+this.width_+'px; text-align:center;');}}else{style.push('height:'+this.height_+'px; line-height:'+
this.height_+'px; width:'+this.width_+'px; text-align:center;');}
var txtColor=this.textColor_?this.textColor_:'white';var txtSize=this.textSize_?this.textSize_:11;style.push('cursor:pointer; top:'+pos.y+'px; left:'+
pos.x+'px; color:'+txtColor+'; position:absolute; font-size:'+
txtSize+'px; font-family:Arial,sans-serif; font-weight:bold');return style.join('');};window['MarkerClusterer']=MarkerClusterer;MarkerClusterer.prototype['addMarker']=MarkerClusterer.prototype.addMarker;MarkerClusterer.prototype['addMarkers']=MarkerClusterer.prototype.addMarkers;MarkerClusterer.prototype['clearMarkers']=MarkerClusterer.prototype.clearMarkers;MarkerClusterer.prototype['getCalculator']=MarkerClusterer.prototype.getCalculator;MarkerClusterer.prototype['getGridSize']=MarkerClusterer.prototype.getGridSize;MarkerClusterer.prototype['getExtendedBounds']=MarkerClusterer.prototype.getExtendedBounds;MarkerClusterer.prototype['getMap']=MarkerClusterer.prototype.getMap;MarkerClusterer.prototype['getMarkers']=MarkerClusterer.prototype.getMarkers;MarkerClusterer.prototype['getMaxZoom']=MarkerClusterer.prototype.getMaxZoom;MarkerClusterer.prototype['getStyles']=MarkerClusterer.prototype.getStyles;MarkerClusterer.prototype['getTotalClusters']=MarkerClusterer.prototype.getTotalClusters;MarkerClusterer.prototype['getTotalMarkers']=MarkerClusterer.prototype.getTotalMarkers;MarkerClusterer.prototype['redraw']=MarkerClusterer.prototype.redraw;MarkerClusterer.prototype['removeMarker']=MarkerClusterer.prototype.removeMarker;MarkerClusterer.prototype['removeMarkers']=MarkerClusterer.prototype.removeMarkers;MarkerClusterer.prototype['resetViewport']=MarkerClusterer.prototype.resetViewport;MarkerClusterer.prototype['setCalculator']=MarkerClusterer.prototype.setCalculator;MarkerClusterer.prototype['setGridSize']=MarkerClusterer.prototype.setGridSize;MarkerClusterer.prototype['onAdd']=MarkerClusterer.prototype.onAdd;MarkerClusterer.prototype['draw']=MarkerClusterer.prototype.draw;Cluster.prototype['getCenter']=Cluster.prototype.getCenter;Cluster.prototype['getSize']=Cluster.prototype.getSize;Cluster.prototype['getMarkers']=Cluster.prototype.getMarkers;ClusterIcon.prototype['onAdd']=ClusterIcon.prototype.onAdd;ClusterIcon.prototype['draw']=ClusterIcon.prototype.draw;ClusterIcon.prototype['onRemove']=ClusterIcon.prototype.onRemove;
/* libs/jquery.tablednd_0_5.js */
jQuery.tableDnD={currentTable:null,dragObject:null,mouseOffset:null,oldY:0,build:function(options){this.each(function(){this.tableDnDConfig=jQuery.extend({onDragStyle:null,onDropStyle:null,onDragClass:"tDnD_whileDrag",onDrop:null,onDragStart:null,scrollAmount:5,serializeRegexp:/[^\-]*$/,serializeParamName:null,dragHandle:null},options||{});jQuery.tableDnD.makeDraggable(this);});jQuery(document).bind('mousemove',jQuery.tableDnD.mousemove).bind('mouseup',jQuery.tableDnD.mouseup);return this;},makeDraggable:function(table){var config=table.tableDnDConfig;if(table.tableDnDConfig.dragHandle){var cells=jQuery("td."+table.tableDnDConfig.dragHandle,table);cells.each(function(){jQuery(this).mousedown(function(ev){jQuery.tableDnD.dragObject=this.parentNode;jQuery.tableDnD.currentTable=table;jQuery.tableDnD.mouseOffset=jQuery.tableDnD.getMouseOffset(this,ev);if(config.onDragStart){config.onDragStart(table,this);}
return false;});})}else{var rows=jQuery("tr",table);rows.each(function(){var row=jQuery(this);if(!row.hasClass("nodrag")){row.mousedown(function(ev){if(ev.target.tagName=="TD"){jQuery.tableDnD.dragObject=this;jQuery.tableDnD.currentTable=table;jQuery.tableDnD.mouseOffset=jQuery.tableDnD.getMouseOffset(this,ev);if(config.onDragStart){config.onDragStart(table,this);}
return false;}}).css("cursor","move");}});}},updateTables:function(){this.each(function(){if(this.tableDnDConfig){jQuery.tableDnD.makeDraggable(this);}})},mouseCoords:function(ev){if(ev.pageX||ev.pageY){return{x:ev.pageX,y:ev.pageY};}
return{x:ev.clientX+document.body.scrollLeft-document.body.clientLeft,y:ev.clientY+document.body.scrollTop-document.body.clientTop};},getMouseOffset:function(target,ev){ev=ev||window.event;var docPos=this.getPosition(target);var mousePos=this.mouseCoords(ev);return{x:mousePos.x-docPos.x,y:mousePos.y-docPos.y};},getPosition:function(e){var left=0;var top=0;if(e.offsetHeight==0){e=e.firstChild;}
while(e.offsetParent){left+=e.offsetLeft;top+=e.offsetTop;e=e.offsetParent;}
left+=e.offsetLeft;top+=e.offsetTop;return{x:left,y:top};},mousemove:function(ev){if(jQuery.tableDnD.dragObject==null){return;}
var dragObj=jQuery(jQuery.tableDnD.dragObject);var config=jQuery.tableDnD.currentTable.tableDnDConfig;var mousePos=jQuery.tableDnD.mouseCoords(ev);var y=mousePos.y-jQuery.tableDnD.mouseOffset.y;var yOffset=window.pageYOffset;if(document.all){if(typeof document.compatMode!='undefined'&&document.compatMode!='BackCompat'){yOffset=document.documentElement.scrollTop;}
else if(typeof document.body!='undefined'){yOffset=document.body.scrollTop;}}
if(mousePos.y-yOffset<config.scrollAmount){window.scrollBy(0,-config.scrollAmount);}else{var windowHeight=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:document.body.clientHeight;if(windowHeight-(mousePos.y-yOffset)<config.scrollAmount){window.scrollBy(0,config.scrollAmount);}}
if(y!=jQuery.tableDnD.oldY){var movingDown=y>jQuery.tableDnD.oldY;jQuery.tableDnD.oldY=y;if(config.onDragClass){dragObj.addClass(config.onDragClass);}else{dragObj.css(config.onDragStyle);}
var currentRow=jQuery.tableDnD.findDropTargetRow(dragObj,y);if(currentRow){if(movingDown&&jQuery.tableDnD.dragObject!=currentRow){jQuery.tableDnD.dragObject.parentNode.insertBefore(jQuery.tableDnD.dragObject,currentRow.nextSibling);}else if(!movingDown&&jQuery.tableDnD.dragObject!=currentRow){jQuery.tableDnD.dragObject.parentNode.insertBefore(jQuery.tableDnD.dragObject,currentRow);}}}
return false;},findDropTargetRow:function(draggedRow,y){var rows=jQuery.tableDnD.currentTable.rows;for(var i=0;i<rows.length;i++){var row=rows[i];var rowY=this.getPosition(row).y;var rowHeight=parseInt(row.offsetHeight)/2;if(row.offsetHeight==0){rowY=this.getPosition(row.firstChild).y;rowHeight=parseInt(row.firstChild.offsetHeight)/2;}
if((y>rowY-rowHeight)&&(y<(rowY+rowHeight))){if(row==draggedRow){return null;}
var config=jQuery.tableDnD.currentTable.tableDnDConfig;if(config.onAllowDrop){if(config.onAllowDrop(draggedRow,row)){return row;}else{return null;}}else{var nodrop=jQuery(row).hasClass("nodrop");if(!nodrop){return row;}else{return null;}}
return row;}}
return null;},mouseup:function(e){if(jQuery.tableDnD.currentTable&&jQuery.tableDnD.dragObject){var droppedRow=jQuery.tableDnD.dragObject;var config=jQuery.tableDnD.currentTable.tableDnDConfig;if(config.onDragClass){jQuery(droppedRow).removeClass(config.onDragClass);}else{jQuery(droppedRow).css(config.onDropStyle);}
jQuery.tableDnD.dragObject=null;if(config.onDrop){config.onDrop(jQuery.tableDnD.currentTable,droppedRow);}
jQuery.tableDnD.currentTable=null;}},serialize:function(){if(jQuery.tableDnD.currentTable){return jQuery.tableDnD.serializeTable(jQuery.tableDnD.currentTable);}else{return"Error: No Table id set, you need to set an id on your table and every row";}},serializeTable:function(table){var result="";var tableId=table.id;var rows=table.rows;for(var i=0;i<rows.length;i++){if(result.length>0)result+="&";var rowId=rows[i].id;if(rowId&&rowId&&table.tableDnDConfig&&table.tableDnDConfig.serializeRegexp){rowId=rowId.match(table.tableDnDConfig.serializeRegexp)[0];}
result+=tableId+'[]='+rowId;}
return result;},serializeTables:function(){var result="";this.each(function(){result+=jQuery.tableDnD.serializeTable(this);});return result;}}
jQuery.fn.extend({tableDnD:jQuery.tableDnD.build,tableDnDUpdate:jQuery.tableDnD.updateTables,tableDnDSerialize:jQuery.tableDnD.serializeTables});
/* libs/highcharts.js */
(function(){var doc=document,win=window,math=Math,mathRound=math.round,mathFloor=math.floor,mathCeil=math.ceil,mathMax=math.max,mathMin=math.min,mathAbs=math.abs,mathCos=math.cos,mathSin=math.sin,mathPI=math.PI,deg2rad=mathPI*2/360,userAgent=navigator.userAgent,isIE=/msie/i.test(userAgent)&&!win.opera,docMode8=doc.documentMode===8,isWebKit=/AppleWebKit/.test(userAgent),isFirefox=/Firefox/.test(userAgent),SVG_NS='http://www.w3.org/2000/svg',hasSVG=!!doc.createElementNS&&!!doc.createElementNS(SVG_NS,'svg').createSVGRect,hasRtlBug=isFirefox&&parseInt(userAgent.split('Firefox/')[1],10)<4,Renderer,hasTouch=doc.documentElement.ontouchstart!==undefined,symbolSizes={},idCounter=0,timeFactor=1,garbageBin,defaultOptions,dateFormat,globalAnimation,pathAnim,UNDEFINED,DIV='div',ABSOLUTE='absolute',RELATIVE='relative',HIDDEN='hidden',PREFIX='highcharts-',VISIBLE='visible',PX='px',NONE='none',M='M',L='L',TRACKER_FILL='rgba(192,192,192,'+(hasSVG?0.000001:0.002)+')',NORMAL_STATE='',HOVER_STATE='hover',SELECT_STATE='select',makeTime,getMinutes,getHours,getDay,getDate,getMonth,getFullYear,setMinutes,setHours,setDate,setMonth,setFullYear,globalAdapter=win.HighchartsAdapter,adapter=globalAdapter||{},each=adapter.each,grep=adapter.grep,map=adapter.map,merge=adapter.merge,addEvent=adapter.addEvent,removeEvent=adapter.removeEvent,fireEvent=adapter.fireEvent,animate=adapter.animate,stop=adapter.stop,seriesTypes={};function extend(a,b){var n;if(!a){a={};}
for(n in b){a[n]=b[n];}
return a;}
function pInt(s,mag){return parseInt(s,mag||10);}
function isString(s){return typeof s==='string';}
function isObject(obj){return typeof obj==='object';}
function isArray(obj){return Object.prototype.toString.call(obj)==='[object Array]';}
function isNumber(n){return typeof n==='number';}
function log2lin(num){return math.log(num)/math.LN10;}
function lin2log(num){return math.pow(10,num);}
function erase(arr,item){var i=arr.length;while(i--){if(arr[i]===item){arr.splice(i,1);break;}}}
function defined(obj){return obj!==UNDEFINED&&obj!==null;}
function attr(elem,prop,value){var key,setAttribute='setAttribute',ret;if(isString(prop)){if(defined(value)){elem[setAttribute](prop,value);}else if(elem&&elem.getAttribute){ret=elem.getAttribute(prop);}}else if(defined(prop)&&isObject(prop)){for(key in prop){elem[setAttribute](key,prop[key]);}}
return ret;}
function splat(obj){return isArray(obj)?obj:[obj];}
function pick(){var args=arguments,i,arg,length=args.length;for(i=0;i<length;i++){arg=args[i];if(typeof arg!=='undefined'&&arg!==null){return arg;}}}
function css(el,styles){if(isIE){if(styles&&styles.opacity!==UNDEFINED){styles.filter='alpha(opacity='+(styles.opacity*100)+')';}}
extend(el.style,styles);}
function createElement(tag,attribs,styles,parent,nopad){var el=doc.createElement(tag);if(attribs){extend(el,attribs);}
if(nopad){css(el,{padding:0,border:NONE,margin:0});}
if(styles){css(el,styles);}
if(parent){parent.appendChild(el);}
return el;}
function extendClass(parent,members){var object=function(){};object.prototype=new parent();extend(object.prototype,members);return object;}
function numberFormat(number,decimals,decPoint,thousandsSep){var lang=defaultOptions.lang,n=number,c=isNaN(decimals=mathAbs(decimals))?2:decimals,d=decPoint===undefined?lang.decimalPoint:decPoint,t=thousandsSep===undefined?lang.thousandsSep:thousandsSep,s=n<0?"-":"",i=String(pInt(n=mathAbs(+n||0).toFixed(c))),j=i.length>3?i.length%3:0;return s+(j?i.substr(0,j)+t:"")+i.substr(j).replace(/(\d{3})(?=\d)/g,"$1"+t)+
(c?d+mathAbs(n-i).toFixed(c).slice(2):"");}
dateFormat=function(format,timestamp,capitalize){function pad(number){return number.toString().replace(/^([0-9])$/,'0$1');}
if(!defined(timestamp)||isNaN(timestamp)){return'Invalid date';}
format=pick(format,'%Y-%m-%d %H:%M:%S');var date=new Date(timestamp*timeFactor),key,hours=date[getHours](),day=date[getDay](),dayOfMonth=date[getDate](),month=date[getMonth](),fullYear=date[getFullYear](),lang=defaultOptions.lang,langWeekdays=lang.weekdays,replacements={'a':langWeekdays[day].substr(0,3),'A':langWeekdays[day],'d':pad(dayOfMonth),'e':dayOfMonth,'b':lang.shortMonths[month],'B':lang.months[month],'m':pad(month+1),'y':fullYear.toString().substr(2,2),'Y':fullYear,'H':pad(hours),'I':pad((hours%12)||12),'l':(hours%12)||12,'M':pad(date[getMinutes]()),'p':hours<12?'AM':'PM','P':hours<12?'am':'pm','S':pad(date.getSeconds())};for(key in replacements){format=format.replace('%'+key,replacements[key]);}
return capitalize?format.substr(0,1).toUpperCase()+format.substr(1):format;};function getPosition(el){var p={left:el.offsetLeft,top:el.offsetTop};el=el.offsetParent;while(el){p.left+=el.offsetLeft;p.top+=el.offsetTop;if(el!==doc.body&&el!==doc.documentElement){p.left-=el.scrollLeft;p.top-=el.scrollTop;}
el=el.offsetParent;}
return p;}
function ChartCounters(){this.color=0;this.symbol=0;}
ChartCounters.prototype={wrapColor:function(length){if(this.color>=length){this.color=0;}},wrapSymbol:function(length){if(this.symbol>=length){this.symbol=0;}}};function placeBox(boxWidth,boxHeight,outerLeft,outerTop,outerWidth,outerHeight,point){var pointX=point.x,pointY=point.y,x=pointX-boxWidth+outerLeft-25,y=pointY-boxHeight+outerTop+10,alignedRight;if(x<7){x=outerLeft+pointX+15;}
if((x+boxWidth)>(outerLeft+outerWidth)){x-=(x+boxWidth)-(outerLeft+outerWidth);y-=boxHeight;alignedRight=true;}
if(y<5){y=5;if(alignedRight&&pointY>=y&&pointY<=(y+boxHeight)){y=pointY+boxHeight-5;}}else if(y+boxHeight>outerTop+outerHeight){y=outerTop+outerHeight-boxHeight-5;}
return{x:x,y:y};}
function stableSort(arr,sortFunction){var length=arr.length,i;for(i=0;i<length;i++){arr[i].ss_i=i;}
arr.sort(function(a,b){var sortValue=sortFunction(a,b);return sortValue===0?a.ss_i-b.ss_i:sortValue;});for(i=0;i<length;i++){delete arr[i].ss_i;}}
function destroyObjectProperties(obj){var n;for(n in obj){if(obj[n]&&obj[n].destroy){obj[n].destroy();}
delete obj[n];}}
pathAnim={init:function(elem,fromD,toD){fromD=fromD||'';var shift=elem.shift,bezier=fromD.indexOf('C')>-1,numParams=bezier?7:3,endLength,slice,i,start=fromD.split(' '),end=[].concat(toD),startBaseLine,endBaseLine,sixify=function(arr){i=arr.length;while(i--){if(arr[i]===M){arr.splice(i+1,0,arr[i+1],arr[i+2],arr[i+1],arr[i+2]);}}};if(bezier){sixify(start);sixify(end);}
if(elem.isArea){startBaseLine=start.splice(start.length-6,6);endBaseLine=end.splice(end.length-6,6);}
if(shift){end=[].concat(end).splice(0,numParams).concat(end);elem.shift=false;}
if(start.length){endLength=end.length;while(start.length<endLength){slice=[].concat(start).splice(start.length-numParams,numParams);if(bezier){slice[numParams-6]=slice[numParams-2];slice[numParams-5]=slice[numParams-1];}
start=start.concat(slice);}}
if(startBaseLine){start=start.concat(startBaseLine);end=end.concat(endBaseLine);}
return[start,end];},step:function(start,end,pos,complete){var ret=[],i=start.length,startVal;if(pos===1){ret=complete;}else if(i===end.length&&pos<1){while(i--){startVal=parseFloat(start[i]);ret[i]=isNaN(startVal)?start[i]:pos*(parseFloat(end[i]-startVal))+startVal;}}else{ret=end;}
return ret;}};function setAnimation(animation,chart){globalAnimation=pick(animation,chart.animation);}
if(globalAdapter&&globalAdapter.init){globalAdapter.init(pathAnim);}
if(!globalAdapter&&win.jQuery){var jQ=jQuery;each=function(arr,fn){var i=0,len=arr.length;for(;i<len;i++){if(fn.call(arr[i],arr[i],i,arr)===false){return i;}}};grep=jQ.grep;map=function(arr,fn){var results=[],i=0,len=arr.length;for(;i<len;i++){results[i]=fn.call(arr[i],arr[i],i,arr);}
return results;};merge=function(){var args=arguments;return jQ.extend(true,null,args[0],args[1],args[2],args[3]);};addEvent=function(el,event,fn){jQ(el).bind(event,fn);};removeEvent=function(el,eventType,handler){var func=doc.removeEventListener?'removeEventListener':'detachEvent';if(doc[func]&&!el[func]){el[func]=function(){};}
jQ(el).unbind(eventType,handler);};fireEvent=function(el,type,eventArguments,defaultFunction){var event=jQ.Event(type),detachedType='detached'+type;extend(event,eventArguments);if(el[type]){el[detachedType]=el[type];el[type]=null;}
jQ(el).trigger(event);if(el[detachedType]){el[type]=el[detachedType];el[detachedType]=null;}
if(defaultFunction&&!event.isDefaultPrevented()){defaultFunction(event);}};animate=function(el,params,options){var $el=jQ(el);if(params.d){el.toD=params.d;params.d=1;}
$el.stop();$el.animate(params,options);};stop=function(el){jQ(el).stop();};jQ.extend(jQ.easing,{easeOutQuad:function(x,t,b,c,d){return-c*(t/=d)*(t-2)+b;}});var oldStepDefault=jQuery.fx.step._default,oldCur=jQuery.fx.prototype.cur;jQ.fx.step._default=function(fx){var elem=fx.elem;if(elem.attr){elem.attr(fx.prop,fx.now);}else{oldStepDefault.apply(this,arguments);}};jQ.fx.step.d=function(fx){var elem=fx.elem;if(!fx.started){var ends=pathAnim.init(elem,elem.d,elem.toD);fx.start=ends[0];fx.end=ends[1];fx.started=true;}
elem.attr('d',pathAnim.step(fx.start,fx.end,fx.pos,elem.toD));};jQ.fx.prototype.cur=function(){var elem=this.elem,r;if(elem.attr){r=elem.attr(this.prop);}else{r=oldCur.apply(this,arguments);}
return r;};}
function setTimeMethods(){var useUTC=defaultOptions.global.useUTC;makeTime=useUTC?Date.UTC:function(year,month,date,hours,minutes,seconds){return new Date(year,month,pick(date,1),pick(hours,0),pick(minutes,0),pick(seconds,0)).getTime();};getMinutes=useUTC?'getUTCMinutes':'getMinutes';getHours=useUTC?'getUTCHours':'getHours';getDay=useUTC?'getUTCDay':'getDay';getDate=useUTC?'getUTCDate':'getDate';getMonth=useUTC?'getUTCMonth':'getMonth';getFullYear=useUTC?'getUTCFullYear':'getFullYear';setMinutes=useUTC?'setUTCMinutes':'setMinutes';setHours=useUTC?'setUTCHours':'setHours';setDate=useUTC?'setUTCDate':'setDate';setMonth=useUTC?'setUTCMonth':'setMonth';setFullYear=useUTC?'setUTCFullYear':'setFullYear';}
function setOptions(options){defaultOptions=merge(defaultOptions,options);setTimeMethods();return defaultOptions;}
function getOptions(){return defaultOptions;}
function discardElement(element){if(!garbageBin){garbageBin=createElement(DIV);}
if(element){garbageBin.appendChild(element);}
garbageBin.innerHTML='';}
var
defaultLabelOptions={enabled:true,align:'center',x:0,y:15,style:{color:'#666',fontSize:'11px',lineHeight:'14px'}};defaultOptions={colors:['#4572A7','#AA4643','#89A54E','#80699B','#3D96AE','#DB843D','#92A8CD','#A47D7C','#B5CA92'],symbols:['circle','diamond','square','triangle','triangle-down'],lang:{loading:'Loading...',months:['January','February','March','April','May','June','July','August','September','October','November','December'],shortMonths:['Jan','Feb','Mar','Apr','May','June','Jul','Aug','Sep','Oct','Nov','Dec'],weekdays:['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'],decimalPoint:'.',resetZoom:'Reset zoom',resetZoomTitle:'Reset zoom level 1:1',thousandsSep:','},global:{useUTC:true},chart:{borderColor:'#4572A7',borderRadius:5,defaultSeriesType:'line',ignoreHiddenSeries:true,spacingTop:10,spacingRight:10,spacingBottom:15,spacingLeft:10,style:{fontFamily:'"Lucida Grande", "Lucida Sans Unicode", Verdana, Arial, Helvetica, sans-serif',fontSize:'12px'},backgroundColor:'#FFFFFF',plotBorderColor:'#C0C0C0'},title:{text:'Chart title',align:'center',y:15,style:{color:'#3E576F',fontSize:'16px'}},subtitle:{text:'',align:'center',y:30,style:{color:'#6D869F'}},plotOptions:{line:{allowPointSelect:false,showCheckbox:false,animation:{duration:1000},events:{},lineWidth:2,shadow:true,marker:{enabled:true,lineWidth:0,radius:4,lineColor:'#FFFFFF',states:{hover:{},select:{fillColor:'#FFFFFF',lineColor:'#000000',lineWidth:2}}},point:{events:{}},dataLabels:merge(defaultLabelOptions,{enabled:false,y:-6,formatter:function(){return this.y;}}),showInLegend:true,states:{hover:{marker:{}},select:{marker:{}}},stickyTracking:true}},labels:{style:{position:ABSOLUTE,color:'#3E576F'}},legend:{enabled:true,align:'center',layout:'horizontal',labelFormatter:function(){return this.name;},borderWidth:1,borderColor:'#909090',borderRadius:5,shadow:false,style:{padding:'5px'},itemStyle:{cursor:'pointer',color:'#3E576F'},itemHoverStyle:{cursor:'pointer',color:'#000000'},itemHiddenStyle:{color:'#C0C0C0'},itemCheckboxStyle:{position:ABSOLUTE,width:'13px',height:'13px'},symbolWidth:16,symbolPadding:5,verticalAlign:'bottom',x:0,y:0},loading:{hideDuration:100,labelStyle:{fontWeight:'bold',position:RELATIVE,top:'1em'},showDuration:100,style:{position:ABSOLUTE,backgroundColor:'white',opacity:0.5,textAlign:'center'}},tooltip:{enabled:true,backgroundColor:'rgba(255, 255, 255, .85)',borderWidth:2,borderRadius:5,shadow:true,snap:hasTouch?25:10,style:{color:'#333333',fontSize:'12px',padding:'5px',whiteSpace:'nowrap'}},toolbar:{itemStyle:{color:'#4572A7',cursor:'pointer'}},credits:{enabled:false,text:'Highcharts.com',href:'http://www.highcharts.com',position:{align:'right',x:-10,verticalAlign:'bottom',y:-5},style:{cursor:'pointer',color:'#909090',fontSize:'10px'}}};var defaultXAxisOptions={dateTimeLabelFormats:{second:'%H:%M:%S',minute:'%H:%M',hour:'%H:%M',day:'%e. %b',week:'%e. %b',month:'%b \'%y',year:'%Y'},endOnTick:false,gridLineColor:'#C0C0C0',labels:defaultLabelOptions,lineColor:'#C0D0E0',lineWidth:1,max:null,min:null,minPadding:0.01,maxPadding:0.01,minorGridLineColor:'#E0E0E0',minorGridLineWidth:1,minorTickColor:'#A0A0A0',minorTickLength:2,minorTickPosition:'outside',startOfWeek:1,startOnTick:false,tickColor:'#C0D0E0',tickLength:5,tickmarkPlacement:'between',tickPixelInterval:100,tickPosition:'outside',tickWidth:1,title:{align:'middle',style:{color:'#6D869F',fontWeight:'bold'}},type:'linear'},defaultYAxisOptions=merge(defaultXAxisOptions,{endOnTick:true,gridLineWidth:1,tickPixelInterval:72,showLastLabel:true,labels:{align:'right',x:-8,y:3},lineWidth:0,maxPadding:0.05,minPadding:0.05,startOnTick:true,tickWidth:0,title:{rotation:270,text:'Y-values'},stackLabels:{enabled:false,formatter:function(){return this.total;},style:defaultLabelOptions.style}}),defaultLeftAxisOptions={labels:{align:'right',x:-8,y:null},title:{rotation:270}},defaultRightAxisOptions={labels:{align:'left',x:8,y:null},title:{rotation:90}},defaultBottomAxisOptions={labels:{align:'center',x:0,y:14},title:{rotation:0}},defaultTopAxisOptions=merge(defaultBottomAxisOptions,{labels:{y:-5}});var defaultPlotOptions=defaultOptions.plotOptions,defaultSeriesOptions=defaultPlotOptions.line;defaultPlotOptions.spline=merge(defaultSeriesOptions);defaultPlotOptions.scatter=merge(defaultSeriesOptions,{lineWidth:0,states:{hover:{lineWidth:0}}});defaultPlotOptions.area=merge(defaultSeriesOptions,{});defaultPlotOptions.areaspline=merge(defaultPlotOptions.area);defaultPlotOptions.column=merge(defaultSeriesOptions,{borderColor:'#FFFFFF',borderWidth:1,borderRadius:0,groupPadding:0.2,marker:null,pointPadding:0.1,minPointLength:0,states:{hover:{brightness:0.1,shadow:false},select:{color:'#C0C0C0',borderColor:'#000000',shadow:false}},dataLabels:{y:null,verticalAlign:null}});defaultPlotOptions.bar=merge(defaultPlotOptions.column,{dataLabels:{align:'left',x:5,y:0}});defaultPlotOptions.pie=merge(defaultSeriesOptions,{borderColor:'#FFFFFF',borderWidth:1,center:['50%','50%'],colorByPoint:true,dataLabels:{distance:30,enabled:true,formatter:function(){return this.point.name;},y:5},legendType:'point',marker:null,size:'75%',showInLegend:false,slicedOffset:10,states:{hover:{brightness:0.1,shadow:false}}});setTimeMethods();var Color=function(input){var rgba=[],result;function init(input){result=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]?(?:\.[0-9]+)?)\s*\)/.exec(input);if(result){rgba=[pInt(result[1]),pInt(result[2]),pInt(result[3]),parseFloat(result[4],10)];}else{result=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(input);if(result){rgba=[pInt(result[1],16),pInt(result[2],16),pInt(result[3],16),1];}}}
function get(format){var ret;if(rgba&&!isNaN(rgba[0])){if(format==='rgb'){ret='rgb('+rgba[0]+','+rgba[1]+','+rgba[2]+')';}else if(format==='a'){ret=rgba[3];}else{ret='rgba('+rgba.join(',')+')';}}else{ret=input;}
return ret;}
function brighten(alpha){if(isNumber(alpha)&&alpha!==0){var i;for(i=0;i<3;i++){rgba[i]+=pInt(alpha*255);if(rgba[i]<0){rgba[i]=0;}
if(rgba[i]>255){rgba[i]=255;}}}
return this;}
function setOpacity(alpha){rgba[3]=alpha;return this;}
init(input);return{get:get,brighten:brighten,setOpacity:setOpacity};};function SVGElement(){}
SVGElement.prototype={init:function(renderer,nodeName){this.element=doc.createElementNS(SVG_NS,nodeName);this.renderer=renderer;},animate:function(params,options,complete){var animOptions=pick(options,globalAnimation,true);if(animOptions){animOptions=merge(animOptions);if(complete){animOptions.complete=complete;}
animate(this,params,animOptions);}else{this.attr(params);if(complete){complete();}}},attr:function(hash,val){var key,value,i,child,element=this.element,nodeName=element.nodeName,renderer=this.renderer,skipAttr,shadows=this.shadows,htmlNode=this.htmlNode,hasSetSymbolSize,ret=this;if(isString(hash)&&defined(val)){key=hash;hash={};hash[key]=val;}
if(isString(hash)){key=hash;if(nodeName==='circle'){key={x:'cx',y:'cy'}[key]||key;}else if(key==='strokeWidth'){key='stroke-width';}
ret=attr(element,key)||this[key]||0;if(key!=='d'&&key!=='visibility'){ret=parseFloat(ret);}}else{for(key in hash){skipAttr=false;value=hash[key];if(key==='d'){if(value&&value.join){value=value.join(' ');}
if(/(NaN| {2}|^$)/.test(value)){value='M 0 0';}
this.d=value;}else if(key==='x'&&nodeName==='text'){for(i=0;i<element.childNodes.length;i++){child=element.childNodes[i];if(attr(child,'x')===attr(element,'x')){attr(child,'x',value);}}
if(this.rotation){attr(element,'transform','rotate('+this.rotation+' '+value+' '+
pInt(hash.y||attr(element,'y'))+')');}}else if(key==='fill'){value=renderer.color(value,element,key);}else if(nodeName==='circle'&&(key==='x'||key==='y')){key={x:'cx',y:'cy'}[key]||key;}else if(key==='translateX'||key==='translateY'||key==='rotation'||key==='verticalAlign'){this[key]=value;this.updateTransform();skipAttr=true;}else if(key==='stroke'){value=renderer.color(value,element,key);}else if(key==='dashstyle'){key='stroke-dasharray';value=value&&value.toLowerCase();if(value==='solid'){value=NONE;}else if(value){value=value.replace('shortdashdotdot','3,1,1,1,1,1,').replace('shortdashdot','3,1,1,1').replace('shortdot','1,1,').replace('shortdash','3,1,').replace('longdash','8,3,').replace(/dot/g,'1,3,').replace('dash','4,3,').replace(/,$/,'').split(',');i=value.length;while(i--){value[i]=pInt(value[i])*hash['stroke-width'];}
value=value.join(',');}}else if(key==='isTracker'){this[key]=value;}else if(key==='width'){value=pInt(value);}else if(key==='align'){key='text-anchor';value={left:'start',center:'middle',right:'end'}[value];}else if(key==='title'){var title=doc.createElementNS(SVG_NS,'title');title.appendChild(doc.createTextNode(value));element.appendChild(title);}
if(key==='strokeWidth'){key='stroke-width';}
if(isWebKit&&key==='stroke-width'&&value===0){value=0.000001;}
if(this.symbolName&&/^(x|y|r|start|end|innerR)/.test(key)){if(!hasSetSymbolSize){this.symbolAttr(hash);hasSetSymbolSize=true;}
skipAttr=true;}
if(shadows&&/^(width|height|visibility|x|y|d)$/.test(key)){i=shadows.length;while(i--){attr(shadows[i],key,value);}}
if((key==='width'||key==='height')&&nodeName==='rect'&&value<0){value=0;}
if(key==='text'){this.textStr=value;if(this.added){renderer.buildText(this);}}else if(!skipAttr){attr(element,key,value);}
if(htmlNode&&(key==='x'||key==='y'||key==='translateX'||key==='translateY'||key==='visibility')){var wrapper=this,bBox,arr=htmlNode.length?htmlNode:[this],length=arr.length,itemWrapper,j;for(j=0;j<length;j++){itemWrapper=arr[j];bBox=itemWrapper.getBBox();htmlNode=itemWrapper.htmlNode;css(htmlNode,extend(wrapper.styles,{left:(bBox.x+(wrapper.translateX||0))+PX,top:(bBox.y+(wrapper.translateY||0))+PX}));if(key==='visibility'){css(htmlNode,{visibility:value});}}}}}
return ret;},symbolAttr:function(hash){var wrapper=this;each(['x','y','r','start','end','width','height','innerR'],function(key){wrapper[key]=pick(hash[key],wrapper[key]);});wrapper.attr({d:wrapper.renderer.symbols[wrapper.symbolName](mathRound(wrapper.x*2)/2,mathRound(wrapper.y*2)/2,wrapper.r,{start:wrapper.start,end:wrapper.end,width:wrapper.width,height:wrapper.height,innerR:wrapper.innerR})});},clip:function(clipRect){return this.attr('clip-path','url('+this.renderer.url+'#'+clipRect.id+')');},crisp:function(strokeWidth,x,y,width,height){var wrapper=this,key,attr={},values={},normalizer;strokeWidth=strokeWidth||wrapper.strokeWidth||0;normalizer=strokeWidth%2/2;values.x=mathFloor(x||wrapper.x||0)+normalizer;values.y=mathFloor(y||wrapper.y||0)+normalizer;values.width=mathFloor((width||wrapper.width||0)-2*normalizer);values.height=mathFloor((height||wrapper.height||0)-2*normalizer);values.strokeWidth=strokeWidth;for(key in values){if(wrapper[key]!==values[key]){wrapper[key]=attr[key]=values[key];}}
return attr;},css:function(styles){var elemWrapper=this,elem=elemWrapper.element,textWidth=styles&&styles.width&&elem.nodeName==='text',n,serializedCss='',hyphenate=function(a,b){return'-'+b.toLowerCase();};if(styles&&styles.color){styles.fill=styles.color;}
styles=extend(elemWrapper.styles,styles);elemWrapper.styles=styles;if(isIE&&!hasSVG){if(textWidth){delete styles.width;}
css(elemWrapper.element,styles);}else{for(n in styles){serializedCss+=n.replace(/([A-Z])/g,hyphenate)+':'+styles[n]+';';}
elemWrapper.attr({style:serializedCss});}
if(textWidth&&elemWrapper.added){elemWrapper.renderer.buildText(elemWrapper);}
return elemWrapper;},on:function(eventType,handler){var fn=handler;if(hasTouch&&eventType==='click'){eventType='touchstart';fn=function(e){e.preventDefault();handler();};}
this.element['on'+eventType]=fn;return this;},translate:function(x,y){return this.attr({translateX:x,translateY:y});},invert:function(){var wrapper=this;wrapper.inverted=true;wrapper.updateTransform();return wrapper;},updateTransform:function(){var wrapper=this,translateX=wrapper.translateX||0,translateY=wrapper.translateY||0,inverted=wrapper.inverted,rotation=wrapper.rotation,transform=[];if(inverted){translateX+=wrapper.attr('width');translateY+=wrapper.attr('height');}
if(translateX||translateY){transform.push('translate('+translateX+','+translateY+')');}
if(inverted){transform.push('rotate(90) scale(-1,1)');}else if(rotation){transform.push('rotate('+rotation+' '+wrapper.x+' '+wrapper.y+')');}
if(transform.length){attr(wrapper.element,'transform',transform.join(' '));}},toFront:function(){var element=this.element;element.parentNode.appendChild(element);return this;},align:function(alignOptions,alignByTranslate,box){var elemWrapper=this;if(!alignOptions){alignOptions=elemWrapper.alignOptions;alignByTranslate=elemWrapper.alignByTranslate;}else{elemWrapper.alignOptions=alignOptions;elemWrapper.alignByTranslate=alignByTranslate;if(!box){elemWrapper.renderer.alignedObjects.push(elemWrapper);}}
box=pick(box,elemWrapper.renderer);var align=alignOptions.align,vAlign=alignOptions.verticalAlign,x=(box.x||0)+(alignOptions.x||0),y=(box.y||0)+(alignOptions.y||0),attribs={};if(/^(right|center)$/.test(align)){x+=(box.width-(alignOptions.width||0))/{right:1,center:2}[align];}
attribs[alignByTranslate?'translateX':'x']=mathRound(x);if(/^(bottom|middle)$/.test(vAlign)){y+=(box.height-(alignOptions.height||0))/({bottom:1,middle:2}[vAlign]||1);}
attribs[alignByTranslate?'translateY':'y']=mathRound(y);elemWrapper[elemWrapper.placed?'animate':'attr'](attribs);elemWrapper.placed=true;elemWrapper.alignAttr=attribs;return elemWrapper;},getBBox:function(){var bBox,width,height,rotation=this.rotation,rad=rotation*deg2rad;try{bBox=extend({},this.element.getBBox());}catch(e){bBox={width:0,height:0};}
width=bBox.width;height=bBox.height;if(rotation){bBox.width=mathAbs(height*mathSin(rad))+mathAbs(width*mathCos(rad));bBox.height=mathAbs(height*mathCos(rad))+mathAbs(width*mathSin(rad));}
return bBox;},show:function(){return this.attr({visibility:VISIBLE});},hide:function(){return this.attr({visibility:HIDDEN});},add:function(parent){var renderer=this.renderer,parentWrapper=parent||renderer,parentNode=parentWrapper.element||renderer.box,childNodes=parentNode.childNodes,element=this.element,zIndex=attr(element,'zIndex'),otherElement,otherZIndex,i;this.parentInverted=parent&&parent.inverted;if(this.textStr!==undefined){renderer.buildText(this);}
if(parent&&this.htmlNode){if(!parent.htmlNode){parent.htmlNode=[];}
parent.htmlNode.push(this);}
if(zIndex){parentWrapper.handleZ=true;zIndex=pInt(zIndex);}
if(parentWrapper.handleZ){for(i=0;i<childNodes.length;i++){otherElement=childNodes[i];otherZIndex=attr(otherElement,'zIndex');if(otherElement!==element&&(pInt(otherZIndex)>zIndex||(!defined(zIndex)&&defined(otherZIndex)))){parentNode.insertBefore(element,otherElement);return this;}}}
parentNode.appendChild(element);this.added=true;return this;},destroy:function(){var wrapper=this,element=wrapper.element||{},shadows=wrapper.shadows,parentNode=element.parentNode,key,i;element.onclick=element.onmouseout=element.onmouseover=element.onmousemove=null;stop(wrapper);if(wrapper.clipPath){wrapper.clipPath=wrapper.clipPath.destroy();}
if(wrapper.stops){for(i=0;i<wrapper.stops.length;i++){wrapper.stops[i]=wrapper.stops[i].destroy();}
wrapper.stops=null;}
if(parentNode){parentNode.removeChild(element);}
if(shadows){each(shadows,function(shadow){parentNode=shadow.parentNode;if(parentNode){parentNode.removeChild(shadow);}});}
erase(wrapper.renderer.alignedObjects,wrapper);for(key in wrapper){delete wrapper[key];}
return null;},empty:function(){var element=this.element,childNodes=element.childNodes,i=childNodes.length;while(i--){element.removeChild(childNodes[i]);}},shadow:function(apply,group){var shadows=[],i,shadow,element=this.element,transform=this.parentInverted?'(-1,-1)':'(1,1)';if(apply){for(i=1;i<=3;i++){shadow=element.cloneNode(0);attr(shadow,{'isShadow':'true','stroke':'rgb(0, 0, 0)','stroke-opacity':0.05*i,'stroke-width':7-2*i,'transform':'translate'+transform,'fill':NONE});if(group){group.element.appendChild(shadow);}else{element.parentNode.insertBefore(shadow,element);}
shadows.push(shadow);}
this.shadows=shadows;}
return this;}};var SVGRenderer=function(){this.init.apply(this,arguments);};SVGRenderer.prototype={Element:SVGElement,init:function(container,width,height,forExport){var renderer=this,loc=location,boxWrapper;boxWrapper=renderer.createElement('svg').attr({xmlns:SVG_NS,version:'1.1'});container.appendChild(boxWrapper.element);renderer.box=boxWrapper.element;renderer.boxWrapper=boxWrapper;renderer.alignedObjects=[];renderer.url=isIE?'':loc.href.replace(/#.*?$/,'');renderer.defs=this.createElement('defs').add();renderer.forExport=forExport;renderer.gradients=[];renderer.setSize(width,height,false);},destroy:function(){var renderer=this,i,rendererGradients=renderer.gradients,rendererDefs=renderer.defs;renderer.box=null;renderer.boxWrapper=renderer.boxWrapper.destroy();if(rendererGradients){for(i=0;i<rendererGradients.length;i++){renderer.gradients[i]=rendererGradients[i].destroy();}
renderer.gradients=null;}
if(rendererDefs){renderer.defs=rendererDefs.destroy();}
renderer.alignedObjects=null;return null;},createElement:function(nodeName){var wrapper=new this.Element();wrapper.init(this,nodeName);return wrapper;},buildText:function(wrapper){var textNode=wrapper.element,lines=pick(wrapper.textStr,'').toString().replace(/<(b|strong)>/g,'<span style="font-weight:bold">').replace(/<(i|em)>/g,'<span style="font-style:italic">').replace(/<a/g,'<span').replace(/<\/(b|strong|i|em|a)>/g,'</span>').split(/<br.*?>/g),childNodes=textNode.childNodes,styleRegex=/style="([^"]+)"/,hrefRegex=/href="([^"]+)"/,parentX=attr(textNode,'x'),textStyles=wrapper.styles,renderAsHtml=textStyles&&wrapper.useHTML&&!this.forExport,htmlNode=wrapper.htmlNode,width=textStyles&&pInt(textStyles.width),textLineHeight=textStyles&&textStyles.lineHeight,lastLine,GET_COMPUTED_STYLE='getComputedStyle',i=childNodes.length;while(i--){textNode.removeChild(childNodes[i]);}
if(width&&!wrapper.added){this.box.appendChild(textNode);}
each(lines,function(line,lineNo){var spans,spanNo=0,lineHeight;line=line.replace(/<span/g,'|||<span').replace(/<\/span>/g,'</span>|||');spans=line.split('|||');each(spans,function(span){if(span!==''||spans.length===1){var attributes={},tspan=doc.createElementNS(SVG_NS,'tspan');if(styleRegex.test(span)){attr(tspan,'style',span.match(styleRegex)[1].replace(/(;| |^)color([ :])/,'$1fill$2'));}
if(hrefRegex.test(span)){attr(tspan,'onclick','location.href=\"'+span.match(hrefRegex)[1]+'\"');css(tspan,{cursor:'pointer'});}
span=(span.replace(/<(.|\n)*?>/g,'')||' ').replace(/&lt;/g,'<').replace(/&gt;/g,'>');tspan.appendChild(doc.createTextNode(span));if(!spanNo){attributes.x=parentX;}else{attributes.dx=3;}
if(!spanNo){if(lineNo){if(!hasSVG&&wrapper.renderer.forExport){css(tspan,{display:'block'});}
lineHeight=win[GET_COMPUTED_STYLE]&&pInt(win[GET_COMPUTED_STYLE](lastLine,null).getPropertyValue('line-height'));if(!lineHeight||isNaN(lineHeight)){lineHeight=textLineHeight||lastLine.offsetHeight||18;}
attr(tspan,'dy',lineHeight);}
lastLine=tspan;}
attr(tspan,attributes);textNode.appendChild(tspan);spanNo++;if(width){var words=span.replace(/-/g,'- ').split(' '),tooLong,actualWidth,rest=[];while(words.length||rest.length){actualWidth=textNode.getBBox().width;tooLong=actualWidth>width;if(!tooLong||words.length===1){words=rest;rest=[];if(words.length){tspan=doc.createElementNS(SVG_NS,'tspan');attr(tspan,{dy:textLineHeight||16,x:parentX});textNode.appendChild(tspan);if(actualWidth>width){width=actualWidth;}}}else{tspan.removeChild(tspan.firstChild);rest.unshift(words.pop());}
if(words.length){tspan.appendChild(doc.createTextNode(words.join(' ').replace(/- /g,'-')));}}}}});});if(renderAsHtml){if(!htmlNode){htmlNode=wrapper.htmlNode=createElement('span',null,extend(textStyles,{position:ABSOLUTE,top:0,left:0}),this.box.parentNode);}
htmlNode.innerHTML=wrapper.textStr;i=childNodes.length;while(i--){childNodes[i].style.visibility=HIDDEN;}}},crispLine:function(points,width){if(points[1]===points[4]){points[1]=points[4]=mathRound(points[1])+(width%2/2);}
if(points[2]===points[5]){points[2]=points[5]=mathRound(points[2])+(width%2/2);}
return points;},path:function(path){return this.createElement('path').attr({d:path,fill:NONE});},circle:function(x,y,r){var attr=isObject(x)?x:{x:x,y:y,r:r};return this.createElement('circle').attr(attr);},arc:function(x,y,r,innerR,start,end){if(isObject(x)){y=x.y;r=x.r;innerR=x.innerR;start=x.start;end=x.end;x=x.x;}
return this.symbol('arc',x||0,y||0,r||0,{innerR:innerR||0,start:start||0,end:end||0});},rect:function(x,y,width,height,r,strokeWidth){if(isObject(x)){y=x.y;width=x.width;height=x.height;r=x.r;strokeWidth=x.strokeWidth;x=x.x;}
var wrapper=this.createElement('rect').attr({rx:r,ry:r,fill:NONE});return wrapper.attr(wrapper.crisp(strokeWidth,x,y,mathMax(width,0),mathMax(height,0)));},setSize:function(width,height,animate){var renderer=this,alignedObjects=renderer.alignedObjects,i=alignedObjects.length;renderer.width=width;renderer.height=height;renderer.boxWrapper[pick(animate,true)?'animate':'attr']({width:width,height:height});while(i--){alignedObjects[i].align();}},g:function(name){var elem=this.createElement('g');return defined(name)?elem.attr({'class':PREFIX+name}):elem;},image:function(src,x,y,width,height){var attribs={preserveAspectRatio:NONE},elemWrapper;if(arguments.length>1){extend(attribs,{x:x,y:y,width:width,height:height});}
elemWrapper=this.createElement('image').attr(attribs);if(elemWrapper.element.setAttributeNS){elemWrapper.element.setAttributeNS('http://www.w3.org/1999/xlink','href',src);}else{elemWrapper.element.setAttribute('hc-svg-href',src);}
return elemWrapper;},symbol:function(symbol,x,y,radius,options){var obj,symbolFn=this.symbols[symbol],path=symbolFn&&symbolFn(mathRound(x),mathRound(y),radius,options),imageRegex=/^url\((.*?)\)$/,imageSrc,imageSize;if(path){obj=this.path(path);extend(obj,{symbolName:symbol,x:x,y:y,r:radius});if(options){extend(obj,options);}}else if(imageRegex.test(symbol)){var centerImage=function(img,size){img.attr({width:size[0],height:size[1]}).translate(-mathRound(size[0]/2),-mathRound(size[1]/2));};imageSrc=symbol.match(imageRegex)[1];imageSize=symbolSizes[imageSrc];obj=this.image(imageSrc).attr({x:x,y:y});if(imageSize){centerImage(obj,imageSize);}else{obj.attr({width:0,height:0});createElement('img',{onload:function(){var img=this;centerImage(obj,symbolSizes[imageSrc]=[img.width,img.height]);},src:imageSrc});}}else{obj=this.circle(x,y,radius);}
return obj;},symbols:{'square':function(x,y,radius){var len=0.707*radius;return[M,x-len,y-len,L,x+len,y-len,x+len,y+len,x-len,y+len,'Z'];},'triangle':function(x,y,radius){return[M,x,y-1.33*radius,L,x+radius,y+0.67*radius,x-radius,y+0.67*radius,'Z'];},'triangle-down':function(x,y,radius){return[M,x,y+1.33*radius,L,x-radius,y-0.67*radius,x+radius,y-0.67*radius,'Z'];},'diamond':function(x,y,radius){return[M,x,y-radius,L,x+radius,y,x,y+radius,x-radius,y,'Z'];},'arc':function(x,y,radius,options){var start=options.start,end=options.end-0.000001,innerRadius=options.innerR,cosStart=mathCos(start),sinStart=mathSin(start),cosEnd=mathCos(end),sinEnd=mathSin(end),longArc=options.end-start<mathPI?0:1;return[M,x+radius*cosStart,y+radius*sinStart,'A',radius,radius,0,longArc,1,x+radius*cosEnd,y+radius*sinEnd,L,x+innerRadius*cosEnd,y+innerRadius*sinEnd,'A',innerRadius,innerRadius,0,longArc,0,x+innerRadius*cosStart,y+innerRadius*sinStart,'Z'];}},clipRect:function(x,y,width,height){var wrapper,id=PREFIX+idCounter++,clipPath=this.createElement('clipPath').attr({id:id}).add(this.defs);wrapper=this.rect(x,y,width,height,0).add(clipPath);wrapper.id=id;wrapper.clipPath=clipPath;return wrapper;},color:function(color,elem,prop){var colorObject,regexRgba=/^rgba/;if(color&&color.linearGradient){var renderer=this,strLinearGradient='linearGradient',linearGradient=color[strLinearGradient],id=PREFIX+idCounter++,gradientObject,stopColor,stopOpacity;gradientObject=renderer.createElement(strLinearGradient).attr({id:id,gradientUnits:'userSpaceOnUse',x1:linearGradient[0],y1:linearGradient[1],x2:linearGradient[2],y2:linearGradient[3]}).add(renderer.defs);renderer.gradients.push(gradientObject);gradientObject.stops=[];each(color.stops,function(stop){var stopObject;if(regexRgba.test(stop[1])){colorObject=Color(stop[1]);stopColor=colorObject.get('rgb');stopOpacity=colorObject.get('a');}else{stopColor=stop[1];stopOpacity=1;}
stopObject=renderer.createElement('stop').attr({offset:stop[0],'stop-color':stopColor,'stop-opacity':stopOpacity}).add(gradientObject);gradientObject.stops.push(stopObject);});return'url('+this.url+'#'+id+')';}else if(regexRgba.test(color)){colorObject=Color(color);attr(elem,prop+'-opacity',colorObject.get('a'));return colorObject.get('rgb');}else{elem.removeAttribute(prop+'-opacity');return color;}},text:function(str,x,y,useHTML){var defaultChartStyle=defaultOptions.chart.style,wrapper;x=mathRound(pick(x,0));y=mathRound(pick(y,0));wrapper=this.createElement('text').attr({x:x,y:y,text:str}).css({fontFamily:defaultChartStyle.fontFamily,fontSize:defaultChartStyle.fontSize});wrapper.x=x;wrapper.y=y;wrapper.useHTML=useHTML;return wrapper;}};Renderer=SVGRenderer;var VMLRenderer;if(!hasSVG){var VMLElement=extendClass(SVGElement,{init:function(renderer,nodeName){var markup=['<',nodeName,' filled="f" stroked="f"'],style=['position: ',ABSOLUTE,';'];if(nodeName==='shape'||nodeName===DIV){style.push('left:0;top:0;width:10px;height:10px;');}
if(docMode8){style.push('visibility: ',nodeName===DIV?HIDDEN:VISIBLE);}
markup.push(' style="',style.join(''),'"/>');if(nodeName){markup=nodeName===DIV||nodeName==='span'||nodeName==='img'?markup.join(''):renderer.prepVML(markup);this.element=createElement(markup);}
this.renderer=renderer;},add:function(parent){var wrapper=this,renderer=wrapper.renderer,element=wrapper.element,box=renderer.box,inverted=parent&&parent.inverted,parentNode=parent?parent.element||parent:box;if(inverted){renderer.invertChild(element,parentNode);}
if(docMode8&&parentNode.gVis===HIDDEN){css(element,{visibility:HIDDEN});}
parentNode.appendChild(element);wrapper.added=true;if(wrapper.alignOnAdd){wrapper.updateTransform();}
return wrapper;},attr:function(hash,val){var key,value,i,element=this.element||{},elemStyle=element.style,nodeName=element.nodeName,renderer=this.renderer,symbolName=this.symbolName,childNodes,hasSetSymbolSize,shadows=this.shadows,skipAttr,ret=this;if(isString(hash)&&defined(val)){key=hash;hash={};hash[key]=val;}
if(isString(hash)){key=hash;if(key==='strokeWidth'||key==='stroke-width'){ret=this.strokeweight;}else{ret=this[key];}}else{for(key in hash){value=hash[key];skipAttr=false;if(symbolName&&/^(x|y|r|start|end|width|height|innerR)/.test(key)){if(!hasSetSymbolSize){this.symbolAttr(hash);hasSetSymbolSize=true;}
skipAttr=true;}else if(key==='d'){value=value||[];this.d=value.join(' ');i=value.length;var convertedPath=[];while(i--){if(isNumber(value[i])){convertedPath[i]=mathRound(value[i]*10)-5;}else if(value[i]==='Z'){convertedPath[i]='x';}else{convertedPath[i]=value[i];}}
value=convertedPath.join(' ')||'x';element.path=value;if(shadows){i=shadows.length;while(i--){shadows[i].path=value;}}
skipAttr=true;}else if(key==='zIndex'||key==='visibility'){if(docMode8&&key==='visibility'&&nodeName==='DIV'){element.gVis=value;childNodes=element.childNodes;i=childNodes.length;while(i--){css(childNodes[i],{visibility:value});}
if(value===VISIBLE){value=null;}}
if(value){elemStyle[key]=value;}
skipAttr=true;}else if(/^(width|height)$/.test(key)){this[key]=value;if(this.updateClipping){this[key]=value;this.updateClipping();}else{elemStyle[key]=value;}
skipAttr=true;}else if(/^(x|y)$/.test(key)){this[key]=value;if(element.tagName==='SPAN'){this.updateTransform();}else{elemStyle[{x:'left',y:'top'}[key]]=value;}}else if(key==='class'){element.className=value;}else if(key==='stroke'){value=renderer.color(value,element,key);key='strokecolor';}else if(key==='stroke-width'||key==='strokeWidth'){element.stroked=value?true:false;key='strokeweight';this[key]=value;if(isNumber(value)){value+=PX;}}else if(key==='dashstyle'){var strokeElem=element.getElementsByTagName('stroke')[0]||createElement(renderer.prepVML(['<stroke/>']),null,null,element);strokeElem[key]=value||'solid';this.dashstyle=value;skipAttr=true;}else if(key==='fill'){if(nodeName==='SPAN'){elemStyle.color=value;}else{element.filled=value!==NONE?true:false;value=renderer.color(value,element,key);key='fillcolor';}}else if(key==='translateX'||key==='translateY'||key==='rotation'||key==='align'){if(key==='align'){key='textAlign';}
this[key]=value;this.updateTransform();skipAttr=true;}else if(key==='text'){this.bBox=null;element.innerHTML=value;skipAttr=true;}
if(shadows&&key==='visibility'){i=shadows.length;while(i--){shadows[i].style[key]=value;}}
if(!skipAttr){if(docMode8){element[key]=value;}else{attr(element,key,value);}}}}
return ret;},clip:function(clipRect){var wrapper=this,clipMembers=clipRect.members;clipMembers.push(wrapper);wrapper.destroyClip=function(){erase(clipMembers,wrapper);};return wrapper.css(clipRect.getCSS(wrapper.inverted));},css:function(styles){var wrapper=this,element=wrapper.element,textWidth=styles&&element.tagName==='SPAN'&&styles.width;if(textWidth){delete styles.width;wrapper.textWidth=textWidth;wrapper.updateTransform();}
wrapper.styles=extend(wrapper.styles,styles);css(wrapper.element,styles);return wrapper;},destroy:function(){var wrapper=this;if(wrapper.destroyClip){wrapper.destroyClip();}
return SVGElement.prototype.destroy.apply(wrapper);},empty:function(){var element=this.element,childNodes=element.childNodes,i=childNodes.length,node;while(i--){node=childNodes[i];node.parentNode.removeChild(node);}},getBBox:function(){var wrapper=this,element=wrapper.element,bBox=wrapper.bBox;if(!bBox){if(element.nodeName==='text'){element.style.position=ABSOLUTE;}
bBox=wrapper.bBox={x:element.offsetLeft,y:element.offsetTop,width:element.offsetWidth,height:element.offsetHeight};}
return bBox;},on:function(eventType,handler){this.element['on'+eventType]=function(){var evt=win.event;evt.target=evt.srcElement;handler(evt);};return this;},updateTransform:function(){if(!this.added){this.alignOnAdd=true;return;}
var wrapper=this,elem=wrapper.element,translateX=wrapper.translateX||0,translateY=wrapper.translateY||0,x=wrapper.x||0,y=wrapper.y||0,align=wrapper.textAlign||'left',alignCorrection={left:0,center:0.5,right:1}[align],nonLeft=align&&align!=='left';if(translateX||translateY){wrapper.css({marginLeft:translateX,marginTop:translateY});}
if(wrapper.inverted){each(elem.childNodes,function(child){wrapper.renderer.invertChild(child,elem);});}
if(elem.tagName==='SPAN'){var width,height,rotation=wrapper.rotation,lineHeight,radians=0,costheta=1,sintheta=0,quad,textWidth=pInt(wrapper.textWidth),xCorr=wrapper.xCorr||0,yCorr=wrapper.yCorr||0,currentTextTransform=[rotation,align,elem.innerHTML,wrapper.textWidth].join(',');if(currentTextTransform!==wrapper.cTT){if(defined(rotation)){radians=rotation*deg2rad;costheta=mathCos(radians);sintheta=mathSin(radians);css(elem,{filter:rotation?['progid:DXImageTransform.Microsoft.Matrix(M11=',costheta,', M12=',-sintheta,', M21=',sintheta,', M22=',costheta,', sizingMethod=\'auto expand\')'].join(''):NONE});}
width=elem.offsetWidth;height=elem.offsetHeight;if(width>textWidth){css(elem,{width:textWidth+PX,display:'block',whiteSpace:'normal'});width=textWidth;}
lineHeight=mathRound((pInt(elem.style.fontSize)||12)*1.2);xCorr=costheta<0&&-width;yCorr=sintheta<0&&-height;quad=costheta*sintheta<0;xCorr+=sintheta*lineHeight*(quad?1-alignCorrection:alignCorrection);yCorr-=costheta*lineHeight*(rotation?(quad?alignCorrection:1-alignCorrection):1);if(nonLeft){xCorr-=width*alignCorrection*(costheta<0?-1:1);if(rotation){yCorr-=height*alignCorrection*(sintheta<0?-1:1);}
css(elem,{textAlign:align});}
wrapper.xCorr=xCorr;wrapper.yCorr=yCorr;}
css(elem,{left:x+xCorr,top:y+yCorr});wrapper.cTT=currentTextTransform;}},shadow:function(apply,group){var shadows=[],i,element=this.element,renderer=this.renderer,shadow,elemStyle=element.style,markup,path=element.path;if(path&&typeof path.value!=='string'){path='x';}
if(apply){for(i=1;i<=3;i++){markup=['<shape isShadow="true" strokeweight="',(7-2*i),'" filled="false" path="',path,'" coordsize="100,100" style="',element.style.cssText,'" />'];shadow=createElement(renderer.prepVML(markup),null,{left:pInt(elemStyle.left)+1,top:pInt(elemStyle.top)+1});markup=['<stroke color="black" opacity="',(0.05*i),'"/>'];createElement(renderer.prepVML(markup),null,null,shadow);if(group){group.element.appendChild(shadow);}else{element.parentNode.insertBefore(shadow,element);}
shadows.push(shadow);}
this.shadows=shadows;}
return this;}});VMLRenderer=function(){this.init.apply(this,arguments);};VMLRenderer.prototype=merge(SVGRenderer.prototype,{Element:VMLElement,isIE8:userAgent.indexOf('MSIE 8.0')>-1,init:function(container,width,height){var renderer=this,boxWrapper;renderer.alignedObjects=[];boxWrapper=renderer.createElement(DIV);container.appendChild(boxWrapper.element);renderer.box=boxWrapper.element;renderer.boxWrapper=boxWrapper;renderer.setSize(width,height,false);if(!doc.namespaces.hcv){doc.namespaces.add('hcv','urn:schemas-microsoft-com:vml');doc.createStyleSheet().cssText='hcv\\:fill, hcv\\:path, hcv\\:shape, hcv\\:stroke'+'{ behavior:url(#default#VML); display: inline-block; } ';}},clipRect:function(x,y,width,height){var clipRect=this.createElement();return extend(clipRect,{members:[],left:x,top:y,width:width,height:height,getCSS:function(inverted){var rect=this,top=rect.top,left=rect.left,right=left+rect.width,bottom=top+rect.height,ret={clip:'rect('+
mathRound(inverted?left:top)+'px,'+
mathRound(inverted?bottom:right)+'px,'+
mathRound(inverted?right:bottom)+'px,'+
mathRound(inverted?top:left)+'px)'};if(!inverted&&docMode8){extend(ret,{width:right+PX,height:bottom+PX});}
return ret;},updateClipping:function(){each(clipRect.members,function(member){member.css(clipRect.getCSS(member.inverted));});}});},color:function(color,elem,prop){var colorObject,regexRgba=/^rgba/,markup;if(color&&color.linearGradient){var stopColor,stopOpacity,linearGradient=color.linearGradient,angle,color1,opacity1,color2,opacity2;each(color.stops,function(stop,i){if(regexRgba.test(stop[1])){colorObject=Color(stop[1]);stopColor=colorObject.get('rgb');stopOpacity=colorObject.get('a');}else{stopColor=stop[1];stopOpacity=1;}
if(!i){color1=stopColor;opacity1=stopOpacity;}else{color2=stopColor;opacity2=stopOpacity;}});angle=90-math.atan((linearGradient[3]-linearGradient[1])/(linearGradient[2]-linearGradient[0]))*180/mathPI;markup=['<',prop,' colors="0% ',color1,',100% ',color2,'" angle="',angle,'" opacity="',opacity2,'" o:opacity2="',opacity1,'" type="gradient" focus="100%" />'];createElement(this.prepVML(markup),null,null,elem);}else if(regexRgba.test(color)&&elem.tagName!=='IMG'){colorObject=Color(color);markup=['<',prop,' opacity="',colorObject.get('a'),'"/>'];createElement(this.prepVML(markup),null,null,elem);return colorObject.get('rgb');}else{var strokeNodes=elem.getElementsByTagName(prop);if(strokeNodes.length){strokeNodes[0].opacity=1;}
return color;}},prepVML:function(markup){var vmlStyle='display:inline-block;behavior:url(#default#VML);',isIE8=this.isIE8;markup=markup.join('');if(isIE8){markup=markup.replace('/>',' xmlns="urn:schemas-microsoft-com:vml" />');if(markup.indexOf('style="')===-1){markup=markup.replace('/>',' style="'+vmlStyle+'" />');}else{markup=markup.replace('style="','style="'+vmlStyle);}}else{markup=markup.replace('<','<hcv:');}
return markup;},text:function(str,x,y){var defaultChartStyle=defaultOptions.chart.style;return this.createElement('span').attr({text:str,x:mathRound(x),y:mathRound(y)}).css({whiteSpace:'nowrap',fontFamily:defaultChartStyle.fontFamily,fontSize:defaultChartStyle.fontSize});},path:function(path){return this.createElement('shape').attr({coordsize:'100 100',d:path});},circle:function(x,y,r){return this.symbol('circle').attr({x:x,y:y,r:r});},g:function(name){var wrapper,attribs;if(name){attribs={'className':PREFIX+name,'class':PREFIX+name};}
wrapper=this.createElement(DIV).attr(attribs);return wrapper;},image:function(src,x,y,width,height){var obj=this.createElement('img').attr({src:src});if(arguments.length>1){obj.css({left:x,top:y,width:width,height:height});}
return obj;},rect:function(x,y,width,height,r,strokeWidth){if(isObject(x)){y=x.y;width=x.width;height=x.height;r=x.r;strokeWidth=x.strokeWidth;x=x.x;}
var wrapper=this.symbol('rect');wrapper.r=r;return wrapper.attr(wrapper.crisp(strokeWidth,x,y,mathMax(width,0),mathMax(height,0)));},invertChild:function(element,parentNode){var parentStyle=parentNode.style;css(element,{flip:'x',left:pInt(parentStyle.width)-10,top:pInt(parentStyle.height)-10,rotation:-90});},symbols:{arc:function(x,y,radius,options){var start=options.start,end=options.end,cosStart=mathCos(start),sinStart=mathSin(start),cosEnd=mathCos(end),sinEnd=mathSin(end),innerRadius=options.innerR,circleCorrection=0.07/radius,innerCorrection=(innerRadius&&0.1/innerRadius)||0;if(end-start===0){return['x'];}else if(2*mathPI-end+start<circleCorrection){cosEnd=-circleCorrection;}else if(end-start<innerCorrection){cosEnd=mathCos(start+innerCorrection);}
return['wa',x-radius,y-radius,x+radius,y+radius,x+radius*cosStart,y+radius*sinStart,x+radius*cosEnd,y+radius*sinEnd,'at',x-innerRadius,y-innerRadius,x+innerRadius,y+innerRadius,x+innerRadius*cosEnd,y+innerRadius*sinEnd,x+innerRadius*cosStart,y+innerRadius*sinStart,'x','e'];},circle:function(x,y,r){return['wa',x-r,y-r,x+r,y+r,x+r,y,x+r,y,'e'];},rect:function(left,top,r,options){if(!defined(options)){return[];}
var width=options.width,height=options.height,right=left+width,bottom=top+height;r=mathMin(r,width,height);return[M,left+r,top,L,right-r,top,'wa',right-2*r,top,right,top+2*r,right-r,top,right,top+r,L,right,bottom-r,'wa',right-2*r,bottom-2*r,right,bottom,right,bottom-r,right-r,bottom,L,left+r,bottom,'wa',left,bottom-2*r,left+2*r,bottom,left+r,bottom,left,bottom-r,L,left,top+r,'wa',left,top,left+2*r,top+2*r,left,top+r,left+r,top,'x','e'];}}});Renderer=VMLRenderer;}
function Chart(options,callback){defaultXAxisOptions=merge(defaultXAxisOptions,defaultOptions.xAxis);defaultYAxisOptions=merge(defaultYAxisOptions,defaultOptions.yAxis);defaultOptions.xAxis=defaultOptions.yAxis=null;options=merge(defaultOptions,options);var optionsChart=options.chart,optionsMargin=optionsChart.margin,margin=isObject(optionsMargin)?optionsMargin:[optionsMargin,optionsMargin,optionsMargin,optionsMargin],optionsMarginTop=pick(optionsChart.marginTop,margin[0]),optionsMarginRight=pick(optionsChart.marginRight,margin[1]),optionsMarginBottom=pick(optionsChart.marginBottom,margin[2]),optionsMarginLeft=pick(optionsChart.marginLeft,margin[3]),spacingTop=optionsChart.spacingTop,spacingRight=optionsChart.spacingRight,spacingBottom=optionsChart.spacingBottom,spacingLeft=optionsChart.spacingLeft,spacingBox,chartTitleOptions,chartSubtitleOptions,plotTop,marginRight,marginBottom,plotLeft,axisOffset,renderTo,renderToClone,container,containerId,containerWidth,containerHeight,chartWidth,chartHeight,oldChartWidth,oldChartHeight,chartBackground,plotBackground,plotBGImage,plotBorder,chart=this,chartEvents=optionsChart.events,runChartClick=chartEvents&&!!chartEvents.click,eventType,isInsidePlot,tooltip,mouseIsDown,loadingDiv,loadingSpan,loadingShown,plotHeight,plotWidth,tracker,trackerGroup,placeTrackerGroup,legend,legendWidth,legendHeight,chartPosition,hasCartesianSeries=optionsChart.showAxes,isResizing=0,axes=[],maxTicks,series=[],inverted,renderer,tooltipTick,tooltipInterval,hoverX,drawChartBox,getMargins,resetMargins,setChartSize,resize,zoom,zoomOut;function Axis(userOptions){var isXAxis=userOptions.isX,opposite=userOptions.opposite,horiz=inverted?!isXAxis:isXAxis,side=horiz?(opposite?0:2):(opposite?1:3),stacks={},options=merge(isXAxis?defaultXAxisOptions:defaultYAxisOptions,[defaultTopAxisOptions,defaultRightAxisOptions,defaultBottomAxisOptions,defaultLeftAxisOptions][side],userOptions),axis=this,axisTitle,type=options.type,isDatetimeAxis=type==='datetime',isLog=type==='logarithmic',offset=options.offset||0,xOrY=isXAxis?'x':'y',axisLength,transA,oldTransA,transB=horiz?plotLeft:marginBottom,translate,getPlotLinePath,axisGroup,gridGroup,axisLine,dataMin,dataMax,associatedSeries,userMin,userMax,max=null,min=null,oldMin,oldMax,minPadding=options.minPadding,maxPadding=options.maxPadding,isLinked=defined(options.linkedTo),ignoreMinPadding,ignoreMaxPadding,usePercentage,events=options.events,eventType,plotLinesAndBands=[],tickInterval,minorTickInterval,magnitude,tickPositions,ticks={},minorTicks={},alternateBands={},tickAmount,labelOffset,axisTitleMargin,dateTimeLabelFormat,categories=options.categories,labelFormatter=options.labels.formatter||function(){var value=this.value,ret;if(dateTimeLabelFormat){ret=dateFormat(dateTimeLabelFormat,value);}else if(tickInterval%1000000===0){ret=(value/1000000)+'M';}else if(tickInterval%1000===0){ret=(value/1000)+'k';}else if(!categories&&value>=1000){ret=numberFormat(value,0);}else{ret=value;}
return ret;},staggerLines=horiz&&options.labels.staggerLines,reversed=options.reversed,tickmarkOffset=(categories&&options.tickmarkPlacement==='between')?0.5:0;function Tick(pos,minor){var tick=this;tick.pos=pos;tick.minor=minor;tick.isNew=true;if(!minor){tick.addLabel();}}
Tick.prototype={addLabel:function(){var pos=this.pos,labelOptions=options.labels,str,withLabel=!((pos===min&&!pick(options.showFirstLabel,1))||(pos===max&&!pick(options.showLastLabel,0))),width=(categories&&horiz&&categories.length&&!labelOptions.step&&!labelOptions.staggerLines&&!labelOptions.rotation&&plotWidth/categories.length)||(!horiz&&plotWidth/2),css,value=categories&&defined(categories[pos])?categories[pos]:pos,label=this.label;str=labelFormatter.call({isFirst:pos===tickPositions[0],isLast:pos===tickPositions[tickPositions.length-1],dateTimeLabelFormat:dateTimeLabelFormat,value:isLog?lin2log(value):value});css=width&&{width:mathMax(1,mathRound(width-2*(labelOptions.padding||10)))+PX};css=extend(css,labelOptions.style);if(label===UNDEFINED){this.label=defined(str)&&withLabel&&labelOptions.enabled?renderer.text(str,0,0,labelOptions.useHTML).attr({align:labelOptions.align,rotation:labelOptions.rotation}).css(css).add(axisGroup):null;}else if(label){label.attr({text:str}).css(css);}},getLabelSize:function(){var label=this.label;return label?((this.labelBBox=label.getBBox()))[horiz?'height':'width']:0;},render:function(index,old){var tick=this,major=!tick.minor,label=tick.label,pos=tick.pos,labelOptions=options.labels,gridLine=tick.gridLine,gridLineWidth=major?options.gridLineWidth:options.minorGridLineWidth,gridLineColor=major?options.gridLineColor:options.minorGridLineColor,dashStyle=major?options.gridLineDashStyle:options.minorGridLineDashStyle,gridLinePath,mark=tick.mark,markPath,tickLength=major?options.tickLength:options.minorTickLength,tickWidth=major?options.tickWidth:(options.minorTickWidth||0),tickColor=major?options.tickColor:options.minorTickColor,tickPosition=major?options.tickPosition:options.minorTickPosition,step=labelOptions.step,cHeight=(old&&oldChartHeight)||chartHeight,attribs,x,y;x=horiz?translate(pos+tickmarkOffset,null,null,old)+transB:plotLeft+offset+(opposite?((old&&oldChartWidth)||chartWidth)-marginRight-plotLeft:0);y=horiz?cHeight-marginBottom+offset-(opposite?plotHeight:0):cHeight-translate(pos+tickmarkOffset,null,null,old)-transB;if(gridLineWidth){gridLinePath=getPlotLinePath(pos+tickmarkOffset,gridLineWidth,old);if(gridLine===UNDEFINED){attribs={stroke:gridLineColor,'stroke-width':gridLineWidth};if(dashStyle){attribs.dashstyle=dashStyle;}
if(major){attribs.zIndex=1;}
tick.gridLine=gridLine=gridLineWidth?renderer.path(gridLinePath).attr(attribs).add(gridGroup):null;}
if(!old&&gridLine&&gridLinePath){gridLine.animate({d:gridLinePath});}}
if(tickWidth){if(tickPosition==='inside'){tickLength=-tickLength;}
if(opposite){tickLength=-tickLength;}
markPath=renderer.crispLine([M,x,y,L,x+(horiz?0:-tickLength),y+(horiz?tickLength:0)],tickWidth);if(mark){mark.animate({d:markPath});}else{tick.mark=renderer.path(markPath).attr({stroke:tickColor,'stroke-width':tickWidth}).add(axisGroup);}}
if(label&&!isNaN(x)){x=x+labelOptions.x-(tickmarkOffset&&horiz?tickmarkOffset*transA*(reversed?-1:1):0);y=y+labelOptions.y-(tickmarkOffset&&!horiz?tickmarkOffset*transA*(reversed?1:-1):0);if(!defined(labelOptions.y)){y+=pInt(label.styles.lineHeight)*0.9-label.getBBox().height/2;}
if(staggerLines){y+=(index/(step||1)%staggerLines)*16;}
if(step){label[index%step?'hide':'show']();}
label[tick.isNew?'attr':'animate']({x:x,y:y});}
tick.isNew=false;},destroy:function(){destroyObjectProperties(this);}};function PlotLineOrBand(options){var plotLine=this;if(options){plotLine.options=options;plotLine.id=options.id;}
return plotLine;}
PlotLineOrBand.prototype={render:function(){var plotLine=this,options=plotLine.options,optionsLabel=options.label,label=plotLine.label,width=options.width,to=options.to,from=options.from,value=options.value,toPath,dashStyle=options.dashStyle,svgElem=plotLine.svgElem,path=[],addEvent,eventType,xs,ys,x,y,color=options.color,zIndex=options.zIndex,events=options.events,attribs;if(isLog){from=log2lin(from);to=log2lin(to);value=log2lin(value);}
if(width){path=getPlotLinePath(value,width);attribs={stroke:color,'stroke-width':width};if(dashStyle){attribs.dashstyle=dashStyle;}}else if(defined(from)&&defined(to)){from=mathMax(from,min);to=mathMin(to,max);toPath=getPlotLinePath(to);path=getPlotLinePath(from);if(path&&toPath){path.push(toPath[4],toPath[5],toPath[1],toPath[2]);}else{path=null;}
attribs={fill:color};}else{return;}
if(defined(zIndex)){attribs.zIndex=zIndex;}
if(svgElem){if(path){svgElem.animate({d:path},null,svgElem.onGetPath);}else{svgElem.hide();svgElem.onGetPath=function(){svgElem.show();};}}else if(path&&path.length){plotLine.svgElem=svgElem=renderer.path(path).attr(attribs).add();if(events){addEvent=function(eventType){svgElem.on(eventType,function(e){events[eventType].apply(plotLine,[e]);});};for(eventType in events){addEvent(eventType);}}}
if(optionsLabel&&defined(optionsLabel.text)&&path&&path.length&&plotWidth>0&&plotHeight>0){optionsLabel=merge({align:horiz&&toPath&&'center',x:horiz?!toPath&&4:10,verticalAlign:!horiz&&toPath&&'middle',y:horiz?toPath?16:10:toPath?6:-4,rotation:horiz&&!toPath&&90},optionsLabel);if(!label){plotLine.label=label=renderer.text(optionsLabel.text,0,0).attr({align:optionsLabel.textAlign||optionsLabel.align,rotation:optionsLabel.rotation,zIndex:zIndex}).css(optionsLabel.style).add();}
xs=[path[1],path[4],pick(path[6],path[1])];ys=[path[2],path[5],pick(path[7],path[2])];x=mathMin.apply(math,xs);y=mathMin.apply(math,ys);label.align(optionsLabel,false,{x:x,y:y,width:mathMax.apply(math,xs)-x,height:mathMax.apply(math,ys)-y});label.show();}else if(label){label.hide();}
return plotLine;},destroy:function(){var obj=this;destroyObjectProperties(obj);erase(plotLinesAndBands,obj);}};function StackItem(options,isNegative,x,stackOption){var stackItem=this;stackItem.isNegative=isNegative;stackItem.options=options;stackItem.x=x;stackItem.stack=stackOption;stackItem.alignOptions={align:options.align||(inverted?(isNegative?'left':'right'):'center'),verticalAlign:options.verticalAlign||(inverted?'middle':(isNegative?'bottom':'top')),y:pick(options.y,inverted?4:(isNegative?14:-6)),x:pick(options.x,inverted?(isNegative?-6:6):0)};stackItem.textAlign=options.textAlign||(inverted?(isNegative?'right':'left'):'center');}
StackItem.prototype={destroy:function(){destroyObjectProperties(this);},setTotal:function(total){this.total=total;this.cum=total;},render:function(group){var stackItem=this,str=stackItem.options.formatter.call(stackItem);if(stackItem.label){stackItem.label.attr({text:str,visibility:HIDDEN});}else{stackItem.label=chart.renderer.text(str,0,0).css(stackItem.options.style).attr({align:stackItem.textAlign,rotation:stackItem.options.rotation,visibility:HIDDEN}).add(group);}},setOffset:function(xOffset,xWidth){var stackItem=this,neg=stackItem.isNegative,y=axis.translate(stackItem.total),yZero=axis.translate(0),h=mathAbs(y-yZero),x=chart.xAxis[0].translate(stackItem.x)+xOffset,plotHeight=chart.plotHeight,stackBox={x:inverted?(neg?y:y-h):x,y:inverted?plotHeight-x-xWidth:(neg?(plotHeight-y-h):plotHeight-y),width:inverted?h:xWidth,height:inverted?xWidth:h};if(stackItem.label){stackItem.label.align(stackItem.alignOptions,null,stackBox).attr({visibility:VISIBLE});}}};function getSeriesExtremes(){var posStack=[],negStack=[],run;dataMin=dataMax=null;associatedSeries=[];each(series,function(serie){run=false;each(['xAxis','yAxis'],function(strAxis){if(serie.isCartesian&&((strAxis==='xAxis'&&isXAxis)||(strAxis==='yAxis'&&!isXAxis))&&((serie.options[strAxis]===options.index)||(serie.options[strAxis]===UNDEFINED&&options.index===0))){serie[strAxis]=axis;associatedSeries.push(serie);run=true;}});if(!serie.visible&&optionsChart.ignoreHiddenSeries){run=false;}
if(run){var stacking,posPointStack,negPointStack,stackKey,stackOption,negKey;if(!isXAxis){stacking=serie.options.stacking;usePercentage=stacking==='percent';if(stacking){stackOption=serie.options.stack;stackKey=serie.type+pick(stackOption,'');negKey='-'+stackKey;serie.stackKey=stackKey;posPointStack=posStack[stackKey]||[];posStack[stackKey]=posPointStack;negPointStack=negStack[negKey]||[];negStack[negKey]=negPointStack;}
if(usePercentage){dataMin=0;dataMax=99;}}
if(serie.isCartesian){each(serie.data,function(point){var pointX=point.x,pointY=point.y,isNegative=pointY<0,pointStack=isNegative?negPointStack:posPointStack,key=isNegative?negKey:stackKey,totalPos,pointLow;if(dataMin===null){dataMin=dataMax=point[xOrY];}
if(isXAxis){if(pointX>dataMax){dataMax=pointX;}else if(pointX<dataMin){dataMin=pointX;}}else if(defined(pointY)){if(stacking){pointStack[pointX]=defined(pointStack[pointX])?pointStack[pointX]+pointY:pointY;}
totalPos=pointStack?pointStack[pointX]:pointY;pointLow=pick(point.low,totalPos);if(!usePercentage){if(totalPos>dataMax){dataMax=totalPos;}else if(pointLow<dataMin){dataMin=pointLow;}}
if(stacking){if(!stacks[key]){stacks[key]={};}
if(!stacks[key][pointX]){stacks[key][pointX]=new StackItem(options.stackLabels,isNegative,pointX,stackOption);}
stacks[key][pointX].setTotal(totalPos);}}});if(/(area|column|bar)/.test(serie.type)&&!isXAxis){var threshold=0;if(dataMin>=threshold){dataMin=threshold;ignoreMinPadding=true;}else if(dataMax<threshold){dataMax=threshold;ignoreMaxPadding=true;}}}}});}
translate=function(val,backwards,cvsCoord,old,handleLog){var sign=1,cvsOffset=0,localA=old?oldTransA:transA,localMin=old?oldMin:min,returnValue;if(!localA){localA=transA;}
if(cvsCoord){sign*=-1;cvsOffset=axisLength;}
if(reversed){sign*=-1;cvsOffset-=sign*axisLength;}
if(backwards){if(reversed){val=axisLength-val;}
returnValue=val/localA+localMin;if(isLog&&handleLog){returnValue=lin2log(returnValue);}}else{if(isLog&&handleLog){val=log2lin(val);}
returnValue=sign*(val-localMin)*localA+cvsOffset;}
return returnValue;};getPlotLinePath=function(value,lineWidth,old){var x1,y1,x2,y2,translatedValue=translate(value,null,null,old),cHeight=(old&&oldChartHeight)||chartHeight,cWidth=(old&&oldChartWidth)||chartWidth,skip;x1=x2=mathRound(translatedValue+transB);y1=y2=mathRound(cHeight-translatedValue-transB);if(isNaN(translatedValue)){skip=true;}else if(horiz){y1=plotTop;y2=cHeight-marginBottom;if(x1<plotLeft||x1>plotLeft+plotWidth){skip=true;}}else{x1=plotLeft;x2=cWidth-marginRight;if(y1<plotTop||y1>plotTop+plotHeight){skip=true;}}
return skip?null:renderer.crispLine([M,x1,y1,L,x2,y2],lineWidth||0);};function normalizeTickInterval(interval,multiples){var normalized,i;magnitude=multiples?1:math.pow(10,mathFloor(math.log(interval)/math.LN10));normalized=interval/magnitude;if(!multiples){multiples=[1,2,2.5,5,10];if(options.allowDecimals===false||isLog){if(magnitude===1){multiples=[1,2,5,10];}else if(magnitude<=0.1){multiples=[1/magnitude];}}}
for(i=0;i<multiples.length;i++){interval=multiples[i];if(normalized<=(multiples[i]+(multiples[i+1]||multiples[i]))/2){break;}}
interval*=magnitude;return interval;}
function setDateTimeTickPositions(){tickPositions=[];var i,useUTC=defaultOptions.global.useUTC,oneSecond=1000/timeFactor,oneMinute=60000/timeFactor,oneHour=3600000/timeFactor,oneDay=24*3600000/timeFactor,oneWeek=7*24*3600000/timeFactor,oneMonth=30*24*3600000/timeFactor,oneYear=31556952000/timeFactor,units=[['second',oneSecond,[1,2,5,10,15,30]],['minute',oneMinute,[1,2,5,10,15,30]],['hour',oneHour,[1,2,3,4,6,8,12]],['day',oneDay,[1,2]],['week',oneWeek,[1,2]],['month',oneMonth,[1,2,3,4,6]],['year',oneYear,null]],unit=units[6],interval=unit[1],multiples=unit[2];for(i=0;i<units.length;i++){unit=units[i];interval=unit[1];multiples=unit[2];if(units[i+1]){var lessThan=(interval*multiples[multiples.length-1]+
units[i+1][1])/2;if(tickInterval<=lessThan){break;}}}
if(interval===oneYear&&tickInterval<5*interval){multiples=[1,2,5];}
var multitude=normalizeTickInterval(tickInterval/interval,multiples),minYear,minDate=new Date(min*timeFactor);minDate.setMilliseconds(0);if(interval>=oneSecond){minDate.setSeconds(interval>=oneMinute?0:multitude*mathFloor(minDate.getSeconds()/multitude));}
if(interval>=oneMinute){minDate[setMinutes](interval>=oneHour?0:multitude*mathFloor(minDate[getMinutes]()/multitude));}
if(interval>=oneHour){minDate[setHours](interval>=oneDay?0:multitude*mathFloor(minDate[getHours]()/multitude));}
if(interval>=oneDay){minDate[setDate](interval>=oneMonth?1:multitude*mathFloor(minDate[getDate]()/multitude));}
if(interval>=oneMonth){minDate[setMonth](interval>=oneYear?0:multitude*mathFloor(minDate[getMonth]()/multitude));minYear=minDate[getFullYear]();}
if(interval>=oneYear){minYear-=minYear%multitude;minDate[setFullYear](minYear);}
if(interval===oneWeek){minDate[setDate](minDate[getDate]()-minDate[getDay]()+
options.startOfWeek);}
i=1;minYear=minDate[getFullYear]();var time=minDate.getTime()/timeFactor,minMonth=minDate[getMonth](),minDateDate=minDate[getDate]();while(time<max&&i<plotWidth){tickPositions.push(time);if(interval===oneYear){time=makeTime(minYear+i*multitude,0)/timeFactor;}else if(interval===oneMonth){time=makeTime(minYear,minMonth+i*multitude)/timeFactor;}else if(!useUTC&&(interval===oneDay||interval===oneWeek)){time=makeTime(minYear,minMonth,minDateDate+
i*multitude*(interval===oneDay?1:7));}else{time+=interval*multitude;}
i++;}
tickPositions.push(time);dateTimeLabelFormat=options.dateTimeLabelFormats[unit[0]];}
function correctFloat(num){var invMag,ret=num;magnitude=pick(magnitude,math.pow(10,mathFloor(math.log(tickInterval)/math.LN10)));if(magnitude<1){invMag=mathRound(1/magnitude)*10;ret=mathRound(num*invMag)/invMag;}
return ret;}
function setLinearTickPositions(){var i,roundedMin=correctFloat(mathFloor(min/tickInterval)*tickInterval),roundedMax=correctFloat(mathCeil(max/tickInterval)*tickInterval);tickPositions=[];i=correctFloat(roundedMin);while(i<=roundedMax){tickPositions.push(i);i=correctFloat(i+tickInterval);}}
function setTickPositions(){var length,catPad,linkedParent,linkedParentExtremes,tickIntervalOption=options.tickInterval,tickPixelIntervalOption=options.tickPixelInterval,maxZoom=options.maxZoom||(isXAxis&&!defined(options.min)&&!defined(options.max)?mathMin(chart.smallestInterval*5,dataMax-dataMin):null),zoomOffset;axisLength=horiz?plotWidth:plotHeight;if(isLinked){linkedParent=chart[isXAxis?'xAxis':'yAxis'][options.linkedTo];linkedParentExtremes=linkedParent.getExtremes();min=pick(linkedParentExtremes.min,linkedParentExtremes.dataMin);max=pick(linkedParentExtremes.max,linkedParentExtremes.dataMax);}else{min=pick(userMin,options.min,dataMin);max=pick(userMax,options.max,dataMax);}
if(isLog){min=log2lin(min);max=log2lin(max);}
if(max-min<maxZoom){zoomOffset=(maxZoom-max+min)/2;min=mathMax(min-zoomOffset,pick(options.min,min-zoomOffset),dataMin);max=mathMin(min+maxZoom,pick(options.max,min+maxZoom),dataMax);}
if(!categories&&!usePercentage&&!isLinked&&defined(min)&&defined(max)){length=(max-min)||1;if(!defined(options.min)&&!defined(userMin)&&minPadding&&(dataMin<0||!ignoreMinPadding)){min-=length*minPadding;}
if(!defined(options.max)&&!defined(userMax)&&maxPadding&&(dataMax>0||!ignoreMaxPadding)){max+=length*maxPadding;}}
if(min===max){tickInterval=1;}else if(isLinked&&!tickIntervalOption&&tickPixelIntervalOption===linkedParent.options.tickPixelInterval){tickInterval=linkedParent.tickInterval;}else{tickInterval=pick(tickIntervalOption,categories?1:(max-min)*tickPixelIntervalOption/axisLength);}
if(!isDatetimeAxis&&!defined(options.tickInterval)){tickInterval=normalizeTickInterval(tickInterval);}
axis.tickInterval=tickInterval;minorTickInterval=options.minorTickInterval==='auto'&&tickInterval?tickInterval/5:options.minorTickInterval;if(isDatetimeAxis){setDateTimeTickPositions();}else{setLinearTickPositions();}
if(!isLinked){if(categories||(isXAxis&&chart.hasColumn)){catPad=(categories?1:tickInterval)*0.5;if(categories||!defined(pick(options.min,userMin))){min-=catPad;}
if(categories||!defined(pick(options.max,userMax))){max+=catPad;}}
var roundedMin=tickPositions[0],roundedMax=tickPositions[tickPositions.length-1];if(options.startOnTick){min=roundedMin;}else if(min>roundedMin){tickPositions.shift();}
if(options.endOnTick){max=roundedMax;}else if(max<roundedMax){tickPositions.pop();}
if(!maxTicks){maxTicks={x:0,y:0};}
if(!isDatetimeAxis&&tickPositions.length>maxTicks[xOrY]){maxTicks[xOrY]=tickPositions.length;}}}
function adjustTickAmount(){if(maxTicks&&!isDatetimeAxis&&!categories&&!isLinked){var oldTickAmount=tickAmount,calculatedTickAmount=tickPositions.length;tickAmount=maxTicks[xOrY];if(calculatedTickAmount<tickAmount){while(tickPositions.length<tickAmount){tickPositions.push(correctFloat(tickPositions[tickPositions.length-1]+tickInterval));}
transA*=(calculatedTickAmount-1)/(tickAmount-1);max=tickPositions[tickPositions.length-1];}
if(defined(oldTickAmount)&&tickAmount!==oldTickAmount){axis.isDirty=true;}}}
function setScale(){var type,i;oldMin=min;oldMax=max;getSeriesExtremes();setTickPositions();oldTransA=transA;transA=axisLength/((max-min)||1);if(!isXAxis){for(type in stacks){for(i in stacks[type]){stacks[type][i].cum=stacks[type][i].total;}}}
if(!axis.isDirty){axis.isDirty=(min!==oldMin||max!==oldMax);}}
function setExtremes(newMin,newMax,redraw,animation){redraw=pick(redraw,true);fireEvent(axis,'setExtremes',{min:newMin,max:newMax},function(){userMin=newMin;userMax=newMax;if(redraw){chart.redraw(animation);}});}
function getExtremes(){return{min:min,max:max,dataMin:dataMin,dataMax:dataMax,userMin:userMin,userMax:userMax};}
function getThreshold(threshold){if(min>threshold){threshold=min;}else if(max<threshold){threshold=max;}
return translate(threshold,0,1);}
function addPlotBandOrLine(options){var obj=new PlotLineOrBand(options).render();plotLinesAndBands.push(obj);return obj;}
function getOffset(){var hasData=associatedSeries.length&&defined(min)&&defined(max),titleOffset=0,titleMargin=0,axisTitleOptions=options.title,labelOptions=options.labels,directionFactor=[-1,1,1,-1][side],n;if(!axisGroup){axisGroup=renderer.g('axis').attr({zIndex:7}).add();gridGroup=renderer.g('grid').attr({zIndex:1}).add();}
labelOffset=0;if(hasData||isLinked){each(tickPositions,function(pos){if(!ticks[pos]){ticks[pos]=new Tick(pos);}else{ticks[pos].addLabel();}
if(side===0||side===2||{1:'left',3:'right'}[side]===labelOptions.align){labelOffset=mathMax(ticks[pos].getLabelSize(),labelOffset);}});if(staggerLines){labelOffset+=(staggerLines-1)*16;}}else{for(n in ticks){ticks[n].destroy();delete ticks[n];}}
if(axisTitleOptions&&axisTitleOptions.text){if(!axisTitle){axisTitle=axis.axisTitle=renderer.text(axisTitleOptions.text,0,0,axisTitleOptions.useHTML).attr({zIndex:7,rotation:axisTitleOptions.rotation||0,align:axisTitleOptions.textAlign||{low:'left',middle:'center',high:'right'}[axisTitleOptions.align]}).css(axisTitleOptions.style).add();axisTitle.isNew=true;}
titleOffset=axisTitle.getBBox()[horiz?'height':'width'];titleMargin=pick(axisTitleOptions.margin,horiz?5:10);}
offset=directionFactor*(options.offset||axisOffset[side]);axisTitleMargin=labelOffset+
(side!==2&&labelOffset&&directionFactor*options.labels[horiz?'y':'x'])+
titleMargin;axisOffset[side]=mathMax(axisOffset[side],axisTitleMargin+titleOffset+directionFactor*offset);}
function render(){var axisTitleOptions=options.title,stackLabelOptions=options.stackLabels,alternateGridColor=options.alternateGridColor,lineWidth=options.lineWidth,lineLeft,lineTop,linePath,hasRendered=chart.hasRendered,slideInTicks=hasRendered&&defined(oldMin)&&!isNaN(oldMin),hasData=associatedSeries.length&&defined(min)&&defined(max);axisLength=horiz?plotWidth:plotHeight;transA=axisLength/((max-min)||1);transB=horiz?plotLeft:marginBottom;if(hasData||isLinked){if(minorTickInterval&&!categories){var pos=min+(tickPositions[0]-min)%minorTickInterval;for(;pos<=max;pos+=minorTickInterval){if(!minorTicks[pos]){minorTicks[pos]=new Tick(pos,true);}
if(slideInTicks&&minorTicks[pos].isNew){minorTicks[pos].render(null,true);}
minorTicks[pos].isActive=true;minorTicks[pos].render();}}
each(tickPositions,function(pos,i){if(!isLinked||(pos>=min&&pos<=max)){if(slideInTicks&&ticks[pos].isNew){ticks[pos].render(i,true);}
ticks[pos].isActive=true;ticks[pos].render(i);}});if(alternateGridColor){each(tickPositions,function(pos,i){if(i%2===0&&pos<max){if(!alternateBands[pos]){alternateBands[pos]=new PlotLineOrBand();}
alternateBands[pos].options={from:pos,to:tickPositions[i+1]!==UNDEFINED?tickPositions[i+1]:max,color:alternateGridColor};alternateBands[pos].render();alternateBands[pos].isActive=true;}});}
if(!hasRendered){each((options.plotLines||[]).concat(options.plotBands||[]),function(plotLineOptions){plotLinesAndBands.push(new PlotLineOrBand(plotLineOptions).render());});}}
each([ticks,minorTicks,alternateBands],function(coll){var pos;for(pos in coll){if(!coll[pos].isActive){coll[pos].destroy();delete coll[pos];}else{coll[pos].isActive=false;}}});if(lineWidth){lineLeft=plotLeft+(opposite?plotWidth:0)+offset;lineTop=chartHeight-marginBottom-(opposite?plotHeight:0)+offset;linePath=renderer.crispLine([M,horiz?plotLeft:lineLeft,horiz?lineTop:plotTop,L,horiz?chartWidth-marginRight:lineLeft,horiz?lineTop:chartHeight-marginBottom],lineWidth);if(!axisLine){axisLine=renderer.path(linePath).attr({stroke:options.lineColor,'stroke-width':lineWidth,zIndex:7}).add();}else{axisLine.animate({d:linePath});}}
if(axisTitle){var margin=horiz?plotLeft:plotTop,fontSize=pInt(axisTitleOptions.style.fontSize||12),alongAxis={low:margin+(horiz?0:axisLength),middle:margin+axisLength/2,high:margin+(horiz?axisLength:0)}[axisTitleOptions.align],offAxis=(horiz?plotTop+plotHeight:plotLeft)+
(horiz?1:-1)*(opposite?-1:1)*axisTitleMargin+
(side===2?fontSize:0);axisTitle[axisTitle.isNew?'attr':'animate']({x:horiz?alongAxis:offAxis+(opposite?plotWidth:0)+offset+
(axisTitleOptions.x||0),y:horiz?offAxis-(opposite?plotHeight:0)+offset:alongAxis+(axisTitleOptions.y||0)});axisTitle.isNew=false;}
if(stackLabelOptions&&stackLabelOptions.enabled){var stackKey,oneStack,stackCategory,stackTotalGroup=axis.stackTotalGroup;if(!stackTotalGroup){axis.stackTotalGroup=stackTotalGroup=renderer.g('stack-labels').attr({visibility:VISIBLE,zIndex:6}).translate(plotLeft,plotTop).add();}
for(stackKey in stacks){oneStack=stacks[stackKey];for(stackCategory in oneStack){oneStack[stackCategory].render(stackTotalGroup);}}}
axis.isDirty=false;}
function removePlotBandOrLine(id){var i=plotLinesAndBands.length;while(i--){if(plotLinesAndBands[i].id===id){plotLinesAndBands[i].destroy();}}}
function redraw(){if(tracker.resetTracker){tracker.resetTracker();}
render();each(plotLinesAndBands,function(plotLine){plotLine.render();});each(associatedSeries,function(series){series.isDirty=true;});}
function setCategories(newCategories,doRedraw){axis.categories=userOptions.categories=categories=newCategories;each(associatedSeries,function(series){series.translate();series.setTooltipPoints(true);});axis.isDirty=true;if(pick(doRedraw,true)){chart.redraw();}}
function destroy(){var stackKey;removeEvent(axis);for(stackKey in stacks){destroyObjectProperties(stacks[stackKey]);stacks[stackKey]=null;}
if(axis.stackTotalGroup){axis.stackTotalGroup=axis.stackTotalGroup.destroy();}
each([ticks,minorTicks,alternateBands,plotLinesAndBands],function(coll){destroyObjectProperties(coll);});each([axisLine,axisGroup,gridGroup,axisTitle],function(obj){if(obj){obj.destroy();}});axisLine=axisGroup=gridGroup=axisTitle=null;}
if(inverted&&isXAxis&&reversed===UNDEFINED){reversed=true;}
extend(axis,{addPlotBand:addPlotBandOrLine,addPlotLine:addPlotBandOrLine,adjustTickAmount:adjustTickAmount,categories:categories,getExtremes:getExtremes,getPlotLinePath:getPlotLinePath,getThreshold:getThreshold,isXAxis:isXAxis,options:options,plotLinesAndBands:plotLinesAndBands,getOffset:getOffset,render:render,setCategories:setCategories,setExtremes:setExtremes,setScale:setScale,setTickPositions:setTickPositions,translate:translate,redraw:redraw,removePlotBand:removePlotBandOrLine,removePlotLine:removePlotBandOrLine,reversed:reversed,stacks:stacks,destroy:destroy});for(eventType in events){addEvent(axis,eventType,events[eventType]);}
setScale();}
function Toolbar(){var buttons={};function add(id,text,title,fn){if(!buttons[id]){var button=renderer.text(text,0,0).css(options.toolbar.itemStyle).align({align:'right',x:-marginRight-20,y:plotTop+30}).on('click',fn).attr({align:'right',zIndex:20}).add();buttons[id]=button;}}
function remove(id){discardElement(buttons[id].element);buttons[id]=null;}
return{add:add,remove:remove};}
function Tooltip(options){var currentSeries,borderWidth=options.borderWidth,crosshairsOptions=options.crosshairs,crosshairs=[],style=options.style,shared=options.shared,padding=pInt(style.padding),boxOffLeft=borderWidth+padding,tooltipIsHidden=true,boxWidth,boxHeight,currentX=0,currentY=0;style.padding=0;var group=renderer.g('tooltip').attr({zIndex:8}).add(),box=renderer.rect(boxOffLeft,boxOffLeft,0,0,options.borderRadius,borderWidth).attr({fill:options.backgroundColor,'stroke-width':borderWidth}).add(group).shadow(options.shadow),label=renderer.text('',padding+boxOffLeft,pInt(style.fontSize)+padding+boxOffLeft,options.useHTML).attr({zIndex:1}).css(style).add(group);group.hide();function destroy(){each(crosshairs,function(crosshair){if(crosshair){crosshair.destroy();}});each([box,label,group],function(obj){if(obj){obj.destroy();}});box=label=group=null;}
function defaultFormatter(){var pThis=this,items=pThis.points||splat(pThis),xAxis=items[0].series.xAxis,x=pThis.x,isDateTime=xAxis&&xAxis.options.type==='datetime',useHeader=isString(x)||isDateTime,s;s=useHeader?['<span style="font-size: 10px">'+
(isDateTime?dateFormat('%A, %b %e, %Y',x):x)+'</span>']:[];each(items,function(item){s.push(item.point.tooltipFormatter(useHeader));});return s.join('<br/>');}
function move(finalX,finalY){currentX=tooltipIsHidden?finalX:(2*currentX+finalX)/3;currentY=tooltipIsHidden?finalY:(currentY+finalY)/2;group.translate(currentX,currentY);if(mathAbs(finalX-currentX)>1||mathAbs(finalY-currentY)>1){tooltipTick=function(){move(finalX,finalY);};}else{tooltipTick=null;}}
function hide(){if(!tooltipIsHidden){var hoverPoints=chart.hoverPoints;group.hide();each(crosshairs,function(crosshair){if(crosshair){crosshair.hide();}});if(hoverPoints){each(hoverPoints,function(point){point.setState();});}
chart.hoverPoints=null;tooltipIsHidden=true;}}
function refresh(point){var x,y,show,bBox,plotX,plotY=0,textConfig={},text,pointConfig=[],tooltipPos=point.tooltipPos,formatter=options.formatter||defaultFormatter,hoverPoints=chart.hoverPoints,placedTooltipPoint;if(shared){if(hoverPoints){each(hoverPoints,function(point){point.setState();});}
chart.hoverPoints=point;each(point,function(item){item.setState(HOVER_STATE);plotY+=item.plotY;pointConfig.push(item.getLabelConfig());});plotX=point[0].plotX;plotY=mathRound(plotY)/point.length;textConfig={x:point[0].category};textConfig.points=pointConfig;point=point[0];}else{textConfig=point.getLabelConfig();}
text=formatter.call(textConfig);currentSeries=point.series;plotX=shared?plotX:point.plotX;plotY=shared?plotY:point.plotY;x=mathRound(tooltipPos?tooltipPos[0]:(inverted?plotWidth-plotY:plotX));y=mathRound(tooltipPos?tooltipPos[1]:(inverted?plotHeight-plotX:plotY));show=shared||!point.series.isCartesian||isInsidePlot(x,y);if(text===false||!show){hide();}else{if(tooltipIsHidden){group.show();tooltipIsHidden=false;}
label.attr({text:text});bBox=label.getBBox();boxWidth=bBox.width+2*padding;boxHeight=bBox.height+2*padding;box.attr({width:boxWidth,height:boxHeight,stroke:options.borderColor||point.color||currentSeries.color||'#606060'});placedTooltipPoint=placeBox(boxWidth,boxHeight,plotLeft,plotTop,plotWidth,plotHeight,{x:x,y:y});move(mathRound(placedTooltipPoint.x-boxOffLeft),mathRound(placedTooltipPoint.y-boxOffLeft));}
if(crosshairsOptions){crosshairsOptions=splat(crosshairsOptions);var path,i=crosshairsOptions.length,attribs,axis;while(i--){axis=point.series[i?'yAxis':'xAxis'];if(crosshairsOptions[i]&&axis){path=axis.getPlotLinePath(point[i?'y':'x'],1);if(crosshairs[i]){crosshairs[i].attr({d:path,visibility:VISIBLE});}else{attribs={'stroke-width':crosshairsOptions[i].width||1,stroke:crosshairsOptions[i].color||'#C0C0C0',zIndex:2};if(crosshairsOptions[i].dashStyle){attribs.dashstyle=crosshairsOptions[i].dashStyle;}
crosshairs[i]=renderer.path(path).attr(attribs).add();}}}}}
return{shared:shared,refresh:refresh,hide:hide,destroy:destroy};}
function MouseTracker(options){var mouseDownX,mouseDownY,hasDragged,selectionMarker,zoomType=optionsChart.zoomType,zoomX=/x/.test(zoomType),zoomY=/y/.test(zoomType),zoomHor=(zoomX&&!inverted)||(zoomY&&inverted),zoomVert=(zoomY&&!inverted)||(zoomX&&inverted);function normalizeMouseEvent(e){var ePos,pageZoomFix=isWebKit&&doc.width/doc.body.scrollWidth-
1,chartPosLeft,chartPosTop,chartX,chartY;e=e||win.event;if(!e.target){e.target=e.srcElement;}
ePos=e.touches?e.touches.item(0):e;if(e.type!=='mousemove'||win.opera||pageZoomFix){chartPosition=getPosition(container);chartPosLeft=chartPosition.left;chartPosTop=chartPosition.top;}
if(isIE){chartX=e.x;chartY=e.y;}else{if(ePos.layerX===UNDEFINED){chartX=ePos.pageX-chartPosLeft;chartY=ePos.pageY-chartPosTop;}else{chartX=e.layerX;chartY=e.layerY;}}
if(pageZoomFix){chartX+=mathRound((pageZoomFix+1)*chartPosLeft-chartPosLeft);chartY+=mathRound((pageZoomFix+1)*chartPosTop-chartPosTop);}
return extend(e,{chartX:chartX,chartY:chartY});}
function getMouseCoordinates(e){var coordinates={xAxis:[],yAxis:[]};each(axes,function(axis){var translate=axis.translate,isXAxis=axis.isXAxis,isHorizontal=inverted?!isXAxis:isXAxis;coordinates[isXAxis?'xAxis':'yAxis'].push({axis:axis,value:translate(isHorizontal?e.chartX-plotLeft:plotHeight-e.chartY+plotTop,true)});});return coordinates;}
function onmousemove(e){var point,points,hoverPoint=chart.hoverPoint,hoverSeries=chart.hoverSeries,i,j,distance=chartWidth,index=inverted?e.chartY:e.chartX-plotLeft;if(tooltip&&options.shared){points=[];i=series.length;for(j=0;j<i;j++){if(series[j].visible&&series[j].tooltipPoints.length){point=series[j].tooltipPoints[index];point._dist=mathAbs(index-point.plotX);distance=mathMin(distance,point._dist);points.push(point);}}
i=points.length;while(i--){if(points[i]._dist>distance){points.splice(i,1);}}
if(points.length&&(points[0].plotX!==hoverX)){tooltip.refresh(points);hoverX=points[0].plotX;}}
if(hoverSeries&&hoverSeries.tracker){point=hoverSeries.tooltipPoints[index];if(point&&point!==hoverPoint){point.onMouseOver();}}}
function resetTracker(){var hoverSeries=chart.hoverSeries,hoverPoint=chart.hoverPoint;if(hoverPoint){hoverPoint.onMouseOut();}
if(hoverSeries){hoverSeries.onMouseOut();}
if(tooltip){tooltip.hide();}
hoverX=null;}
function drop(){if(selectionMarker){var selectionData={xAxis:[],yAxis:[]},selectionBox=selectionMarker.getBBox(),selectionLeft=selectionBox.x-plotLeft,selectionTop=selectionBox.y-plotTop;if(hasDragged){each(axes,function(axis){var translate=axis.translate,isXAxis=axis.isXAxis,isHorizontal=inverted?!isXAxis:isXAxis,selectionMin=translate(isHorizontal?selectionLeft:plotHeight-selectionTop-selectionBox.height,true,0,0,1),selectionMax=translate(isHorizontal?selectionLeft+selectionBox.width:plotHeight-selectionTop,true,0,0,1);selectionData[isXAxis?'xAxis':'yAxis'].push({axis:axis,min:mathMin(selectionMin,selectionMax),max:mathMax(selectionMin,selectionMax)});});fireEvent(chart,'selection',selectionData,zoom);}
selectionMarker=selectionMarker.destroy();}
chart.mouseIsDown=mouseIsDown=hasDragged=false;removeEvent(doc,hasTouch?'touchend':'mouseup',drop);}
function hideTooltipOnMouseMove(e){var pageX=defined(e.pageX)?e.pageX:e.page.x,pageY=defined(e.pageX)?e.pageY:e.page.y;if(chartPosition&&!isInsidePlot(pageX-chartPosition.left-plotLeft,pageY-chartPosition.top-plotTop)){resetTracker();}}
function setDOMEvents(){var lastWasOutsidePlot=true;container.onmousedown=function(e){e=normalizeMouseEvent(e);if(!hasTouch&&e.preventDefault){e.preventDefault();}
chart.mouseIsDown=mouseIsDown=true;mouseDownX=e.chartX;mouseDownY=e.chartY;addEvent(doc,hasTouch?'touchend':'mouseup',drop);};var mouseMove=function(e){if(e&&e.touches&&e.touches.length>1){return;}
e=normalizeMouseEvent(e);if(!hasTouch){e.returnValue=false;}
var chartX=e.chartX,chartY=e.chartY,isOutsidePlot=!isInsidePlot(chartX-plotLeft,chartY-plotTop);if(!chartPosition){chartPosition=getPosition(container);}
if(hasTouch&&e.type==='touchstart'){if(attr(e.target,'isTracker')){if(!chart.runTrackerClick){e.preventDefault();}}else if(!runChartClick&&!isOutsidePlot){e.preventDefault();}}
if(isOutsidePlot){if(chartX<plotLeft){chartX=plotLeft;}else if(chartX>plotLeft+plotWidth){chartX=plotLeft+plotWidth;}
if(chartY<plotTop){chartY=plotTop;}else if(chartY>plotTop+plotHeight){chartY=plotTop+plotHeight;}}
if(mouseIsDown&&e.type!=='touchstart'){hasDragged=Math.sqrt(Math.pow(mouseDownX-chartX,2)+
Math.pow(mouseDownY-chartY,2));if(hasDragged>10){if(hasCartesianSeries&&(zoomX||zoomY)&&isInsidePlot(mouseDownX-plotLeft,mouseDownY-plotTop)){if(!selectionMarker){selectionMarker=renderer.rect(plotLeft,plotTop,zoomHor?1:plotWidth,zoomVert?1:plotHeight,0).attr({fill:optionsChart.selectionMarkerFill||'rgba(69,114,167,0.25)',zIndex:7}).add();}}
if(selectionMarker&&zoomHor){var xSize=chartX-mouseDownX;selectionMarker.attr({width:mathAbs(xSize),x:(xSize>0?0:xSize)+mouseDownX});}
if(selectionMarker&&zoomVert){var ySize=chartY-mouseDownY;selectionMarker.attr({height:mathAbs(ySize),y:(ySize>0?0:ySize)+mouseDownY});}}}else if(!isOutsidePlot){onmousemove(e);}
lastWasOutsidePlot=isOutsidePlot;return isOutsidePlot||!hasCartesianSeries;};container.onmousemove=mouseMove;addEvent(container,'mouseleave',resetTracker);addEvent(doc,'mousemove',hideTooltipOnMouseMove);container.ontouchstart=function(e){if(zoomX||zoomY){container.onmousedown(e);}
mouseMove(e);};container.ontouchmove=mouseMove;container.ontouchend=function(){if(hasDragged){resetTracker();}};container.onclick=function(e){var hoverPoint=chart.hoverPoint;e=normalizeMouseEvent(e);e.cancelBubble=true;if(!hasDragged){if(hoverPoint&&attr(e.target,'isTracker')){var plotX=hoverPoint.plotX,plotY=hoverPoint.plotY;extend(hoverPoint,{pageX:chartPosition.left+plotLeft+
(inverted?plotWidth-plotY:plotX),pageY:chartPosition.top+plotTop+
(inverted?plotHeight-plotX:plotY)});fireEvent(hoverPoint.series,'click',extend(e,{point:hoverPoint}));hoverPoint.firePointEvent('click',e);}else{extend(e,getMouseCoordinates(e));if(isInsidePlot(e.chartX-plotLeft,e.chartY-plotTop)){fireEvent(chart,'click',e);}}}
hasDragged=false;};}
function destroy(){if(chart.trackerGroup){chart.trackerGroup=trackerGroup=chart.trackerGroup.destroy();}
removeEvent(doc,'mousemove',hideTooltipOnMouseMove);container.onclick=container.onmousedown=container.onmousemove=container.ontouchstart=container.ontouchend=container.ontouchmove=null;}
placeTrackerGroup=function(){if(!trackerGroup){chart.trackerGroup=trackerGroup=renderer.g('tracker').attr({zIndex:9}).add();}else{trackerGroup.translate(plotLeft,plotTop);if(inverted){trackerGroup.attr({width:chart.plotWidth,height:chart.plotHeight}).invert();}}};placeTrackerGroup();if(options.enabled){chart.tooltip=tooltip=Tooltip(options);}
setDOMEvents();tooltipInterval=setInterval(function(){if(tooltipTick){tooltipTick();}},32);extend(this,{zoomX:zoomX,zoomY:zoomY,resetTracker:resetTracker,destroy:destroy});}
var Legend=function(){var options=chart.options.legend;if(!options.enabled){return;}
var horizontal=options.layout==='horizontal',symbolWidth=options.symbolWidth,symbolPadding=options.symbolPadding,allItems,style=options.style,itemStyle=options.itemStyle,itemHoverStyle=options.itemHoverStyle,itemHiddenStyle=options.itemHiddenStyle,padding=pInt(style.padding),y=18,initialItemX=4+padding+symbolWidth+symbolPadding,itemX,itemY,lastItemY,itemHeight=0,box,legendBorderWidth=options.borderWidth,legendBackgroundColor=options.backgroundColor,legendGroup,offsetWidth,widthOption=options.width,series=chart.series,reversedLegend=options.reversed;function colorizeItem(item,visible){var legendItem=item.legendItem,legendLine=item.legendLine,legendSymbol=item.legendSymbol,hiddenColor=itemHiddenStyle.color,textColor=visible?options.itemStyle.color:hiddenColor,lineColor=visible?item.color:hiddenColor,symbolAttr=visible?item.pointAttr[NORMAL_STATE]:{stroke:hiddenColor,fill:hiddenColor};if(legendItem){legendItem.css({fill:textColor});}
if(legendLine){legendLine.attr({stroke:lineColor});}
if(legendSymbol){legendSymbol.attr(symbolAttr);}}
function positionItem(item,itemX,itemY){var legendItem=item.legendItem,legendLine=item.legendLine,legendSymbol=item.legendSymbol,checkbox=item.checkbox;if(legendItem){legendItem.attr({x:itemX,y:itemY});}
if(legendLine){legendLine.translate(itemX,itemY-4);}
if(legendSymbol){legendSymbol.attr({x:itemX+legendSymbol.xOff,y:itemY+legendSymbol.yOff});}
if(checkbox){checkbox.x=itemX;checkbox.y=itemY;}}
function destroyItem(item){var checkbox=item.checkbox;each(['legendItem','legendLine','legendSymbol'],function(key){if(item[key]){item[key].destroy();}});if(checkbox){discardElement(item.checkbox);}}
function destroy(){if(box){box=box.destroy();}
if(legendGroup){legendGroup=legendGroup.destroy();}}
function positionCheckboxes(){each(allItems,function(item){var checkbox=item.checkbox,alignAttr=legendGroup.alignAttr;if(checkbox){css(checkbox,{left:(alignAttr.translateX+item.legendItemWidth+checkbox.x-40)+PX,top:(alignAttr.translateY+checkbox.y-11)+PX});}});}
function renderItem(item){var bBox,itemWidth,legendSymbol,symbolX,symbolY,simpleSymbol,li=item.legendItem,series=item.series||item,itemOptions=series.options,strokeWidth=(itemOptions&&itemOptions.borderWidth)||0;if(!li){simpleSymbol=/^(bar|pie|area|column)$/.test(series.type);item.legendItem=li=renderer.text(options.labelFormatter.call(item),0,0).css(item.visible?itemStyle:itemHiddenStyle).on('mouseover',function(){item.setState(HOVER_STATE);li.css(itemHoverStyle);}).on('mouseout',function(){li.css(item.visible?itemStyle:itemHiddenStyle);item.setState();}).on('click',function(){var strLegendItemClick='legendItemClick',fnLegendItemClick=function(){item.setVisible();};if(item.firePointEvent){item.firePointEvent(strLegendItemClick,null,fnLegendItemClick);}else{fireEvent(item,strLegendItemClick,null,fnLegendItemClick);}}).attr({zIndex:2}).add(legendGroup);if(!simpleSymbol&&itemOptions&&itemOptions.lineWidth){var attrs={'stroke-width':itemOptions.lineWidth,zIndex:2};if(itemOptions.dashStyle){attrs.dashstyle=itemOptions.dashStyle;}
item.legendLine=renderer.path([M,-symbolWidth-symbolPadding,0,L,-symbolPadding,0]).attr(attrs).add(legendGroup);}
if(simpleSymbol){legendSymbol=renderer.rect((symbolX=-symbolWidth-symbolPadding),(symbolY=-11),symbolWidth,12,2).attr({zIndex:3}).add(legendGroup);}else if(itemOptions&&itemOptions.marker&&itemOptions.marker.enabled){legendSymbol=renderer.symbol(item.symbol,(symbolX=-symbolWidth/2-symbolPadding),(symbolY=-4),itemOptions.marker.radius).attr({zIndex:3}).add(legendGroup);}
if(legendSymbol){legendSymbol.xOff=symbolX+(strokeWidth%2/2);legendSymbol.yOff=symbolY+(strokeWidth%2/2);}
item.legendSymbol=legendSymbol;colorizeItem(item,item.visible);if(itemOptions&&itemOptions.showCheckbox){item.checkbox=createElement('input',{type:'checkbox',checked:item.selected,defaultChecked:item.selected},options.itemCheckboxStyle,container);addEvent(item.checkbox,'click',function(event){var target=event.target;fireEvent(item,'checkboxClick',{checked:target.checked},function(){item.select();});});}}
bBox=li.getBBox();itemWidth=item.legendItemWidth=options.itemWidth||symbolWidth+symbolPadding+bBox.width+padding;itemHeight=bBox.height;if(horizontal&&itemX-initialItemX+itemWidth>(widthOption||(chartWidth-2*padding-initialItemX))){itemX=initialItemX;itemY+=itemHeight;}
lastItemY=itemY;positionItem(item,itemX,itemY);if(horizontal){itemX+=itemWidth;}else{itemY+=itemHeight;}
offsetWidth=widthOption||mathMax(horizontal?itemX-initialItemX:itemWidth,offsetWidth);}
function renderLegend(){itemX=initialItemX;itemY=y;offsetWidth=0;lastItemY=0;if(!legendGroup){legendGroup=renderer.g('legend').attr({zIndex:7}).add();}
allItems=[];each(series,function(serie){var seriesOptions=serie.options;if(!seriesOptions.showInLegend){return;}
allItems=allItems.concat(seriesOptions.legendType==='point'?serie.data:serie);});stableSort(allItems,function(a,b){return(a.options.legendIndex||0)-(b.options.legendIndex||0);});if(reversedLegend){allItems.reverse();}
each(allItems,renderItem);legendWidth=widthOption||offsetWidth;legendHeight=lastItemY-y+itemHeight;if(legendBorderWidth||legendBackgroundColor){legendWidth+=2*padding;legendHeight+=2*padding;if(!box){box=renderer.rect(0,0,legendWidth,legendHeight,options.borderRadius,legendBorderWidth||0).attr({stroke:options.borderColor,'stroke-width':legendBorderWidth||0,fill:legendBackgroundColor||NONE}).add(legendGroup).shadow(options.shadow);box.isNew=true;}else if(legendWidth>0&&legendHeight>0){box[box.isNew?'attr':'animate'](box.crisp(null,null,null,legendWidth,legendHeight));box.isNew=false;}
box[allItems.length?'show':'hide']();}
var props=['left','right','top','bottom'],prop,i=4;while(i--){prop=props[i];if(style[prop]&&style[prop]!=='auto'){options[i<2?'align':'verticalAlign']=prop;options[i<2?'x':'y']=pInt(style[prop])*(i%2?-1:1);}}
if(allItems.length){legendGroup.align(extend(options,{width:legendWidth,height:legendHeight}),true,spacingBox);}
if(!isResizing){positionCheckboxes();}}
renderLegend();addEvent(chart,'endResize',positionCheckboxes);return{colorizeItem:colorizeItem,destroyItem:destroyItem,renderLegend:renderLegend,destroy:destroy};};function initSeries(options){var type=options.type||optionsChart.type||optionsChart.defaultSeriesType,typeClass=seriesTypes[type],serie,hasRendered=chart.hasRendered;if(hasRendered){if(inverted&&type==='column'){typeClass=seriesTypes.bar;}else if(!inverted&&type==='bar'){typeClass=seriesTypes.column;}}
serie=new typeClass();serie.init(chart,options);if(!hasRendered&&serie.inverted){inverted=true;}
if(serie.isCartesian){hasCartesianSeries=serie.isCartesian;}
series.push(serie);return serie;}
function addSeries(options,redraw,animation){var series;if(options){setAnimation(animation,chart);redraw=pick(redraw,true);fireEvent(chart,'addSeries',{options:options},function(){series=initSeries(options);series.isDirty=true;chart.isDirtyLegend=true;if(redraw){chart.redraw();}});}
return series;}
isInsidePlot=function(x,y){return x>=0&&x<=plotWidth&&y>=0&&y<=plotHeight;};function adjustTickAmounts(){if(optionsChart.alignTicks!==false){each(axes,function(axis){axis.adjustTickAmount();});}
maxTicks=null;}
function redraw(animation){var redrawLegend=chart.isDirtyLegend,hasStackedSeries,isDirtyBox=chart.isDirtyBox,seriesLength=series.length,i=seriesLength,clipRect=chart.clipRect,serie;setAnimation(animation,chart);while(i--){serie=series[i];if(serie.isDirty&&serie.options.stacking){hasStackedSeries=true;break;}}
if(hasStackedSeries){i=seriesLength;while(i--){serie=series[i];if(serie.options.stacking){serie.isDirty=true;}}}
each(series,function(serie){if(serie.isDirty){serie.cleanData();serie.getSegments();if(serie.options.legendType==='point'){redrawLegend=true;}}});if(redrawLegend&&legend.renderLegend){legend.renderLegend();chart.isDirtyLegend=false;}
if(hasCartesianSeries){if(!isResizing){maxTicks=null;each(axes,function(axis){axis.setScale();});}
adjustTickAmounts();getMargins();each(axes,function(axis){if(axis.isDirty||isDirtyBox){axis.redraw();isDirtyBox=true;}});}
if(isDirtyBox){drawChartBox();placeTrackerGroup();if(clipRect){stop(clipRect);clipRect.animate({width:chart.plotSizeX,height:chart.plotSizeY});}}
each(series,function(serie){if(serie.isDirty&&serie.visible&&(!serie.isCartesian||serie.xAxis)){serie.redraw();}});if(tracker&&tracker.resetTracker){tracker.resetTracker();}
fireEvent(chart,'redraw');}
function showLoading(str){var loadingOptions=options.loading;if(!loadingDiv){loadingDiv=createElement(DIV,{className:'highcharts-loading'},extend(loadingOptions.style,{left:plotLeft+PX,top:plotTop+PX,width:plotWidth+PX,height:plotHeight+PX,zIndex:10,display:NONE}),container);loadingSpan=createElement('span',null,loadingOptions.labelStyle,loadingDiv);}
loadingSpan.innerHTML=str||options.lang.loading;if(!loadingShown){css(loadingDiv,{opacity:0,display:''});animate(loadingDiv,{opacity:loadingOptions.style.opacity},{duration:loadingOptions.showDuration});loadingShown=true;}}
function hideLoading(){animate(loadingDiv,{opacity:0},{duration:options.loading.hideDuration,complete:function(){css(loadingDiv,{display:NONE});}});loadingShown=false;}
function get(id){var i,j,data;for(i=0;i<axes.length;i++){if(axes[i].options.id===id){return axes[i];}}
for(i=0;i<series.length;i++){if(series[i].options.id===id){return series[i];}}
for(i=0;i<series.length;i++){data=series[i].data;for(j=0;j<data.length;j++){if(data[j].id===id){return data[j];}}}
return null;}
function getAxes(){var xAxisOptions=options.xAxis||{},yAxisOptions=options.yAxis||{},axis;xAxisOptions=splat(xAxisOptions);each(xAxisOptions,function(axis,i){axis.index=i;axis.isX=true;});yAxisOptions=splat(yAxisOptions);each(yAxisOptions,function(axis,i){axis.index=i;});axes=xAxisOptions.concat(yAxisOptions);chart.xAxis=[];chart.yAxis=[];axes=map(axes,function(axisOptions){axis=new Axis(axisOptions);chart[axis.isXAxis?'xAxis':'yAxis'].push(axis);return axis;});adjustTickAmounts();}
function getSelectedPoints(){var points=[];each(series,function(serie){points=points.concat(grep(serie.data,function(point){return point.selected;}));});return points;}
function getSelectedSeries(){return grep(series,function(serie){return serie.selected;});}
zoomOut=function(){fireEvent(chart,'selection',{resetSelection:true},zoom);chart.toolbar.remove('zoom');};zoom=function(event){var lang=defaultOptions.lang,animate=chart.pointCount<100;chart.toolbar.add('zoom',lang.resetZoom,lang.resetZoomTitle,zoomOut);if(!event||event.resetSelection){each(axes,function(axis){axis.setExtremes(null,null,false,animate);});}else{each(event.xAxis.concat(event.yAxis),function(axisData){var axis=axisData.axis;if(chart.tracker[axis.isXAxis?'zoomX':'zoomY']){axis.setExtremes(axisData.min,axisData.max,false,animate);}});}
redraw();};function setTitle(titleOptions,subtitleOptions){chartTitleOptions=merge(options.title,titleOptions);chartSubtitleOptions=merge(options.subtitle,subtitleOptions);each([['title',titleOptions,chartTitleOptions],['subtitle',subtitleOptions,chartSubtitleOptions]],function(arr){var name=arr[0],title=chart[name],titleOptions=arr[1],chartTitleOptions=arr[2];if(title&&titleOptions){title=title.destroy();}
if(chartTitleOptions&&chartTitleOptions.text&&!title){chart[name]=renderer.text(chartTitleOptions.text,0,0,chartTitleOptions.useHTML).attr({align:chartTitleOptions.align,'class':'highcharts-'+name,zIndex:1}).css(chartTitleOptions.style).add().align(chartTitleOptions,false,spacingBox);}});}
function getChartSize(){containerWidth=(renderToClone||renderTo).offsetWidth;containerHeight=(renderToClone||renderTo).offsetHeight;chart.chartWidth=chartWidth=optionsChart.width||containerWidth||600;chart.chartHeight=chartHeight=optionsChart.height||(containerHeight>19?containerHeight:400);}
function getContainer(){renderTo=optionsChart.renderTo;containerId=PREFIX+idCounter++;if(isString(renderTo)){renderTo=doc.getElementById(renderTo);}
renderTo.innerHTML='';if(!renderTo.offsetWidth){renderToClone=renderTo.cloneNode(0);css(renderToClone,{position:ABSOLUTE,top:'-9999px',display:''});doc.body.appendChild(renderToClone);}
getChartSize();chart.container=container=createElement(DIV,{className:'highcharts-container'+
(optionsChart.className?' '+optionsChart.className:''),id:containerId},extend({position:RELATIVE,overflow:HIDDEN,width:chartWidth+PX,height:chartHeight+PX,textAlign:'left'},optionsChart.style),renderToClone||renderTo);chart.renderer=renderer=optionsChart.forExport?new SVGRenderer(container,chartWidth,chartHeight,true):new Renderer(container,chartWidth,chartHeight);var subPixelFix,rect;if(isFirefox&&container.getBoundingClientRect){subPixelFix=function(){css(container,{left:0,top:0});rect=container.getBoundingClientRect();css(container,{left:(-(rect.left-pInt(rect.left)))+PX,top:(-(rect.top-pInt(rect.top)))+PX});};subPixelFix();addEvent(win,'resize',subPixelFix);addEvent(chart,'destroy',function(){removeEvent(win,'resize',subPixelFix);});}}
getMargins=function(){var legendOptions=options.legend,legendMargin=pick(legendOptions.margin,10),legendX=legendOptions.x,legendY=legendOptions.y,align=legendOptions.align,verticalAlign=legendOptions.verticalAlign,titleOffset;resetMargins();if((chart.title||chart.subtitle)&&!defined(optionsMarginTop)){titleOffset=mathMax((chart.title&&!chartTitleOptions.floating&&!chartTitleOptions.verticalAlign&&chartTitleOptions.y)||0,(chart.subtitle&&!chartSubtitleOptions.floating&&!chartSubtitleOptions.verticalAlign&&chartSubtitleOptions.y)||0);if(titleOffset){plotTop=mathMax(plotTop,titleOffset+pick(chartTitleOptions.margin,15)+spacingTop);}}
if(legendOptions.enabled&&!legendOptions.floating){if(align==='right'){if(!defined(optionsMarginRight)){marginRight=mathMax(marginRight,legendWidth-legendX+legendMargin+spacingRight);}}else if(align==='left'){if(!defined(optionsMarginLeft)){plotLeft=mathMax(plotLeft,legendWidth+legendX+legendMargin+spacingLeft);}}else if(verticalAlign==='top'){if(!defined(optionsMarginTop)){plotTop=mathMax(plotTop,legendHeight+legendY+legendMargin+spacingTop);}}else if(verticalAlign==='bottom'){if(!defined(optionsMarginBottom)){marginBottom=mathMax(marginBottom,legendHeight-legendY+legendMargin+spacingBottom);}}}
if(hasCartesianSeries){each(axes,function(axis){axis.getOffset();});}
if(!defined(optionsMarginLeft)){plotLeft+=axisOffset[3];}
if(!defined(optionsMarginTop)){plotTop+=axisOffset[0];}
if(!defined(optionsMarginBottom)){marginBottom+=axisOffset[2];}
if(!defined(optionsMarginRight)){marginRight+=axisOffset[1];}
setChartSize();};function initReflow(){var reflowTimeout;function reflow(){var width=optionsChart.width||renderTo.offsetWidth,height=optionsChart.height||renderTo.offsetHeight;if(width&&height){if(width!==containerWidth||height!==containerHeight){clearTimeout(reflowTimeout);reflowTimeout=setTimeout(function(){resize(width,height,false);},100);}
containerWidth=width;containerHeight=height;}}
addEvent(win,'resize',reflow);addEvent(chart,'destroy',function(){removeEvent(win,'resize',reflow);});}
function fireEndResize(){fireEvent(chart,'endResize',null,function(){isResizing-=1;});}
resize=function(width,height,animation){var chartTitle=chart.title,chartSubtitle=chart.subtitle;isResizing+=1;setAnimation(animation,chart);oldChartHeight=chartHeight;oldChartWidth=chartWidth;chart.chartWidth=chartWidth=mathRound(width);chart.chartHeight=chartHeight=mathRound(height);css(container,{width:chartWidth+PX,height:chartHeight+PX});renderer.setSize(chartWidth,chartHeight,animation);plotWidth=chartWidth-plotLeft-marginRight;plotHeight=chartHeight-plotTop-marginBottom;maxTicks=null;each(axes,function(axis){axis.isDirty=true;axis.setScale();});each(series,function(serie){serie.isDirty=true;});chart.isDirtyLegend=true;chart.isDirtyBox=true;getMargins();if(chartTitle){chartTitle.align(null,null,spacingBox);}
if(chartSubtitle){chartSubtitle.align(null,null,spacingBox);}
redraw(animation);oldChartHeight=null;fireEvent(chart,'resize');if(globalAnimation===false){fireEndResize();}else{setTimeout(fireEndResize,(globalAnimation&&globalAnimation.duration)||500);}};setChartSize=function(){chart.plotLeft=plotLeft=mathRound(plotLeft);chart.plotTop=plotTop=mathRound(plotTop);chart.plotWidth=plotWidth=mathRound(chartWidth-plotLeft-marginRight);chart.plotHeight=plotHeight=mathRound(chartHeight-plotTop-marginBottom);chart.plotSizeX=inverted?plotHeight:plotWidth;chart.plotSizeY=inverted?plotWidth:plotHeight;spacingBox={x:spacingLeft,y:spacingTop,width:chartWidth-spacingLeft-spacingRight,height:chartHeight-spacingTop-spacingBottom};};resetMargins=function(){plotTop=pick(optionsMarginTop,spacingTop);marginRight=pick(optionsMarginRight,spacingRight);marginBottom=pick(optionsMarginBottom,spacingBottom);plotLeft=pick(optionsMarginLeft,spacingLeft);axisOffset=[0,0,0,0];};drawChartBox=function(){var chartBorderWidth=optionsChart.borderWidth||0,chartBackgroundColor=optionsChart.backgroundColor,plotBackgroundColor=optionsChart.plotBackgroundColor,plotBackgroundImage=optionsChart.plotBackgroundImage,mgn,plotSize={x:plotLeft,y:plotTop,width:plotWidth,height:plotHeight};mgn=chartBorderWidth+(optionsChart.shadow?8:0);if(chartBorderWidth||chartBackgroundColor){if(!chartBackground){chartBackground=renderer.rect(mgn/2,mgn/2,chartWidth-mgn,chartHeight-mgn,optionsChart.borderRadius,chartBorderWidth).attr({stroke:optionsChart.borderColor,'stroke-width':chartBorderWidth,fill:chartBackgroundColor||NONE}).add().shadow(optionsChart.shadow);}else{chartBackground.animate(chartBackground.crisp(null,null,null,chartWidth-mgn,chartHeight-mgn));}}
if(plotBackgroundColor){if(!plotBackground){plotBackground=renderer.rect(plotLeft,plotTop,plotWidth,plotHeight,0).attr({fill:plotBackgroundColor}).add().shadow(optionsChart.plotShadow);}else{plotBackground.animate(plotSize);}}
if(plotBackgroundImage){if(!plotBGImage){plotBGImage=renderer.image(plotBackgroundImage,plotLeft,plotTop,plotWidth,plotHeight).add();}else{plotBGImage.animate(plotSize);}}
if(optionsChart.plotBorderWidth){if(!plotBorder){plotBorder=renderer.rect(plotLeft,plotTop,plotWidth,plotHeight,0,optionsChart.plotBorderWidth).attr({stroke:optionsChart.plotBorderColor,'stroke-width':optionsChart.plotBorderWidth,zIndex:4}).add();}else{plotBorder.animate(plotBorder.crisp(null,plotLeft,plotTop,plotWidth,plotHeight));}}
chart.isDirtyBox=false;};function render(){var labels=options.labels,credits=options.credits,creditsHref;setTitle();legend=chart.legend=new Legend();getMargins();each(axes,function(axis){axis.setTickPositions(true);});adjustTickAmounts();getMargins();drawChartBox();if(hasCartesianSeries){each(axes,function(axis){axis.render();});}
if(!chart.seriesGroup){chart.seriesGroup=renderer.g('series-group').attr({zIndex:3}).add();}
each(series,function(serie){serie.translate();serie.setTooltipPoints();serie.render();});if(labels.items){each(labels.items,function(){var style=extend(labels.style,this.style),x=pInt(style.left)+plotLeft,y=pInt(style.top)+plotTop+12;delete style.left;delete style.top;renderer.text(this.html,x,y).attr({zIndex:2}).css(style).add();});}
if(!chart.toolbar){chart.toolbar=Toolbar();}
if(credits.enabled&&!chart.credits){creditsHref=credits.href;chart.credits=renderer.text(credits.text,0,0).on('click',function(){if(creditsHref){location.href=creditsHref;}}).attr({align:credits.position.align,zIndex:8}).css(credits.style).add().align(credits.position);}
placeTrackerGroup();chart.hasRendered=true;if(renderToClone){renderTo.appendChild(container);discardElement(renderToClone);}}
function destroy(){var i,parentNode=container&&container.parentNode;if(chart===null){return;}
fireEvent(chart,'destroy');removeEvent(win,'unload',destroy);removeEvent(chart);i=axes.length;while(i--){axes[i]=axes[i].destroy();}
i=series.length;while(i--){series[i]=series[i].destroy();}
each(['title','subtitle','seriesGroup','clipRect','credits','tracker'],function(name){var prop=chart[name];if(prop){chart[name]=prop.destroy();}});each([chartBackground,legend,tooltip,renderer,tracker],function(obj){if(obj&&obj.destroy){obj.destroy();}});chartBackground=legend=tooltip=renderer=tracker=null;if(container){container.innerHTML='';removeEvent(container);if(parentNode){parentNode.removeChild(container);}
container=null;}
clearInterval(tooltipInterval);for(i in chart){delete chart[i];}
chart=null;}
function firstRender(){var ONREADYSTATECHANGE='onreadystatechange',COMPLETE='complete';if(!hasSVG&&win==win.top&&doc.readyState!==COMPLETE){doc.attachEvent(ONREADYSTATECHANGE,function(){doc.detachEvent(ONREADYSTATECHANGE,firstRender);if(doc.readyState===COMPLETE){firstRender();}});return;}
getContainer();resetMargins();setChartSize();each(options.series||[],function(serieOptions){initSeries(serieOptions);});chart.inverted=inverted=pick(inverted,options.chart.inverted);getAxes();chart.render=render;chart.tracker=tracker=new MouseTracker(options.tooltip);render();fireEvent(chart,'load');if(callback){callback.apply(chart,[chart]);}
each(chart.callbacks,function(fn){fn.apply(chart,[chart]);});}
addEvent(win,'unload',destroy);if(optionsChart.reflow!==false){addEvent(chart,'load',initReflow);}
if(chartEvents){for(eventType in chartEvents){addEvent(chart,eventType,chartEvents[eventType]);}}
chart.options=options;chart.series=series;chart.addSeries=addSeries;chart.animation=pick(optionsChart.animation,true);chart.destroy=destroy;chart.get=get;chart.getSelectedPoints=getSelectedPoints;chart.getSelectedSeries=getSelectedSeries;chart.hideLoading=hideLoading;chart.isInsidePlot=isInsidePlot;chart.redraw=redraw;chart.setSize=resize;chart.setTitle=setTitle;chart.showLoading=showLoading;chart.pointCount=0;chart.counters=new ChartCounters();firstRender();}
Chart.prototype.callbacks=[];var Point=function(){};Point.prototype={init:function(series,options){var point=this,counters=series.chart.counters,defaultColors;point.series=series;point.applyOptions(options);point.pointAttr={};if(series.options.colorByPoint){defaultColors=series.chart.options.colors;if(!point.options){point.options={};}
point.color=point.options.color=point.color||defaultColors[counters.color++];counters.wrapColor(defaultColors.length);}
series.chart.pointCount++;return point;},applyOptions:function(options){var point=this,series=point.series;point.config=options;if(isNumber(options)||options===null){point.y=options;}else if(isObject(options)&&!isNumber(options.length)){extend(point,options);point.options=options;}else if(isString(options[0])){point.name=options[0];point.y=options[1];}else if(isNumber(options[0])){point.x=options[0];point.y=options[1];}
if(point.x===UNDEFINED){point.x=series.autoIncrement();}},destroy:function(){var point=this,series=point.series,hoverPoints=series.chart.hoverPoints,prop;series.chart.pointCount--;if(hoverPoints){point.setState();erase(hoverPoints,point);}
if(point===series.chart.hoverPoint){point.onMouseOut();}
removeEvent(point);each(['graphic','tracker','group','dataLabel','connector','shadowGroup'],function(prop){if(point[prop]){point[prop].destroy();}});if(point.legendItem){point.series.chart.legend.destroyItem(point);}
for(prop in point){point[prop]=null;}},getLabelConfig:function(){var point=this;return{x:point.category,y:point.y,series:point.series,point:point,percentage:point.percentage,total:point.total||point.stackTotal};},select:function(selected,accumulate){var point=this,series=point.series,chart=series.chart;selected=pick(selected,!point.selected);point.firePointEvent(selected?'select':'unselect',{accumulate:accumulate},function(){point.selected=selected;point.setState(selected&&SELECT_STATE);if(!accumulate){each(chart.getSelectedPoints(),function(loopPoint){if(loopPoint.selected&&loopPoint!==point){loopPoint.selected=false;loopPoint.setState(NORMAL_STATE);loopPoint.firePointEvent('unselect');}});}});},onMouseOver:function(){var point=this,chart=point.series.chart,tooltip=chart.tooltip,hoverPoint=chart.hoverPoint;if(hoverPoint&&hoverPoint!==point){hoverPoint.onMouseOut();}
point.firePointEvent('mouseOver');if(tooltip&&!tooltip.shared){tooltip.refresh(point);}
point.setState(HOVER_STATE);chart.hoverPoint=point;},onMouseOut:function(){var point=this;point.firePointEvent('mouseOut');point.setState();point.series.chart.hoverPoint=null;},tooltipFormatter:function(useHeader){var point=this,series=point.series;return['<span style="color:'+series.color+'">',(point.name||series.name),'</span>: ',(!useHeader?('<b>x = '+(point.name||point.x)+',</b> '):''),'<b>',(!useHeader?'y = ':''),point.y,'</b>'].join('');},update:function(options,redraw,animation){var point=this,series=point.series,graphic=point.graphic,chart=series.chart;redraw=pick(redraw,true);point.firePointEvent('update',{options:options},function(){point.applyOptions(options);if(isObject(options)){series.getAttribs();if(graphic){graphic.attr(point.pointAttr[series.state]);}}
series.isDirty=true;if(redraw){chart.redraw(animation);}});},remove:function(redraw,animation){var point=this,series=point.series,chart=series.chart,data=series.data;setAnimation(animation,chart);redraw=pick(redraw,true);point.firePointEvent('remove',null,function(){erase(data,point);point.destroy();series.isDirty=true;if(redraw){chart.redraw();}});},firePointEvent:function(eventType,eventArgs,defaultFunction){var point=this,series=this.series,seriesOptions=series.options;if(seriesOptions.point.events[eventType]||(point.options&&point.options.events&&point.options.events[eventType])){this.importEvents();}
if(eventType==='click'&&seriesOptions.allowPointSelect){defaultFunction=function(event){point.select(null,event.ctrlKey||event.metaKey||event.shiftKey);};}
fireEvent(this,eventType,eventArgs,defaultFunction);},importEvents:function(){if(!this.hasImportedEvents){var point=this,options=merge(point.series.options.point,point.options),events=options.events,eventType;point.events=events;for(eventType in events){addEvent(point,eventType,events[eventType]);}
this.hasImportedEvents=true;}},setState:function(state){var point=this,series=point.series,stateOptions=series.options.states,markerOptions=defaultPlotOptions[series.type].marker&&series.options.marker,normalDisabled=markerOptions&&!markerOptions.enabled,markerStateOptions=markerOptions&&markerOptions.states[state],stateDisabled=markerStateOptions&&markerStateOptions.enabled===false,stateMarkerGraphic=series.stateMarkerGraphic,chart=series.chart,pointAttr=point.pointAttr;state=state||NORMAL_STATE;if(state===point.state||(point.selected&&state!==SELECT_STATE)||(stateOptions[state]&&stateOptions[state].enabled===false)||(state&&(stateDisabled||(normalDisabled&&!markerStateOptions.enabled)))){return;}
if(point.graphic){point.graphic.attr(pointAttr[state]);}else{if(state){if(!stateMarkerGraphic){series.stateMarkerGraphic=stateMarkerGraphic=chart.renderer.circle(0,0,pointAttr[state].r).attr(pointAttr[state]).add(series.group);}
stateMarkerGraphic.translate(point.plotX,point.plotY);}
if(stateMarkerGraphic){stateMarkerGraphic[state?'show':'hide']();}}
point.state=state;}};var Series=function(){};Series.prototype={isCartesian:true,type:'line',pointClass:Point,pointAttrToOptions:{stroke:'lineColor','stroke-width':'lineWidth',fill:'fillColor',r:'radius'},init:function(chart,options){var series=this,eventType,events,index=chart.series.length;series.chart=chart;options=series.setOptions(options);extend(series,{index:index,options:options,name:options.name||'Series '+(index+1),state:NORMAL_STATE,pointAttr:{},visible:options.visible!==false,selected:options.selected===true});events=options.events;for(eventType in events){addEvent(series,eventType,events[eventType]);}
if((events&&events.click)||(options.point&&options.point.events&&options.point.events.click)||options.allowPointSelect){chart.runTrackerClick=true;}
series.getColor();series.getSymbol();series.setData(options.data,false);},autoIncrement:function(){var series=this,options=series.options,xIncrement=series.xIncrement;xIncrement=pick(xIncrement,options.pointStart,0);series.pointInterval=pick(series.pointInterval,options.pointInterval,1);series.xIncrement=xIncrement+series.pointInterval;return xIncrement;},cleanData:function(){var series=this,chart=series.chart,data=series.data,closestPoints,smallestInterval,chartSmallestInterval=chart.smallestInterval,interval,i;stableSort(data,function(a,b){return(a.x-b.x);});if(series.options.connectNulls){for(i=data.length-1;i>=0;i--){if(data[i].y===null&&data[i-1]&&data[i+1]){data.splice(i,1);}}}
for(i=data.length-1;i>=0;i--){if(data[i-1]){interval=data[i].x-data[i-1].x;if(interval>0&&(smallestInterval===UNDEFINED||interval<smallestInterval)){smallestInterval=interval;closestPoints=i;}}}
if(chartSmallestInterval===UNDEFINED||smallestInterval<chartSmallestInterval){chart.smallestInterval=smallestInterval;}
series.closestPoints=closestPoints;},getSegments:function(){var lastNull=-1,segments=[],data=this.data;each(data,function(point,i){if(point.y===null){if(i>lastNull+1){segments.push(data.slice(lastNull+1,i));}
lastNull=i;}else if(i===data.length-1){segments.push(data.slice(lastNull+1,i+1));}});this.segments=segments;},setOptions:function(itemOptions){var plotOptions=this.chart.options.plotOptions,options=merge(plotOptions[this.type],plotOptions.series,itemOptions);return options;},getColor:function(){var defaultColors=this.chart.options.colors,counters=this.chart.counters;this.color=this.options.color||defaultColors[counters.color++]||'#0000ff';counters.wrapColor(defaultColors.length);},getSymbol:function(){var defaultSymbols=this.chart.options.symbols,counters=this.chart.counters;this.symbol=this.options.marker.symbol||defaultSymbols[counters.symbol++];counters.wrapSymbol(defaultSymbols.length);},addPoint:function(options,redraw,shift,animation){var series=this,data=series.data,graph=series.graph,area=series.area,chart=series.chart,point=(new series.pointClass()).init(series,options);setAnimation(animation,chart);if(graph&&shift){graph.shift=shift;}
if(area){area.shift=shift;area.isArea=true;}
redraw=pick(redraw,true);data.push(point);if(shift){data[0].remove(false);}
series.getAttribs();series.isDirty=true;if(redraw){chart.redraw();}},setData:function(data,redraw){var series=this,oldData=series.data,initialColor=series.initialColor,chart=series.chart,i=(oldData&&oldData.length)||0;series.xIncrement=null;if(defined(initialColor)){chart.counters.color=initialColor;}
data=map(splat(data||[]),function(pointOptions){return(new series.pointClass()).init(series,pointOptions);});while(i--){oldData[i].destroy();}
series.data=data;series.cleanData();series.getSegments();series.getAttribs();series.isDirty=true;chart.isDirtyBox=true;if(pick(redraw,true)){chart.redraw(false);}},remove:function(redraw,animation){var series=this,chart=series.chart;redraw=pick(redraw,true);if(!series.isRemoving){series.isRemoving=true;fireEvent(series,'remove',null,function(){series.destroy();chart.isDirtyLegend=chart.isDirtyBox=true;if(redraw){chart.redraw(animation);}});}
series.isRemoving=false;},translate:function(){var series=this,chart=series.chart,stacking=series.options.stacking,categories=series.xAxis.categories,yAxis=series.yAxis,data=series.data,i=data.length;while(i--){var point=data[i],xValue=point.x,yValue=point.y,yBottom=point.low,stack=yAxis.stacks[(yValue<0?'-':'')+series.stackKey],pointStack,pointStackTotal;point.plotX=series.xAxis.translate(xValue);if(stacking&&series.visible&&stack&&stack[xValue]){pointStack=stack[xValue];pointStackTotal=pointStack.total;pointStack.cum=yBottom=pointStack.cum-yValue;yValue=yBottom+yValue;if(stacking==='percent'){yBottom=pointStackTotal?yBottom*100/pointStackTotal:0;yValue=pointStackTotal?yValue*100/pointStackTotal:0;}
point.percentage=pointStackTotal?point.y*100/pointStackTotal:0;point.stackTotal=pointStackTotal;}
if(defined(yBottom)){point.yBottom=yAxis.translate(yBottom,0,1,0,1);}
if(yValue!==null){point.plotY=yAxis.translate(yValue,0,1,0,1);}
point.clientX=chart.inverted?chart.plotHeight-point.plotX:point.plotX;point.category=categories&&categories[point.x]!==UNDEFINED?categories[point.x]:point.x;}},setTooltipPoints:function(renew){var series=this,chart=series.chart,inverted=chart.inverted,data=[],plotSize=mathRound((inverted?chart.plotTop:chart.plotLeft)+chart.plotSizeX),low,high,tooltipPoints=[];if(renew){series.tooltipPoints=null;}
each(series.segments,function(segment){data=data.concat(segment);});if(series.xAxis&&series.xAxis.reversed){data=data.reverse();}
each(data,function(point,i){low=data[i-1]?data[i-1]._high+1:0;high=point._high=data[i+1]?(mathFloor((point.plotX+(data[i+1]?data[i+1].plotX:plotSize))/2)):plotSize;while(low<=high){tooltipPoints[inverted?plotSize-low++:low++]=point;}});series.tooltipPoints=tooltipPoints;},onMouseOver:function(){var series=this,chart=series.chart,hoverSeries=chart.hoverSeries;if(!hasTouch&&chart.mouseIsDown){return;}
if(hoverSeries&&hoverSeries!==series){hoverSeries.onMouseOut();}
if(series.options.events.mouseOver){fireEvent(series,'mouseOver');}
if(series.tracker){series.tracker.toFront();}
series.setState(HOVER_STATE);chart.hoverSeries=series;},onMouseOut:function(){var series=this,options=series.options,chart=series.chart,tooltip=chart.tooltip,hoverPoint=chart.hoverPoint;if(hoverPoint){hoverPoint.onMouseOut();}
if(series&&options.events.mouseOut){fireEvent(series,'mouseOut');}
if(tooltip&&!options.stickyTracking){tooltip.hide();}
series.setState();chart.hoverSeries=null;},animate:function(init){var series=this,chart=series.chart,clipRect=series.clipRect,animation=series.options.animation;if(animation&&!isObject(animation)){animation={};}
if(init){if(!clipRect.isAnimating){clipRect.attr('width',0);clipRect.isAnimating=true;}}else{clipRect.animate({width:chart.plotSizeX},animation);this.animate=null;}},drawPoints:function(){var series=this,pointAttr,data=series.data,chart=series.chart,plotX,plotY,i,point,radius,graphic;if(series.options.marker.enabled){i=data.length;while(i--){point=data[i];plotX=point.plotX;plotY=point.plotY;graphic=point.graphic;if(plotY!==UNDEFINED&&!isNaN(plotY)){pointAttr=point.pointAttr[point.selected?SELECT_STATE:NORMAL_STATE];radius=pointAttr.r;if(graphic){graphic.animate({x:plotX,y:plotY,r:radius});}else{point.graphic=chart.renderer.symbol(pick(point.marker&&point.marker.symbol,series.symbol),plotX,plotY,radius).attr(pointAttr).add(series.group);}}}}},convertAttribs:function(options,base1,base2,base3){var conversion=this.pointAttrToOptions,attr,option,obj={};options=options||{};base1=base1||{};base2=base2||{};base3=base3||{};for(attr in conversion){option=conversion[attr];obj[attr]=pick(options[option],base1[attr],base2[attr],base3[attr]);}
return obj;},getAttribs:function(){var series=this,normalOptions=defaultPlotOptions[series.type].marker?series.options.marker:series.options,stateOptions=normalOptions.states,stateOptionsHover=stateOptions[HOVER_STATE],pointStateOptionsHover,seriesColor=series.color,normalDefaults={stroke:seriesColor,fill:seriesColor},data=series.data,i,point,seriesPointAttr=[],pointAttr,pointAttrToOptions=series.pointAttrToOptions,hasPointSpecificOptions,key;if(series.options.marker){stateOptionsHover.radius=stateOptionsHover.radius||normalOptions.radius+2;stateOptionsHover.lineWidth=stateOptionsHover.lineWidth||normalOptions.lineWidth+1;}else{stateOptionsHover.color=stateOptionsHover.color||Color(stateOptionsHover.color||seriesColor).brighten(stateOptionsHover.brightness).get();}
seriesPointAttr[NORMAL_STATE]=series.convertAttribs(normalOptions,normalDefaults);each([HOVER_STATE,SELECT_STATE],function(state){seriesPointAttr[state]=series.convertAttribs(stateOptions[state],seriesPointAttr[NORMAL_STATE]);});series.pointAttr=seriesPointAttr;i=data.length;while(i--){point=data[i];normalOptions=(point.options&&point.options.marker)||point.options;if(normalOptions&&normalOptions.enabled===false){normalOptions.radius=0;}
hasPointSpecificOptions=false;if(point.options){for(key in pointAttrToOptions){if(defined(normalOptions[pointAttrToOptions[key]])){hasPointSpecificOptions=true;}}}
if(hasPointSpecificOptions){pointAttr=[];stateOptions=normalOptions.states||{};pointStateOptionsHover=stateOptions[HOVER_STATE]=stateOptions[HOVER_STATE]||{};if(!series.options.marker){pointStateOptionsHover.color=Color(pointStateOptionsHover.color||point.options.color).brighten(pointStateOptionsHover.brightness||stateOptionsHover.brightness).get();}
pointAttr[NORMAL_STATE]=series.convertAttribs(normalOptions,seriesPointAttr[NORMAL_STATE]);pointAttr[HOVER_STATE]=series.convertAttribs(stateOptions[HOVER_STATE],seriesPointAttr[HOVER_STATE],pointAttr[NORMAL_STATE]);pointAttr[SELECT_STATE]=series.convertAttribs(stateOptions[SELECT_STATE],seriesPointAttr[SELECT_STATE],pointAttr[NORMAL_STATE]);}else{pointAttr=seriesPointAttr;}
point.pointAttr=pointAttr;}},destroy:function(){var series=this,chart=series.chart,seriesClipRect=series.clipRect,issue134=/\/5[0-9\.]+ (Safari|Mobile)\//.test(userAgent),destroy,prop;fireEvent(series,'destroy');removeEvent(series);if(series.legendItem){series.chart.legend.destroyItem(series);}
each(series.data,function(point){point.destroy();});if(seriesClipRect&&seriesClipRect!==chart.clipRect){series.clipRect=seriesClipRect.destroy();}
each(['area','graph','dataLabelsGroup','group','tracker'],function(prop){if(series[prop]){destroy=issue134&&prop==='group'?'hide':'destroy';series[prop][destroy]();}});if(chart.hoverSeries===series){chart.hoverSeries=null;}
erase(chart.series,series);for(prop in series){delete series[prop];}},drawDataLabels:function(){if(this.options.dataLabels.enabled){var series=this,x,y,data=series.data,seriesOptions=series.options,options=seriesOptions.dataLabels,str,dataLabelsGroup=series.dataLabelsGroup,chart=series.chart,renderer=chart.renderer,inverted=chart.inverted,seriesType=series.type,color,stacking=seriesOptions.stacking,isBarLike=seriesType==='column'||seriesType==='bar',vAlignIsNull=options.verticalAlign===null,yIsNull=options.y===null;if(isBarLike){if(stacking){if(vAlignIsNull){options=merge(options,{verticalAlign:'middle'});}
if(yIsNull){options=merge(options,{y:{top:14,middle:4,bottom:-6}[options.verticalAlign]});}}else{if(vAlignIsNull){options=merge(options,{verticalAlign:'top'});}}}
if(!dataLabelsGroup){dataLabelsGroup=series.dataLabelsGroup=renderer.g('data-labels').attr({visibility:series.visible?VISIBLE:HIDDEN,zIndex:6}).translate(chart.plotLeft,chart.plotTop).add();}else{dataLabelsGroup.translate(chart.plotLeft,chart.plotTop);}
color=options.color;if(color==='auto'){color=null;}
options.style.color=pick(color,series.color,'black');each(data,function(point){var barX=point.barX,plotX=(barX&&barX+point.barW/2)||point.plotX||-999,plotY=pick(point.plotY,-999),dataLabel=point.dataLabel,align=options.align,individualYDelta=yIsNull?(point.y>=0?-6:12):options.y;str=options.formatter.call(point.getLabelConfig());x=(inverted?chart.plotWidth-plotY:plotX)+options.x;y=(inverted?chart.plotHeight-plotX:plotY)+individualYDelta;if(seriesType==='column'){x+={left:-1,right:1}[align]*point.barW/2||0;}
if(inverted&&point.y<0){align='right';x-=10;}
if(dataLabel){if(inverted&&!options.y){y=y+pInt(dataLabel.styles.lineHeight)*0.9-dataLabel.getBBox().height/2;}
dataLabel.attr({text:str}).animate({x:x,y:y});}else if(defined(str)){dataLabel=point.dataLabel=renderer.text(str,x,y).attr({align:align,rotation:options.rotation,zIndex:1}).css(options.style).add(dataLabelsGroup);if(inverted&&!options.y){dataLabel.attr({y:y+pInt(dataLabel.styles.lineHeight)*0.9-dataLabel.getBBox().height/2});}}
if(isBarLike&&seriesOptions.stacking&&dataLabel){var barY=point.barY,barW=point.barW,barH=point.barH;dataLabel.align(options,null,{x:inverted?chart.plotWidth-barY-barH:barX,y:inverted?chart.plotHeight-barX-barW:barY,width:inverted?barH:barW,height:inverted?barW:barH});}});}},drawGraph:function(){var series=this,options=series.options,chart=series.chart,graph=series.graph,graphPath=[],fillColor,area=series.area,group=series.group,color=options.lineColor||series.color,lineWidth=options.lineWidth,dashStyle=options.dashStyle,segmentPath,renderer=chart.renderer,translatedThreshold=series.yAxis.getThreshold(options.threshold||0),useArea=/^area/.test(series.type),singlePoints=[],areaPath=[],attribs;each(series.segments,function(segment){segmentPath=[];each(segment,function(point,i){if(series.getPointSpline){segmentPath.push.apply(segmentPath,series.getPointSpline(segment,point,i));}else{segmentPath.push(i?L:M);if(i&&options.step){var lastPoint=segment[i-1];segmentPath.push(point.plotX,lastPoint.plotY);}
segmentPath.push(point.plotX,point.plotY);}});if(segment.length>1){graphPath=graphPath.concat(segmentPath);}else{singlePoints.push(segment[0]);}
if(useArea){var areaSegmentPath=[],i,segLength=segmentPath.length;for(i=0;i<segLength;i++){areaSegmentPath.push(segmentPath[i]);}
if(segLength===3){areaSegmentPath.push(L,segmentPath[1],segmentPath[2]);}
if(options.stacking&&series.type!=='areaspline'){for(i=segment.length-1;i>=0;i--){areaSegmentPath.push(segment[i].plotX,segment[i].yBottom);}}else{areaSegmentPath.push(L,segment[segment.length-1].plotX,translatedThreshold,L,segment[0].plotX,translatedThreshold);}
areaPath=areaPath.concat(areaSegmentPath);}});series.graphPath=graphPath;series.singlePoints=singlePoints;if(useArea){fillColor=pick(options.fillColor,Color(series.color).setOpacity(options.fillOpacity||0.75).get());if(area){area.animate({d:areaPath});}else{series.area=series.chart.renderer.path(areaPath).attr({fill:fillColor}).add(group);}}
if(graph){stop(graph);graph.animate({d:graphPath});}else{if(lineWidth){attribs={'stroke':color,'stroke-width':lineWidth};if(dashStyle){attribs.dashstyle=dashStyle;}
series.graph=renderer.path(graphPath).attr(attribs).add(group).shadow(options.shadow);}}},render:function(){var series=this,chart=series.chart,group,setInvert,options=series.options,animation=options.animation,doAnimation=animation&&series.animate,duration=doAnimation?(animation&&animation.duration)||500:0,clipRect=series.clipRect,renderer=chart.renderer;if(!clipRect){clipRect=series.clipRect=!chart.hasRendered&&chart.clipRect?chart.clipRect:renderer.clipRect(0,0,chart.plotSizeX,chart.plotSizeY);if(!chart.clipRect){chart.clipRect=clipRect;}}
if(!series.group){group=series.group=renderer.g('series');if(chart.inverted){setInvert=function(){group.attr({width:chart.plotWidth,height:chart.plotHeight}).invert();};setInvert();addEvent(chart,'resize',setInvert);addEvent(series,'destroy',function(){removeEvent(chart,'resize',setInvert);});}
group.clip(series.clipRect).attr({visibility:series.visible?VISIBLE:HIDDEN,zIndex:options.zIndex}).translate(chart.plotLeft,chart.plotTop).add(chart.seriesGroup);}
series.drawDataLabels();if(doAnimation){series.animate(true);}
if(series.drawGraph){series.drawGraph();}
series.drawPoints();if(series.options.enableMouseTracking!==false){series.drawTracker();}
if(doAnimation){series.animate();}
setTimeout(function(){clipRect.isAnimating=false;group=series.group;if(group&&clipRect!==chart.clipRect&&clipRect.renderer){group.clip((series.clipRect=chart.clipRect));clipRect.destroy();}},duration);series.isDirty=false;},redraw:function(){var series=this,chart=series.chart,group=series.group;if(group){if(chart.inverted){group.attr({width:chart.plotWidth,height:chart.plotHeight});}
group.animate({translateX:chart.plotLeft,translateY:chart.plotTop});}
series.translate();series.setTooltipPoints(true);series.render();},setState:function(state){var series=this,options=series.options,graph=series.graph,stateOptions=options.states,lineWidth=options.lineWidth;state=state||NORMAL_STATE;if(series.state!==state){series.state=state;if(stateOptions[state]&&stateOptions[state].enabled===false){return;}
if(state){lineWidth=stateOptions[state].lineWidth||lineWidth+1;}
if(graph&&!graph.dashstyle){graph.attr({'stroke-width':lineWidth},state?0:500);}}},setVisible:function(vis,redraw){var series=this,chart=series.chart,legendItem=series.legendItem,seriesGroup=series.group,seriesTracker=series.tracker,dataLabelsGroup=series.dataLabelsGroup,showOrHide,i,data=series.data,point,ignoreHiddenSeries=chart.options.chart.ignoreHiddenSeries,oldVisibility=series.visible;series.visible=vis=vis===UNDEFINED?!oldVisibility:vis;showOrHide=vis?'show':'hide';if(seriesGroup){seriesGroup[showOrHide]();}
if(seriesTracker){seriesTracker[showOrHide]();}else{i=data.length;while(i--){point=data[i];if(point.tracker){point.tracker[showOrHide]();}}}
if(dataLabelsGroup){dataLabelsGroup[showOrHide]();}
if(legendItem){chart.legend.colorizeItem(series,vis);}
series.isDirty=true;if(series.options.stacking){each(chart.series,function(otherSeries){if(otherSeries.options.stacking&&otherSeries.visible){otherSeries.isDirty=true;}});}
if(ignoreHiddenSeries){chart.isDirtyBox=true;}
if(redraw!==false){chart.redraw();}
fireEvent(series,showOrHide);},show:function(){this.setVisible(true);},hide:function(){this.setVisible(false);},select:function(selected){var series=this;series.selected=selected=(selected===UNDEFINED)?!series.selected:selected;if(series.checkbox){series.checkbox.checked=selected;}
fireEvent(series,selected?'select':'unselect');},drawTracker:function(){var series=this,options=series.options,trackerPath=[].concat(series.graphPath),trackerPathLength=trackerPath.length,chart=series.chart,snap=chart.options.tooltip.snap,tracker=series.tracker,cursor=options.cursor,css=cursor&&{cursor:cursor},singlePoints=series.singlePoints,singlePoint,i;if(trackerPathLength){i=trackerPathLength+1;while(i--){if(trackerPath[i]===M){trackerPath.splice(i+1,0,trackerPath[i+1]-snap,trackerPath[i+2],L);}
if((i&&trackerPath[i]===M)||i===trackerPathLength){trackerPath.splice(i,0,L,trackerPath[i-2]+snap,trackerPath[i-1]);}}}
for(i=0;i<singlePoints.length;i++){singlePoint=singlePoints[i];trackerPath.push(M,singlePoint.plotX-snap,singlePoint.plotY,L,singlePoint.plotX+snap,singlePoint.plotY);}
if(tracker){tracker.attr({d:trackerPath});}else{series.tracker=chart.renderer.path(trackerPath).attr({isTracker:true,stroke:TRACKER_FILL,fill:NONE,'stroke-width':options.lineWidth+2*snap,visibility:series.visible?VISIBLE:HIDDEN,zIndex:options.zIndex||1}).on(hasTouch?'touchstart':'mouseover',function(){if(chart.hoverSeries!==series){series.onMouseOver();}}).on('mouseout',function(){if(!options.stickyTracking){series.onMouseOut();}}).css(css).add(chart.trackerGroup);}}};var LineSeries=extendClass(Series);seriesTypes.line=LineSeries;var AreaSeries=extendClass(Series,{type:'area'});seriesTypes.area=AreaSeries;var SplineSeries=extendClass(Series,{type:'spline',getPointSpline:function(segment,point,i){var smoothing=1.5,denom=smoothing+1,plotX=point.plotX,plotY=point.plotY,lastPoint=segment[i-1],nextPoint=segment[i+1],leftContX,leftContY,rightContX,rightContY,ret;if(i&&i<segment.length-1){var lastX=lastPoint.plotX,lastY=lastPoint.plotY,nextX=nextPoint.plotX,nextY=nextPoint.plotY,correction;leftContX=(smoothing*plotX+lastX)/denom;leftContY=(smoothing*plotY+lastY)/denom;rightContX=(smoothing*plotX+nextX)/denom;rightContY=(smoothing*plotY+nextY)/denom;correction=((rightContY-leftContY)*(rightContX-plotX))/(rightContX-leftContX)+plotY-rightContY;leftContY+=correction;rightContY+=correction;if(leftContY>lastY&&leftContY>plotY){leftContY=mathMax(lastY,plotY);rightContY=2*plotY-leftContY;}else if(leftContY<lastY&&leftContY<plotY){leftContY=mathMin(lastY,plotY);rightContY=2*plotY-leftContY;}
if(rightContY>nextY&&rightContY>plotY){rightContY=mathMax(nextY,plotY);leftContY=2*plotY-rightContY;}else if(rightContY<nextY&&rightContY<plotY){rightContY=mathMin(nextY,plotY);leftContY=2*plotY-rightContY;}
point.rightContX=rightContX;point.rightContY=rightContY;}
if(!i){ret=[M,plotX,plotY];}else{ret=['C',lastPoint.rightContX||lastPoint.plotX,lastPoint.rightContY||lastPoint.plotY,leftContX||plotX,leftContY||plotY,plotX,plotY];lastPoint.rightContX=lastPoint.rightContY=null;}
return ret;}});seriesTypes.spline=SplineSeries;var AreaSplineSeries=extendClass(SplineSeries,{type:'areaspline'});seriesTypes.areaspline=AreaSplineSeries;var ColumnSeries=extendClass(Series,{type:'column',pointAttrToOptions:{stroke:'borderColor','stroke-width':'borderWidth',fill:'color',r:'borderRadius'},init:function(){Series.prototype.init.apply(this,arguments);var series=this,chart=series.chart;chart.hasColumn=true;if(chart.hasRendered){each(chart.series,function(otherSeries){if(otherSeries.type===series.type){otherSeries.isDirty=true;}});}},translate:function(){var series=this,chart=series.chart,options=series.options,stacking=options.stacking,borderWidth=options.borderWidth,columnCount=0,reversedXAxis=series.xAxis.reversed,categories=series.xAxis.categories,stackGroups={},stackKey,columnIndex;Series.prototype.translate.apply(series);each(chart.series,function(otherSeries){if(otherSeries.type===series.type&&otherSeries.visible){if(otherSeries.options.stacking){stackKey=otherSeries.stackKey;if(stackGroups[stackKey]===UNDEFINED){stackGroups[stackKey]=columnCount++;}
columnIndex=stackGroups[stackKey];}else{columnIndex=columnCount++;}
otherSeries.columnIndex=columnIndex;}});var data=series.data,closestPoints=series.closestPoints,categoryWidth=mathAbs(data[1]?data[closestPoints].plotX-data[closestPoints-1].plotX:chart.plotSizeX/((categories&&categories.length)||1)),groupPadding=categoryWidth*options.groupPadding,groupWidth=categoryWidth-2*groupPadding,pointOffsetWidth=groupWidth/columnCount,optionPointWidth=options.pointWidth,pointPadding=defined(optionPointWidth)?(pointOffsetWidth-optionPointWidth)/2:pointOffsetWidth*options.pointPadding,pointWidth=mathMax(pick(optionPointWidth,pointOffsetWidth-2*pointPadding),1),colIndex=(reversedXAxis?columnCount-
series.columnIndex:series.columnIndex)||0,pointXOffset=pointPadding+(groupPadding+colIndex*pointOffsetWidth-(categoryWidth/2))*(reversedXAxis?-1:1),threshold=options.threshold||0,translatedThreshold=series.yAxis.getThreshold(threshold),minPointLength=pick(options.minPointLength,5);each(data,function(point){var plotY=point.plotY,yBottom=point.yBottom||translatedThreshold,barX=point.plotX+pointXOffset,barY=mathCeil(mathMin(plotY,yBottom)),barH=mathCeil(mathMax(plotY,yBottom)-barY),stack=series.yAxis.stacks[(point.y<0?'-':'')+series.stackKey],trackerY,shapeArgs;if(stacking&&series.visible&&stack&&stack[point.x]){stack[point.x].setOffset(pointXOffset,pointWidth);}
if(mathAbs(barH)<minPointLength){if(minPointLength){barH=minPointLength;barY=mathAbs(barY-translatedThreshold)>minPointLength?yBottom-minPointLength:translatedThreshold-(plotY<=translatedThreshold?minPointLength:0);}
trackerY=barY-3;}
extend(point,{barX:barX,barY:barY,barW:pointWidth,barH:barH});point.shapeType='rect';shapeArgs=extend(chart.renderer.Element.prototype.crisp.apply({},[borderWidth,barX,barY,pointWidth,barH]),{r:options.borderRadius});if(borderWidth%2){shapeArgs.y-=1;shapeArgs.height+=1;}
point.shapeArgs=shapeArgs;point.trackerArgs=defined(trackerY)&&merge(point.shapeArgs,{height:mathMax(6,barH+3),y:trackerY});});},getSymbol:function(){},drawGraph:function(){},drawPoints:function(){var series=this,options=series.options,renderer=series.chart.renderer,graphic,shapeArgs;each(series.data,function(point){var plotY=point.plotY;if(plotY!==UNDEFINED&&!isNaN(plotY)&&point.y!==null){graphic=point.graphic;shapeArgs=point.shapeArgs;if(graphic){stop(graphic);graphic.animate(shapeArgs);}else{point.graphic=renderer[point.shapeType](shapeArgs).attr(point.pointAttr[point.selected?SELECT_STATE:NORMAL_STATE]).add(series.group).shadow(options.shadow);}}});},drawTracker:function(){var series=this,chart=series.chart,renderer=chart.renderer,shapeArgs,tracker,trackerLabel=+new Date(),options=series.options,cursor=options.cursor,css=cursor&&{cursor:cursor},rel;each(series.data,function(point){tracker=point.tracker;shapeArgs=point.trackerArgs||point.shapeArgs;delete shapeArgs.strokeWidth;if(point.y!==null){if(tracker){tracker.attr(shapeArgs);}else{point.tracker=renderer[point.shapeType](shapeArgs).attr({isTracker:trackerLabel,fill:TRACKER_FILL,visibility:series.visible?VISIBLE:HIDDEN,zIndex:options.zIndex||1}).on(hasTouch?'touchstart':'mouseover',function(event){rel=event.relatedTarget||event.fromElement;if(chart.hoverSeries!==series&&attr(rel,'isTracker')!==trackerLabel){series.onMouseOver();}
point.onMouseOver();}).on('mouseout',function(event){if(!options.stickyTracking){rel=event.relatedTarget||event.toElement;if(attr(rel,'isTracker')!==trackerLabel){series.onMouseOut();}}}).css(css).add(point.group||chart.trackerGroup);}}});},animate:function(init){var series=this,data=series.data;if(!init){each(data,function(point){var graphic=point.graphic,shapeArgs=point.shapeArgs;if(graphic){graphic.attr({height:0,y:series.yAxis.translate(0,0,1)});graphic.animate({height:shapeArgs.height,y:shapeArgs.y},series.options.animation);}});series.animate=null;}},remove:function(){var series=this,chart=series.chart;if(chart.hasRendered){each(chart.series,function(otherSeries){if(otherSeries.type===series.type){otherSeries.isDirty=true;}});}
Series.prototype.remove.apply(series,arguments);}});seriesTypes.column=ColumnSeries;var BarSeries=extendClass(ColumnSeries,{type:'bar',init:function(chart){chart.inverted=this.inverted=true;ColumnSeries.prototype.init.apply(this,arguments);}});seriesTypes.bar=BarSeries;var ScatterSeries=extendClass(Series,{type:'scatter',translate:function(){var series=this;Series.prototype.translate.apply(series);each(series.data,function(point){point.shapeType='circle';point.shapeArgs={x:point.plotX,y:point.plotY,r:series.chart.options.tooltip.snap};});},drawTracker:function(){var series=this,cursor=series.options.cursor,css=cursor&&{cursor:cursor},graphic;each(series.data,function(point){graphic=point.graphic;if(graphic){graphic.attr({isTracker:true}).on('mouseover',function(){series.onMouseOver();point.onMouseOver();}).on('mouseout',function(){if(!series.options.stickyTracking){series.onMouseOut();}}).css(css);}});},cleanData:function(){}});seriesTypes.scatter=ScatterSeries;var PiePoint=extendClass(Point,{init:function(){Point.prototype.init.apply(this,arguments);var point=this,toggleSlice;extend(point,{visible:point.visible!==false,name:pick(point.name,'Slice')});toggleSlice=function(){point.slice();};addEvent(point,'select',toggleSlice);addEvent(point,'unselect',toggleSlice);return point;},setVisible:function(vis){var point=this,chart=point.series.chart,tracker=point.tracker,dataLabel=point.dataLabel,connector=point.connector,shadowGroup=point.shadowGroup,method;point.visible=vis=vis===UNDEFINED?!point.visible:vis;method=vis?'show':'hide';point.group[method]();if(tracker){tracker[method]();}
if(dataLabel){dataLabel[method]();}
if(connector){connector[method]();}
if(shadowGroup){shadowGroup[method]();}
if(point.legendItem){chart.legend.colorizeItem(point,vis);}},slice:function(sliced,redraw,animation){var point=this,series=point.series,chart=series.chart,slicedTranslation=point.slicedTranslation,translation;setAnimation(animation,chart);redraw=pick(redraw,true);sliced=point.sliced=defined(sliced)?sliced:!point.sliced;translation={translateX:(sliced?slicedTranslation[0]:chart.plotLeft),translateY:(sliced?slicedTranslation[1]:chart.plotTop)};point.group.animate(translation);if(point.shadowGroup){point.shadowGroup.animate(translation);}}});var PieSeries=extendClass(Series,{type:'pie',isCartesian:false,pointClass:PiePoint,pointAttrToOptions:{stroke:'borderColor','stroke-width':'borderWidth',fill:'color'},getColor:function(){this.initialColor=this.chart.counters.color;},animate:function(){var series=this,data=series.data;each(data,function(point){var graphic=point.graphic,args=point.shapeArgs,up=-mathPI/2;if(graphic){graphic.attr({r:0,start:up,end:up});graphic.animate({r:args.r,start:args.start,end:args.end},series.options.animation);}});series.animate=null;},translate:function(){var total=0,series=this,cumulative=-0.25,precision=1000,options=series.options,slicedOffset=options.slicedOffset,connectorOffset=slicedOffset+options.borderWidth,positions=options.center.concat([options.size,options.innerSize||0]),chart=series.chart,plotWidth=chart.plotWidth,plotHeight=chart.plotHeight,start,end,angle,data=series.data,circ=2*mathPI,fraction,smallestSize=mathMin(plotWidth,plotHeight),isPercent,radiusX,radiusY,labelDistance=options.dataLabels.distance;positions=map(positions,function(length,i){isPercent=/%$/.test(length);return isPercent?[plotWidth,plotHeight,smallestSize,smallestSize][i]*pInt(length)/100:length;});series.getX=function(y,left){angle=math.asin((y-positions[1])/(positions[2]/2+labelDistance));return positions[0]+
(left?-1:1)*(mathCos(angle)*(positions[2]/2+labelDistance));};series.center=positions;each(data,function(point){total+=point.y;});each(data,function(point){fraction=total?point.y/total:0;start=mathRound(cumulative*circ*precision)/precision;cumulative+=fraction;end=mathRound(cumulative*circ*precision)/precision;point.shapeType='arc';point.shapeArgs={x:positions[0],y:positions[1],r:positions[2]/2,innerR:positions[3]/2,start:start,end:end};angle=(end+start)/2;point.slicedTranslation=map([mathCos(angle)*slicedOffset+chart.plotLeft,mathSin(angle)*slicedOffset+chart.plotTop],mathRound);radiusX=mathCos(angle)*positions[2]/2;radiusY=mathSin(angle)*positions[2]/2;point.tooltipPos=[positions[0]+radiusX*0.7,positions[1]+radiusY*0.7];point.labelPos=[positions[0]+radiusX+mathCos(angle)*labelDistance,positions[1]+radiusY+mathSin(angle)*labelDistance,positions[0]+radiusX+mathCos(angle)*connectorOffset,positions[1]+radiusY+mathSin(angle)*connectorOffset,positions[0]+radiusX,positions[1]+radiusY,labelDistance<0?'center':angle<circ/4?'left':'right',angle];point.percentage=fraction*100;point.total=total;});this.setTooltipPoints();},render:function(){var series=this;this.drawPoints();if(series.options.enableMouseTracking!==false){series.drawTracker();}
this.drawDataLabels();if(series.options.animation&&series.animate){series.animate();}
series.isDirty=false;},drawPoints:function(){var series=this,chart=series.chart,renderer=chart.renderer,groupTranslation,graphic,group,shadow=series.options.shadow,shadowGroup,shapeArgs;each(series.data,function(point){graphic=point.graphic;shapeArgs=point.shapeArgs;group=point.group;shadowGroup=point.shadowGroup;if(shadow&&!shadowGroup){shadowGroup=point.shadowGroup=renderer.g('shadow').attr({zIndex:4}).add();}
if(!group){group=point.group=renderer.g('point').attr({zIndex:5}).add();}
groupTranslation=point.sliced?point.slicedTranslation:[chart.plotLeft,chart.plotTop];group.translate(groupTranslation[0],groupTranslation[1]);if(shadowGroup){shadowGroup.translate(groupTranslation[0],groupTranslation[1]);}
if(graphic){graphic.animate(shapeArgs);}else{point.graphic=renderer.arc(shapeArgs).attr(extend(point.pointAttr[NORMAL_STATE],{'stroke-linejoin':'round'})).add(point.group).shadow(shadow,shadowGroup);}
if(point.visible===false){point.setVisible(false);}});},drawDataLabels:function(){var series=this,data=series.data,point,chart=series.chart,options=series.options.dataLabels,connectorPadding=pick(options.connectorPadding,10),connectorWidth=pick(options.connectorWidth,1),connector,connectorPath,softConnector=pick(options.softConnector,true),distanceOption=options.distance,seriesCenter=series.center,radius=seriesCenter[2]/2,centerY=seriesCenter[1],outside=distanceOption>0,dataLabel,labelPos,labelHeight,halves=[[],[]],x,y,visibility,rankArr,sort,i=2,j;if(!options.enabled){return;}
Series.prototype.drawDataLabels.apply(series);each(data,function(point){if(point.dataLabel){halves[point.labelPos[7]<mathPI/2?0:1].push(point);}});halves[1].reverse();sort=function(a,b){return b.y-a.y;};labelHeight=halves[0][0]&&halves[0][0].dataLabel&&pInt(halves[0][0].dataLabel.styles.lineHeight);while(i--){var slots=[],slotsLength,usedSlots=[],points=halves[i],pos,length=points.length,slotIndex;for(pos=centerY-radius-distanceOption;pos<=centerY+radius+distanceOption;pos+=labelHeight){slots.push(pos);}
slotsLength=slots.length;if(length>slotsLength){rankArr=[].concat(points);rankArr.sort(sort);j=length;while(j--){rankArr[j].rank=j;}
j=length;while(j--){if(points[j].rank>=slotsLength){points.splice(j,1);}}
length=points.length;}
for(j=0;j<length;j++){point=points[j];labelPos=point.labelPos;var closest=9999,distance,slotI;for(slotI=0;slotI<slotsLength;slotI++){distance=mathAbs(slots[slotI]-labelPos[1]);if(distance<closest){closest=distance;slotIndex=slotI;}}
if(slotIndex<j&&slots[j]!==null){slotIndex=j;}else if(slotsLength<length-j+slotIndex&&slots[j]!==null){slotIndex=slotsLength-length+j;while(slots[slotIndex]===null){slotIndex++;}}else{while(slots[slotIndex]===null){slotIndex++;}}
usedSlots.push({i:slotIndex,y:slots[slotIndex]});slots[slotIndex]=null;}
usedSlots.sort(sort);for(j=0;j<length;j++){point=points[j];labelPos=point.labelPos;dataLabel=point.dataLabel;var slot=usedSlots.pop(),naturalY=labelPos[1];visibility=point.visible===false?HIDDEN:VISIBLE;slotIndex=slot.i;y=slot.y;if((naturalY>y&&slots[slotIndex+1]!==null)||(naturalY<y&&slots[slotIndex-1]!==null)){y=naturalY;}
x=series.getX(slotIndex===0||slotIndex===slots.length-1?naturalY:y,i);dataLabel.attr({visibility:visibility,align:labelPos[6]})[dataLabel.moved?'animate':'attr']({x:x+options.x+
({left:connectorPadding,right:-connectorPadding}[labelPos[6]]||0),y:y+options.y});dataLabel.moved=true;if(outside&&connectorWidth){connector=point.connector;connectorPath=softConnector?[M,x+(labelPos[6]==='left'?5:-5),y,'C',x,y,2*labelPos[2]-labelPos[4],2*labelPos[3]-labelPos[5],labelPos[2],labelPos[3],L,labelPos[4],labelPos[5]]:[M,x+(labelPos[6]==='left'?5:-5),y,L,labelPos[2],labelPos[3],L,labelPos[4],labelPos[5]];if(connector){connector.animate({d:connectorPath});connector.attr('visibility',visibility);}else{point.connector=connector=series.chart.renderer.path(connectorPath).attr({'stroke-width':connectorWidth,stroke:options.connectorColor||point.color||'#606060',visibility:visibility,zIndex:3}).translate(chart.plotLeft,chart.plotTop).add();}}}}},drawTracker:ColumnSeries.prototype.drawTracker,getSymbol:function(){}});seriesTypes.pie=PieSeries;win.Highcharts={Chart:Chart,dateFormat:dateFormat,pathAnim:pathAnim,getOptions:getOptions,hasRtlBug:hasRtlBug,numberFormat:numberFormat,Point:Point,Color:Color,Renderer:Renderer,seriesTypes:seriesTypes,setOptions:setOptions,Series:Series,addEvent:addEvent,createElement:createElement,discardElement:discardElement,css:css,each:each,extend:extend,map:map,merge:merge,pick:pick,extendClass:extendClass,product:'Highcharts',version:'2.1.7'};}());